import"../chunks/CWj6FrbW.js";import{i as pa,c as ga,d as kt,n as ma,a as ya,o as gi,b as ba,s as Oe}from"../chunks/fpJi1qvQ.js";import{a3 as lo,av as mi,aw as _a,h as mt,a5 as gn,ac as yi,q as bi,af as wa,b as co,i as ir,d as to,w as C,A as ka,r as xa,e as Da,g as Wo,j as Mn,m as rn,a6 as _i,a9 as Sa,k as wi,l as vr,p as Ta,ax as Wr,ad as ki,a1 as no,ay as Go,ar as Ea,az as Qo,aA as fo,aB as Oa,aC as Ca,aD as cr,aE as ho,aF as Ia,a7 as xi,aG as Di,aH as Pa,V as Be,aI as Aa,aa as ja,a8 as Ma,ag as Jo,aJ as Ka,n as Si,aK as Fa,aL as qa,aM as Ra,aN as Na,aO as Ba,aP as Ha,z as za,aQ as La,R as ut,K as Ua,c as on,f as yt,a as fe,W as lt,as as ze,y as he,aR as Ya,aS as Va,X as U,Y as B,T as ge,Z as X,at as Ze,s as Wa,aT as Ga,aU as Gr,x as ro}from"../chunks/CgBZ2jj9.js";import{i as rt,r as Qa,p as _e,b as Qt}from"../chunks/DmV43-3_.js";const Ja=[];function Qr(o,r=!1){return ar(o,new Map,"",Ja)}function ar(o,r,i,s,l=null){if(typeof o=="object"&&o!==null){var d=r.get(o);if(d!==void 0)return d;if(o instanceof Map)return new Map(o);if(o instanceof Set)return new Set(o);if(lo(o)){var h=Array(o.length);r.set(o,h),l!==null&&r.set(l,h);for(var g=0;g<o.length;g+=1){var x=o[g];g in o&&(h[g]=ar(x,r,i,s))}return h}if(mi(o)===_a){h={},r.set(o,h),l!==null&&r.set(l,h);for(var O in o)h[O]=ar(o[O],r,i,s);return h}if(o instanceof Date)return structuredClone(o);if(typeof o.toJSON=="function")return ar(o.toJSON(),r,i,s,o)}if(o instanceof EventTarget)return o;try{return structuredClone(o)}catch{return o}}function Xa(o,r){if(r){const i=document.body;o.autofocus=!0,bi(()=>{document.activeElement===i&&o.focus()})}}function Za(o){mt&&gn(o)!==null&&yi(o)}function Pt(o,r){return r}function $a(o,r,i,s){for(var l=[],d=r.length,h=0;h<d;h++)Oa(r[h].e,l,!0);var g=d>0&&l.length===0&&i!==null;if(g){var x=i.parentNode;yi(x),x.append(i),s.clear(),Gt(o,r[0].prev,r[d-1].next)}Ca(l,()=>{for(var O=0;O<d;O++){var P=r[O];g||(s.delete(P.k),Gt(o,P.prev,P.next)),cr(P.e,!g)}})}function At(o,r,i,s,l,d=null){var h=o,g={flags:r,items:new Map,first:null},x=(r&Di)!==0;if(x){var O=o;h=mt?ir(gn(O)):O.appendChild(wa())}mt&&to();var P=null,q=!1,E=ka(()=>{var H=i();return lo(H)?H:H==null?[]:ki(H)});co(()=>{var H=C(E),N=H.length;if(q&&N===0)return;q=N===0;let z=!1;if(mt){var V=xa(h)===Da;V!==(N===0)&&(h=Wo(),ir(h),Mn(!1),z=!0)}if(mt){for(var K=null,F,M=0;M<N;M++){if(rn.nodeType===_i&&rn.data===Sa){h=rn,z=!0,Mn(!1);break}var D=H[M],L=s(D,M);F=Ti(rn,g,K,null,D,L,M,l,r,i),g.items.set(L,F),K=F}N>0&&ir(Wo())}mt||es(H,g,h,l,r,s,i),d!==null&&(N===0?P?wi(P):P=vr(()=>d(h)):P!==null&&Ta(P,()=>{P=null})),z&&Mn(!0),C(E)}),mt&&(h=rn)}function es(o,r,i,s,l,d,h){var Re,Ve,Qe,dt;var g=(l&Pa)!==0,x=(l&(ho|fo))!==0,O=o.length,P=r.items,q=r.first,E=q,H,N=null,z,V=[],K=[],F,M,D,L;if(g)for(L=0;L<O;L+=1)F=o[L],M=d(F,L),D=P.get(M),D!==void 0&&((Re=D.a)==null||Re.measure(),(z??(z=new Set)).add(D));for(L=0;L<O;L+=1){if(F=o[L],M=d(F,L),D=P.get(M),D===void 0){var W=E?E.e.nodes_start:i;N=Ti(W,r,N,N===null?r.first:N.next,F,M,L,s,l,h),P.set(M,N),V=[],K=[],E=N.next;continue}if(x&&ts(D,F,L,l),(D.e.f&Wr)!==0&&(wi(D.e),g&&((Ve=D.a)==null||Ve.unfix(),(z??(z=new Set)).delete(D))),D!==E){if(H!==void 0&&H.has(D)){if(V.length<K.length){var Y=K[0],ue;N=Y.prev;var pe=V[0],ce=V[V.length-1];for(ue=0;ue<V.length;ue+=1)Xo(V[ue],Y,i);for(ue=0;ue<K.length;ue+=1)H.delete(K[ue]);Gt(r,pe.prev,ce.next),Gt(r,N,pe),Gt(r,ce,Y),E=Y,N=ce,L-=1,V=[],K=[]}else H.delete(D),Xo(D,E,i),Gt(r,D.prev,D.next),Gt(r,D,N===null?r.first:N.next),Gt(r,N,D),N=D;continue}for(V=[],K=[];E!==null&&E.k!==M;)(E.e.f&Wr)===0&&(H??(H=new Set)).add(E),K.push(E),E=E.next;if(E===null)continue;D=E}V.push(D),N=D,E=D.next}if(E!==null||H!==void 0){for(var Se=H===void 0?[]:ki(H);E!==null;)(E.e.f&Wr)===0&&Se.push(E),E=E.next;var ye=Se.length;if(ye>0){var He=(l&Di)!==0&&O===0?i:null;if(g){for(L=0;L<ye;L+=1)(Qe=Se[L].a)==null||Qe.measure();for(L=0;L<ye;L+=1)(dt=Se[L].a)==null||dt.fix()}$a(r,Se,He,P)}}g&&bi(()=>{var me;if(z!==void 0)for(D of z)(me=D.a)==null||me.apply()}),no.first=r.first&&r.first.e,no.last=N&&N.e}function ts(o,r,i,s){(s&ho)!==0&&Go(o.v,r),(s&fo)!==0?Go(o.i,i):o.i=i}function Ti(o,r,i,s,l,d,h,g,x,O){var P=(x&ho)!==0,q=(x&Ia)===0,E=P?q?Ea(l,!1,!1):Qo(l):l,H=(x&fo)===0?h:Qo(h),N={i:H,v:E,k:d,a:null,e:null,prev:i,next:s};try{return N.e=vr(()=>g(o,E,H,O),mt),N.e.prev=i&&i.e,N.e.next=s&&s.e,i===null?r.first=N:(i.next=N,i.e.next=N.e),s!==null&&(s.prev=N,s.e.prev=N.e),N}finally{}}function Xo(o,r,i){for(var s=o.next?o.next.e.nodes_start:i,l=r?r.e.nodes_start:i,d=o.e.nodes_start;d!==s;){var h=xi(d);l.before(d),d=h}}function Gt(o,r,i){r===null?o.first=i:(r.next=i,r.e.next=i&&i.e),i!==null&&(i.prev=r,i.e.prev=r&&r.e)}function ns(o,r,i=!1,s=!1,l=!1){var d=o,h="";Be(()=>{var g=no;if(h===(h=r()??"")){mt&&to();return}if(g.nodes_start!==null&&(Aa(g.nodes_start,g.nodes_end),g.nodes_start=g.nodes_end=null),h!==""){if(mt){rn.data;for(var x=to(),O=x;x!==null&&(x.nodeType!==_i||x.data!=="");)O=x,x=xi(x);if(x===null)throw ja(),Ma;Jo(rn,O),d=ir(x);return}var P=h+"";i?P=`<svg>${P}</svg>`:s&&(P=`<math>${P}</math>`);var q=Ka(P);if((i||s)&&(q=gn(q)),Jo(gn(q),q.lastChild),i||s)for(;gn(q);)d.before(gn(q));else d.before(q)}})}function rs(o,r){var i=void 0,s;co(()=>{i!==(i=r())&&(s&&(cr(s),s=null),i&&(s=vr(()=>{Si(()=>i(o))})))})}function Ei(o){var r,i,s="";if(typeof o=="string"||typeof o=="number")s+=o;else if(typeof o=="object")if(Array.isArray(o)){var l=o.length;for(r=0;r<l;r++)o[r]&&(i=Ei(o[r]))&&(s&&(s+=" "),s+=i)}else for(i in o)o[i]&&(s&&(s+=" "),s+=i);return s}function os(){for(var o,r,i=0,s="",l=arguments.length;i<l;i++)(o=arguments[i])&&(r=Ei(o))&&(s&&(s+=" "),s+=r);return s}function is(o){return typeof o=="object"?os(o):o??""}const Zo=[...` 	
\r\fÂ \v\uFEFF`];function as(o,r,i){var s=o==null?"":""+o;if(r&&(s=s?s+" "+r:r),i){for(var l in i)if(i[l])s=s?s+" "+l:l;else if(s.length)for(var d=l.length,h=0;(h=s.indexOf(l,h))>=0;){var g=h+d;(h===0||Zo.includes(s[h-1]))&&(g===s.length||Zo.includes(s[g]))?s=(h===0?"":s.substring(0,h))+s.substring(g+1):h=g}}return s===""?null:s}function $o(o,r=!1){var i=r?" !important;":";",s="";for(var l in o){var d=o[l];d!=null&&d!==""&&(s+=" "+l+": "+d+i)}return s}function Jr(o){return o[0]!=="-"||o[1]!=="-"?o.toLowerCase():o}function ss(o,r){if(r){var i="",s,l;if(Array.isArray(r)?(s=r[0],l=r[1]):s=r,o){o=String(o).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var d=!1,h=0,g=!1,x=[];s&&x.push(...Object.keys(s).map(Jr)),l&&x.push(...Object.keys(l).map(Jr));var O=0,P=-1;const z=o.length;for(var q=0;q<z;q++){var E=o[q];if(g?E==="/"&&o[q-1]==="*"&&(g=!1):d?d===E&&(d=!1):E==="/"&&o[q+1]==="*"?g=!0:E==='"'||E==="'"?d=E:E==="("?h++:E===")"&&h--,!g&&d===!1&&h===0){if(E===":"&&P===-1)P=q;else if(E===";"||q===z-1){if(P!==-1){var H=Jr(o.substring(O,P).trim());if(!x.includes(H)){E!==";"&&q++;var N=o.substring(O,q).trim();i+=" "+N+";"}}O=q+1,P=-1}}}}return s&&(i+=$o(s)),l&&(i+=$o(l,!0)),i=i.trim(),i===""?null:i}return o==null?null:String(o)}function Tt(o,r,i,s,l,d){var h=o.__className;if(mt||h!==i||h===void 0){var g=as(i,s,d);(!mt||g!==o.getAttribute("class"))&&(g==null?o.removeAttribute("class"):r?o.className=g:o.setAttribute("class",g)),o.__className=i}else if(d&&l!==d)for(var x in d){var O=!!d[x];(l==null||O!==!!l[x])&&o.classList.toggle(x,O)}return d}function Xr(o,r={},i,s){for(var l in i){var d=i[l];r[l]!==d&&(i[l]==null?o.style.removeProperty(l):o.style.setProperty(l,d,s))}}function mn(o,r,i,s){var l=o.__style;if(mt||l!==r){var d=ss(r,s);(!mt||d!==o.getAttribute("style"))&&(d==null?o.removeAttribute("style"):o.style.cssText=d),o.__style=r}else s&&(Array.isArray(s)?(Xr(o,i==null?void 0:i[0],s[0]),Xr(o,i==null?void 0:i[1],s[1],"important")):Xr(o,i,s));return s}function fr(o,r,i){if(o.multiple){if(r==null)return;if(!lo(r))return qa();for(var s of o.options)s.selected=r.includes(ei(s));return}for(s of o.options){var l=ei(s);if(Ra(l,r)){s.selected=!0;return}}(!i||r!==void 0)&&(o.selectedIndex=-1)}function Oi(o){var r=new MutationObserver(()=>{fr(o,o.__value)});r.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Fa(()=>{r.disconnect()})}function ei(o){return"__value"in o?o.__value:o.value}const In=Symbol("class"),Pn=Symbol("style"),Ci=Symbol("is custom element"),Ii=Symbol("is html");function us(o,r){var i=vo(o);i.value===(i.value=r??void 0)||o.value===r&&(r!==0||o.nodeName!=="PROGRESS")||(o.value=r??"")}function ls(o,r){r?o.hasAttribute("selected")||o.setAttribute("selected",""):o.removeAttribute("selected")}function Jt(o,r,i,s){var l=vo(o);mt&&(l[r]=o.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&o.nodeName==="LINK")||l[r]!==(l[r]=i)&&(r==="loading"&&(o[Ha]=i),i==null?o.removeAttribute(r):typeof i!="string"&&Pi(o).includes(r)?o[r]=i:o.setAttribute(r,i))}function cs(o,r,i,s,l=!1){var d=vo(o),h=d[Ci],g=!d[Ii];let x=mt&&h;x&&Mn(!1);var O=r||{},P=o.tagName==="OPTION";for(var q in r)q in i||(i[q]=null);i.class?i.class=is(i.class):i[In]&&(i.class=null),i[Pn]&&(i.style??(i.style=null));var E=Pi(o);for(const M in i){let D=i[M];if(P&&M==="value"&&D==null){o.value=o.__value="",O[M]=D;continue}if(M==="class"){var H=o.namespaceURI==="http://www.w3.org/1999/xhtml";Tt(o,H,D,s,r==null?void 0:r[In],i[In]),O[M]=D,O[In]=i[In];continue}if(M==="style"){mn(o,D,r==null?void 0:r[Pn],i[Pn]),O[M]=D,O[Pn]=i[Pn];continue}var N=O[M];if(!(D===N&&!(D===void 0&&o.hasAttribute(M)))){O[M]=D;var z=M[0]+M[1];if(z!=="$$")if(z==="on"){const L={},W="$$"+M;let Y=M.slice(2);var V=ya(Y);if(pa(Y)&&(Y=Y.slice(0,-7),L.capture=!0),!V&&N){if(D!=null)continue;o.removeEventListener(Y,O[W],L),O[W]=null}if(D!=null)if(V)o[`__${Y}`]=D,kt([Y]);else{let ue=function(pe){O[M].call(this,pe)};O[W]=ga(Y,o,ue,L)}else V&&(o[`__${Y}`]=void 0)}else if(M==="style")Jt(o,M,D);else if(M==="autofocus")Xa(o,!!D);else if(!h&&(M==="__value"||M==="value"&&D!=null))o.value=o.__value=D;else if(M==="selected"&&P)ls(o,D);else{var K=M;g||(K=ma(K));var F=K==="defaultValue"||K==="defaultChecked";if(D==null&&!h&&!F)if(d[M]=null,K==="value"||K==="checked"){let L=o;const W=r===void 0;if(K==="value"){let Y=L.defaultValue;L.removeAttribute(K),L.defaultValue=Y,L.value=L.__value=W?Y:null}else{let Y=L.defaultChecked;L.removeAttribute(K),L.defaultChecked=Y,L.checked=W?Y:!1}}else o.removeAttribute(M);else F||E.includes(K)&&(h||typeof D!="string")?o[K]=D:typeof D!="function"&&Jt(o,K,D)}}}return x&&Mn(!0),O}function ti(o,r,i=[],s,l=!1,d=za){const h=i.map(d);var g=void 0,x={},O=o.nodeName==="SELECT",P=!1;if(co(()=>{var E=r(...h.map(C)),H=cs(o,g,E,s,l);P&&O&&"value"in E&&fr(o,E.value,!1);for(let z of Object.getOwnPropertySymbols(x))E[z]||cr(x[z]);for(let z of Object.getOwnPropertySymbols(E)){var N=E[z];z.description===La&&(!g||N!==g[z])&&(x[z]&&cr(x[z]),x[z]=vr(()=>rs(o,()=>N))),H[z]=N}g=H}),O){var q=o;Si(()=>{fr(q,g.value),Oi(q)})}P=!0}function vo(o){return o.__attributes??(o.__attributes={[Ci]:o.nodeName.includes("-"),[Ii]:o.namespaceURI===Na})}var ni=new Map;function Pi(o){var r=ni.get(o.nodeName);if(r)return r;ni.set(o.nodeName,r=[]);for(var i,s=o,l=Element.prototype;l!==s;){i=Ba(s);for(var d in i)i[d].set&&r.push(d);s=mi(s)}return r}var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ai(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var sr={exports:{}},ds=sr.exports,ri;function hs(){return ri||(ri=1,function(o,r){(function(i,s){o.exports=s()})(ds,function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)};function l(e,t,n){for(var a,u=0,c=t.length;u<c;u++)!a&&u in t||((a=a||Array.prototype.slice.call(t,0,u))[u]=t[u]);return e.concat(a||Array.prototype.slice.call(t))}var d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:fs,h=Object.keys,g=Array.isArray;function x(e,t){return typeof t!="object"||h(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||d.Promise||(d.Promise=Promise);var O=Object.getPrototypeOf,P={}.hasOwnProperty;function q(e,t){return P.call(e,t)}function E(e,t){typeof t=="function"&&(t=t(O(e))),(typeof Reflect>"u"?h:Reflect.ownKeys)(t).forEach(function(n){N(e,n,t[n])})}var H=Object.defineProperty;function N(e,t,n,a){H(e,t,x(n&&q(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},a))}function z(e){return{from:function(t){return e.prototype=Object.create(t.prototype),N(e.prototype,"constructor",e),{extend:E.bind(null,e.prototype)}}}}var V=Object.getOwnPropertyDescriptor,K=[].slice;function F(e,t,n){return K.call(e,t,n)}function M(e,t){return t(e)}function D(e){if(!e)throw new Error("Assertion Failed")}function L(e){d.setImmediate?setImmediate(e):setTimeout(e,0)}function W(e,t){if(typeof t=="string"&&q(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],a=0,u=t.length;a<u;++a){var c=W(e,t[a]);n.push(c)}return n}var f=t.indexOf(".");if(f!==-1){var v=e[t.substr(0,f)];return v==null?void 0:W(v,t.substr(f+1))}}function Y(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){D(typeof n!="string"&&"length"in n);for(var a=0,u=t.length;a<u;++a)Y(e,t[a],n[a])}else{var c,f,v=t.indexOf(".");v!==-1?(c=t.substr(0,v),(f=t.substr(v+1))===""?n===void 0?g(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=n:Y(v=!(v=e[c])||!q(e,c)?e[c]={}:v,f,n)):n===void 0?g(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ue(e){var t,n={};for(t in e)q(e,t)&&(n[t]=e[t]);return n}var pe=[].concat;function ce(e){return pe.apply([],e)}var Ft="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ce([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return d[e]}),Se=new Set(Ft.map(function(e){return d[e]})),ye=null;function He(e){return ye=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var a=ye.get(n);if(a)return a;if(g(n)){a=[],ye.set(n,a);for(var u=0,c=n.length;u<c;++u)a.push(t(n[u]))}else if(Se.has(n.constructor))a=n;else{var f,v=O(n);for(f in a=v===Object.prototype?{}:Object.create(v),ye.set(n,a),n)q(n,f)&&(a[f]=t(n[f]))}return a}(e),ye=null,e}var Re={}.toString;function Ve(e){return Re.call(e).slice(8,-1)}var Qe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",dt=typeof Qe=="symbol"?function(e){var t;return e!=null&&(t=e[Qe])&&t.apply(e)}:function(){return null};function me(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Ae={};function Ne(e){var t,n,a,u;if(arguments.length===1){if(g(e))return e.slice();if(this===Ae&&typeof e=="string")return[e];if(u=dt(e)){for(n=[];!(a=u.next()).done;)n.push(a.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var ee=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Bt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],It=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Bt),se={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function le(e,t){this.name=e,this.message=t}function je(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,a,u){return u.indexOf(n)===a}).join(`
`)}function De(e,t,n,a){this.failures=t,this.failedKeys=a,this.successCount=n,this.message=je(e,t)}function Me(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=je(e,this.failures)}z(le).from(Error).extend({toString:function(){return this.name+": "+this.message}}),z(De).from(le),z(Me).from(le);var Ce=It.reduce(function(e,t){return e[t]=t+"Error",e},{}),Le=le,re=It.reduce(function(e,t){var n=t+"Error";function a(u,c){this.name=n,u?typeof u=="string"?(this.message="".concat(u).concat(c?`
 `+c:""),this.inner=c||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=se[t]||n,this.inner=null)}return z(a).from(Le),e[t]=a,e},{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var it=Bt.reduce(function(e,t){return e[t+"Error"]=re[t],e},{}),ot=It.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=re[t]),e},{});function ke(){}function ct(e){return e}function ht(e,t){return e==null||e===ct?t:function(n){return t(e(n))}}function nt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Et(e,t){return e===ke?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var a=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?nt(a,this.onsuccess):a),u&&(this.onerror=this.onerror?nt(u,this.onerror):u),c!==void 0?c:n}}function xt(e,t){return e===ke?t:function(){e.apply(this,arguments);var n=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?nt(n,this.onsuccess):n),a&&(this.onerror=this.onerror?nt(a,this.onerror):a)}}function ft(e,t){return e===ke?t:function(n){var a=e.apply(this,arguments);x(n,a);var u=this.onsuccess,c=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?nt(u,this.onsuccess):u),c&&(this.onerror=this.onerror?nt(c,this.onerror):c),a===void 0?n===void 0?void 0:n:x(a,n)}}function _t(e,t){return e===ke?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Ot(e,t){return e===ke?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var a=this,u=arguments.length,c=new Array(u);u--;)c[u]=arguments[u];return n.then(function(){return t.apply(a,c)})}return t.apply(this,arguments)}}ot.ModifyError=De,ot.DexieError=le,ot.BulkError=Me;var Ue=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Kt(e){Ue=e}var Nt={},bn=100,Ft=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,O(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,O(t),e]}(),Bt=Ft[0],It=Ft[1],Ft=Ft[2],It=It&&It.then,oe=Bt&&Bt.constructor,de=!!Ft,ve=function(e,t){We.push([e,t]),xe&&(queueMicrotask(Yi),xe=!1)},Ye=!0,xe=!0,Ie=[],qe=[],Ke=ct,$e={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ke,pgp:!1,env:{},finalize:ke},ae=$e,We=[],Xe=0,Ht=[];function ne(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=ae;if(typeof e!="function"){if(e!==Nt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ct(this,this._value))}this._state=null,this._value=null,++t.ref,function n(a,u){try{u(function(c){if(a._state===null){if(c===a)throw new TypeError("A promise cannot be resolved with itself.");var f=a._lib&&ln();c&&typeof c.then=="function"?n(a,function(v,m){c instanceof ne?c._then(v,m):c.then(v,m)}):(a._state=!0,a._value=c,sn(a)),f&&cn()}},Ct.bind(null,a))}catch(c){Ct(a,c)}}(this,e)}var an={get:function(){var e=ae,t=Nn;function n(a,u){var c=this,f=!e.global&&(e!==ae||t!==Nn),v=f&&!Lt(),m=new ne(function(b,k){un(c,new _n(bo(a,e,f,v),bo(u,e,f,v),b,k,e))});return this._consoleTask&&(m._consoleTask=this._consoleTask),m}return n.prototype=Nt,n},set:function(e){N(this,"then",e&&e.prototype===Nt?an:{get:function(){return e},set:an.set})}};function _n(e,t,n,a,u){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=a,this.psd=u}function Ct(e,t){var n,a;qe.push(t),e._state===null&&(n=e._lib&&ln(),t=Ke(t),e._state=!1,e._value=t,a=e,Ie.some(function(u){return u._value===a._value})||Ie.push(a),sn(e),n&&cn())}function sn(e){var t=e._listeners;e._listeners=[];for(var n=0,a=t.length;n<a;++n)un(e,t[n]);var u=e._PSD;--u.ref||u.finalize(),Xe===0&&(++Xe,ve(function(){--Xe==0&&yr()},[]))}function un(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Xe,ve(mr,[n,e,t])}else e._listeners.push(t)}function mr(e,t,n){try{var a,u=t._value;!t._state&&qe.length&&(qe=[]),a=Ue&&t._consoleTask?t._consoleTask.run(function(){return e(u)}):e(u),t._state||qe.indexOf(u)!==-1||function(c){for(var f=Ie.length;f;)if(Ie[--f]._value===c._value)return Ie.splice(f,1)}(t),n.resolve(a)}catch(c){n.reject(c)}finally{--Xe==0&&yr(),--n.psd.ref||n.psd.finalize()}}function Yi(){Xt($e,function(){ln()&&cn()})}function ln(){var e=Ye;return xe=Ye=!1,e}function cn(){var e,t,n;do for(;0<We.length;)for(e=We,We=[],n=e.length,t=0;t<n;++t){var a=e[t];a[0].apply(null,a[1])}while(0<We.length);xe=Ye=!0}function yr(){var e=Ie;Ie=[],e.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var t=Ht.slice(0),n=t.length;n;)t[--n]()}function Fn(e){return new ne(Nt,!1,e)}function Je(e,t){var n=ae;return function(){var a=ln(),u=ae;try{return Ut(n,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{Ut(u,!1),a&&cn()}}}E(ne.prototype,{then:an,_then:function(e,t){un(this,new _n(null,null,e,t,ae))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(a){return(a instanceof t?n:Fn)(a)}):this.then(null,function(a){return(a&&a.name===t?n:Fn)(a)})},finally:function(e){return this.then(function(t){return ne.resolve(e()).then(function(){return t})},function(t){return ne.resolve(e()).then(function(){return Fn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new ne(function(a,u){var c=setTimeout(function(){return u(new re.Timeout(t))},e);n.then(a,u).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&N(ne.prototype,Symbol.toStringTag,"Dexie.Promise"),$e.env=yo(),E(ne,{all:function(){var e=Ne.apply(null,arguments).map(Bn);return new ne(function(t,n){e.length===0&&t([]);var a=e.length;e.forEach(function(u,c){return ne.resolve(u).then(function(f){e[c]=f,--a||t(e)},n)})})},resolve:function(e){return e instanceof ne?e:e&&typeof e.then=="function"?new ne(function(t,n){e.then(t,n)}):new ne(Nt,!0,e)},reject:Fn,race:function(){var e=Ne.apply(null,arguments).map(Bn);return new ne(function(t,n){e.map(function(a){return ne.resolve(a).then(t,n)})})},PSD:{get:function(){return ae},set:function(e){return ae=e}},totalEchoes:{get:function(){return Nn}},newPSD:zt,usePSD:Xt,scheduler:{get:function(){return ve},set:function(e){ve=e}},rejectionMapper:{get:function(){return Ke},set:function(e){Ke=e}},follow:function(e,t){return new ne(function(n,a){return zt(function(u,c){var f=ae;f.unhandleds=[],f.onunhandled=c,f.finalize=nt(function(){var v,m=this;v=function(){m.unhandleds.length===0?u():c(m.unhandleds[0])},Ht.push(function b(){v(),Ht.splice(Ht.indexOf(b),1)}),++Xe,ve(function(){--Xe==0&&yr()},[])},f.finalize),e()},t,n,a)})}}),oe&&(oe.allSettled&&N(ne,"allSettled",function(){var e=Ne.apply(null,arguments).map(Bn);return new ne(function(t){e.length===0&&t([]);var n=e.length,a=new Array(n);e.forEach(function(u,c){return ne.resolve(u).then(function(f){return a[c]={status:"fulfilled",value:f}},function(f){return a[c]={status:"rejected",reason:f}}).then(function(){return--n||t(a)})})})}),oe.any&&typeof AggregateError<"u"&&N(ne,"any",function(){var e=Ne.apply(null,arguments).map(Bn);return new ne(function(t,n){e.length===0&&n(new AggregateError([]));var a=e.length,u=new Array(a);e.forEach(function(c,f){return ne.resolve(c).then(function(v){return t(v)},function(v){u[f]=v,--a||n(new AggregateError(u))})})})}),oe.withResolvers&&(ne.withResolvers=oe.withResolvers));var at={awaits:0,echoes:0,id:0},Vi=0,qn=[],Rn=0,Nn=0,Wi=0;function zt(e,t,n,a){var u=ae,c=Object.create(u);return c.parent=u,c.ref=0,c.global=!1,c.id=++Wi,$e.env,c.env=de?{Promise:ne,PromiseProp:{value:ne,configurable:!0,writable:!0},all:ne.all,race:ne.race,allSettled:ne.allSettled,any:ne.any,resolve:ne.resolve,reject:ne.reject}:{},t&&x(c,t),++u.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},a=Xt(c,e,n,a),c.ref===0&&c.finalize(),a}function fn(){return at.id||(at.id=++Vi),++at.awaits,at.echoes+=bn,at.id}function Lt(){return!!at.awaits&&(--at.awaits==0&&(at.id=0),at.echoes=at.awaits*bn,!0)}function Bn(e){return at.echoes&&e&&e.constructor===oe?(fn(),e.then(function(t){return Lt(),t},function(t){return Lt(),et(t)})):e}function Gi(){var e=qn[qn.length-1];qn.pop(),Ut(e,!1)}function Ut(e,t){var n,a=ae;(t?!at.echoes||Rn++&&e===ae:!Rn||--Rn&&e===ae)||queueMicrotask(t?(function(u){++Nn,at.echoes&&--at.echoes!=0||(at.echoes=at.awaits=at.id=0),qn.push(ae),Ut(u,!0)}).bind(null,e):Gi),e!==ae&&(ae=e,a===$e&&($e.env=yo()),de&&(n=$e.env.Promise,t=e.env,(a.global||e.global)&&(Object.defineProperty(d,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function yo(){var e=d.Promise;return de?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Xt(e,t,n,a,u){var c=ae;try{return Ut(e,!0),t(n,a,u)}finally{Ut(c,!1)}}function bo(e,t,n,a){return typeof e!="function"?e:function(){var u=ae;n&&fn(),Ut(t,!0);try{return e.apply(this,arguments)}finally{Ut(u,!1),a&&queueMicrotask(Lt)}}}function br(e){Promise===oe&&at.echoes===0?Rn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+It).indexOf("[native code]")===-1&&(fn=Lt=ke);var et=ne.reject,Zt="ï¿¿",qt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",_o="String expected.",dn=[],Hn="__dbnames",_r="readonly",wr="readwrite";function $t(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var wo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function zn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=He(t))[e],t}}function ko(){throw re.Type()}function Pe(e,t){try{var n=xo(e),a=xo(t);if(n!==a)return n==="Array"?1:a==="Array"?-1:n==="binary"?1:a==="binary"?-1:n==="string"?1:a==="string"?-1:n==="Date"?1:a!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(u,c){for(var f=u.length,v=c.length,m=f<v?f:v,b=0;b<m;++b)if(u[b]!==c[b])return u[b]<c[b]?-1:1;return f===v?0:f<v?-1:1}(Do(e),Do(t));case"Array":return function(u,c){for(var f=u.length,v=c.length,m=f<v?f:v,b=0;b<m;++b){var k=Pe(u[b],c[b]);if(k!==0)return k}return f===v?0:f<v?-1:1}(e,t)}}catch{}return NaN}function xo(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Ve(e),e==="ArrayBuffer"?"binary":e)}function Do(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var So=(Ge.prototype._trans=function(e,t,n){var a=this._tx||ae.trans,u=this.name,c=Ue&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function f(b,k,p){if(!p.schema[u])throw new re.NotFound("Table "+u+" not part of transaction");return t(p.idbtrans,p)}var v=ln();try{var m=a&&a.db._novip===this.db._novip?a===ae.trans?a._promise(e,f,n):zt(function(){return a._promise(e,f,n)},{trans:a,transless:ae.transless||ae}):function b(k,p,T,y){if(k.idbdb&&(k._state.openComplete||ae.letThrough||k._vip)){var w=k._createTransaction(p,T,k._dbSchema);try{w.create(),k._state.PR1398_maxLoop=3}catch(S){return S.name===Ce.InvalidState&&k.isOpen()&&0<--k._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),k.close({disableAutoOpen:!1}),k.open().then(function(){return b(k,p,T,y)})):et(S)}return w._promise(p,function(S,_){return zt(function(){return ae.trans=w,y(S,_,w)})}).then(function(S){if(p==="readwrite")try{w.idbtrans.commit()}catch{}return p==="readonly"?S:w._completion.then(function(){return S})})}if(k._state.openComplete)return et(new re.DatabaseClosed(k._state.dbOpenError));if(!k._state.isBeingOpened){if(!k._state.autoOpen)return et(new re.DatabaseClosed);k.open().catch(ke)}return k._state.dbReadyPromise.then(function(){return b(k,p,T,y)})}(this.db,e,[this.name],f);return c&&(m._consoleTask=c,m=m.catch(function(b){return console.trace(b),et(b)})),m}finally{v&&cn()}},Ge.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?et(new re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return n.core.get({trans:a,key:e}).then(function(u){return n.hook.reading.fire(u)})}).then(t)},Ge.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(g(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=h(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&t.every(function(b){return 0<=v.keyPath.indexOf(b)})){for(var m=0;m<t.length;++m)if(t.indexOf(v.keyPath[m])===-1)return!1;return!0}return!1}).sort(function(v,m){return v.keyPath.length-m.keyPath.length})[0];if(n&&this.db._maxKey!==Zt){var c=n.keyPath.slice(0,t.length);return this.where(c).equals(c.map(function(m){return e[m]}))}!n&&Ue&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var a=this.schema.idxByName;function u(v,m){return Pe(v,m)===0}var f=t.reduce(function(p,m){var b=p[0],k=p[1],p=a[m],T=e[m];return[b||p,b||!p?$t(k,p&&p.multi?function(y){return y=W(y,m),g(y)&&y.some(function(w){return u(T,w)})}:function(y){return u(T,W(y,m))}):k]},[null,null]),c=f[0],f=f[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(f):n?this.filter(f):this.where(t).equals("")},Ge.prototype.filter=function(e){return this.toCollection().and(e)},Ge.prototype.count=function(e){return this.toCollection().count(e)},Ge.prototype.offset=function(e){return this.toCollection().offset(e)},Ge.prototype.limit=function(e){return this.toCollection().limit(e)},Ge.prototype.each=function(e){return this.toCollection().each(e)},Ge.prototype.toArray=function(e){return this.toCollection().toArray(e)},Ge.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ge.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,g(e)?"[".concat(e.join("+"),"]"):e))},Ge.prototype.reverse=function(){return this.toCollection().reverse()},Ge.prototype.mapToClass=function(e){var t,n=this.db,a=this.name;function u(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof ko&&(function(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function k(){this.constructor=m}i(m,b),m.prototype=b===null?Object.create(b):(k.prototype=b.prototype,new k)}(u,t=e),Object.defineProperty(u.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),u.prototype.table=function(){return a},e=u);for(var c=new Set,f=e.prototype;f;f=O(f))Object.getOwnPropertyNames(f).forEach(function(m){return c.add(m)});function v(m){if(!m)return m;var b,k=Object.create(e.prototype);for(b in m)if(!c.has(b))try{k[b]=m[b]}catch{}return k}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),e},Ge.prototype.defineClass=function(){return this.mapToClass(function(e){x(this,e)})},Ge.prototype.add=function(e,t){var n=this,a=this.schema.primKey,u=a.auto,c=a.keyPath,f=e;return c&&u&&(f=zn(c)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"add",keys:t!=null?[t]:null,values:[f]})}).then(function(v){return v.numFailures?ne.reject(v.failures[0]):v.lastResult}).then(function(v){if(c)try{Y(e,c,v)}catch{}return v})},Ge.prototype.update=function(e,t){return typeof e!="object"||g(e)?this.where(":id").equals(e).modify(t):(e=W(e,this.schema.primKey.keyPath),e===void 0?et(new re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},Ge.prototype.put=function(e,t){var n=this,a=this.schema.primKey,u=a.auto,c=a.keyPath,f=e;return c&&u&&(f=zn(c)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"put",values:[f],keys:t!=null?[t]:null})}).then(function(v){return v.numFailures?ne.reject(v.failures[0]):v.lastResult}).then(function(v){if(c)try{Y(e,c,v)}catch{}return v})},Ge.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?ne.reject(n.failures[0]):void 0})},Ge.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:wo})}).then(function(t){return t.numFailures?ne.reject(t.failures[0]):void 0})},Ge.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(a){return a.map(function(u){return t.hook.reading.fire(u)})})})},Ge.prototype.bulkAdd=function(e,t,n){var a=this,u=Array.isArray(t)?t:void 0,c=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(f){var b=a.schema.primKey,v=b.auto,b=b.keyPath;if(b&&u)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,b=b&&v?e.map(zn(b)):e;return a.core.mutate({trans:f,type:"add",keys:u,values:b,wantResults:c}).then(function(w){var p=w.numFailures,T=w.results,y=w.lastResult,w=w.failures;if(p===0)return c?T:y;throw new Me("".concat(a.name,".bulkAdd(): ").concat(p," of ").concat(m," operations failed"),w)})})},Ge.prototype.bulkPut=function(e,t,n){var a=this,u=Array.isArray(t)?t:void 0,c=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(f){var b=a.schema.primKey,v=b.auto,b=b.keyPath;if(b&&u)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,b=b&&v?e.map(zn(b)):e;return a.core.mutate({trans:f,type:"put",keys:u,values:b,wantResults:c}).then(function(w){var p=w.numFailures,T=w.results,y=w.lastResult,w=w.failures;if(p===0)return c?T:y;throw new Me("".concat(a.name,".bulkPut(): ").concat(p," of ").concat(m," operations failed"),w)})})},Ge.prototype.bulkUpdate=function(e){var t=this,n=this.core,a=e.map(function(f){return f.key}),u=e.map(function(f){return f.changes}),c=[];return this._trans("readwrite",function(f){return n.getMany({trans:f,keys:a,cache:"clone"}).then(function(v){var m=[],b=[];e.forEach(function(p,T){var y=p.key,w=p.changes,S=v[T];if(S){for(var _=0,I=Object.keys(w);_<I.length;_++){var A=I[_],j=w[A];if(A===t.schema.primKey.keyPath){if(Pe(j,y)!==0)throw new re.Constraint("Cannot update primary key in bulkUpdate()")}else Y(S,A,j)}c.push(T),m.push(y),b.push(S)}});var k=m.length;return n.mutate({trans:f,type:"put",keys:m,values:b,updates:{keys:a,changeSpecs:u}}).then(function(p){var T=p.numFailures,y=p.failures;if(T===0)return k;for(var w=0,S=Object.keys(y);w<S.length;w++){var _,I=S[w],A=c[Number(I)];A!=null&&(_=y[I],delete y[I],y[A]=_)}throw new Me("".concat(t.name,".bulkUpdate(): ").concat(T," of ").concat(k," operations failed"),y)})})})},Ge.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"delete",keys:e})}).then(function(f){var u=f.numFailures,c=f.lastResult,f=f.failures;if(u===0)return c;throw new Me("".concat(t.name,".bulkDelete(): ").concat(u," of ").concat(n," operations failed"),f)})},Ge);function Ge(){}function wn(e){function t(f,v){if(v){for(var m=arguments.length,b=new Array(m-1);--m;)b[m-1]=arguments[m];return n[f].subscribe.apply(null,b),e}if(typeof f=="string")return n[f]}var n={};t.addEventType=c;for(var a=1,u=arguments.length;a<u;++a)c(arguments[a]);return t;function c(f,v,m){if(typeof f!="object"){var b;v=v||_t;var k={subscribers:[],fire:m=m||ke,subscribe:function(p){k.subscribers.indexOf(p)===-1&&(k.subscribers.push(p),k.fire=v(k.fire,p))},unsubscribe:function(p){k.subscribers=k.subscribers.filter(function(T){return T!==p}),k.fire=k.subscribers.reduce(v,m)}};return n[f]=t[f]=k}h(b=f).forEach(function(p){var T=b[p];if(g(T))c(p,b[p][0],b[p][1]);else{if(T!=="asap")throw new re.InvalidArgument("Invalid event config");var y=c(p,ct,function(){for(var w=arguments.length,S=new Array(w);w--;)S[w]=arguments[w];y.subscribers.forEach(function(_){L(function(){_.apply(null,S)})})})}})}}function kn(e,t){return z(t).from({prototype:e}),t}function hn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function kr(e,t){e.filter=$t(e.filter,t)}function xr(e,t,n){var a=e.replayFilter;e.replayFilter=a?function(){return $t(a(),t())}:t,e.justLimit=n&&!a}function Ln(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new re.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function To(e,t,n){var a=Ln(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:a,range:e.range}})}function Un(e,t,n,a){var u=e.replayFilter?$t(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},f=function(v,m,b){var k,p;u&&!u(m,b,function(T){return m.stop(T)},function(T){return m.fail(T)})||((p=""+(k=m.primaryKey))=="[object ArrayBuffer]"&&(p=""+new Uint8Array(k)),q(c,p)||(c[p]=!0,t(v,m,b)))};return Promise.all([e.or._iterate(f,n),Eo(To(e,a,n),e.algorithm,f,!e.keysOnly&&e.valueMapper)])}return Eo(To(e,a,n),$t(e.algorithm,u),t,!e.keysOnly&&e.valueMapper)}function Eo(e,t,n,a){var u=Je(a?function(c,f,v){return n(a(c),f,v)}:n);return e.then(function(c){if(c)return c.start(function(){var f=function(){return c.continue()};t&&!t(c,function(v){return f=v},function(v){c.stop(v),f=ke},function(v){c.fail(v),f=ke})||u(c.value,c,function(v){return f=v}),f()})})}var xn=(Oo.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(g(n))return l(l([],g(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var a=t.remove;if(g(a))return g(e)?e.filter(function(u){return!a.includes(u)}).sort():[];if(typeof a=="number")return Number(e)-a;if(typeof a=="bigint")try{return BigInt(e)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Oo);function Oo(e){this["@@propmod"]=e}var Qi=(Fe.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,et.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Fe.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,et.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Fe.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=$t(t.algorithm,e)},Fe.prototype._iterate=function(e,t){return Un(this._ctx,e,t,this._ctx.table.core)},Fe.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&x(n,e),t._ctx=n,t},Fe.prototype.raw=function(){return this._ctx.valueMapper=null,this},Fe.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Un(t,e,n,t.table.core)})},Fe.prototype.count=function(e){var t=this;return this._read(function(n){var a=t._ctx,u=a.table.core;if(hn(a,!0))return u.count({trans:n,query:{index:Ln(a,u.schema),range:a.range}}).then(function(f){return Math.min(f,a.limit)});var c=0;return Un(a,function(){return++c,!1},n,u).then(function(){return c})}).then(e)},Fe.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),a=n[0],u=n.length-1;function c(m,b){return b?c(m[n[b]],b-1):m[a]}var f=this._ctx.dir==="next"?1:-1;function v(m,b){return Pe(c(m,u),c(b,u))*f}return this.toArray(function(m){return m.sort(v)}).then(t)},Fe.prototype.toArray=function(e){var t=this;return this._read(function(n){var a=t._ctx;if(a.dir==="next"&&hn(a,!0)&&0<a.limit){var u=a.valueMapper,c=Ln(a,a.table.core.schema);return a.table.core.query({trans:n,limit:a.limit,values:!0,query:{index:c,range:a.range}}).then(function(v){return v=v.result,u?v.map(u):v})}var f=[];return Un(a,function(v){return f.push(v)},n,a.table.core).then(function(){return f})},e)},Fe.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,hn(t)?xr(t,function(){var n=e;return function(a,u){return n===0||(n===1?--n:u(function(){a.advance(n),n=0}),!1)}}):xr(t,function(){var n=e;return function(){return--n<0}})),this},Fe.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),xr(this._ctx,function(){var t=e;return function(n,a,u){return--t<=0&&a(u),0<=t}},!0),this},Fe.prototype.until=function(e,t){return kr(this._ctx,function(n,a,u){return!e(n.value)||(a(u),t)}),this},Fe.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},Fe.prototype.last=function(e){return this.reverse().first(e)},Fe.prototype.filter=function(e){var t;return kr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=$t(t.isMatch,e),this},Fe.prototype.and=function(e){return this.filter(e)},Fe.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Fe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Fe.prototype.desc=function(){return this.reverse()},Fe.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,a){e(a.key,a)})},Fe.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Fe.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,a){e(a.primaryKey,a)})},Fe.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(a,u){n.push(u.key)}).then(function(){return n}).then(e)},Fe.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&hn(t,!0)&&0<t.limit)return this._read(function(a){var u=Ln(t,t.table.core.schema);return t.table.core.query({trans:a,values:!1,limit:t.limit,query:{index:u,range:t.range}})}).then(function(a){return a.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(a,u){n.push(u.primaryKey)}).then(function(){return n}).then(e)},Fe.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Fe.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},Fe.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Fe.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return kr(this._ctx,function(u){var a=u.primaryKey.toString(),u=q(t,a);return t[a]=!0,!u}),this},Fe.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(a){var u,c,f;f=typeof e=="function"?e:(u=h(e),c=u.length,function(_){for(var I=!1,A=0;A<c;++A){var j=u[A],R=e[j],G=W(_,j);R instanceof xn?(Y(_,j,R.execute(G)),I=!0):G!==R&&(Y(_,j,R),I=!0)}return I});var v=n.table.core,p=v.schema.primaryKey,m=p.outbound,b=p.extractKey,k=200,p=t.db._options.modifyChunkSize;p&&(k=typeof p=="object"?p[v.name]||p["*"]||200:p);function T(_,j){var A=j.failures,j=j.numFailures;w+=_-j;for(var R=0,G=h(A);R<G.length;R++){var $=G[R];y.push(A[$])}}var y=[],w=0,S=[];return t.clone().primaryKeys().then(function(_){function I(j){var R=Math.min(k,_.length-j);return v.getMany({trans:a,keys:_.slice(j,j+R),cache:"immutable"}).then(function(G){for(var $=[],Q=[],J=m?[]:null,te=[],Z=0;Z<R;++Z){var ie=G[Z],we={value:He(ie),primKey:_[j+Z]};f.call(we,we.value,we)!==!1&&(we.value==null?te.push(_[j+Z]):m||Pe(b(ie),b(we.value))===0?(Q.push(we.value),m&&J.push(_[j+Z])):(te.push(_[j+Z]),$.push(we.value)))}return Promise.resolve(0<$.length&&v.mutate({trans:a,type:"add",values:$}).then(function(Te){for(var Ee in Te.failures)te.splice(parseInt(Ee),1);T($.length,Te)})).then(function(){return(0<Q.length||A&&typeof e=="object")&&v.mutate({trans:a,type:"put",keys:J,values:Q,criteria:A,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<j}).then(function(Te){return T(Q.length,Te)})}).then(function(){return(0<te.length||A&&e===Dr)&&v.mutate({trans:a,type:"delete",keys:te,criteria:A,isAdditionalChunk:0<j}).then(function(Te){return T(te.length,Te)})}).then(function(){return _.length>j+R&&I(j+k)})})}var A=hn(n)&&n.limit===1/0&&(typeof e!="function"||e===Dr)&&{index:n.index,range:n.range};return I(0).then(function(){if(0<y.length)throw new De("Error modifying one or more objects",y,w,S);return _.length})})})},Fe.prototype.delete=function(){var e=this._ctx,t=e.range;return hn(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var a=e.table.core.schema.primaryKey,u=t;return e.table.core.count({trans:n,query:{index:a,range:u}}).then(function(c){return e.table.core.mutate({trans:n,type:"deleteRange",range:u}).then(function(f){var v=f.failures;if(f.lastResult,f.results,f=f.numFailures,f)throw new De("Could not delete some values",Object.keys(v).map(function(m){return v[m]}),c-f);return c-f})})}):this.modify(Dr)},Fe);function Fe(){}var Dr=function(e,t){return t.value=null};function Ji(e,t){return e<t?-1:e===t?0:1}function Xi(e,t){return t<e?-1:e===t?0:1}function Dt(e,t,n){return e=e instanceof Io?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function vn(e){return new e.Collection(e,function(){return Co("")}).limit(0)}function Yn(e,t,n,a){var u,c,f,v,m,b,k,p=n.length;if(!n.every(function(w){return typeof w=="string"}))return Dt(e,_o);function T(w){u=w==="next"?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()},c=w==="next"?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()},f=w==="next"?Ji:Xi;var S=n.map(function(_){return{lower:c(_),upper:u(_)}}).sort(function(_,I){return f(_.lower,I.lower)});v=S.map(function(_){return _.upper}),m=S.map(function(_){return _.lower}),k=(b=w)==="next"?"":a}T("next"),e=new e.Collection(e,function(){return Yt(v[0],m[p-1]+a)}),e._ondirectionchange=function(w){T(w)};var y=0;return e._addAlgorithm(function(w,S,_){var I=w.key;if(typeof I!="string")return!1;var A=c(I);if(t(A,m,y))return!0;for(var j=null,R=y;R<p;++R){var G=function($,Q,J,te,Z,ie){for(var we=Math.min($.length,te.length),Te=-1,Ee=0;Ee<we;++Ee){var St=Q[Ee];if(St!==te[Ee])return Z($[Ee],J[Ee])<0?$.substr(0,Ee)+J[Ee]+J.substr(Ee+1):Z($[Ee],te[Ee])<0?$.substr(0,Ee)+te[Ee]+J.substr(Ee+1):0<=Te?$.substr(0,Te)+Q[Te]+J.substr(Te+1):null;Z($[Ee],St)<0&&(Te=Ee)}return we<te.length&&ie==="next"?$+J.substr($.length):we<$.length&&ie==="prev"?$.substr(0,J.length):Te<0?null:$.substr(0,Te)+te[Te]+J.substr(Te+1)}(I,A,v[R],m[R],f,b);G===null&&j===null?y=R+1:(j===null||0<f(j,G))&&(j=G)}return S(j!==null?function(){w.continue(j+k)}:_),!1}),e}function Yt(e,t,n,a){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:a}}function Co(e){return{type:1,lower:e,upper:e}}var Io=(Object.defineProperty(st.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),st.prototype.between=function(e,t,n,a){n=n!==!1,a=a===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||a)&&(!n||!a)?vn(this):new this.Collection(this,function(){return Yt(e,t,!n,!a)})}catch{return Dt(this,qt)}},st.prototype.equals=function(e){return e==null?Dt(this,qt):new this.Collection(this,function(){return Co(e)})},st.prototype.above=function(e){return e==null?Dt(this,qt):new this.Collection(this,function(){return Yt(e,void 0,!0)})},st.prototype.aboveOrEqual=function(e){return e==null?Dt(this,qt):new this.Collection(this,function(){return Yt(e,void 0,!1)})},st.prototype.below=function(e){return e==null?Dt(this,qt):new this.Collection(this,function(){return Yt(void 0,e,!1,!0)})},st.prototype.belowOrEqual=function(e){return e==null?Dt(this,qt):new this.Collection(this,function(){return Yt(void 0,e)})},st.prototype.startsWith=function(e){return typeof e!="string"?Dt(this,_o):this.between(e,e+Zt,!0,!0)},st.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Yn(this,function(t,n){return t.indexOf(n[0])===0},[e],Zt)},st.prototype.equalsIgnoreCase=function(e){return Yn(this,function(t,n){return t===n[0]},[e],"")},st.prototype.anyOfIgnoreCase=function(){var e=Ne.apply(Ae,arguments);return e.length===0?vn(this):Yn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},st.prototype.startsWithAnyOfIgnoreCase=function(){var e=Ne.apply(Ae,arguments);return e.length===0?vn(this):Yn(this,function(t,n){return n.some(function(a){return t.indexOf(a)===0})},e,Zt)},st.prototype.anyOf=function(){var e=this,t=Ne.apply(Ae,arguments),n=this._cmp;try{t.sort(n)}catch{return Dt(this,qt)}if(t.length===0)return vn(this);var a=new this.Collection(this,function(){return Yt(t[0],t[t.length-1])});a._ondirectionchange=function(c){n=c==="next"?e._ascending:e._descending,t.sort(n)};var u=0;return a._addAlgorithm(function(c,f,v){for(var m=c.key;0<n(m,t[u]);)if(++u===t.length)return f(v),!1;return n(m,t[u])===0||(f(function(){c.continue(t[u])}),!1)}),a},st.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},st.prototype.noneOf=function(){var e=Ne.apply(Ae,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Dt(this,qt)}var t=e.reduce(function(n,a){return n?n.concat([[n[n.length-1][1],a]]):[[-1/0,a]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},st.prototype.inAnyRange=function(I,t){var n=this,a=this._cmp,u=this._ascending,c=this._descending,f=this._min,v=this._max;if(I.length===0)return vn(this);if(!I.every(function(A){return A[0]!==void 0&&A[1]!==void 0&&u(A[0],A[1])<=0}))return Dt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var m=!t||t.includeLowers!==!1,b=t&&t.includeUppers===!0,k,p=u;function T(A,j){return p(A[0],j[0])}try{(k=I.reduce(function(A,j){for(var R=0,G=A.length;R<G;++R){var $=A[R];if(a(j[0],$[1])<0&&0<a(j[1],$[0])){$[0]=f($[0],j[0]),$[1]=v($[1],j[1]);break}}return R===G&&A.push(j),A},[])).sort(T)}catch{return Dt(this,qt)}var y=0,w=b?function(A){return 0<u(A,k[y][1])}:function(A){return 0<=u(A,k[y][1])},S=m?function(A){return 0<c(A,k[y][0])}:function(A){return 0<=c(A,k[y][0])},_=w,I=new this.Collection(this,function(){return Yt(k[0][0],k[k.length-1][1],!m,!b)});return I._ondirectionchange=function(A){p=A==="next"?(_=w,u):(_=S,c),k.sort(T)},I._addAlgorithm(function(A,j,R){for(var G,$=A.key;_($);)if(++y===k.length)return j(R),!1;return!w(G=$)&&!S(G)||(n._cmp($,k[y][1])===0||n._cmp($,k[y][0])===0||j(function(){p===u?A.continue(k[y][0]):A.continue(k[y][1])}),!1)}),I},st.prototype.startsWithAnyOf=function(){var e=Ne.apply(Ae,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?vn(this):this.inAnyRange(e.map(function(t){return[t,t+Zt]})):Dt(this,"startsWithAnyOf() only works with strings")},st);function st(){}function jt(e){return Je(function(t){return Dn(t),e(t.target.error),!1})}function Dn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Sn="storagemutated",Sr="x-storagemutated-1",Vt=wn(null,Sn),Zi=(Mt.prototype._lock=function(){return D(!ae.global),++this._reculock,this._reculock!==1||ae.global||(ae.lockOwnerFor=this),this},Mt.prototype._unlock=function(){if(D(!ae.global),--this._reculock==0)for(ae.global||(ae.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Xt(e[1],e[0])}catch{}}return this},Mt.prototype._locked=function(){return this._reculock&&ae.lockOwnerFor!==this},Mt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,a=this.db._state.dbOpenError;if(D(!this.idbtrans),!e&&!n)switch(a&&a.name){case"DatabaseClosedError":throw new re.DatabaseClosed(a);case"MissingAPIError":throw new re.MissingAPI(a.message,a);default:throw new re.OpenFailed(a)}if(!this.active)throw new re.TransactionInactive;return D(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Je(function(u){Dn(u),t._reject(e.error)}),e.onabort=Je(function(u){Dn(u),t.active&&t._reject(new re.Abort(e.error)),t.active=!1,t.on("abort").fire(u)}),e.oncomplete=Je(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Vt.storagemutated.fire(e.mutatedParts)}),this},Mt.prototype._promise=function(e,t,n){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return et(new re.ReadOnly("Transaction is readonly"));if(!this.active)return et(new re.TransactionInactive);if(this._locked())return new ne(function(c,f){a._blockedFuncs.push([function(){a._promise(e,t,n).then(c,f)},ae])});if(n)return zt(function(){var c=new ne(function(f,v){a._lock();var m=t(f,v,a);m&&m.then&&m.then(f,v)});return c.finally(function(){return a._unlock()}),c._lib=!0,c});var u=new ne(function(c,f){var v=t(c,f,a);v&&v.then&&v.then(c,f)});return u._lib=!0,u},Mt.prototype._root=function(){return this.parent?this.parent._root():this},Mt.prototype.waitFor=function(e){var t,n=this._root(),a=ne.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return a}):(n._waitingFor=a,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function c(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=c)}());var u=n._waitingFor;return new ne(function(c,f){a.then(function(v){return n._waitingQueue.push(Je(c.bind(null,v)))},function(v){return n._waitingQueue.push(Je(f.bind(null,v)))}).finally(function(){n._waitingFor===u&&(n._waitingFor=null)})})},Mt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))},Mt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(q(t,e))return t[e];var n=this.schema[e];if(!n)throw new re.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},Mt);function Mt(){}function Tr(e,t,n,a,u,c,f){return{name:e,keyPath:t,unique:n,multi:a,auto:u,compound:c,src:(n&&!f?"&":"")+(a?"*":"")+(u?"++":"")+Po(t)}}function Po(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Er(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(a=function(u){return[u.name,u]},n.reduce(function(u,c,f){return f=a(c,f),f&&(u[f[0]]=f[1]),u},{}))};var a}var Tn=function(e){try{return e.only([[]]),Tn=function(){return[[]]},[[]]}catch{return Tn=function(){return Zt},Zt}};function Or(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return W(n,t)}:function(n){return W(n,e)};var t}function Ao(e){return[].slice.call(e)}var $i=0;function En(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function ea(e,t,m){function a(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var y=_.lower,w=_.upper,S=_.lowerOpen,_=_.upperOpen;return y===void 0?w===void 0?null:t.upperBound(w,!!_):w===void 0?t.lowerBound(y,!!S):t.bound(y,w,!!S,!!_)}function u(T){var y,w=T.name;return{name:w,schema:T,mutate:function(S){var _=S.trans,I=S.type,A=S.keys,j=S.values,R=S.range;return new Promise(function(G,$){G=Je(G);var Q=_.objectStore(w),J=Q.keyPath==null,te=I==="put"||I==="add";if(!te&&I!=="delete"&&I!=="deleteRange")throw new Error("Invalid operation type: "+I);var Z,ie=(A||j||{length:1}).length;if(A&&j&&A.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(ie===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function we(wt){++St,Dn(wt)}var Te=[],Ee=[],St=0;if(I==="deleteRange"){if(R.type===4)return G({numFailures:St,failures:Ee,results:[],lastResult:void 0});R.type===3?Te.push(Z=Q.clear()):Te.push(Z=Q.delete(a(R)))}else{var J=te?J?[j,A]:[j,null]:[A,null],be=J[0],pt=J[1];if(te)for(var gt=0;gt<ie;++gt)Te.push(Z=pt&&pt[gt]!==void 0?Q[I](be[gt],pt[gt]):Q[I](be[gt])),Z.onerror=we;else for(gt=0;gt<ie;++gt)Te.push(Z=Q[I](be[gt])),Z.onerror=we}function or(wt){wt=wt.target.result,Te.forEach(function(nn,Vr){return nn.error!=null&&(Ee[Vr]=nn.error)}),G({numFailures:St,failures:Ee,results:I==="delete"?A:Te.map(function(nn){return nn.result}),lastResult:wt})}Z.onerror=function(wt){we(wt),or(wt)},Z.onsuccess=or})},getMany:function(S){var _=S.trans,I=S.keys;return new Promise(function(A,j){A=Je(A);for(var R,G=_.objectStore(w),$=I.length,Q=new Array($),J=0,te=0,Z=function(Te){Te=Te.target,Q[Te._pos]=Te.result,++te===J&&A(Q)},ie=jt(j),we=0;we<$;++we)I[we]!=null&&((R=G.get(I[we]))._pos=we,R.onsuccess=Z,R.onerror=ie,++J);J===0&&A(Q)})},get:function(S){var _=S.trans,I=S.key;return new Promise(function(A,j){A=Je(A);var R=_.objectStore(w).get(I);R.onsuccess=function(G){return A(G.target.result)},R.onerror=jt(j)})},query:(y=b,function(S){return new Promise(function(_,I){_=Je(_);var A,j,R,J=S.trans,G=S.values,$=S.limit,Z=S.query,Q=$===1/0?void 0:$,te=Z.index,Z=Z.range,J=J.objectStore(w),te=te.isPrimaryKey?J:J.index(te.name),Z=a(Z);if($===0)return _({result:[]});y?((Q=G?te.getAll(Z,Q):te.getAllKeys(Z,Q)).onsuccess=function(ie){return _({result:ie.target.result})},Q.onerror=jt(I)):(A=0,j=!G&&"openKeyCursor"in te?te.openKeyCursor(Z):te.openCursor(Z),R=[],j.onsuccess=function(ie){var we=j.result;return we?(R.push(G?we.value:we.primaryKey),++A===$?_({result:R}):void we.continue()):_({result:R})},j.onerror=jt(I))})}),openCursor:function(S){var _=S.trans,I=S.values,A=S.query,j=S.reverse,R=S.unique;return new Promise(function(G,$){G=Je(G);var te=A.index,Q=A.range,J=_.objectStore(w),J=te.isPrimaryKey?J:J.index(te.name),te=j?R?"prevunique":"prev":R?"nextunique":"next",Z=!I&&"openKeyCursor"in J?J.openKeyCursor(a(Q),te):J.openCursor(a(Q),te);Z.onerror=jt($),Z.onsuccess=Je(function(ie){var we,Te,Ee,St,be=Z.result;be?(be.___id=++$i,be.done=!1,we=be.continue.bind(be),Te=(Te=be.continuePrimaryKey)&&Te.bind(be),Ee=be.advance.bind(be),St=function(){throw new Error("Cursor not stopped")},be.trans=_,be.stop=be.continue=be.continuePrimaryKey=be.advance=function(){throw new Error("Cursor not started")},be.fail=Je($),be.next=function(){var pt=this,gt=1;return this.start(function(){return gt--?pt.continue():pt.stop()}).then(function(){return pt})},be.start=function(pt){function gt(){if(Z.result)try{pt()}catch(wt){be.fail(wt)}else be.done=!0,be.start=function(){throw new Error("Cursor behind last entry")},be.stop()}var or=new Promise(function(wt,nn){wt=Je(wt),Z.onerror=jt(nn),be.fail=nn,be.stop=function(Vr){be.stop=be.continue=be.continuePrimaryKey=be.advance=St,wt(Vr)}});return Z.onsuccess=Je(function(wt){Z.onsuccess=gt,gt()}),be.continue=we,be.continuePrimaryKey=Te,be.advance=Ee,gt(),or},G(be)):G(null)},$)})},count:function(S){var _=S.query,I=S.trans,A=_.index,j=_.range;return new Promise(function(R,G){var $=I.objectStore(w),Q=A.isPrimaryKey?$:$.index(A.name),$=a(j),Q=$?Q.count($):Q.count();Q.onsuccess=Je(function(J){return R(J.target.result)}),Q.onerror=jt(G)})}}}var c,f,v,k=(f=m,v=Ao((c=e).objectStoreNames),{schema:{name:c.name,tables:v.map(function(T){return f.objectStore(T)}).map(function(T){var y=T.keyPath,_=T.autoIncrement,w=g(y),S={},_={name:T.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y==null,compound:w,keyPath:y,autoIncrement:_,unique:!0,extractKey:Or(y)},indexes:Ao(T.indexNames).map(function(I){return T.index(I)}).map(function(R){var A=R.name,j=R.unique,G=R.multiEntry,R=R.keyPath,G={name:A,compound:g(R),keyPath:R,unique:j,multiEntry:G,extractKey:Or(R)};return S[En(R)]=G}),getIndexByKeyPath:function(I){return S[En(I)]}};return S[":id"]=_.primaryKey,y!=null&&(S[En(y)]=_.primaryKey),_})},hasGetAll:0<v.length&&"getAll"in f.objectStore(v[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),m=k.schema,b=k.hasGetAll,k=m.tables.map(u),p={};return k.forEach(function(T){return p[T.name]=T}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(T){if(!p[T])throw new Error("Table '".concat(T,"' not found"));return p[T]},MIN_KEY:-1/0,MAX_KEY:Tn(t),schema:m}}function ta(e,t,n,a){var u=n.IDBKeyRange;return n.indexedDB,{dbcore:(a=ea(t,u,a),e.dbcore.reduce(function(c,f){return f=f.create,s(s({},c),f(c))},a))}}function Vn(e,a){var n=a.db,a=ta(e._middlewares,n,e._deps,a);e.core=a.dbcore,e.tables.forEach(function(u){var c=u.name;e.core.schema.tables.some(function(f){return f.name===c})&&(u.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=u.core))})}function Wn(e,t,n,a){n.forEach(function(u){var c=a[u];t.forEach(function(f){var v=function m(b,k){return V(b,k)||(b=O(b))&&m(b,k)}(f,u);(!v||"value"in v&&v.value===void 0)&&(f===e.Transaction.prototype||f instanceof e.Transaction?N(f,u,{get:function(){return this.table(u)},set:function(m){H(this,u,{value:m,writable:!0,configurable:!0,enumerable:!0})}}):f[u]=new e.Table(u,c))})})}function Cr(e,t){t.forEach(function(n){for(var a in n)n[a]instanceof e.Table&&delete n[a]})}function na(e,t){return e._cfg.version-t._cfg.version}function ra(e,t,n,a){var u=e._dbSchema;n.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=Er("$meta",Mo("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,u);c.create(n),c._completion.catch(a);var f=c._reject.bind(c),v=ae.transless||ae;zt(function(){return ae.trans=c,ae.transless=v,t!==0?(Vn(e,n),b=t,((m=c).storeNames.includes("$meta")?m.table("$meta").get("version").then(function(k){return k??b}):ne.resolve(b)).then(function(k){return T=k,y=c,w=n,S=[],k=(p=e)._versions,_=p._dbSchema=Qn(0,p.idbdb,w),(k=k.filter(function(I){return I._cfg.version>=T})).length!==0?(k.forEach(function(I){S.push(function(){var A=_,j=I._cfg.dbschema;Jn(p,A,w),Jn(p,j,w),_=p._dbSchema=j;var R=Ir(A,j);R.add.forEach(function(te){Pr(w,te[0],te[1].primKey,te[1].indexes)}),R.change.forEach(function(te){if(te.recreate)throw new re.Upgrade("Not yet support for changing primary key");var Z=w.objectStore(te.name);te.add.forEach(function(ie){return Gn(Z,ie)}),te.change.forEach(function(ie){Z.deleteIndex(ie.name),Gn(Z,ie)}),te.del.forEach(function(ie){return Z.deleteIndex(ie)})});var G=I._cfg.contentUpgrade;if(G&&I._cfg.version>T){Vn(p,w),y._memoizedTables={};var $=ue(j);R.del.forEach(function(te){$[te]=A[te]}),Cr(p,[p.Transaction.prototype]),Wn(p,[p.Transaction.prototype],h($),$),y.schema=$;var Q,J=ee(G);return J&&fn(),R=ne.follow(function(){var te;(Q=G(y))&&J&&(te=Lt.bind(null,null),Q.then(te,te))}),Q&&typeof Q.then=="function"?ne.resolve(Q):R.then(function(){return Q})}}),S.push(function(A){var j,R,G=I._cfg.dbschema;j=G,R=A,[].slice.call(R.db.objectStoreNames).forEach(function($){return j[$]==null&&R.db.deleteObjectStore($)}),Cr(p,[p.Transaction.prototype]),Wn(p,[p.Transaction.prototype],p._storeNames,p._dbSchema),y.schema=p._dbSchema}),S.push(function(A){p.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(p.idbdb.version/10)===I._cfg.version?(p.idbdb.deleteObjectStore("$meta"),delete p._dbSchema.$meta,p._storeNames=p._storeNames.filter(function(j){return j!=="$meta"})):A.objectStore("$meta").put(I._cfg.version,"version"))})}),function I(){return S.length?ne.resolve(S.shift()(y.idbtrans)).then(I):ne.resolve()}().then(function(){jo(_,w)})):ne.resolve();var p,T,y,w,S,_}).catch(f)):(h(u).forEach(function(k){Pr(n,k,u[k].primKey,u[k].indexes)}),Vn(e,n),void ne.follow(function(){return e.on.populate.fire(c)}).catch(f));var m,b})}function oa(e,t){jo(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Qn(0,e.idbdb,t);Jn(e,e._dbSchema,t);for(var a=0,u=Ir(n,e._dbSchema).change;a<u.length;a++){var c=function(f){if(f.change.length||f.recreate)return console.warn("Unable to patch indexes of table ".concat(f.name," because it has changes on the type of index or primary key.")),{value:void 0};var v=t.objectStore(f.name);f.add.forEach(function(m){Ue&&console.debug("Dexie upgrade patch: Creating missing index ".concat(f.name,".").concat(m.src)),Gn(v,m)})}(u[a]);if(typeof c=="object")return c.value}}function Ir(e,t){var n,a={del:[],add:[],change:[]};for(n in e)t[n]||a.del.push(n);for(n in t){var u=e[n],c=t[n];if(u){var f={name:n,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||u.primKey.auto!==c.primKey.auto)f.recreate=!0,a.change.push(f);else{var v=u.idxByName,m=c.idxByName,b=void 0;for(b in v)m[b]||f.del.push(b);for(b in m){var k=v[b],p=m[b];k?k.src!==p.src&&f.change.push(p):f.add.push(p)}(0<f.del.length||0<f.add.length||0<f.change.length)&&a.change.push(f)}}else a.add.push([n,c])}return a}function Pr(e,t,n,a){var u=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return a.forEach(function(c){return Gn(u,c)}),u}function jo(e,t){h(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(Ue&&console.debug("Dexie: Creating missing table",n),Pr(t,n,e[n].primKey,e[n].indexes))})}function Gn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Qn(e,t,n){var a={};return F(t.objectStoreNames,0).forEach(function(u){for(var c=n.objectStore(u),f=Tr(Po(b=c.keyPath),b||"",!0,!1,!!c.autoIncrement,b&&typeof b!="string",!0),v=[],m=0;m<c.indexNames.length;++m){var k=c.index(c.indexNames[m]),b=k.keyPath,k=Tr(k.name,b,!!k.unique,!!k.multiEntry,!1,b&&typeof b!="string",!1);v.push(k)}a[u]=Er(u,f,v)}),a}function Jn(e,t,n){for(var a=n.db.objectStoreNames,u=0;u<a.length;++u){var c=a[u],f=n.objectStore(c);e._hasGetAll="getAll"in f;for(var v=0;v<f.indexNames.length;++v){var m=f.indexNames[v],b=f.index(m).keyPath,k=typeof b=="string"?b:"["+F(b).join("+")+"]";!t[c]||(b=t[c].idxByName[k])&&(b.name=m,delete t[c].idxByName[k],t[c].idxByName[m]=b)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Mo(e){return e.split(",").map(function(t,n){var a=(t=t.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return Tr(a,u||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),g(u),n===0)})}var ia=(Xn.prototype._parseStoresSpec=function(e,t){h(e).forEach(function(n){if(e[n]!==null){var a=Mo(e[n]),u=a.shift();if(u.unique=!0,u.multi)throw new re.Schema("Primary key cannot be multi-valued");a.forEach(function(c){if(c.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}),t[n]=Er(n,u,a)}})},Xn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?x(this._cfg.storesSource,n):n;var n=t._versions,a={},u={};return n.forEach(function(c){x(a,c._cfg.storesSource),u=c._cfg.dbschema={},c._parseStoresSpec(a,u)}),t._dbSchema=u,Cr(t,[t._allTables,t,t.Transaction.prototype]),Wn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],h(u),u),t._storeNames=h(u),this},Xn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Ot(this._cfg.contentUpgrade||ke,e),this},Xn);function Xn(){}function Ar(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Rt(Hn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function jr(e){return e&&typeof e.databases=="function"}function Mr(e){return zt(function(){return ae.letThrough=!0,e()})}function Kr(e){return!("from"in e)}var vt=function(e,t){if(!this){var n=new vt;return e&&"d"in e&&x(n,e),n}x(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function On(e,t,n){var a=Pe(t,n);if(!isNaN(a)){if(0<a)throw RangeError();if(Kr(e))return x(e,{from:t,to:n,d:1});var u=e.l,a=e.r;if(Pe(n,e.from)<0)return u?On(u,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Fo(e);if(0<Pe(t,e.to))return a?On(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Fo(e);Pe(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),0<Pe(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,u&&!e.l&&Cn(e,u),a&&n&&Cn(e,a)}}function Cn(e,t){Kr(t)||function n(a,m){var c=m.from,f=m.to,v=m.l,m=m.r;On(a,c,f),v&&n(a,v),m&&n(a,m)}(e,t)}function Ko(e,t){var n=Zn(t),a=n.next();if(a.done)return!1;for(var u=a.value,c=Zn(e),f=c.next(u.from),v=f.value;!a.done&&!f.done;){if(Pe(v.from,u.to)<=0&&0<=Pe(v.to,u.from))return!0;Pe(u.from,v.from)<0?u=(a=n.next(v.from)).value:v=(f=c.next(u.from)).value}return!1}function Zn(e){var t=Kr(e)?null:{s:0,n:e};return{next:function(n){for(var a=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,a)for(;t.n.l&&Pe(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!a||Pe(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Fo(e){var t,n,a=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),u=1<a?"r":a<-1?"l":"";u&&(t=u=="r"?"l":"r",n=s({},e),a=e[u],e.from=a.from,e.to=a.to,e[u]=a[u],n[u]=a[t],(e[t]=n).d=qo(n)),e.d=qo(e)}function qo(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function $n(e,t){return h(t).forEach(function(n){e[n]?Cn(e[n],t[n]):e[n]=function a(u){var c,f,v={};for(c in u)q(u,c)&&(f=u[c],v[c]=!f||typeof f!="object"||Se.has(f.constructor)?f:a(f));return v}(t[n])}),e}function Fr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Ko(t[n],e[n])})}E(vt.prototype,((It={add:function(e){return Cn(this,e),this},addKey:function(e){return On(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return On(t,n,n)}),this},hasKey:function(e){var t=Zn(this).next(e).value;return t&&Pe(t.from,e)<=0&&0<=Pe(t.to,e)}})[Qe]=function(){return Zn(this)},It));var en={},qr={},Rr=!1;function er(e){$n(qr,e),Rr||(Rr=!0,setTimeout(function(){Rr=!1,Nr(qr,!(qr={}))},0))}function Nr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var a=0,u=Object.values(en);a<u.length;a++)Ro(f=u[a],e,n,t);else for(var c in e){var f,v=/^idb\:\/\/(.*)\/(.*)\//.exec(c);v&&(c=v[1],v=v[2],(f=en["idb://".concat(c,"/").concat(v)])&&Ro(f,e,n,t))}n.forEach(function(m){return m()})}function Ro(e,t,n,a){for(var u=[],c=0,f=Object.entries(e.queries.query);c<f.length;c++){for(var v=f[c],m=v[0],b=[],k=0,p=v[1];k<p.length;k++){var T=p[k];Fr(t,T.obsSet)?T.subscribers.forEach(function(_){return n.add(_)}):a&&b.push(T)}a&&u.push([m,b])}if(a)for(var y=0,w=u;y<w.length;y++){var S=w[y],m=S[0],b=S[1];e.queries.query[m]=b}}function aa(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?et(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var a=t.openCanceller,u=Math.round(10*e.verno),c=!1;function f(){if(t.openCanceller!==a)throw new re.DatabaseClosed("db.open() was cancelled")}function v(){return new ne(function(T,y){if(f(),!n)throw new re.MissingAPI;var w=e.name,S=t.autoSchema||!u?n.open(w):n.open(w,u);if(!S)throw new re.MissingAPI;S.onerror=jt(y),S.onblocked=Je(e._fireOnBlocked),S.onupgradeneeded=Je(function(_){var I;k=S.transaction,t.autoSchema&&!e._options.allowEmptyDB?(S.onerror=Dn,k.abort(),S.result.close(),(I=n.deleteDatabase(w)).onsuccess=I.onerror=Je(function(){y(new re.NoSuchDatabase("Database ".concat(w," doesnt exist")))})):(k.onerror=jt(y),_=_.oldVersion>Math.pow(2,62)?0:_.oldVersion,p=_<1,e.idbdb=S.result,c&&oa(e,k),ra(e,_/10,k,y))},y),S.onsuccess=Je(function(){k=null;var _,I,A,j,R,G=e.idbdb=S.result,$=F(G.objectStoreNames);if(0<$.length)try{var Q=G.transaction((j=$).length===1?j[0]:j,"readonly");if(t.autoSchema)I=G,A=Q,(_=e).verno=I.version/10,A=_._dbSchema=Qn(0,I,A),_._storeNames=F(I.objectStoreNames,0),Wn(_,[_._allTables],h(A),A);else if(Jn(e,e._dbSchema,Q),((R=Ir(Qn(0,(R=e).idbdb,Q),R._dbSchema)).add.length||R.change.some(function(J){return J.add.length||J.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),u=G.version+1,c=!0,T(v());Vn(e,Q)}catch{}dn.push(e),G.onversionchange=Je(function(J){t.vcFired=!0,e.on("versionchange").fire(J)}),G.onclose=Je(function(J){e.on("close").fire(J)}),p&&(R=e._deps,Q=w,G=R.indexedDB,R=R.IDBKeyRange,jr(G)||Q===Hn||Ar(G,R).put({name:Q}).catch(ke)),T()},y)}).catch(function(T){switch(T==null?void 0:T.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),v();break;case"VersionError":if(0<u)return u=0,v()}return ne.reject(T)})}var m,b=t.dbReadyResolve,k=null,p=!1;return ne.race([a,(typeof navigator>"u"?ne.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(T){function y(){return indexedDB.databases().finally(T)}m=setInterval(y,100),y()}).finally(function(){return clearInterval(m)}):Promise.resolve()).then(v)]).then(function(){return f(),t.onReadyBeingFired=[],ne.resolve(Mr(function(){return e.on.ready.fire(e.vip)})).then(function T(){if(0<t.onReadyBeingFired.length){var y=t.onReadyBeingFired.reduce(Ot,ke);return t.onReadyBeingFired=[],ne.resolve(Mr(function(){return y(e.vip)})).then(T)}})}).finally(function(){t.openCanceller===a&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(T){t.dbOpenError=T;try{k&&k.abort()}catch{}return a===t.openCanceller&&e._close(),et(T)}).finally(function(){t.openComplete=!0,b()}).then(function(){var T;return p&&(T={},e.tables.forEach(function(y){y.schema.indexes.forEach(function(w){w.name&&(T["idb://".concat(e.name,"/").concat(y.name,"/").concat(w.name)]=new vt(-1/0,[[[]]]))}),T["idb://".concat(e.name,"/").concat(y.name,"/")]=T["idb://".concat(e.name,"/").concat(y.name,"/:dels")]=new vt(-1/0,[[[]]])}),Vt(Sn).fire(T),Nr(T,!0)),e})}function Br(e){function t(c){return e.next(c)}var n=u(t),a=u(function(c){return e.throw(c)});function u(c){return function(m){var v=c(m),m=v.value;return v.done?m:m&&typeof m.then=="function"?m.then(n,a):g(m)?Promise.all(m).then(n,a):n(m)}}return u(t)()}function tr(e,t,n){for(var a=g(e)?e.slice():[e],u=0;u<n;++u)a.push(t);return a}var sa={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),a=n.schema,u={},c=[];function f(p,T,y){var w=En(p),S=u[w]=u[w]||[],_=p==null?0:typeof p=="string"?1:p.length,I=0<T,I=s(s({},y),{name:I?"".concat(w,"(virtual-from:").concat(y.name,")"):y.name,lowLevelIndex:y,isVirtual:I,keyTail:T,keyLength:_,extractKey:Or(p),unique:!I&&y.unique});return S.push(I),I.isPrimaryKey||c.push(I),1<_&&f(_===2?p[0]:p.slice(0,_-1),T+1,y),S.sort(function(A,j){return A.keyTail-j.keyTail}),I}t=f(a.primaryKey.keyPath,0,a.primaryKey),u[":id"]=[t];for(var v=0,m=a.indexes;v<m.length;v++){var b=m[v];f(b.keyPath,0,b)}function k(p){var T,y=p.query.index;return y.isVirtual?s(s({},p),{query:{index:y.lowLevelIndex,range:(T=p.query.range,y=y.keyTail,{type:T.type===1?2:T.type,lower:tr(T.lower,T.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:tr(T.upper,T.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}):p}return s(s({},n),{schema:s(s({},a),{primaryKey:t,indexes:c,getIndexByKeyPath:function(p){return(p=u[En(p)])&&p[0]}}),count:function(p){return n.count(k(p))},query:function(p){return n.query(k(p))},openCursor:function(p){var T=p.query.index,y=T.keyTail,w=T.isVirtual,S=T.keyLength;return w?n.openCursor(k(p)).then(function(I){return I&&_(I)}):n.openCursor(p);function _(I){return Object.create(I,{continue:{value:function(A){A!=null?I.continue(tr(A,p.reverse?e.MAX_KEY:e.MIN_KEY,y)):p.unique?I.continue(I.key.slice(0,S).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,y)):I.continue()}},continuePrimaryKey:{value:function(A,j){I.continuePrimaryKey(tr(A,e.MAX_KEY,y),j)}},primaryKey:{get:function(){return I.primaryKey}},key:{get:function(){var A=I.key;return S===1?A[0]:A.slice(0,S)}},value:{get:function(){return I.value}}})}}})}})}};function Hr(e,t,n,a){return n=n||{},a=a||"",h(e).forEach(function(u){var c,f,v;q(t,u)?(c=e[u],f=t[u],typeof c=="object"&&typeof f=="object"&&c&&f?(v=Ve(c))!==Ve(f)?n[a+u]=t[u]:v==="Object"?Hr(c,f,n,a+u+"."):c!==f&&(n[a+u]=t[u]):c!==f&&(n[a+u]=t[u])):n[a+u]=void 0}),h(t).forEach(function(u){q(e,u)||(n[a+u]=t[u])}),n}function zr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ua={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),a=n.schema.primaryKey;return s(s({},n),{mutate:function(u){var c=ae.trans,f=c.table(t).hook,v=f.deleting,m=f.creating,b=f.updating;switch(u.type){case"add":if(m.fire===ke)break;return c._promise("readwrite",function(){return k(u)},!0);case"put":if(m.fire===ke&&b.fire===ke)break;return c._promise("readwrite",function(){return k(u)},!0);case"delete":if(v.fire===ke)break;return c._promise("readwrite",function(){return k(u)},!0);case"deleteRange":if(v.fire===ke)break;return c._promise("readwrite",function(){return function p(T,y,w){return n.query({trans:T,values:!1,query:{index:a,range:y},limit:w}).then(function(S){var _=S.result;return k({type:"delete",keys:_,trans:T}).then(function(I){return 0<I.numFailures?Promise.reject(I.failures[0]):_.length<w?{failures:[],numFailures:0,lastResult:void 0}:p(T,s(s({},y),{lower:_[_.length-1],lowerOpen:!0}),w)})})}(u.trans,u.range,1e4)},!0)}return n.mutate(u);function k(p){var T,y,w,S=ae.trans,_=p.keys||zr(a,p);if(!_)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?s(s({},p),{keys:_}):s({},p)).type!=="delete"&&(p.values=l([],p.values)),p.keys&&(p.keys=l([],p.keys)),T=n,w=_,((y=p).type==="add"?Promise.resolve([]):T.getMany({trans:y.trans,keys:w,cache:"immutable"})).then(function(I){var A=_.map(function(j,R){var G,$,Q,J=I[R],te={onerror:null,onsuccess:null};return p.type==="delete"?v.fire.call(te,j,J,S):p.type==="add"||J===void 0?(G=m.fire.call(te,j,p.values[R],S),j==null&&G!=null&&(p.keys[R]=j=G,a.outbound||Y(p.values[R],a.keyPath,j))):(G=Hr(J,p.values[R]),($=b.fire.call(te,G,j,J,S))&&(Q=p.values[R],Object.keys($).forEach(function(Z){q(Q,Z)?Q[Z]=$[Z]:Y(Q,Z,$[Z])}))),te});return n.mutate(p).then(function(j){for(var R=j.failures,G=j.results,$=j.numFailures,j=j.lastResult,Q=0;Q<_.length;++Q){var J=(G||_)[Q],te=A[Q];J==null?te.onerror&&te.onerror(R[Q]):te.onsuccess&&te.onsuccess(p.type==="put"&&I[Q]?p.values[Q]:J)}return{failures:R,results:G,numFailures:$,lastResult:j}}).catch(function(j){return A.forEach(function(R){return R.onerror&&R.onerror(j)}),Promise.reject(j)})})}}})}})}};function No(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var a=[],u=0,c=0;u<t.keys.length&&c<e.length;++u)Pe(t.keys[u],e[c])===0&&(a.push(n?He(t.values[u]):t.values[u]),++c);return a.length===e.length?a:null}catch{return null}}var la={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return s(s({},n),{getMany:function(a){if(!a.cache)return n.getMany(a);var u=No(a.keys,a.trans._cache,a.cache==="clone");return u?ne.resolve(u):n.getMany(a).then(function(c){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?He(c):c},c})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),n.mutate(a)}})}}}};function Bo(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Ho(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ca={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new vt(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(a,u,c){if(ae.subscr&&u!=="readonly")throw new re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ae.querier));return e.transaction(a,u,c)},table:function(a){var u=e.table(a),c=u.schema,f=c.primaryKey,p=c.indexes,v=f.extractKey,m=f.outbound,b=f.autoIncrement&&p.filter(function(y){return y.compound&&y.keyPath.includes(f.keyPath)}),k=s(s({},u),{mutate:function(y){function w(Z){return Z="idb://".concat(t,"/").concat(a,"/").concat(Z),j[Z]||(j[Z]=new vt)}var S,_,I,A=y.trans,j=y.mutatedParts||(y.mutatedParts={}),R=w(""),G=w(":dels"),$=y.type,te=y.type==="deleteRange"?[y.range]:y.type==="delete"?[y.keys]:y.values.length<50?[zr(f,y).filter(function(Z){return Z}),y.values]:[],Q=te[0],J=te[1],te=y.trans._cache;return g(Q)?(R.addKeys(Q),(te=$==="delete"||Q.length===J.length?No(Q,te):null)||G.addKeys(Q),(te||J)&&(S=w,_=te,I=J,c.indexes.forEach(function(Z){var ie=S(Z.name||"");function we(Ee){return Ee!=null?Z.extractKey(Ee):null}function Te(Ee){return Z.multiEntry&&g(Ee)?Ee.forEach(function(St){return ie.addKey(St)}):ie.addKey(Ee)}(_||I).forEach(function(Ee,pt){var be=_&&we(_[pt]),pt=I&&we(I[pt]);Pe(be,pt)!==0&&(be!=null&&Te(be),pt!=null&&Te(pt))})}))):Q?(J={from:(J=Q.lower)!==null&&J!==void 0?J:e.MIN_KEY,to:(J=Q.upper)!==null&&J!==void 0?J:e.MAX_KEY},G.add(J),R.add(J)):(R.add(n),G.add(n),c.indexes.forEach(function(Z){return w(Z.name).add(n)})),u.mutate(y).then(function(Z){return!Q||y.type!=="add"&&y.type!=="put"||(R.addKeys(Z.results),b&&b.forEach(function(ie){for(var we=y.values.map(function(be){return ie.extractKey(be)}),Te=ie.keyPath.findIndex(function(be){return be===f.keyPath}),Ee=0,St=Z.results.length;Ee<St;++Ee)we[Ee][Te]=Z.results[Ee];w(ie.name).addKeys(we)})),A.mutatedParts=$n(A.mutatedParts||{},j),Z})}}),p=function(w){var S=w.query,w=S.index,S=S.range;return[w,new vt((w=S.lower)!==null&&w!==void 0?w:e.MIN_KEY,(S=S.upper)!==null&&S!==void 0?S:e.MAX_KEY)]},T={get:function(y){return[f,new vt(y.key)]},getMany:function(y){return[f,new vt().addKeys(y.keys)]},count:p,query:p,openCursor:p};return h(T).forEach(function(y){k[y]=function(w){var S=ae.subscr,_=!!S,I=Bo(ae,u)&&Ho(y,w)?w.obsSet={}:S;if(_){var A=function(J){return J="idb://".concat(t,"/").concat(a,"/").concat(J),I[J]||(I[J]=new vt)},j=A(""),R=A(":dels"),S=T[y](w),_=S[0],S=S[1];if((y==="query"&&_.isPrimaryKey&&!w.values?R:A(_.name||"")).add(S),!_.isPrimaryKey){if(y!=="count"){var G=y==="query"&&m&&w.values&&u.query(s(s({},w),{values:!1}));return u[y].apply(this,arguments).then(function(J){if(y==="query"){if(m&&w.values)return G.then(function(we){return we=we.result,j.addKeys(we),J});var te=w.values?J.result.map(v):J.result;(w.values?j:R).addKeys(te)}else if(y==="openCursor"){var Z=J,ie=w.values;return Z&&Object.create(Z,{key:{get:function(){return R.addKey(Z.primaryKey),Z.key}},primaryKey:{get:function(){var we=Z.primaryKey;return R.addKey(we),we}},value:{get:function(){return ie&&j.addKey(Z.primaryKey),Z.value}}})}return J})}R.add(n)}}return u[y].apply(this,arguments)}}),k}})}};function zo(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var a=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===a?null:(t=s({},t),g(t.keys)&&(t.keys=t.keys.filter(function(u,c){return!(c in n.failures)})),"values"in t&&g(t.values)&&(t.values=t.values.filter(function(u,c){return!(c in n.failures)})),t)}function Lr(e,t){return n=e,((a=t).lower===void 0||(a.lowerOpen?0<Pe(n,a.lower):0<=Pe(n,a.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?Pe(e,t.upper)<0:Pe(e,t.upper)<=0));var n,a}function Lo(e,t,T,a,u,c){if(!T||T.length===0)return e;var f=t.query.index,v=f.multiEntry,m=t.query.range,b=a.schema.primaryKey.extractKey,k=f.extractKey,p=(f.lowLevelIndex||f).extractKey,T=T.reduce(function(y,w){var S=y,_=[];if(w.type==="add"||w.type==="put")for(var I=new vt,A=w.values.length-1;0<=A;--A){var j,R=w.values[A],G=b(R);I.hasKey(G)||(j=k(R),(v&&g(j)?j.some(function(Z){return Lr(Z,m)}):Lr(j,m))&&(I.addKey(G),_.push(R)))}switch(w.type){case"add":var $=new vt().addKeys(t.values?y.map(function(ie){return b(ie)}):y),S=y.concat(t.values?_.filter(function(ie){return ie=b(ie),!$.hasKey(ie)&&($.addKey(ie),!0)}):_.map(function(ie){return b(ie)}).filter(function(ie){return!$.hasKey(ie)&&($.addKey(ie),!0)}));break;case"put":var Q=new vt().addKeys(w.values.map(function(ie){return b(ie)}));S=y.filter(function(ie){return!Q.hasKey(t.values?b(ie):ie)}).concat(t.values?_:_.map(function(ie){return b(ie)}));break;case"delete":var J=new vt().addKeys(w.keys);S=y.filter(function(ie){return!J.hasKey(t.values?b(ie):ie)});break;case"deleteRange":var te=w.range;S=y.filter(function(ie){return!Lr(b(ie),te)})}return S},e);return T===e?e:(T.sort(function(y,w){return Pe(p(y),p(w))||Pe(b(y),b(w))}),t.limit&&t.limit<1/0&&(T.length>t.limit?T.length=t.limit:e.length===t.limit&&T.length<t.limit&&(u.dirty=!0)),c?Object.freeze(T):T)}function Uo(e,t){return Pe(e.lower,t.lower)===0&&Pe(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function fa(e,t){return function(n,a,u,c){if(n===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=Pe(n,a))===0){if(u&&c)return 0;if(u)return 1;if(c)return-1}return a}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,a,u,c){if(n===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=Pe(n,a))===0){if(u&&c)return 0;if(u)return-1;if(c)return 1}return a}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function da(e,t,n,a){e.subscribers.add(n),a.addEventListener("abort",function(){var u,c;e.subscribers.delete(n),e.subscribers.size===0&&(u=e,c=t,setTimeout(function(){u.subscribers.size===0&&me(c,u)},3e3))})}var ha={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(n,a,u){var c,f,v=e.transaction(n,a,u);return a==="readwrite"&&(f=(c=new AbortController).signal,u=function(m){return function(){if(c.abort(),a==="readwrite"){for(var b=new Set,k=0,p=n;k<p.length;k++){var T=p[k],y=en["idb://".concat(t,"/").concat(T)];if(y){var w=e.table(T),S=y.optimisticOps.filter(function(ie){return ie.trans===v});if(v._explicit&&m&&v.mutatedParts)for(var _=0,I=Object.values(y.queries.query);_<I.length;_++)for(var A=0,j=($=I[_]).slice();A<j.length;A++)Fr((Q=j[A]).obsSet,v.mutatedParts)&&(me($,Q),Q.subscribers.forEach(function(ie){return b.add(ie)}));else if(0<S.length){y.optimisticOps=y.optimisticOps.filter(function(ie){return ie.trans!==v});for(var R=0,G=Object.values(y.queries.query);R<G.length;R++)for(var $,Q,J,te=0,Z=($=G[R]).slice();te<Z.length;te++)(Q=Z[te]).res!=null&&v.mutatedParts&&(m&&!Q.dirty?(J=Object.isFrozen(Q.res),J=Lo(Q.res,Q.req,S,w,Q,J),Q.dirty?(me($,Q),Q.subscribers.forEach(function(ie){return b.add(ie)})):J!==Q.res&&(Q.res=J,Q.promise=ne.resolve({result:J}))):(Q.dirty&&me($,Q),Q.subscribers.forEach(function(ie){return b.add(ie)})))}}}b.forEach(function(ie){return ie()})}}},v.addEventListener("abort",u(!1),{signal:f}),v.addEventListener("error",u(!1),{signal:f}),v.addEventListener("complete",u(!0),{signal:f})),v},table:function(n){var a=e.table(n),u=a.schema.primaryKey;return s(s({},a),{mutate:function(c){var f=ae.trans;if(u.outbound||f.db._options.cache==="disabled"||f.explicit||f.idbtrans.mode!=="readwrite")return a.mutate(c);var v=en["idb://".concat(t,"/").concat(n)];return v?(f=a.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||zr(u,c).some(function(m){return m==null}))?(v.optimisticOps.push(c),c.mutatedParts&&er(c.mutatedParts),f.then(function(m){0<m.numFailures&&(me(v.optimisticOps,c),(m=zo(0,c,m))&&v.optimisticOps.push(m),c.mutatedParts&&er(c.mutatedParts))}),f.catch(function(){me(v.optimisticOps,c),c.mutatedParts&&er(c.mutatedParts)})):f.then(function(m){var b=zo(0,s(s({},c),{values:c.values.map(function(k,p){var T;return m.failures[p]?k:(k=(T=u.keyPath)!==null&&T!==void 0&&T.includes(".")?He(k):s({},k),Y(k,u.keyPath,m.results[p]),k)})}),m);v.optimisticOps.push(b),queueMicrotask(function(){return c.mutatedParts&&er(c.mutatedParts)})}),f):a.mutate(c)},query:function(c){if(!Bo(ae,a)||!Ho("query",c))return a.query(c);var f=((b=ae.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",p=ae,v=p.requery,m=p.signal,b=function(w,S,_,I){var A=en["idb://".concat(w,"/").concat(S)];if(!A)return[];if(!(S=A.queries[_]))return[null,!1,A,null];var j=S[(I.query?I.query.index.name:null)||""];if(!j)return[null,!1,A,null];switch(_){case"query":var R=j.find(function(G){return G.req.limit===I.limit&&G.req.values===I.values&&Uo(G.req.query.range,I.query.range)});return R?[R,!0,A,j]:[j.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=I.limit&&(!I.values||G.req.values)&&fa(G.req.query.range,I.query.range)}),!1,A,j];case"count":return R=j.find(function(G){return Uo(G.req.query.range,I.query.range)}),[R,!!R,A,j]}}(t,n,"query",c),k=b[0],p=b[1],T=b[2],y=b[3];return k&&p?k.obsSet=c.obsSet:(p=a.query(c).then(function(w){var S=w.result;if(k&&(k.res=S),f){for(var _=0,I=S.length;_<I;++_)Object.freeze(S[_]);Object.freeze(S)}else w.result=He(S);return w}).catch(function(w){return y&&k&&me(y,k),Promise.reject(w)}),k={obsSet:c.obsSet,promise:p,subscribers:new Set,type:"query",req:c,dirty:!1},y?y.push(k):(y=[k],(T=T||(en["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=y)),da(k,y,v,m),k.promise.then(function(w){return{result:Lo(w.result,c,T==null?void 0:T.optimisticOps,a,k,f)}})}})}})}};function nr(e,t){return new Proxy(e,{get:function(n,a,u){return a==="db"?t:Reflect.get(n,a,u)}})}var Rt=(tt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new re.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(a){return a._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(na),n.stores({}),this._state.autoSchema=!1,n)},tt.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||ae.letThrough||this._vip)?e():new ne(function(n,a){if(t._state.openComplete)return a(new re.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void a(new re.DatabaseClosed);t.open().catch(ke)}t._state.dbReadyPromise.then(n,a)}).then(e)},tt.prototype.use=function(e){var t=e.stack,n=e.create,a=e.level,u=e.name;return u&&this.unuse({stack:t,name:u}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:a??10,name:u}),e.sort(function(c,f){return c.level-f.level}),this},tt.prototype.unuse=function(e){var t=e.stack,n=e.name,a=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(u){return a?u.create!==a:!!n&&u.name!==n})),this},tt.prototype.open=function(){var e=this;return Xt($e,function(){return aa(e)})},tt.prototype._close=function(){var e=this._state,t=dn.indexOf(this);if(0<=t&&dn.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ne(function(n){e.dbReadyResolve=n}),e.openCanceller=new ne(function(n,a){e.cancelOpen=a}))},tt.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new re.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new re.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},tt.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new ne(function(u,c){function f(){t.close(e);var v=t._deps.indexedDB.deleteDatabase(t.name);v.onsuccess=Je(function(){var m,b,k;m=t._deps,b=t.name,k=m.indexedDB,m=m.IDBKeyRange,jr(k)||b===Hn||Ar(k,m).delete(b).catch(ke),u()}),v.onerror=jt(c),v.onblocked=t._fireOnBlocked}if(n)throw new re.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(f):f()})},tt.prototype.backendDB=function(){return this.idbdb},tt.prototype.isOpen=function(){return this.idbdb!==null},tt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},tt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},tt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(tt.prototype,"tables",{get:function(){var e=this;return h(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),tt.prototype.transaction=function(){var e=(function(t,n,a){var u=arguments.length;if(u<2)throw new re.InvalidArgument("Too few arguments");for(var c=new Array(u-1);--u;)c[u-1]=arguments[u];return a=c.pop(),[t,ce(c),a]}).apply(this,arguments);return this._transaction.apply(this,e)},tt.prototype._transaction=function(e,t,n){var a=this,u=ae.trans;u&&u.db===this&&e.indexOf("!")===-1||(u=null);var c,f,v=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(f=t.map(function(b){if(b=b instanceof a.Table?b.name:b,typeof b!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return b}),e=="r"||e===_r)c=_r;else{if(e!="rw"&&e!=wr)throw new re.InvalidArgument("Invalid transaction mode: "+e);c=wr}if(u){if(u.mode===_r&&c===wr){if(!v)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&f.forEach(function(b){if(u&&u.storeNames.indexOf(b)===-1){if(!v)throw new re.SubTransaction("Table "+b+" not included in parent transaction.");u=null}}),v&&u&&!u.active&&(u=null)}}catch(b){return u?u._promise(null,function(k,p){p(b)}):et(b)}var m=(function b(k,p,T,y,w){return ne.resolve().then(function(){var S=ae.transless||ae,_=k._createTransaction(p,T,k._dbSchema,y);if(_.explicit=!0,S={trans:_,transless:S},y)_.idbtrans=y.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,k._state.PR1398_maxLoop=3}catch(j){return j.name===Ce.InvalidState&&k.isOpen()&&0<--k._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),k.close({disableAutoOpen:!1}),k.open().then(function(){return b(k,p,T,null,w)})):et(j)}var I,A=ee(w);return A&&fn(),S=ne.follow(function(){var j;(I=w.call(_,_))&&(A?(j=Lt.bind(null,null),I.then(j,j)):typeof I.next=="function"&&typeof I.throw=="function"&&(I=Br(I)))},S),(I&&typeof I.then=="function"?ne.resolve(I).then(function(j){return _.active?j:et(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):S.then(function(){return I})).then(function(j){return y&&_._resolve(),_._completion.then(function(){return j})}).catch(function(j){return _._reject(j),et(j)})})}).bind(null,this,c,f,u,n);return u?u._promise(c,m,"lock"):ae.trans?Xt(ae.transless,function(){return a._whenReady(m)}):this._whenReady(m)},tt.prototype.table=function(e){if(!q(this._allTables,e))throw new re.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},tt);function tt(e,t){var n=this;this._middlewares={},this.verno=0;var a=tt.dependencies;this._options=t=s({addons:tt.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},a=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u,c,f,v,m,b={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ke,dbReadyPromise:null,cancelOpen:ke,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};b.dbReadyPromise=new ne(function(p){b.dbReadyResolve=p}),b.openCanceller=new ne(function(p,T){b.cancelOpen=T}),this._state=b,this.name=e,this.on=wn(this,"populate","blocked","versionchange","close",{ready:[Ot,ke]}),this.on.ready.subscribe=M(this.on.ready.subscribe,function(p){return function(T,y){tt.vip(function(){var w,S=n._state;S.openComplete?(S.dbOpenError||ne.resolve().then(T),y&&p(T)):S.onReadyBeingFired?(S.onReadyBeingFired.push(T),y&&p(T)):(p(T),w=n,y||p(function _(){w.on.ready.unsubscribe(T),w.on.ready.unsubscribe(_)}))})}}),this.Collection=(u=this,kn(Qi.prototype,function(I,_){this.db=u;var y=wo,w=null;if(_)try{y=_()}catch(A){w=A}var S=I._ctx,_=S.table,I=_.hook.reading.fire;this._ctx={table:_,index:S.index,isPrimKey:!S.index||_.schema.primKey.keyPath&&S.index===_.schema.primKey.name,range:y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:w,or:S.or,valueMapper:I!==ct?I:null}})),this.Table=(c=this,kn(So.prototype,function(p,T,y){this.db=c,this._tx=y,this.name=p,this.schema=T,this.hook=c._allTables[p]?c._allTables[p].hook:wn(null,{creating:[Et,ke],reading:[ht,ct],updating:[ft,ke],deleting:[xt,ke]})})),this.Transaction=(f=this,kn(Zi.prototype,function(p,T,y,w,S){var _=this;this.db=f,this.mode=p,this.storeNames=T,this.schema=y,this.chromeTransactionDurability=w,this.idbtrans=null,this.on=wn(this,"complete","error","abort"),this.parent=S||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ne(function(I,A){_._resolve=I,_._reject=A}),this._completion.then(function(){_.active=!1,_.on.complete.fire()},function(I){var A=_.active;return _.active=!1,_.on.error.fire(I),_.parent?_.parent._reject(I):A&&_.idbtrans&&_.idbtrans.abort(),et(I)})})),this.Version=(v=this,kn(ia.prototype,function(p){this.db=v,this._cfg={version:p,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(m=this,kn(Io.prototype,function(p,T,y){if(this.db=m,this._ctx={table:p,index:T===":id"?null:T,or:y},this._cmp=this._ascending=Pe,this._descending=function(w,S){return Pe(S,w)},this._max=function(w,S){return 0<Pe(w,S)?w:S},this._min=function(w,S){return Pe(w,S)<0?w:S},this._IDBKeyRange=m._deps.IDBKeyRange,!this._IDBKeyRange)throw new re.MissingAPI})),this.on("versionchange",function(p){0<p.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=Tn(t.IDBKeyRange),this._createTransaction=function(p,T,y,w){return new n.Transaction(p,T,y,n._options.chromeTransactionDurability,w)},this._fireOnBlocked=function(p){n.on("blocked").fire(p),dn.filter(function(T){return T.name===n.name&&T!==n&&!T._state.vcFired}).map(function(T){return T.on("versionchange").fire(p)})},this.use(la),this.use(ha),this.use(ca),this.use(sa),this.use(ua);var k=new Proxy(this,{get:function(p,T,y){if(T==="_vip")return!0;if(T==="table")return function(S){return nr(n.table(S),k)};var w=Reflect.get(p,T,y);return w instanceof So?nr(w,k):T==="tables"?w.map(function(S){return nr(S,k)}):T==="_createTransaction"?function(){return nr(w.apply(this,arguments),k)}:w}});this.vip=k,a.forEach(function(p){return p(n)})}var rr,It=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",va=(Ur.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Ur.prototype[It]=function(){return this},Ur);function Ur(e){this._subscribe=e}try{rr={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch{rr={indexedDB:null,IDBKeyRange:null}}function Yo(e){var t,n=!1,a=new va(function(u){var c=ee(e),f,v=!1,m={},b={},k={get closed(){return v},unsubscribe:function(){v||(v=!0,f&&f.abort(),p&&Vt.storagemutated.unsubscribe(y))}};u.start&&u.start(k);var p=!1,T=function(){return br(w)},y=function(S){$n(m,S),Fr(b,m)&&T()},w=function(){var S,_,I;!v&&rr.indexedDB&&(m={},S={},f&&f.abort(),f=new AbortController,I=function(A){var j=ln();try{c&&fn();var R=zt(e,A);return R=c?R.finally(Lt):R}finally{j&&cn()}}(_={subscr:S,signal:f.signal,requery:T,querier:e,trans:null}),Promise.resolve(I).then(function(A){n=!0,t=A,v||_.signal.aborted||(m={},function(j){for(var R in j)if(q(j,R))return;return 1}(b=S)||p||(Vt(Sn,y),p=!0),br(function(){return!v&&u.next&&u.next(A)}))},function(A){n=!1,["DatabaseClosedError","AbortError"].includes(A==null?void 0:A.name)||v||br(function(){v||u.error&&u.error(A)})}))};return setTimeout(T,0),k});return a.hasValue=function(){return n},a.getValue=function(){return t},a}var tn=Rt;function Yr(e){var t=Wt;try{Wt=!0,Vt.storagemutated.fire(e),Nr(e,!0)}finally{Wt=t}}E(tn,s(s({},ot),{delete:function(e){return new tn(e,{addons:[]}).delete()},exists:function(e){return new tn(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=tn.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(jr(n)?Promise.resolve(n.databases()).then(function(a){return a.map(function(u){return u.name}).filter(function(u){return u!==Hn})}):Ar(n,t).toCollection().primaryKeys()).then(e)}catch{return et(new re.MissingAPI)}var t,n},defineClass:function(){return function(e){x(this,e)}},ignoreTransaction:function(e){return ae.trans?Xt(ae.transless,e):e()},vip:Mr,async:function(e){return function(){try{var t=Br(e.apply(this,arguments));return t&&typeof t.then=="function"?t:ne.resolve(t)}catch(n){return et(n)}}},spawn:function(e,t,n){try{var a=Br(e.apply(n,t||[]));return a&&typeof a.then=="function"?a:ne.resolve(a)}catch(u){return et(u)}},currentTransaction:{get:function(){return ae.trans||null}},waitFor:function(e,t){return t=ne.resolve(typeof e=="function"?tn.ignoreTransaction(e):e).timeout(t||6e4),ae.trans?ae.trans.waitFor(t):t},Promise:ne,debug:{get:function(){return Ue},set:function(e){Kt(e)}},derive:z,extend:x,props:E,override:M,Events:wn,on:Vt,liveQuery:Yo,extendObservabilitySet:$n,getByKeyPath:W,setByKeyPath:Y,delByKeyPath:function(e,t){typeof t=="string"?Y(e,t,void 0):"length"in t&&[].map.call(t,function(n){Y(e,n,void 0)})},shallowClone:ue,deepClone:He,getObjectDiff:Hr,cmp:Pe,asap:L,minKey:-1/0,addons:[],connections:dn,errnames:Ce,dependencies:rr,cache:en,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),tn.maxKey=Tn(tn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Vt(Sn,function(e){Wt||(e=new CustomEvent(Sr,{detail:e}),Wt=!0,dispatchEvent(e),Wt=!1)}),addEventListener(Sr,function(e){e=e.detail,Wt||Yr(e)}));var pn,Wt=!1,Vo=function(){};return typeof BroadcastChannel<"u"&&((Vo=function(){(pn=new BroadcastChannel(Sr)).onmessage=function(e){return e.data&&Yr(e.data)}})(),typeof pn.unref=="function"&&pn.unref(),Vt(Sn,function(e){Wt||pn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Rt.disableBfCache&&e.persisted){Ue&&console.debug("Dexie: handling persisted pagehide"),pn!=null&&pn.close();for(var t=0,n=dn;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Rt.disableBfCache&&e.persisted&&(Ue&&console.debug("Dexie: handling persisted pageshow"),Vo(),Yr({all:new vt(-1/0,[[]])}))})),ne.rejectionMapper=function(e,t){return!e||e instanceof le||e instanceof TypeError||e instanceof SyntaxError||!e.name||!it[e.name]?e:(t=new it[e.name](t||e.message,e),"stack"in e&&N(t,"stack",{get:function(){return this.inner.stack}}),t)},Kt(Ue),s(Rt,Object.freeze({__proto__:null,Dexie:Rt,liveQuery:Yo,Entity:ko,cmp:Pe,PropModification:xn,replacePrefix:function(e,t){return new xn({replacePrefix:[e,t]})},add:function(e){return new xn({add:e})},remove:function(e){return new xn({remove:e})},default:Rt,RangeSet:vt,mergeRanges:Cn,rangesOverlap:Ko}),{default:Rt}),Rt})}(sr)),sr.exports}var vs=hs();const oo=Ai(vs),oi=Symbol.for("Dexie"),dr=globalThis[oi]||(globalThis[oi]=oo);if(oo.semVer!==dr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${oo.semVer} and ${dr.semVer}`);const{liveQuery:dc,mergeRanges:hc,rangesOverlap:vc,RangeSet:pc,cmp:gc,Entity:mc,PropModification:yc,replacePrefix:bc,add:_c,remove:wc}=dr;class ps{constructor(){this._db=new dr("FastingHours"),this._db.version(20).stores({history:"id, started",hunger:"id, created",water:"id, created"})}browseHistory(){return this._db.history.toArray()}browseHistoryByEnd(){return this._db.history.toArray().then(r=>r.filter(s=>s.ended===null)[0])}readHistory(r){return this._db.history.get({id:r})}editHistory(r){const i=Qr(r);return i.updated=new Date,this._db.history.put(i).then(()=>this._db.history.get({id:r.id}))}addHistory(){const r={id:crypto.randomUUID(),type:"history",created:new Date,updated:new Date,started:new Date,ended:null,notes:null};return this._db.history.add(r).then(()=>this._db.history.get({id:r.id}))}deleteHistory(r){return this._db.history.delete(r)}browseHunger(r=!1){return this._db.hunger.toArray().then(i=>r?(i.sort((s,l)=>s.created.getTime()<l.created.getTime()?1:s.created.getTime()>l.created.getTime()?-1:0),i.length===0?null:i[0]):i)}readHunger(r){return this._db.hunger.get({id:r})}editHunger(r){const i=Qr(r);return i.updated=new Date,this._db.hunger.put(i).then(()=>this._db.hunger.get({id:r.id}))}addHunger(r=5){const i={id:crypto.randomUUID(),type:"hunger",created:new Date,updated:new Date,level:r};return this._db.hunger.add(i).then(()=>this._db.hunger.get({id:i.id}))}deleteHunger(r){return this._db.hunger.delete(r)}browseWater(r=!1){return this._db.water.toArray().then(i=>{if(r){const s=new Date;s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);const l=new Date(s.getTime());return l.setDate(l.getDate()+1),i.filter(d=>d.created.getTime()>s.getTime()&&d.created.getTime()<l.getTime())}else return i})}readWater(r){return this._db.water.get({id:r})}editWater(r){const i=Qr(r);return i.updated=new Date,this._db.water.put(i).then(()=>this._db.water.get({id:r.id}))}addWater(r){const i={id:crypto.randomUUID(),type:"water",created:new Date,updated:new Date,volume:r};return crypto.randomUUID(),this._db.water.add(i).then(()=>this._db.water.get({id:i.id}))}deleteWater(r){return this._db.water.delete(r)}}var Zr={exports:{}},ii;function gs(){return ii||(ii=1,function(o,r){(function(){var i=Math.PI,s=Math.sin,l=Math.cos,d=Math.tan,h=Math.asin,g=Math.atan2,x=Math.acos,O=i/180,P=1e3*60*60*24,q=2440588,E=2451545;function H(ee){return ee.valueOf()/P-.5+q}function N(ee){return new Date((ee+.5-q)*P)}function z(ee){return H(ee)-E}var V=O*23.4397;function K(ee,se){return g(s(ee)*l(V)-d(se)*s(V),l(ee))}function F(ee,se){return h(s(se)*l(V)+l(se)*s(V)*s(ee))}function M(ee,se,le){return g(s(ee),l(ee)*s(se)-d(le)*l(se))}function D(ee,se,le){return h(s(se)*s(le)+l(se)*l(le)*l(ee))}function L(ee,se){return O*(280.16+360.9856235*ee)-se}function W(ee){return ee<0&&(ee=0),2967e-7/Math.tan(ee+.00312536/(ee+.08901179))}function Y(ee){return O*(357.5291+.98560028*ee)}function ue(ee){var se=O*(1.9148*s(ee)+.02*s(2*ee)+3e-4*s(3*ee)),le=O*102.9372;return ee+se+le+i}function pe(ee){var se=Y(ee),le=ue(se);return{dec:F(le,0),ra:K(le,0)}}var ce={};ce.getPosition=function(ee,se,le){var je=O*-le,De=O*se,Me=z(ee),Ce=pe(Me),Le=L(Me,je)-Ce.ra;return{azimuth:M(Le,De,Ce.dec),altitude:D(Le,De,Ce.dec)}};var Se=ce.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];ce.addTime=function(ee,se,le){Se.push([ee,se,le])};var ye=9e-4;function He(ee,se){return Math.round(ee-ye-se/(2*i))}function Re(ee,se,le){return ye+(ee+se)/(2*i)+le}function Ve(ee,se,le){return E+ee+.0053*s(se)-.0069*s(2*le)}function Qe(ee,se,le){return x((s(ee)-s(se)*s(le))/(l(se)*l(le)))}function dt(ee){return-2.076*Math.sqrt(ee)/60}function me(ee,se,le,je,De,Me,Ce){var Le=Qe(ee,le,je),re=Re(Le,se,De);return Ve(re,Me,Ce)}ce.getTimes=function(ee,se,le,je){je=je||0;var De=O*-le,Me=O*se,Ce=dt(je),Le=z(ee),re=He(Le,De),it=Re(0,De,re),ot=Y(it),ke=ue(ot),ct=F(ke,0),ht=Ve(it,ot,ke),nt,Et,xt,ft,_t,Ot,Ue={solarNoon:N(ht),nadir:N(ht-.5)};for(nt=0,Et=Se.length;nt<Et;nt+=1)xt=Se[nt],ft=(xt[0]+Ce)*O,_t=me(ft,De,Me,ct,re,ot,ke),Ot=ht-(_t-ht),Ue[xt[1]]=N(Ot),Ue[xt[2]]=N(_t);return Ue};function Ae(ee){var se=O*(218.316+13.176396*ee),le=O*(134.963+13.064993*ee),je=O*(93.272+13.22935*ee),De=se+O*6.289*s(le),Me=O*5.128*s(je),Ce=385001-20905*l(le);return{ra:K(De,Me),dec:F(De,Me),dist:Ce}}ce.getMoonPosition=function(ee,se,le){var je=O*-le,De=O*se,Me=z(ee),Ce=Ae(Me),Le=L(Me,je)-Ce.ra,re=D(Le,De,Ce.dec),it=g(s(Le),d(De)*l(Ce.dec)-s(Ce.dec)*l(Le));return re=re+W(re),{azimuth:M(Le,De,Ce.dec),altitude:re,distance:Ce.dist,parallacticAngle:it}},ce.getMoonIllumination=function(ee){var se=z(ee||new Date),le=pe(se),je=Ae(se),De=149598e3,Me=x(s(le.dec)*s(je.dec)+l(le.dec)*l(je.dec)*l(le.ra-je.ra)),Ce=g(De*s(Me),je.dist-De*l(Me)),Le=g(l(le.dec)*s(le.ra-je.ra),s(le.dec)*l(je.dec)-l(le.dec)*s(je.dec)*l(le.ra-je.ra));return{fraction:(1+l(Ce))/2,phase:.5+.5*Ce*(Le<0?-1:1)/Math.PI,angle:Le}};function Ne(ee,se){return new Date(ee.valueOf()+se*P/24)}ce.getMoonTimes=function(ee,se,le,je){var De=new Date(ee);je?De.setUTCHours(0,0,0,0):De.setHours(0,0,0,0);for(var Me=.133*O,Ce=ce.getMoonPosition(De,se,le).altitude-Me,Le,re,it,ot,ke,ct,ht,nt,Et,xt,ft,_t,Ot,Ue=1;Ue<=24&&(Le=ce.getMoonPosition(Ne(De,Ue),se,le).altitude-Me,re=ce.getMoonPosition(Ne(De,Ue+1),se,le).altitude-Me,ke=(Ce+re)/2-Le,ct=(re-Ce)/2,ht=-ct/(2*ke),nt=(ke*ht+ct)*ht+Le,Et=ct*ct-4*ke*Le,xt=0,Et>=0&&(Ot=Math.sqrt(Et)/(Math.abs(ke)*2),ft=ht-Ot,_t=ht+Ot,Math.abs(ft)<=1&&xt++,Math.abs(_t)<=1&&xt++,ft<-1&&(ft=_t)),xt===1?Ce<0?it=Ue+ft:ot=Ue+ft:xt===2&&(it=Ue+(nt<0?_t:ft),ot=Ue+(nt<0?ft:_t)),!(it&&ot));Ue+=2)Ce=re;var Kt={};return it&&(Kt.rise=Ne(De,it)),ot&&(Kt.set=Ne(De,ot)),!it&&!ot&&(Kt[nt>0?"alwaysUp":"alwaysDown"]=!0),Kt},o.exports=ce})()}(Zr)),Zr.exports}var ms=gs();const ys=Ai(ms),ji=/^[a-z0-9]+(-[a-z0-9]+)*$/,pr=(o,r,i,s="")=>{const l=o.split(":");if(o.slice(0,1)==="@"){if(l.length<2||l.length>3)return null;s=l.shift().slice(1)}if(l.length>3||!l.length)return null;if(l.length>1){const g=l.pop(),x=l.pop(),O={provider:l.length>0?l[0]:s,prefix:x,name:g};return r&&!ur(O)?null:O}const d=l[0],h=d.split("-");if(h.length>1){const g={provider:s,prefix:h.shift(),name:h.join("-")};return r&&!ur(g)?null:g}if(i&&s===""){const g={provider:s,prefix:"",name:d};return r&&!ur(g,i)?null:g}return null},ur=(o,r)=>o?!!((r&&o.prefix===""||o.prefix)&&o.name):!1,Mi=Object.freeze({left:0,top:0,width:16,height:16}),hr=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),gr=Object.freeze({...Mi,...hr}),io=Object.freeze({...gr,body:"",hidden:!1});function bs(o,r){const i={};!o.hFlip!=!r.hFlip&&(i.hFlip=!0),!o.vFlip!=!r.vFlip&&(i.vFlip=!0);const s=((o.rotate||0)+(r.rotate||0))%4;return s&&(i.rotate=s),i}function ai(o,r){const i=bs(o,r);for(const s in io)s in hr?s in o&&!(s in i)&&(i[s]=hr[s]):s in r?i[s]=r[s]:s in o&&(i[s]=o[s]);return i}function _s(o,r){const i=o.icons,s=o.aliases||Object.create(null),l=Object.create(null);function d(h){if(i[h])return l[h]=[];if(!(h in l)){l[h]=null;const g=s[h]&&s[h].parent,x=g&&d(g);x&&(l[h]=[g].concat(x))}return l[h]}return Object.keys(i).concat(Object.keys(s)).forEach(d),l}function ws(o,r,i){const s=o.icons,l=o.aliases||Object.create(null);let d={};function h(g){d=ai(s[g]||l[g],d)}return h(r),i.forEach(h),ai(o,d)}function Ki(o,r){const i=[];if(typeof o!="object"||typeof o.icons!="object")return i;o.not_found instanceof Array&&o.not_found.forEach(l=>{r(l,null),i.push(l)});const s=_s(o);for(const l in s){const d=s[l];d&&(r(l,ws(o,l,d)),i.push(l))}return i}const ks={provider:"",aliases:{},not_found:{},...Mi};function $r(o,r){for(const i in r)if(i in o&&typeof o[i]!=typeof r[i])return!1;return!0}function Fi(o){if(typeof o!="object"||o===null)return null;const r=o;if(typeof r.prefix!="string"||!o.icons||typeof o.icons!="object"||!$r(o,ks))return null;const i=r.icons;for(const l in i){const d=i[l];if(!l||typeof d.body!="string"||!$r(d,io))return null}const s=r.aliases||Object.create(null);for(const l in s){const d=s[l],h=d.parent;if(!l||typeof h!="string"||!i[h]&&!s[h]||!$r(d,io))return null}return r}const si=Object.create(null);function xs(o,r){return{provider:o,prefix:r,icons:Object.create(null),missing:new Set}}function yn(o,r){const i=si[o]||(si[o]=Object.create(null));return i[r]||(i[r]=xs(o,r))}function qi(o,r){return Fi(r)?Ki(r,(i,s)=>{s?o.icons[i]=s:o.missing.add(i)}):[]}function Ds(o,r,i){try{if(typeof i.body=="string")return o.icons[r]={...i},!0}catch{}return!1}let Kn=!1;function Ri(o){return typeof o=="boolean"&&(Kn=o),Kn}function Ss(o){const r=typeof o=="string"?pr(o,!0,Kn):o;if(r){const i=yn(r.provider,r.prefix),s=r.name;return i.icons[s]||(i.missing.has(s)?null:void 0)}}function Ts(o,r){const i=pr(o,!0,Kn);if(!i)return!1;const s=yn(i.provider,i.prefix);return r?Ds(s,i.name,r):(s.missing.add(i.name),!0)}function Es(o,r){if(typeof o!="object")return!1;if(typeof r!="string"&&(r=o.provider||""),Kn&&!r&&!o.prefix){let l=!1;return Fi(o)&&(o.prefix="",Ki(o,(d,h)=>{Ts(d,h)&&(l=!0)})),l}const i=o.prefix;if(!ur({prefix:i,name:"a"}))return!1;const s=yn(r,i);return!!qi(s,o)}const Ni=Object.freeze({width:null,height:null}),Bi=Object.freeze({...Ni,...hr}),Os=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Cs=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function ui(o,r,i){if(r===1)return o;if(i=i||100,typeof o=="number")return Math.ceil(o*r*i)/i;if(typeof o!="string")return o;const s=o.split(Os);if(s===null||!s.length)return o;const l=[];let d=s.shift(),h=Cs.test(d);for(;;){if(h){const g=parseFloat(d);isNaN(g)?l.push(d):l.push(Math.ceil(g*r*i)/i)}else l.push(d);if(d=s.shift(),d===void 0)return l.join("");h=!h}}function Is(o,r="defs"){let i="";const s=o.indexOf("<"+r);for(;s>=0;){const l=o.indexOf(">",s),d=o.indexOf("</"+r);if(l===-1||d===-1)break;const h=o.indexOf(">",d);if(h===-1)break;i+=o.slice(l+1,d).trim(),o=o.slice(0,s).trim()+o.slice(h+1)}return{defs:i,content:o}}function Ps(o,r){return o?"<defs>"+o+"</defs>"+r:r}function As(o,r,i){const s=Is(o);return Ps(s.defs,r+s.content+i)}const js=o=>o==="unset"||o==="undefined"||o==="none";function Ms(o,r){const i={...gr,...o},s={...Bi,...r},l={left:i.left,top:i.top,width:i.width,height:i.height};let d=i.body;[i,s].forEach(z=>{const V=[],K=z.hFlip,F=z.vFlip;let M=z.rotate;K?F?M+=2:(V.push("translate("+(l.width+l.left).toString()+" "+(0-l.top).toString()+")"),V.push("scale(-1 1)"),l.top=l.left=0):F&&(V.push("translate("+(0-l.left).toString()+" "+(l.height+l.top).toString()+")"),V.push("scale(1 -1)"),l.top=l.left=0);let D;switch(M<0&&(M-=Math.floor(M/4)*4),M=M%4,M){case 1:D=l.height/2+l.top,V.unshift("rotate(90 "+D.toString()+" "+D.toString()+")");break;case 2:V.unshift("rotate(180 "+(l.width/2+l.left).toString()+" "+(l.height/2+l.top).toString()+")");break;case 3:D=l.width/2+l.left,V.unshift("rotate(-90 "+D.toString()+" "+D.toString()+")");break}M%2===1&&(l.left!==l.top&&(D=l.left,l.left=l.top,l.top=D),l.width!==l.height&&(D=l.width,l.width=l.height,l.height=D)),V.length&&(d=As(d,'<g transform="'+V.join(" ")+'">',"</g>"))});const h=s.width,g=s.height,x=l.width,O=l.height;let P,q;h===null?(q=g===null?"1em":g==="auto"?O:g,P=ui(q,x/O)):(P=h==="auto"?x:h,q=g===null?ui(P,O/x):g==="auto"?O:g);const E={},H=(z,V)=>{js(V)||(E[z]=V.toString())};H("width",P),H("height",q);const N=[l.left,l.top,x,O];return E.viewBox=N.join(" "),{attributes:E,viewBox:N,body:d}}const Ks=/\sid="(\S+)"/g,Fs="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let qs=0;function Rs(o,r=Fs){const i=[];let s;for(;s=Ks.exec(o);)i.push(s[1]);if(!i.length)return o;const l="suffix"+(Math.random()*16777216|Date.now()).toString(16);return i.forEach(d=>{const h=typeof r=="function"?r(d):r+(qs++).toString(),g=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o=o.replace(new RegExp('([#;"])('+g+')([")]|\\.[a-z])',"g"),"$1"+h+l+"$3")}),o=o.replace(new RegExp(l,"g"),""),o}const ao=Object.create(null);function Ns(o,r){ao[o]=r}function so(o){return ao[o]||ao[""]}function po(o){let r;if(typeof o.resources=="string")r=[o.resources];else if(r=o.resources,!(r instanceof Array)||!r.length)return null;return{resources:r,path:o.path||"/",maxURL:o.maxURL||500,rotate:o.rotate||750,timeout:o.timeout||5e3,random:o.random===!0,index:o.index||0,dataAfterTimeout:o.dataAfterTimeout!==!1}}const go=Object.create(null),An=["https://api.simplesvg.com","https://api.unisvg.com"],lr=[];for(;An.length>0;)An.length===1||Math.random()>.5?lr.push(An.shift()):lr.push(An.pop());go[""]=po({resources:["https://api.iconify.design"].concat(lr)});function Bs(o,r){const i=po(r);return i===null?!1:(go[o]=i,!0)}function mo(o){return go[o]}const Hs=()=>{let o;try{if(o=fetch,typeof o=="function")return o}catch{}};let li=Hs();function zs(o,r){const i=mo(o);if(!i)return 0;let s;if(!i.maxURL)s=0;else{let l=0;i.resources.forEach(h=>{l=Math.max(l,h.length)});const d=r+".json?icons=";s=i.maxURL-l-i.path.length-d.length}return s}function Ls(o){return o===404}const Us=(o,r,i)=>{const s=[],l=zs(o,r),d="icons";let h={type:d,provider:o,prefix:r,icons:[]},g=0;return i.forEach((x,O)=>{g+=x.length+1,g>=l&&O>0&&(s.push(h),h={type:d,provider:o,prefix:r,icons:[]},g=x.length),h.icons.push(x)}),s.push(h),s};function Ys(o){if(typeof o=="string"){const r=mo(o);if(r)return r.path}return"/"}const Vs=(o,r,i)=>{if(!li){i("abort",424);return}let s=Ys(r.provider);switch(r.type){case"icons":{const d=r.prefix,g=r.icons.join(","),x=new URLSearchParams({icons:g});s+=d+".json?"+x.toString();break}case"custom":{const d=r.uri;s+=d.slice(0,1)==="/"?d.slice(1):d;break}default:i("abort",400);return}let l=503;li(o+s).then(d=>{const h=d.status;if(h!==200){setTimeout(()=>{i(Ls(h)?"abort":"next",h)});return}return l=501,d.json()}).then(d=>{if(typeof d!="object"||d===null){setTimeout(()=>{d===404?i("abort",d):i("next",l)});return}setTimeout(()=>{i("success",d)})}).catch(()=>{i("next",l)})},Ws={prepare:Us,send:Vs};function Gs(o){const r={loaded:[],missing:[],pending:[]},i=Object.create(null);o.sort((l,d)=>l.provider!==d.provider?l.provider.localeCompare(d.provider):l.prefix!==d.prefix?l.prefix.localeCompare(d.prefix):l.name.localeCompare(d.name));let s={provider:"",prefix:"",name:""};return o.forEach(l=>{if(s.name===l.name&&s.prefix===l.prefix&&s.provider===l.provider)return;s=l;const d=l.provider,h=l.prefix,g=l.name,x=i[d]||(i[d]=Object.create(null)),O=x[h]||(x[h]=yn(d,h));let P;g in O.icons?P=r.loaded:h===""||O.missing.has(g)?P=r.missing:P=r.pending;const q={provider:d,prefix:h,name:g};P.push(q)}),r}function Hi(o,r){o.forEach(i=>{const s=i.loaderCallbacks;s&&(i.loaderCallbacks=s.filter(l=>l.id!==r))})}function Qs(o){o.pendingCallbacksFlag||(o.pendingCallbacksFlag=!0,setTimeout(()=>{o.pendingCallbacksFlag=!1;const r=o.loaderCallbacks?o.loaderCallbacks.slice(0):[];if(!r.length)return;let i=!1;const s=o.provider,l=o.prefix;r.forEach(d=>{const h=d.icons,g=h.pending.length;h.pending=h.pending.filter(x=>{if(x.prefix!==l)return!0;const O=x.name;if(o.icons[O])h.loaded.push({provider:s,prefix:l,name:O});else if(o.missing.has(O))h.missing.push({provider:s,prefix:l,name:O});else return i=!0,!0;return!1}),h.pending.length!==g&&(i||Hi([o],d.id),d.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),d.abort))})}))}let Js=0;function Xs(o,r,i){const s=Js++,l=Hi.bind(null,i,s);if(!r.pending.length)return l;const d={id:s,icons:r,callback:o,abort:l};return i.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(d)}),l}function Zs(o,r=!0,i=!1){const s=[];return o.forEach(l=>{const d=typeof l=="string"?pr(l,r,i):l;d&&s.push(d)}),s}var $s={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function eu(o,r,i,s){const l=o.resources.length,d=o.random?Math.floor(Math.random()*l):o.index;let h;if(o.random){let W=o.resources.slice(0);for(h=[];W.length>1;){const Y=Math.floor(Math.random()*W.length);h.push(W[Y]),W=W.slice(0,Y).concat(W.slice(Y+1))}h=h.concat(W)}else h=o.resources.slice(d).concat(o.resources.slice(0,d));const g=Date.now();let x="pending",O=0,P,q=null,E=[],H=[];typeof s=="function"&&H.push(s);function N(){q&&(clearTimeout(q),q=null)}function z(){x==="pending"&&(x="aborted"),N(),E.forEach(W=>{W.status==="pending"&&(W.status="aborted")}),E=[]}function V(W,Y){Y&&(H=[]),typeof W=="function"&&H.push(W)}function K(){return{startTime:g,payload:r,status:x,queriesSent:O,queriesPending:E.length,subscribe:V,abort:z}}function F(){x="failed",H.forEach(W=>{W(void 0,P)})}function M(){E.forEach(W=>{W.status==="pending"&&(W.status="aborted")}),E=[]}function D(W,Y,ue){const pe=Y!=="success";switch(E=E.filter(ce=>ce!==W),x){case"pending":break;case"failed":if(pe||!o.dataAfterTimeout)return;break;default:return}if(Y==="abort"){P=ue,F();return}if(pe){P=ue,E.length||(h.length?L():F());return}if(N(),M(),!o.random){const ce=o.resources.indexOf(W.resource);ce!==-1&&ce!==o.index&&(o.index=ce)}x="completed",H.forEach(ce=>{ce(ue)})}function L(){if(x!=="pending")return;N();const W=h.shift();if(W===void 0){if(E.length){q=setTimeout(()=>{N(),x==="pending"&&(M(),F())},o.timeout);return}F();return}const Y={status:"pending",resource:W,callback:(ue,pe)=>{D(Y,ue,pe)}};E.push(Y),O++,q=setTimeout(L,o.rotate),i(W,r,Y.callback)}return setTimeout(L),K}function zi(o){const r={...$s,...o};let i=[];function s(){i=i.filter(g=>g().status==="pending")}function l(g,x,O){const P=eu(r,g,x,(q,E)=>{s(),O&&O(q,E)});return i.push(P),P}function d(g){return i.find(x=>g(x))||null}return{query:l,find:d,setIndex:g=>{r.index=g},getIndex:()=>r.index,cleanup:s}}function ci(){}const eo=Object.create(null);function tu(o){if(!eo[o]){const r=mo(o);if(!r)return;const i=zi(r),s={config:r,redundancy:i};eo[o]=s}return eo[o]}function nu(o,r,i){let s,l;if(typeof o=="string"){const d=so(o);if(!d)return i(void 0,424),ci;l=d.send;const h=tu(o);h&&(s=h.redundancy)}else{const d=po(o);if(d){s=zi(d);const h=o.resources?o.resources[0]:"",g=so(h);g&&(l=g.send)}}return!s||!l?(i(void 0,424),ci):s.query(r,l,i)().abort}function fi(){}function ru(o){o.iconsLoaderFlag||(o.iconsLoaderFlag=!0,setTimeout(()=>{o.iconsLoaderFlag=!1,Qs(o)}))}function ou(o){const r=[],i=[];return o.forEach(s=>{(s.match(ji)?r:i).push(s)}),{valid:r,invalid:i}}function jn(o,r,i){function s(){const l=o.pendingIcons;r.forEach(d=>{l&&l.delete(d),o.icons[d]||o.missing.add(d)})}if(i&&typeof i=="object")try{if(!qi(o,i).length){s();return}}catch(l){console.error(l)}s(),ru(o)}function di(o,r){o instanceof Promise?o.then(i=>{r(i)}).catch(()=>{r(null)}):r(o)}function iu(o,r){o.iconsToLoad?o.iconsToLoad=o.iconsToLoad.concat(r).sort():o.iconsToLoad=r,o.iconsQueueFlag||(o.iconsQueueFlag=!0,setTimeout(()=>{o.iconsQueueFlag=!1;const{provider:i,prefix:s}=o,l=o.iconsToLoad;if(delete o.iconsToLoad,!l||!l.length)return;const d=o.loadIcon;if(o.loadIcons&&(l.length>1||!d)){di(o.loadIcons(l,s,i),P=>{jn(o,l,P)});return}if(d){l.forEach(P=>{const q=d(P,s,i);di(q,E=>{const H=E?{prefix:s,icons:{[P]:E}}:null;jn(o,[P],H)})});return}const{valid:h,invalid:g}=ou(l);if(g.length&&jn(o,g,null),!h.length)return;const x=s.match(ji)?so(i):null;if(!x){jn(o,h,null);return}x.prepare(i,s,h).forEach(P=>{nu(i,P,q=>{jn(o,P.icons,q)})})}))}const au=(o,r)=>{const i=Zs(o,!0,Ri()),s=Gs(i);if(!s.pending.length){let x=!0;return r&&setTimeout(()=>{x&&r(s.loaded,s.missing,s.pending,fi)}),()=>{x=!1}}const l=Object.create(null),d=[];let h,g;return s.pending.forEach(x=>{const{provider:O,prefix:P}=x;if(P===g&&O===h)return;h=O,g=P,d.push(yn(O,P));const q=l[O]||(l[O]=Object.create(null));q[P]||(q[P]=[])}),s.pending.forEach(x=>{const{provider:O,prefix:P,name:q}=x,E=yn(O,P),H=E.pendingIcons||(E.pendingIcons=new Set);H.has(q)||(H.add(q),l[O][P].push(q))}),d.forEach(x=>{const O=l[x.provider][x.prefix];O.length&&iu(x,O)}),r?Xs(r,s,d):fi};function su(o,r){const i={...o};for(const s in r){const l=r[s],d=typeof l;s in Ni?(l===null||l&&(d==="string"||d==="number"))&&(i[s]=l):d===typeof i[s]&&(i[s]=s==="rotate"?l%4:l)}return i}const uu=/[\s,]+/;function lu(o,r){r.split(uu).forEach(i=>{switch(i.trim()){case"horizontal":o.hFlip=!0;break;case"vertical":o.vFlip=!0;break}})}function cu(o,r=0){const i=o.replace(/^-?[0-9.]*/,"");function s(l){for(;l<0;)l+=4;return l%4}if(i===""){const l=parseInt(o);return isNaN(l)?0:s(l)}else if(i!==o){let l=0;switch(i){case"%":l=25;break;case"deg":l=90}if(l){let d=parseFloat(o.slice(0,o.length-i.length));return isNaN(d)?0:(d=d/l,d%1===0?s(d):0)}}return r}function fu(o,r){let i=o.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in r)i+=" "+s+'="'+r[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+o+"</svg>"}function du(o){return o.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function hu(o){return"data:image/svg+xml,"+du(o)}function vu(o){return'url("'+hu(o)+'")'}const hi={...Bi,inline:!1},pu={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},gu={display:"inline-block"},uo={"background-color":"currentColor"},Li={"background-color":"transparent"},vi={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},pi={"-webkit-mask":uo,mask:uo,background:Li};for(const o in pi){const r=pi[o];for(const i in vi)r[o+"-"+i]=vi[i]}function mu(o){return o+(o.match(/^[-0-9.]+$/)?"px":"")}function yu(o,r){const i=su(hi,r),s=r.mode||"svg",l=s==="svg"?{...pu}:{};o.body.indexOf("xlink:")===-1&&delete l["xmlns:xlink"];let d=typeof r.style=="string"?r.style:"";for(let K in r){const F=r[K];if(F!==void 0)switch(K){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":i[K]=F===!0||F==="true"||F===1;break;case"flip":typeof F=="string"&&lu(i,F);break;case"color":d=d+(d.length>0&&d.trim().slice(-1)!==";"?";":"")+"color: "+F+"; ";break;case"rotate":typeof F=="string"?i[K]=cu(F):typeof F=="number"&&(i[K]=F);break;case"ariaHidden":case"aria-hidden":F!==!0&&F!=="true"&&delete l["aria-hidden"];break;default:if(K.slice(0,3)==="on:")break;hi[K]===void 0&&(l[K]=F)}}const h=Ms(o,i),g=h.attributes;if(i.inline&&(d="vertical-align: -0.125em; "+d),s==="svg"){Object.assign(l,g),d!==""&&(l.style=d);let K=0,F=r.id;return typeof F=="string"&&(F=F.replace(/-/g,"_")),{svg:!0,attributes:l,body:Rs(h.body,F?()=>F+"ID"+K++:"iconifySvelte")}}const{body:x,width:O,height:P}=o,q=s==="mask"||(s==="bg"?!1:x.indexOf("currentColor")!==-1),E=fu(x,{...g,width:O+"",height:P+""}),N={"--svg":vu(E)},z=K=>{const F=g[K];F&&(N[K]=mu(F))};z("width"),z("height"),Object.assign(N,gu,q?uo:Li);let V="";for(const K in N)V+=K+": "+N[K]+";";return l.style=V+d,{svg:!1,attributes:l}}Ri(!0);Ns("",Ws);if(typeof document<"u"&&typeof window<"u"){const o=window;if(o.IconifyPreload!==void 0){const r=o.IconifyPreload,i="Invalid IconifyPreload syntax.";typeof r=="object"&&r!==null&&(r instanceof Array?r:[r]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!Es(s))&&console.error(i)}catch{console.error(i)}})}if(o.IconifyProviders!==void 0){const r=o.IconifyProviders;if(typeof r=="object"&&r!==null)for(let i in r){const s="IconifyProviders["+i+"] is invalid.";try{const l=r[i];if(typeof l!="object"||!l||l.resources===void 0)continue;Bs(i,l)||console.error(s)}catch{console.error(s)}}}}function bu(o,r,i,s,l){function d(){r.loading&&(r.loading.abort(),r.loading=null)}if(typeof o=="object"&&o!==null&&typeof o.body=="string")return r.name="",d(),{data:{...gr,...o}};let h;if(typeof o!="string"||(h=pr(o,!1,!0))===null)return d(),null;const g=Ss(h);if(!g)return i&&(!r.loading||r.loading.name!==o)&&(d(),r.name="",r.loading={name:o,abort:au([h],s)}),null;d(),r.name!==o&&(r.name=o,l&&!r.destroyed&&l(o));const x=["iconify"];return h.prefix!==""&&x.push("iconify--"+h.prefix),h.provider!==""&&x.push("iconify--"+h.provider),{data:g,classes:x}}function _u(o,r){return o?yu({...gr,...o},r):null}var wu=Va("<svg><!></svg>"),ku=ge("<span></span>");function bt(o,r){ut(r,!0);const i={name:"",loading:null,destroyed:!1},s=Qa(r,["$$slots","$$events","$$legacy"]);let l=ze(!1),d=ze(0),h=ze(null);Ua(()=>{C(d);const q=!!r.ssr||C(l),E=bu(r.icon,i,q,g,r.onload),H=E?_u(E.data,s):null;H&&E.classes&&(H.attributes.class=(typeof s.class=="string"?s.class+" ":"")+E.classes.join(" ")),he(h,H,!0)});function g(){Ya(d)}gi(()=>{he(l,!0)}),ba(()=>{i.destroyed=!0,i.loading&&(i.loading.abort(),i.loading=null)});var x=on(),O=yt(x);{var P=q=>{var E=on(),H=yt(E);{var N=V=>{var K=wu();ti(K,()=>({...C(h).attributes}));var F=U(K);ns(F,()=>C(h).body,!0),B(K),fe(V,K)},z=V=>{var K=ku();ti(K,()=>({...C(h).attributes})),fe(V,K)};rt(H,V=>{C(h).svg?V(N):V(z,!1)})}fe(q,E)};rt(O,q=>{C(h)&&q(P)})}fe(o,x),lt()}var xu=(o,r)=>r(0),Du=(o,r)=>r(14),Su=(o,r)=>r(16),Tu=(o,r)=>r(23),Eu=(o,r)=>r(40),Ou=ge('<div class="svelte-192yjol"><button type="button"><!></button> <button type="button">14h</button> <button type="button">16h</button> <button type="button">23h</button> <button type="button">40h</button></div>');function Cu(o,r){ut(r,!0);let i=_e(r,"value",7,0);function s(V){i(V),r.onchange&&r.onchange(i())}var l=Ou(),d=U(l);d.__click=[xu,s];let h;var g=U(d);bt(g,{height:"20",icon:"stash:infinity-duotone",width:"20"}),B(d);var x=X(d,2);x.__click=[Du,s];let O;var P=X(x,2);P.__click=[Su,s];let q;var E=X(P,2);E.__click=[Tu,s];let H;var N=X(E,2);N.__click=[Eu,s];let z;B(l),Be((V,K,F,M,D)=>{h=Tt(d,1,"svelte-192yjol",null,h,V),O=Tt(x,1,"svelte-192yjol",null,O,K),q=Tt(P,1,"svelte-192yjol",null,q,F),H=Tt(E,1,"svelte-192yjol",null,H,M),z=Tt(N,1,"svelte-192yjol",null,z,D)},[()=>({selected:i()===0}),()=>({selected:i()===14}),()=>({selected:i()===16}),()=>({selected:i()===23}),()=>({selected:i()===40})]),fe(o,l),lt()}kt(["click"]);var Iu=ge('<div class="hour svelte-z94qzf"></div>'),Pu=ge('<div class="day svelte-z94qzf"><!></div>'),Au=ge('<p class="day svelte-z94qzf"> </p> <!>',1),ju=ge('<div class="day svelte-z94qzf"><div class="hour svelte-z94qzf"></div></div>'),Mu=ge('<figure class="svelte-z94qzf"><div class="labels svelte-z94qzf"><p class="date svelte-z94qzf">Date</p> <p class="hour svelte-z94qzf">0</p> <p class="hour svelte-z94qzf">12</p> <p class="hour svelte-z94qzf">24</p></div> <div class="grid svelte-z94qzf"><!></div> <div class="average grid svelte-z94qzf"><p class="day svelte-z94qzf">Avg</p> <!></div></figure>');function Ku(o,r){ut(r,!0);let i=_e(r,"average",19,()=>[]),s=_e(r,"daily",3,null);_e(r,"days",3,10);function l(E){return E=new Date(E+"T00:00:00"),new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(E)}function d(E,H){return E===0||H[E-1]===0?(1-H[E])*100+"%":0}var h=Mu(),g=X(U(h),2),x=U(g);{var O=E=>{var H=on(),N=yt(H);At(N,17,()=>Object.keys(s()),Pt,(z,V)=>{var K=Au();const F=Ze(()=>s()[C(V)]);var M=yt(K),D=U(M,!0);B(M);var L=X(M,2);At(L,16,()=>({length:24}),Pt,(W,Y,ue)=>{var pe=Pu(),ce=U(pe);{var Se=ye=>{var He=Iu();let Re;Be(Ve=>Re=mn(He,"",Re,Ve),[()=>({"margin-left":d(ue,C(F)),width:100*C(F)[ue]+"%"})]),fe(ye,He)};rt(ce,ye=>{C(F)[ue]!==0&&ye(Se)})}B(pe),fe(W,pe)}),Be(W=>Oe(D,W),[()=>l(C(V))]),fe(z,K)}),fe(E,H)};rt(x,E=>{s()!==null&&E(O)})}B(g);var P=X(g,2),q=X(U(P),2);At(q,16,()=>({length:24}),Pt,(E,H,N)=>{var z=ju(),V=U(z);let K;B(z),Be(F=>K=mn(V,"",K,F),[()=>({opacity:i()[N],width:"100%"})]),fe(E,z)}),B(P),B(h),fe(o,h),lt()}function Fu(o,r,i,s,l){r(parseInt(o.currentTarget.value)),i(o.currentTarget.options[o.currentTarget.selectedIndex].textContent),s(o.currentTarget.options[o.currentTarget.selectedIndex].getAttribute("data-icon")),l.onchange&&l.onchange(r())}var qu=ge('<div class="svelte-avz5er"><!> <p class="svelte-avz5er"> </p> <!> <select class="svelte-avz5er"><!></select></div>');function Ru(o,r){ut(r,!0);let i=_e(r,"icon",7),s=_e(r,"label",7),l=_e(r,"value",7,0);var d=qu(),h=U(d);bt(h,{color:"#161616",height:"20",get icon(){return i()},width:"20"});var g=X(h,2),x=U(g,!0);B(g);var O=X(g,2);bt(O,{color:"#161616",height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"});var P=X(O,2);P.__change=[Fu,l,s,i,r];var q=U(P);Wa(q,()=>r.children??Ga),B(P);var E;Oi(P),B(d),Be(()=>{Oe(x,s()),E!==(E=l())&&(P.value=(P.__value=l())??"",fr(P,l()))}),fe(o,d),lt()}kt(["change"]);var Nu=ge('<p class="svelte-19ed0jw">0</p>'),Bu=ge('<p class="svelte-19ed0jw"> </p>'),Hu=ge('<p class="svelte-19ed0jw"> </p>'),zu=ge('<div class="column svelte-19ed0jw"><p class="svelte-19ed0jw"> </p></div>'),Lu=ge('<div class="line svelte-19ed0jw"></div>'),Uu=ge('<div class="average svelte-19ed0jw"></div>'),Yu=ge('<figure class="svelte-19ed0jw"><div class="labels svelte-19ed0jw"><!></div> <div class="chart svelte-19ed0jw"><div class="labels svelte-19ed0jw"></div> <div class="columns svelte-19ed0jw"><!> <!> <!></div></div></figure>');function Vu(o,r){ut(r,!0);let i=_e(r,"average",3,0),s=_e(r,"daily",19,()=>[]),l=Ze(()=>s().reduce((D,L)=>(D=L.volume>D?L.volume:D,D),0)),d=Ze(()=>{const D=Math.floor(C(l)+C(l)*.1);return[0,Math.round(D/4)*1,Math.round(D/4)*2,Math.round(D/4)*3,D]});function h(D){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(D)}var g=Yu(),x=U(g),O=U(x);{var P=D=>{var L=Nu();fe(D,L)},q=D=>{var L=on(),W=yt(L);At(W,17,()=>C(d),Pt,(Y,ue)=>{var pe=Bu();const ce=Ze(()=>C(ue)===0?"0":C(ue)+" oz");var Se=U(pe,!0);B(pe),Be(()=>Oe(Se,C(ce))),fe(Y,pe)}),fe(D,L)};rt(O,D=>{C(l)===0?D(P):D(q,!1)})}B(x);var E=X(x,2),H=U(E);At(H,21,s,Pt,(D,L)=>{var W=Hu(),Y=U(W,!0);B(W),Be(ue=>Oe(Y,ue),[()=>h(C(L).created)]),fe(D,W)}),B(H);var N=X(H,2),z=U(N);{var V=D=>{var L=on(),W=yt(L);At(W,17,s,Pt,(Y,ue)=>{var pe=zu();let ce;var Se=U(pe),ye=U(Se);B(Se),B(pe),Be(He=>{ce=mn(pe,"",ce,He),Oe(ye,`${C(ue).volume??""} oz`)},[()=>({width:`${C(ue).volume/Math.floor(C(l)+C(l)*.1)*100}%`})]),fe(Y,pe)}),fe(D,L)};rt(z,D=>{C(l)!==0&&D(V)})}var K=X(z,2);At(K,16,()=>({length:4}),Pt,(D,L,W)=>{var Y=Lu();Jt(Y,"data-value",W),mn(Y,"",{},{left:`${25*(W+1)}%`}),fe(D,Y)});var F=X(K,2);{var M=D=>{var L=Uu();let W;Be(Y=>{Jt(L,"data-value",i()),W=mn(L,"",W,Y)},[()=>({left:`${i()/Math.floor(C(l)+C(l)*.1)*100}%`})]),fe(D,L)};rt(F,D=>{i()>0&&D(M)})}B(N),B(E),B(g),fe(o,g),lt()}var Wu=ge('<button class="sun svelte-smok7a" type="button">Sunrise/sunset</button>'),Gu=ge('<!> <p class="svelte-smok7a"> </p>',1),Qu=ge('<option data-icon="material-symbols:mode-heat-outline-rounded" selected>Fasting</option> <option data-icon="material-symbols:water-drop-outline-rounded">Water</option>',1),Ju=ge('<section class="svelte-smok7a"><!> <footer class="svelte-smok7a"><div class="daynight svelte-smok7a"><!></div> <!></footer></section>');function Ui(o,r){ut(r,!0);let i=_e(r,"activity",3,null),s=_e(r,"days",3,10),l=_e(r,"water",3,null),d=ze(0);function h(K){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(K)}var g=Ju(),x=U(g);{var O=K=>{const F=Ze(()=>i()&&i().average?i().average:[]),M=Ze(()=>i()&&i().daily?i().daily:[]);Ku(K,{get average(){return C(F)},get daily(){return C(M)},get days(){return s()}})},P=(K,F)=>{{var M=D=>{const L=Ze(()=>l()&&l().average?l().average:null),W=Ze(()=>l()&&l().daily?l().daily:null);Vu(D,{get average(){return C(L)},get daily(){return C(W)}})};rt(K,D=>{C(d)===1&&D(M)},F)}};rt(x,K=>{C(d)===0?K(O):K(P,!1)})}var q=X(x,2),E=U(q),H=U(E);{var N=K=>{var F=Wu();F.__click=function(...M){var D;(D=r.onsun)==null||D.apply(this,M)},fe(K,F)},z=K=>{var F=Gu(),M=yt(F);const D=Ze(()=>r.sun&&r.sun.icon?r.sun.icon:null);bt(M,{height:"16",get icon(){return C(D)},width:"16"});var L=X(M,2),W=U(L,!0);B(L),Be(Y=>Oe(W,Y),[()=>r.sun&&r.sun.timing?h(r.sun.timing):""]),fe(K,F)};rt(H,K=>{r.sun===null?K(N):K(z,!1)})}B(E);var V=X(E,2);Ru(V,{icon:"material-symbols:mode-heat-outline-rounded",label:"Fasting",onchange:K=>he(d,K,!0),children:(K,F)=>{var M=Qu(),D=yt(M);D.value=D.__value="0";var L=X(D,2);L.value=L.__value="1",fe(K,M)},$$slots:{default:!0}}),B(q),B(g),fe(o,g),lt()}kt(["click"]);var Xu=ge('<article class="svelte-10tx4k0"><p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">hrs</span></p> <p class="colon svelte-10tx4k0">:</p> <p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">min</span></p> <p class="colon svelte-10tx4k0">:</p> <p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">sec</span></p></article>');function Zu(o,r){ut(r,!0);let i=_e(r,"duration",3,0),s=_e(r,"now",3,null),l=_e(r,"started",3,null),d=Ze(()=>{if(l()===null)return{hours:0,minutes:"00",seconds:"00"};let V=Math.floor((s()-l().getTime())/1e3);if(i()!==0){const K=new Date(l().getTime()+i()*36e5);V=Math.floor((K.getTime()-s())/1e3)}return{hours:Math.floor(V/3600).toString(10).padStart(2,"0"),minutes:Math.floor(V%3600/60).toString(10).padStart(2,"0"),seconds:(V%60).toString(10).padStart(2,"0")}});var h=Xu(),g=U(h),x=U(g),O=U(x,!0);B(x),Gr(2),B(g);var P=X(g,4),q=U(P),E=U(q,!0);B(q),Gr(2),B(P);var H=X(P,4),N=U(H),z=U(N,!0);B(N),Gr(2),B(H),B(h),Be(()=>{Oe(O,C(d).hours),Oe(E,C(d).minutes),Oe(z,C(d).seconds)}),fe(o,h),lt()}function $u(o,r,i){r()===null?i.onstart&&i.onstart():i.onend&&i.onend()}var el=ge('<p class="svelte-cj8gv0">You are not fasting.</p>'),tl=ge('<p class="svelte-cj8gv0">You are fasting.</p> <!> <!> <p class="started svelte-cj8gv0"> </p>',1),nl=ge('<section class="svelte-cj8gv0"><header class="svelte-cj8gv0"><h3 class="svelte-cj8gv0">Fasting</h3> <button type="button" class="svelte-cj8gv0"><!></button></header> <article class="svelte-cj8gv0"><!> <button class="primary svelte-cj8gv0" type="button"> </button></article> <div class="graph svelte-cj8gv0"><!></div> <footer class="svelte-cj8gv0"><button class="hunger secondary svelte-cj8gv0" type="button"><!> <span> </span></button> <button class="water secondary svelte-cj8gv0" type="button"><!> <span> </span></button></footer></section>');function rl(o,r){ut(r,!0);let i=_e(r,"activity",3,null),s=_e(r,"duration",3,0),l=_e(r,"hunger",3,5),d=_e(r,"levels",19,()=>[]),h=_e(r,"now",3,null),g=_e(r,"started",3,null),x=_e(r,"sun",3,null),O=_e(r,"volume",3,null),P=_e(r,"water",3,0);function q(me){return d().find(Ne=>Ne.value===me).label}function E(me){return me===null?null:new Intl.DateTimeFormat(navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(me)}var H=nl(),N=U(H),z=X(U(N),2);z.__click=function(...me){var Ae;(Ae=r.onsettings)==null||Ae.apply(this,me)};var V=U(z);bt(V,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),B(z),B(N);var K=X(N,2),F=U(K);{var M=me=>{var Ae=el();fe(me,Ae)},D=me=>{var Ae=tl(),Ne=X(yt(Ae),2);Zu(Ne,{get duration(){return s()},get now(){return h()},get started(){return g()}});var ee=X(Ne,2);Cu(ee,{get onchange(){return r.onduration},get value(){return s()}});var se=X(ee,2),le=U(se);B(se),Be(je=>Oe(le,`Started ${je??""}`),[()=>E(g())]),fe(me,Ae)};rt(F,me=>{g()===null?me(M):me(D,!1)})}var L=X(F,2);L.__click=[$u,g,r];var W=U(L);B(L),B(K);var Y=X(K,2),ue=U(Y);Ui(ue,{get activity(){return i()},days:7,get onsun(){return r.onsun},get sun(){return x()},get water(){return O()}}),B(Y);var pe=X(Y,2),ce=U(pe);ce.__click=function(...me){var Ae;(Ae=r.onhunger)==null||Ae.apply(this,me)};var Se=U(ce);bt(Se,{height:"20",icon:"material-symbols:fork-spoon-rounded",width:"20"});var ye=X(Se,2),He=U(ye,!0);B(ye),B(ce);var Re=X(ce,2);Re.__click=function(...me){var Ae;(Ae=r.onwater)==null||Ae.apply(this,me)};var Ve=U(Re);bt(Ve,{height:"20",icon:"material-symbols:water-drop-outline-rounded",width:"20"});var Qe=X(Ve,2),dt=U(Qe);B(Qe),B(Re),B(pe),B(H),Be(me=>{Oe(W,`${g()===null?"Start":"Stop"} fasting`),Oe(He,me),Oe(dt,`${P()??""} oz`)},[()=>q(l())]),fe(o,H),lt()}kt(["click"]);function ol(o,r,i,s){const l=new Date(parseInt(o.currentTarget.getAttribute("data-year")),parseInt(o.currentTarget.getAttribute("data-month")),parseInt(o.currentTarget.getAttribute("data-date")));l.getMonth()!==r().getMonth()&&r(new Date(l.getTime())),i(new Date(l.getTime())),s.onchange&&s.onchange(i())}var il=ge('<button type="button"> </button>'),al=ge('<section><header class="svelte-1ll096s"><h3 class="svelte-1ll096s"> </h3> <button type="button" class="svelte-1ll096s"><!></button> <button type="button" class="svelte-1ll096s"><!></button></header> <article class="svelte-1ll096s"><p class="svelte-1ll096s">Sun</p> <p class="svelte-1ll096s">Mon</p> <p class="svelte-1ll096s">Tue</p> <p class="svelte-1ll096s">Wed</p> <p class="svelte-1ll096s">Thu</p> <p class="svelte-1ll096s">Fri</p> <p class="svelte-1ll096s">Sat</p></article> <article class="svelte-1ll096s"></article></section>');function sl(o,r){ut(r,!0);let i=_e(r,"display",23,()=>new Date),s=_e(r,"value",23,()=>new Date),l=Ze(()=>new Intl.DateTimeFormat(navigator.language,{month:"long",year:"numeric"}).format(i())),d=Ze(()=>{const K=[],F=new Date,M=new Date(i().getFullYear(),i().getMonth(),1);M.setDate(M.getDate()-M.getDay());for(let D=0;D<42;D++){const L={date:M.getDate(),month:M.getMonth(),year:M.getFullYear(),outside:!0,today:!1,selected:!1,after:!1};M.getFullYear()===i().getFullYear()&&M.getMonth()===i().getMonth()&&(L.outside=!1),M.getTime()>Date.now()&&(L.after=!0),M.getFullYear()===F.getFullYear()&&M.getMonth()===F.getMonth()&&M.getDate()===F.getDate()&&(L.today=!0),M.getFullYear()===s().getFullYear()&&M.getMonth()===s().getMonth()&&M.getDate()===s().getDate()&&(L.selected=!0),M.setDate(M.getDate()+1),K.push(L)}return K});function h(){let K=i().getMonth(),F=i().getFullYear();F=K===0?F-1:F,K=K===0?11:K-1,i(new Date(F,K,i().getDate()))}function g(){let K=i().getMonth(),F=i().getFullYear();F=K===11?F+1:F,K=(K+1)%12,i(new Date(F,K,i().getDate()))}var x=al(),O=U(x),P=U(O),q=U(P,!0);B(P);var E=X(P,2);E.__click=h;var H=U(E);bt(H,{height:"24",icon:"material-symbols:navigate-before",width:"24"}),B(E);var N=X(E,2);N.__click=g;var z=U(N);bt(z,{height:"24",icon:"material-symbols:navigate-next",width:"24"}),B(N),B(O);var V=X(O,4);At(V,21,()=>C(d),Pt,(K,F)=>{var M=il();M.__click=[ol,i,s,r];let D;var L=U(M,!0);B(M),Be(W=>{Jt(M,"data-year",C(F).year),Jt(M,"data-month",C(F).month),Jt(M,"data-date",C(F).date),M.disabled=C(F).after,D=Tt(M,1,"svelte-1ll096s",null,D,W),Oe(L,C(F).date)},[()=>({outside:C(F).outside,today:C(F).today,selected:C(F).selected})]),fe(K,M)}),B(V),B(x),Be(()=>Oe(q,C(l))),fe(o,x),lt()}kt(["click"]);function ul(o,r,i){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===12?s.setHours(23):s.setHours(s.getHours()-1):s.getHours()===0?s.setHours(11):s.setHours(s.getHours()-1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function ll(o,r,i){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===23?s.setHours(12):s.setHours(s.getHours()+1):s.getHours()===11?s.setHours(0):s.setHours(s.getHours()+1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function cl(o,r,i){const s=new Date(r().getTime());s.getHours()>=12&&s.setHours(s.getHours()-12),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function fl(o,r,i){const s=new Date(r().getTime());s.getHours()<12&&s.setHours(s.getHours()+12),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function dl(o,r,i){const s=new Date(r().getTime());s.getMinutes()===0?s.setMinutes(59):s.setMinutes(s.getMinutes()-1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function hl(o,r,i){const s=new Date(r().getTime());s.getMinutes()===59?s.setMinutes(0):s.setMinutes(s.getMinutes()+1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}var vl=ge('<article class="svelte-1bevvpj"><div class="time svelte-1bevvpj"><div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div> <p class="svelte-1bevvpj">:</p> <div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div></div> <div class="meridian svelte-1bevvpj"><button type="button">AM</button> <button type="button">PM</button></div></article>');function pl(o,r){ut(r,!0);let i=_e(r,"value",23,()=>new Date),s=Ze(()=>i().getHours()%12||12),l=Ze(()=>i().getMinutes().toString(10).padStart(2,"0")),d=Ze(()=>i().getHours()>=12?"PM":"AM");var h=vl(),g=U(h),x=U(g),O=U(x);O.__click=[ll,i,r];var P=U(O);bt(P,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),B(O);var q=X(O,2),E=U(q,!0);B(q);var H=X(q,2);H.__click=[ul,i,r];var N=U(H);bt(N,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),B(H),B(x);var z=X(x,4),V=U(z);V.__click=[hl,i,r];var K=U(V);bt(K,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),B(V);var F=X(V,2),M=U(F,!0);B(F);var D=X(F,2);D.__click=[dl,i,r];var L=U(D);bt(L,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),B(D),B(z),B(g);var W=X(g,2),Y=U(W);Y.__click=[cl,i,r];let ue;var pe=X(Y,2);pe.__click=[fl,i,r];let ce;B(W),B(h),Be((Se,ye)=>{Oe(E,C(s)),Oe(M,C(l)),ue=Tt(Y,1,"svelte-1bevvpj",null,ue,Se),ce=Tt(pe,1,"svelte-1bevvpj",null,ce,ye)},[()=>({selected:C(d)==="AM"}),()=>({selected:C(d)==="PM"})]),fe(o,h),lt()}kt(["click"]);function gl(o,r){he(r,"calendar")}function ml(o,r){he(r,"clock")}var yl=ge('<article class="svelte-8yzu2w"><header class="svelte-8yzu2w"><button type="button"><p class="svelte-8yzu2w"> </p> <p class="svelte-8yzu2w"> </p></button> <button type="button"><p class="svelte-8yzu2w"> </p></button></header> <!></article>');function bl(o,r){ut(r,!0);let i=_e(r,"value",23,()=>new Date),s=ze("calendar");function l(Y){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(Y)}function d(Y){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(Y)}function h(Y){Y.setHours(i().getHours()),Y.setMinutes(i().getMinutes()),Y.setSeconds(i().getSeconds()),i(new Date(Y.getTime())),r.onchange&&r.onchange(i())}function g(Y){Y.setFullYear(i().getFullYear()),Y.getMonth(i().getMonth()),Y.getDate(i().getDate()),i(new Date(Y.getTime())),r.onchange&&r.onchange(i())}var x=yl(),O=U(x),P=U(O);P.__click=[gl,s];let q;var E=U(P),H=U(E,!0);B(E);var N=X(E,2),z=U(N,!0);B(N),B(P);var V=X(P,2);V.__click=[ml,s];let K;var F=U(V),M=U(F,!0);B(F),B(V),B(O);var D=X(O,2);{var L=Y=>{sl(Y,{onchange:h,get value(){return i()}})},W=Y=>{pl(Y,{onchange:g,get value(){return i()}})};rt(D,Y=>{C(s)===null||C(s)==="calendar"?Y(L):Y(W,!1)})}B(x),Be((Y,ue,pe,ce)=>{q=Tt(P,1,"svelte-8yzu2w",null,q,Y),Oe(H,r.label),Oe(z,ue),K=Tt(V,1,"svelte-8yzu2w",null,K,pe),Oe(M,ce)},[()=>({selected:C(s)==="calendar"}),()=>l(i()),()=>({selected:C(s)==="clock"}),()=>d(i())]),fe(o,x),lt()}kt(["click"]);function _l(o,r,i,s){r(),i(null),s.oncancel&&s.oncancel()}function wl(o,r,i){r.ondelete&&r.ondelete(i().id)}function kl(o,r){const i=o.currentTarget.value.trim().length===0?null:o.currentTarget.value;r({...r(),notes:i})}function xl(o,r,i){r.onsave&&r.onsave(i())}var Dl=ge('<dialog class="svelte-13glclx"><h3 class="svelte-13glclx"> </h3> <!> <textarea placeholder="Notes" class="svelte-13glclx"></textarea> <footer class="svelte-13glclx"><button class="delete svelte-13glclx" type="button">Delete</button> <button class="cancel svelte-13glclx" type="button">Cancel</button> <button type="button" class="svelte-13glclx">Save</button></footer></dialog>');function Sl(o,r){ut(r,!0);let i=_e(r,"field",3,"started"),s=_e(r,"item",7,null),l=_e(r,"label",3,"Started"),d=_e(r,"title",3,"Edit Fast Start"),h=ze(void 0);function g(D){const L={...s()};L[i()]=new Date(D.getTime()),s({...L})}function x(){C(h).close()}function O(){C(h).showModal()}var P=Dl(),q=U(P),E=U(q,!0);B(q);var H=X(q,2);const N=Ze(()=>s()&&s().id&&s().id!==null?s()[i()]:new Date);bl(H,{get label(){return l()},onchange:g,get value(){return C(N)}});var z=X(H,2);Za(z),z.__input=[kl,s];var V=X(z,2),K=U(V);K.__click=[wl,r,s];var F=X(K,2);F.__click=[_l,x,s,r];var M=X(F,2);return M.__click=[xl,r,s],B(V),B(P),Qt(P,D=>he(h,D),()=>C(h)),Be(()=>{Oe(E,d()),us(z,s()&&s().id&&s().id!==null?s().notes:"")}),fe(o,P),lt({close:x,showModal:O})}kt(["input","click"]);var Tl=ge('<article class="svelte-1vxkmhw"><p class="svelte-1vxkmhw">Your fasting history<br/>will be displayed here.</p></article>'),El=ge('<li class="header svelte-1vxkmhw"><p class="svelte-1vxkmhw"> </p></li>'),Ol=(o,r,i)=>r(C(i).type,C(i).id),Cl=ge('<p class="svelte-1vxkmhw">Started Fast</p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Il=ge('<p class="svelte-1vxkmhw">Water</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Pl=ge('<p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Al=ge('<p class="svelte-1vxkmhw">Ended Fast</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),jl=ge('<li class="svelte-1vxkmhw"><button type="button" class="svelte-1vxkmhw"><!></button></li>'),Ml=ge('<ul class="svelte-1vxkmhw"></ul>');function Kl(o,r){ut(r,!0);let i=_e(r,"items",19,()=>[]);function s(E){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",year:"numeric"}).format(E)}function l(E,H){const N=H.getTime()-E.getTime(),z=Math.floor(N/1e3),V=Math.floor(z/3600),K=Math.floor(z%3600/60);return new Intl.DurationFormat(navigator.language,{style:"short",units:["hour","minute"]}).format({hours:V,minutes:K})}function d(E){return new Intl.DateTimeFormat(navigator.language,{weekday:"long",month:"short",day:"numeric"}).format(E)}function h(E){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(E)}function g(E,H){r.onchange&&r.onchange(E,H)}var x=on(),O=yt(x);{var P=E=>{var H=Tl();fe(E,H)},q=E=>{var H=Ml();At(H,21,i,Pt,(N,z)=>{var V=on(),K=yt(V);{var F=D=>{var L=El(),W=U(L),Y=U(W,!0);B(W),B(L),Be(ue=>Oe(Y,ue),[()=>d(C(z).timed)]),fe(D,L)},M=D=>{var L=jl(),W=U(L);W.__click=[Ol,g,z];var Y=U(W);{var ue=ce=>{var Se=Cl(),ye=X(yt(Se),4),He=U(ye,!0);B(ye);var Re=X(ye,2),Ve=U(Re,!0);B(Re),Be((Qe,dt)=>{Oe(He,Qe),Oe(Ve,dt)},[()=>s(C(z).timed),()=>h(C(z).timed)]),fe(ce,Se)},pe=(ce,Se)=>{{var ye=Re=>{var Ve=Il(),Qe=X(yt(Ve),2),dt=U(Qe);B(Qe);var me=X(Qe,2),Ae=U(me,!0);B(me);var Ne=X(me,2),ee=U(Ne,!0);B(Ne),Be((se,le)=>{Oe(dt,`${C(z).volume??""} oz`),Oe(Ae,se),Oe(ee,le)},[()=>s(C(z).timed),()=>h(C(z).timed)]),fe(Re,Ve)},He=(Re,Ve)=>{{var Qe=me=>{var Ae=Pl(),Ne=yt(Ae),ee=U(Ne,!0);B(Ne);var se=X(Ne,4),le=U(se,!0);B(se);var je=X(se,2),De=U(je,!0);B(je),Be((Me,Ce)=>{Oe(ee,C(z).level),Oe(le,Me),Oe(De,Ce)},[()=>s(C(z).timed),()=>h(C(z).timed)]),fe(me,Ae)},dt=(me,Ae)=>{{var Ne=ee=>{var se=Al(),le=X(yt(se),2),je=U(le,!0);B(le);var De=X(le,2),Me=U(De,!0);B(De);var Ce=X(De,2),Le=U(Ce,!0);B(Ce),Be((re,it,ot)=>{Oe(je,re),Oe(Me,it),Oe(Le,ot)},[()=>l(C(z).started,C(z).ended),()=>s(C(z).timed),()=>h(C(z).timed)]),fe(ee,se)};rt(me,ee=>{C(z).type==="end"&&ee(Ne)},Ae)}};rt(Re,me=>{C(z).type==="hunger"?me(Qe):me(dt,!1)},Ve)}};rt(ce,Re=>{C(z).type==="water"?Re(ye):Re(He,!1)},Se)}};rt(Y,ce=>{C(z).type==="start"?ce(ue):ce(pe,!1)})}B(W),B(L),fe(D,L)};rt(K,D=>{C(z).type==="header"?D(F):D(M,!1)})}fe(N,V)}),B(H),fe(E,H)};rt(O,E=>{i().length===0?E(P):E(q,!1)})}fe(o,x),lt()}kt(["click"]);var Fl=ge('<section class="svelte-1moll0f"><header class="svelte-1moll0f"><h3 class="svelte-1moll0f">Hours</h3></header> <div class="svelte-1moll0f"><!></div> <article class="svelte-1moll0f"><!></article></section>');function ql(o,r){let i=_e(r,"activity",3,null),s=_e(r,"history",19,()=>[]);_e(r,"levels",19,()=>[]);let l=_e(r,"sun",3,null);var d=Fl(),h=X(U(d),2),g=U(h);Ui(g,{get activity(){return i()},days:7,get onsun(){return r.onsun},get sun(){return l()},get water(){return r.volume}}),B(h);var x=X(h,2),O=U(x);Kl(O,{get items(){return s()},get onchange(){return r.onchange}}),B(x),B(d),fe(o,d)}function Rl(o,r,i,s){r(),i(null),s.oncancel&&s.oncancel()}function Nl(o,r,i){r.ondelete&&r.ondelete(i().id)}function Bl(o,r,i){r()===null&&r({...r(),level:5}),i.onsave&&i.onsave(r())}var Hl=(o,r,i)=>r(C(i).value),zl=ge('<li class="svelte-1gyfgoj"><button type="button" class="svelte-1gyfgoj"><p class="svelte-1gyfgoj"> </p> <!></button></li>'),Ll=ge('<button class="delete svelte-1gyfgoj" type="button">Delete</button>'),Ul=ge('<dialog class="svelte-1gyfgoj"><h3 class="svelte-1gyfgoj"> </h3> <ul class="svelte-1gyfgoj"></ul> <footer class="svelte-1gyfgoj"><!> <button class="cancel svelte-1gyfgoj" type="button">Cancel</button> <button type="button" class="svelte-1gyfgoj">Save</button></footer></dialog>');function Yl(o,r){ut(r,!0);let i=_e(r,"item",7,null),s=_e(r,"levels",19,()=>[]);_e(r,"units",3,"oz");let l=ze(void 0),d=Ze(()=>i()&&i().level&&i().level!==null?i().level:5);function h(F){const M=F;i({...i(),level:M})}function g(){C(l).close()}function x(){C(l).showModal()}var O=Ul(),P=U(O),q=U(P);B(P);var E=X(P,2);At(E,21,s,Pt,(F,M)=>{var D=zl();const L=Ze(()=>C(M).value===C(d)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var W=U(D);W.__click=[Hl,h,M];var Y=U(W),ue=U(Y,!0);B(Y);var pe=X(Y,2);const ce=Ze(()=>C(M).value===C(d)?"#0284c7":"#161616");bt(pe,{get color(){return C(ce)},height:"20",get icon(){return C(L)},width:"20"}),B(W),B(D),Be(()=>Oe(ue,C(M).label)),fe(F,D)}),B(E);var H=X(E,2),N=U(H);{var z=F=>{var M=Ll();M.__click=[Nl,r,i],fe(F,M)};rt(N,F=>{i()&&i().id&&i().id!==null&&F(z)})}var V=X(N,2);V.__click=[Rl,g,i,r];var K=X(V,2);return K.__click=[Bl,i,r],B(H),B(O),Qt(O,F=>he(l,F),()=>C(l)),Be(()=>Oe(q,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Hunger`)),fe(o,O),lt({close:g,showModal:x})}kt(["click"]);function Vl(o,r,i){r()!==0&&(r(0),i.onchange&&i.onchange(r()))}function Wl(o,r,i){r()!==1&&(r(1),i.onchange&&i.onchange(r()))}var Gl=ge('<ul class="svelte-tu3q0a"><li><button type="button">Fasting</button></li> <li><button type="button">Hours</button></li></ul>');function Ql(o,r){ut(r,!0);let i=_e(r,"selected",7,0);var s=Gl(),l=U(s),d=U(l);let h;d.__click=[Vl,i,r],B(l);var g=X(l,2),x=U(g);let O;x.__click=[Wl,i,r],B(g),B(s),Be((P,q)=>{h=Tt(d,1,"fasting svelte-tu3q0a",null,h,P),O=Tt(x,1,"hours svelte-tu3q0a",null,O,q)},[()=>({selected:i()===0}),()=>({selected:i()===1})]),fe(o,s),lt()}kt(["click"]);function Jl(o,r){r()}var Xl=ge('<dialog class="svelte-msa23r"><h3 class="svelte-msa23r">Settings</h3> <article class="svelte-msa23r"><p class="svelte-msa23r">Settings.</p></article> <footer class="svelte-msa23r"><button type="button" class="svelte-msa23r">Done</button></footer></dialog>');function Zl(o,r){ut(r,!0);let i=ze(void 0);function s(){C(i).close()}function l(){C(i).showModal()}var d=Xl(),h=X(U(d),4),g=U(h);return g.__click=[Jl,s],B(h),B(d),Qt(d,x=>he(i,x),()=>C(i)),fe(o,d),lt({close:s,showModal:l})}kt(["click"]);function $l(o,r,i,s){r(),i(null),s.oncancel&&s.oncancel()}function ec(o,r,i){r.ondelete&&r.ondelete(i().id)}function tc(o,r,i){r()===null&&r({...r(),volume:8}),i.onsave&&i.onsave(r())}var nc=(o,r,i)=>r(C(i).value),rc=ge('<li class="svelte-1sbih0z"><button type="button" class="svelte-1sbih0z"><p class="svelte-1sbih0z"> </p> <p class="svelte-1sbih0z"> </p> <!></button></li>'),oc=ge('<button class="delete svelte-1sbih0z" type="button">Delete</button>'),ic=ge('<dialog class="svelte-1sbih0z"><h3 class="svelte-1sbih0z"> </h3> <ul class="svelte-1sbih0z"></ul> <footer class="svelte-1sbih0z"><!> <button class="cancel svelte-1sbih0z" type="button">Cancel</button> <button type="button" class="svelte-1sbih0z">Save</button></footer></dialog>');function ac(o,r){ut(r,!0);let i=_e(r,"item",7,null),s=_e(r,"units",3,"oz"),l=ze(void 0),d=ro([{value:8,label:"Cup"},{value:12,label:"Can"},{value:16,label:"Bottle"},{value:20,label:"Medium"},{value:30,label:"Gatorade"},{value:32,label:"Big Q"},{value:44,label:"QT Large"},{value:52,label:"Extra Large"}]),h=Ze(()=>i()&&i().volume&&i().volume!==null?i().volume:8);function g(M){const D=M;i({...i(),volume:D})}function x(){C(l).close()}function O(){C(l).showModal()}var P=ic(),q=U(P),E=U(q);B(q);var H=X(q,2);At(H,21,()=>d,Pt,(M,D)=>{var L=rc();const W=Ze(()=>C(D).value===C(h)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var Y=U(L);Y.__click=[nc,g,D];var ue=U(Y),pe=U(ue,!0);B(ue);var ce=X(ue,2),Se=U(ce);B(ce);var ye=X(ce,2);const He=Ze(()=>C(D).value===C(h)?"#0284c7":"#161616");bt(ye,{get color(){return C(He)},height:"20",get icon(){return C(W)},width:"20"}),B(Y),B(L),Be(()=>{Oe(pe,C(D).label),Oe(Se,`${C(D).value??""} ${s()??""}`)}),fe(M,L)}),B(H);var N=X(H,2),z=U(N);{var V=M=>{var D=oc();D.__click=[ec,r,i],fe(M,D)};rt(z,M=>{i()&&i().id&&i().id!==null&&M(V)})}var K=X(z,2);K.__click=[$l,x,i,r];var F=X(K,2);return F.__click=[tc,i,r],B(N),B(P),Qt(P,M=>he(l,M),()=>C(l)),Be(()=>Oe(E,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Water`)),fe(o,P),lt({close:x,showModal:O})}kt(["click"]);var sc=ge('<main class="svelte-odvko0"><header class="svelte-odvko0"><span></span> <!> <button type="button" class="svelte-odvko0"><!></button></header> <section class="svelte-odvko0"><article class="svelte-odvko0"><!></article> <article class="svelte-odvko0"><!></article></section></main> <!> <!> <!> <!>',1);function kc(o,r){ut(r,!0);const i=new ps,s=ys;let l=0,d=ze(null),h=ze(0),g=ze(ro([])),x=ze(void 0),O=ze("started"),P=ze(null),q=ze("Started"),E=ze("Edit Fast Started"),H=ze(void 0),N=ze(null),z=ze(5),V=ro([{value:1,label:"Starving"},{value:2,label:"Very hungry"},{value:3,label:"Pretty hungry"},{value:4,label:"Snacky"},{value:5,label:"Satisfied"},{value:6,label:"Slightly full"},{value:7,label:"Uncomfortable"},{value:8,label:"Stuffed"},{value:9,label:"Stomach aches"},{value:10,label:"Sick"}]),K=ze(null),F=ze(0),M=ze(void 0),D=ze(null),L=ze(null),W=ze(null),Y=ze(0),ue=ze(void 0),pe=ze(null);gi(()=>{let oe=window.localStorage.getItem("fh_screen");he(F,oe===null?0:parseInt(oe),!0);let de=window.localStorage.getItem("fh_duration");he(h,de===null?0:parseInt(de),!0);const ve=window.localStorage.getItem("fh_latitude");ve!==null&&ve!=="DENIED"&&Ve(),setInterval(()=>{if(l===60){Se();const Ye=window.localStorage.getItem("fh_latitude");Ye!==null&&Ye!=="DENIED"&&Ve(),l=0}else l=l+1;C(D)!==null&&he(K,Date.now(),!0)},1e3),Re(),Se(),He(),Qe(),ye()});function ce(oe){const de=oe.getFullYear(),ve=String(oe.getMonth()+1).padStart(2,"0"),Ye=String(oe.getDate()).padStart(2,"0");return`${de}-${ve}-${Ye}`}function Se(oe=7){i.browseHistory().then(de=>{const ve={},Ye=new Date,xe=new Date(Ye.getFullYear(),Ye.getMonth(),Ye.getDate()),Ie=new Date(xe);if(Ie.setDate(xe.getDate()-(oe-1)),!Array.isArray(de)||de.length===0){const We=new Date(Ie);for(;We<=xe;){const Xe=ce(We);ve[Xe]=Array(24).fill(0),We.setDate(We.getDate()+1)}}else{for(const Xe of de){const Ht=new Date(Xe.started),ne=Xe.ended?new Date(Xe.ended):new Date,an=new Date(Ht.getTime());an.setSeconds(0,0);const _n=new Date(ne.getTime());_n.setSeconds(0,0);let Ct=new Date(an);for(;Ct<_n;){const sn=ce(Ct),un=new Date(Ct.getFullYear(),Ct.getMonth(),Ct.getDate());if(un>=Ie&&un<=xe){const mr=Ct.getHours();ve[sn]||(ve[sn]=Array(24).fill(0)),ve[sn][mr]+=1}Ct.setMinutes(Ct.getMinutes()+1)}}for(const Xe in ve)ve[Xe]=ve[Xe].map(Ht=>+(Math.min(Ht,60)/60).toFixed(6));const We=new Date(Ie);for(;We<=xe;){const Xe=ce(We);ve[Xe]||(ve[Xe]=Array(24).fill(0)),We.setDate(We.getDate()+1)}}const qe=Object.keys(ve).sort((We,Xe)=>Xe.localeCompare(We)),Ke={};for(const We of qe)Ke[We]=ve[We];const $e=Array(24).fill(0);for(const We of Array(24).keys())for(const Xe of qe)$e[We]+=Ke[Xe][We];const ae=$e.map(We=>+(We/oe).toFixed(6));he(d,{daily:Ke,average:ae},!0)})}function ye(){i.browseHistory().then(oe=>{let de=null,ve=structuredClone(oe);ve.forEach(xe=>{xe.type="start",xe.timed=new Date(xe.started.getTime())});let Ye=structuredClone(oe);Ye=Ye.filter(xe=>xe.ended!==null),Ye.forEach(xe=>{xe.type="end",xe.timed=new Date(xe.ended.getTime())}),ve=ve.concat(Ye),de=[...ve],i.browseHunger().then(xe=>(xe=xe.map(Ie=>{const qe=V.find(Ke=>Ke.value===Ie.level);return Ie.level=qe.label,Ie.timed=new Date(Ie.created.getTime()),Ie}),de=de.concat(xe),i.browseWater())).then(xe=>{xe=xe.map(qe=>(qe.timed=new Date(qe.created.getTime()),qe)),de=de.concat(xe),de.sort((qe,Ke)=>qe.timed.getTime()<Ke.timed.getTime()?1:qe.timed.getTime()>Ke.timed.getTime()?-1:0);const Ie=[];for(let qe=0;qe<de.length;qe++){const Ke=new Date(de[qe].timed.getTime());Ke.setHours(23),Ke.setMinutes(59),Ke.setSeconds(59),Ke.setMilliseconds(999),Ie.length===0?Ie.push({type:"header",timed:Ke}):(Ie[Ie.length-1].timed.getDate()!==de[qe].timed.getDate()||Ie[Ie.length-1].timed.getMonth()!==de[qe].timed.getMonth()||Ie[Ie.length-1].timed.getFullYear()!==de[qe].timed.getFullYear())&&Ie.push({type:"header",timed:Ke})}de=de.concat(Ie),de.sort((qe,Ke)=>qe.timed.getTime()<Ke.timed.getTime()?1:qe.timed.getTime()>Ke.timed.getTime()?-1:0),he(g,[...de],!0)})})}function He(){i.browseHunger(!0).then(oe=>{if(oe===null)he(z,5);else{const de=new Date,ve=new Date(oe.created);de.getFullYear()===ve.getFullYear()&&de.getMonth()===ve.getMonth()&&de.getDate()===ve.getDate()?he(z,oe.level,!0):he(z,5)}})}function Re(){i.browseHistory().then(oe=>{oe.length===0&&(he(D,null),he(K,null)),oe.sort((de,ve)=>de.started.getTime()>ve.started.getTime()?-1:de.started.getTime()<ve.started.getTime()?1:0),oe[0].ended===null&&(he(D,new Date(oe[0].started.getTime()),!0),he(K,Date.now(),!0))})}function Ve(){const oe=parseFloat(window.localStorage.getItem("fh_latitude")),de=parseFloat(window.localStorage.getItem("fh_longitude")),ve=new Date;let Ye=null,xe=s.getTimes(ve,oe,de),Ie=null;if(Date.now()<xe.sunrise.getTime())Ie=new Date(xe.sunrise.getTime()),Ye="material-symbols:wb-sunny-outline-rounded";else if(Date.now()>xe.sunrise.getTime()&&Date.now()<xe.sunset.getTime())Ie=new Date(xe.sunset.getTime()),Ye="material-symbols:moon-stars-outline-rounded";else{const qe=new Date;qe.setDate(ve.getDate()+1),xe=s.getTimes(qe,oe,de),Ie=new Date(xe.sunrise.getTime()),Ye="material-symbols:wb-sunny-outline-rounded"}he(L,{icon:Ye,timing:Ie},!0)}function Qe(){i.browseWater(!0).then(oe=>{const de=oe.reduce((Ke,$e)=>Ke+$e.volume,0);he(Y,de,!0);const ve=new Date;ve.setHours(0,0,0,0);const Ye={};for(const{created:Ke,volume:$e}of oe){const ae=new Date(Ke).toISOString().slice(0,10);Ye[ae]=(Ye[ae]||0)+$e}const xe=[];for(let Ke=0;Ke<7;Ke++){const $e=new Date(ve);$e.setDate(ve.getDate()-Ke);const ae=$e.toISOString().slice(0,10);xe.push({created:new Date($e.getTime()),volume:Ye[ae]||0})}const qe=xe.reduce((Ke,{volume:$e})=>Ke+$e,0)/xe.length;he(W,{average:qe,daily:[...xe]},!0)})}function dt(oe){he(h,oe,!0),window.localStorage.setItem("fh_duration",C(h))}function me(){he(D,null),he(K,null),i.browseHistoryByEnd().then(oe=>(oe.ended=new Date,i.editHistory(oe))).then(()=>{Re(),Se(),ye()})}function Ae(){C(H).showModal()}function Ne(){i.addHistory().then(()=>{Re(),Se(),ye()})}function ee(){C(ue).showModal()}function se(oe){C(D)!==null&&C(P).started.getTime()===C(D).getTime()&&(he(D,null),he(K,null)),i.deleteHistory(oe).then(()=>{C(x).close(),he(P,null),Re(),Se(),ye()})}function le(oe){i.editHistory(oe).then(()=>{C(x).close(),he(P,null),Re(),Se(),ye()})}function je(oe,de){oe==="start"?(he(O,"started"),he(q,"Started"),he(E,"Edit Fast Started"),i.readHistory(de).then(ve=>{he(P,{...ve},!0),C(x).showModal()})):oe==="end"?(he(O,"ended"),he(q,"Ended"),he(E,"Edit Fast Ended"),i.readHistory(de).then(ve=>{he(P,{...ve},!0),C(x).showModal()})):oe==="water"?i.readWater(de).then(ve=>{he(pe,{...ve},!0),C(ue).showModal()}):oe==="hunger"&&i.readHunger(de).then(ve=>{he(N,{...ve},!0),C(H).showModal()})}function De(oe){i.deleteHunger(oe).then(()=>{C(H).close(),he(N,null),He(),ye()})}function Me(oe){C(N)===null?i.addHunger(oe.level).then(de=>{C(H).close(),He(),ye()}):i.editHunger(oe).then(de=>{C(H).close(),he(N,null),He(),ye()})}function Ce(oe){C(F)!==oe&&(window.localStorage.setItem("fh_screen",oe),he(F,oe,!0))}function Le(){C(M).showModal()}function re(){confirm("Sunrise/set (important for religious observations) needs to know your location? Enable location detection?")?navigator.geolocation.getCurrentPosition(de=>{window.localStorage.setItem("fh_latitude",de.coords.latitude),window.localStorage.setItem("fh_longitude",de.coords.longitude),Ve()}):window.localStorage.setItem("fh_latitude","DENIED")}function it(oe){i.deleteWater(oe).then(()=>{C(ue).close(),he(pe,null),Qe(),ye()})}function ot(oe){C(pe)===null?i.addWater(oe.volume).then(de=>{C(ue).close(),Qe(),ye()}):i.editWater(oe).then(de=>{C(ue).close(),he(pe,null),Qe(),ye()})}var ke=sc(),ct=yt(ke),ht=U(ct),nt=X(U(ht),2);Ql(nt,{onchange:Ce,get selected(){return C(F)}});var Et=X(nt,2);Et.__click=Le;var xt=U(Et);bt(xt,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),B(Et),B(ht);var ft=X(ht,2),_t=U(ft),Ot=U(_t);rl(Ot,{get activity(){return C(d)},get duration(){return C(h)},get hunger(){return C(z)},get levels(){return V},get now(){return C(K)},onduration:dt,onend:me,onhunger:Ae,onsettings:Le,onstart:Ne,onsun:re,onwater:ee,get started(){return C(D)},get sun(){return C(L)},get volume(){return C(W)},get water(){return C(Y)}}),B(_t);var Ue=X(_t,2),Kt=U(Ue);ql(Kt,{get activity(){return C(d)},get history(){return C(g)},get levels(){return V},onchange:je,onsun:re,get sun(){return C(L)},get volume(){return C(W)}}),B(Ue),B(ft),B(ct);var Nt=X(ct,2);Qt(Sl(Nt,{get field(){return C(O)},get item(){return C(P)},get label(){return C(q)},ondelete:se,onsave:le,get title(){return C(E)}}),oe=>he(x,oe,!0),()=>C(x));var bn=X(Nt,2);Qt(Yl(bn,{get item(){return C(N)},get levels(){return V},ondelete:De,onsave:Me}),oe=>he(H,oe,!0),()=>C(H));var Bt=X(bn,2);Qt(ac(Bt,{get item(){return C(pe)},ondelete:it,onsave:ot}),oe=>he(ue,oe,!0),()=>C(ue));var Ft=X(Bt,2);Qt(Zl(Ft,{}),oe=>he(M,oe,!0),()=>C(M)),Be(()=>Jt(ft,"data-screen",C(F)===0?"fasting":"hours")),fe(o,ke),lt()}kt(["click"]);export{kc as component};
