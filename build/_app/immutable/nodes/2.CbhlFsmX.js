import"../chunks/CWj6FrbW.js";import{o as Jr,a as Yi,s as _e}from"../chunks/CBHc2I-Z.js";import{L as ei,aA as Wi,aE as Vi,z as Qi,b as Gi,aF as ti,q as Qn,h as St,l as mn,d as Ur,a0 as C,aj as Xi,a5 as Ji,a6 as Zi,a7 as Ko,s as Br,k as zt,C as ni,r as $i,a8 as ri,i as oi,a9 as ea,aG as Nr,x as ii,a4 as ta,D as Yr,aH as Zr,aI as Fo,aJ as $r,au as na,aK as qo,aL as ra,aM as oa,w as ia,aN as aa,j as sa,aO as ua,o as ai,_ as Ke,aP as la,u as ca,p as fa,g as Ro,e as da,A as rt,I as ha,c as bn,f as dt,a as ve,F as ot,X as Ce,W as ue,aQ as va,aR as pa,Y as R,$ as q,V as we,Z as te,av as Ye,aS as Gn,ah as Xn}from"../chunks/xpUVlYYH.js";import{d as pt}from"../chunks/CKPaqtM9.js";import{a as Bo,b as No,s as Jn,c as Yt,r as ga,d as ya}from"../chunks/C-_ssXes.js";import{i as nt,r as ma,p as Te,b as At}from"../chunks/JuW1Ovd6.js";const ba=[];function Hr(s,o=!1){return Zn(s,new Map,"",ba)}function Zn(s,o,i,u,f=null){if(typeof s=="object"&&s!==null){var v=o.get(s);if(v!==void 0)return v;if(s instanceof Map)return new Map(s);if(s instanceof Set)return new Set(s);if(ei(s)){var p=Array(s.length);o.set(s,p),f!==null&&o.set(f,p);for(var D=0;D<s.length;D+=1){var O=s[D];D in s&&(p[D]=Zn(O,o,i,u))}return p}if(Wi(s)===Vi){p={},o.set(s,p),f!==null&&o.set(f,p);for(var K in s)p[K]=Zn(s[K],o,i,u);return p}if(s instanceof Date)return structuredClone(s);if(typeof s.toJSON=="function")return Zn(s.toJSON(),o,i,u,s)}if(s instanceof EventTarget)return s;try{return structuredClone(s)}catch{return s}}function Lt(s,o){return o}function _a(s,o,i,u){for(var f=[],v=o.length,p=0;p<v;p++)oa(o[p].e,f,!0);var D=v>0&&f.length===0&&i!==null;if(D){var O=i.parentNode;ia(O),O.append(i),u.clear(),jt(s,o[0].prev,o[v-1].next)}aa(f,()=>{for(var K=0;K<v;K++){var A=o[K];D||(u.delete(A.k),jt(s,A.prev,A.next)),sa(A.e,!D)}})}function Ut(s,o,i,u,f,v=null){var p=s,D={flags:o,items:new Map,first:null},O=(o&ti)!==0;if(O){var K=s;p=St?Qn(mn(K)):K.appendChild(Qi())}St&&Ur();var A=null,F=!1,I=Xi(()=>{var Y=i();return ei(Y)?Y:Y==null?[]:ii(Y)});Gi(()=>{var Y=C(I),B=Y.length;if(F&&B===0)return;F=B===0;let W=!1;if(St){var $=Ji(p)===Zi;$!==(B===0)&&(p=Ko(),Qn(p),Br(!1),W=!0)}if(St){for(var Q=null,M,N=0;N<B;N++){if(zt.nodeType===ni&&zt.data===$i){p=zt,W=!0,Br(!1);break}var P=Y[N],H=u(P,N);M=si(zt,D,Q,null,P,H,N,f,o,i),D.items.set(H,M),Q=M}B>0&&Qn(Ko())}St||wa(Y,D,p,f,o,u,i),v!==null&&(B===0?A?ri(A):A=oi(()=>v(p)):A!==null&&ea(A,()=>{A=null})),W&&Br(!0),C(I)}),St&&(p=zt)}function wa(s,o,i,u,f,v,p){var qe,Ue,Be,ye;var D=(f&ra)!==0,O=(f&(Zr|$r))!==0,K=s.length,A=o.items,F=o.first,I=F,Y,B=null,W,$=[],Q=[],M,N,P,H;if(D)for(H=0;H<K;H+=1)M=s[H],N=v(M,H),P=A.get(N),P!==void 0&&((qe=P.a)==null||qe.measure(),(W??(W=new Set)).add(P));for(H=0;H<K;H+=1){if(M=s[H],N=v(M,H),P=A.get(N),P===void 0){var X=I?I.e.nodes_start:i;B=si(X,o,B,B===null?o.first:B.next,M,N,H,u,f,p),A.set(N,B),$=[],Q=[],I=B.next;continue}if(O&&xa(P,M,H,f),(P.e.f&Nr)!==0&&(ri(P.e),D&&((Ue=P.a)==null||Ue.unfix(),(W??(W=new Set)).delete(P))),P!==I){if(Y!==void 0&&Y.has(P)){if($.length<Q.length){var U=Q[0],oe;B=U.prev;var de=$[0],se=$[$.length-1];for(oe=0;oe<$.length;oe+=1)Ho($[oe],U,i);for(oe=0;oe<Q.length;oe+=1)Y.delete(Q[oe]);jt(o,de.prev,se.next),jt(o,B,de),jt(o,se,U),I=U,B=se,H-=1,$=[],Q=[]}else Y.delete(P),Ho(P,I,i),jt(o,P.prev,P.next),jt(o,P,B===null?o.first:B.next),jt(o,B,P),B=P;continue}for($=[],Q=[];I!==null&&I.k!==N;)(I.e.f&Nr)===0&&(Y??(Y=new Set)).add(I),Q.push(I),I=I.next;if(I===null)continue;P=I}$.push(P),B=P,I=P.next}if(I!==null||Y!==void 0){for(var De=Y===void 0?[]:ii(Y);I!==null;)(I.e.f&Nr)===0&&De.push(I),I=I.next;var je=De.length;if(je>0){var Fe=(f&ti)!==0&&K===0?i:null;if(D){for(H=0;H<je;H+=1)(Be=De[H].a)==null||Be.measure();for(H=0;H<je;H+=1)(ye=De[H].a)==null||ye.fix()}_a(o,De,Fe,A)}}D&&ta(()=>{var he;if(W!==void 0)for(P of W)(he=P.a)==null||he.apply()}),Yr.first=o.first&&o.first.e,Yr.last=B&&B.e}function xa(s,o,i,u){(u&Zr)!==0&&Fo(s.v,o),(u&$r)!==0?Fo(s.i,i):s.i=i}function si(s,o,i,u,f,v,p,D,O,K){var A=(O&Zr)!==0,F=(O&ua)===0,I=A?F?na(f,!1,!1):qo(f):f,Y=(O&$r)===0?p:qo(p),B={i:Y,v:I,k:v,a:null,e:null,prev:i,next:u};try{return B.e=oi(()=>D(s,I,Y,K),St),B.e.prev=i&&i.e,B.e.next=u&&u.e,i===null?o.first=B:(i.next=B,i.e.next=B.e),u!==null&&(u.prev=B,u.e.prev=B.e),B}finally{}}function Ho(s,o,i){for(var u=s.next?s.next.e.nodes_start:i,f=o?o.e.nodes_start:i,v=s.e.nodes_start;v!==u;){var p=ai(v);f.before(v),v=p}}function jt(s,o,i){o===null?s.first=i:(o.next=i,o.e.next=i&&i.e),i!==null&&(i.prev=o,i.e.prev=o&&o.e)}function ka(s,o,i=!1,u=!1,f=!1){var v=s,p="";Ke(()=>{var D=Yr;if(p===(p=o()??"")){St&&Ur();return}if(D.nodes_start!==null&&(la(D.nodes_start,D.nodes_end),D.nodes_start=D.nodes_end=null),p!==""){if(St){zt.data;for(var O=Ur(),K=O;O!==null&&(O.nodeType!==ni||O.data!=="");)K=O,O=ai(O);if(O===null)throw ca(),fa;Ro(zt,K),v=Qn(O);return}var A=p+"";i?A=`<svg>${A}</svg>`:u&&(A=`<math>${A}</math>`);var F=da(A);if((i||u)&&(F=mn(F)),Ro(mn(F),F.lastChild),i||u)for(;mn(F);)v.before(mn(F));else v.before(F)}})}var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sa(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var $n={exports:{}},Ta=$n.exports,zo;function Ea(){return zo||(zo=1,function(s,o){(function(i,u){s.exports=u()})(Ta,function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(e,t)},u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function f(e,t,n){for(var r,a=0,l=t.length;a<l;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Da,p=Object.keys,D=Array.isArray;function O(e,t){return typeof t!="object"||p(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||v.Promise||(v.Promise=Promise);var K=Object.getPrototypeOf,A={}.hasOwnProperty;function F(e,t){return A.call(e,t)}function I(e,t){typeof t=="function"&&(t=t(K(e))),(typeof Reflect>"u"?p:Reflect.ownKeys)(t).forEach(function(n){B(e,n,t[n])})}var Y=Object.defineProperty;function B(e,t,n,r){Y(e,t,O(n&&F(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function W(e){return{from:function(t){return e.prototype=Object.create(t.prototype),B(e.prototype,"constructor",e),{extend:I.bind(null,e.prototype)}}}}var $=Object.getOwnPropertyDescriptor,Q=[].slice;function M(e,t,n){return Q.call(e,t,n)}function N(e,t){return t(e)}function P(e){if(!e)throw new Error("Assertion Failed")}function H(e){v.setImmediate?setImmediate(e):setTimeout(e,0)}function X(e,t){if(typeof t=="string"&&F(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,a=t.length;r<a;++r){var l=X(e,t[r]);n.push(l)}return n}var c=t.indexOf(".");if(c!==-1){var d=e[t.substr(0,c)];return d==null?void 0:X(d,t.substr(c+1))}}function U(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){P(typeof n!="string"&&"length"in n);for(var r=0,a=t.length;r<a;++r)U(e,t[r],n[r])}else{var l,c,d=t.indexOf(".");d!==-1?(l=t.substr(0,d),(c=t.substr(d+1))===""?n===void 0?D(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=n:U(d=!(d=e[l])||!F(e,l)?e[l]={}:d,c,n)):n===void 0?D(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function oe(e){var t,n={};for(t in e)F(e,t)&&(n[t]=e[t]);return n}var de=[].concat;function se(e){return de.apply([],e)}var Se="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(se([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return v[e]}),De=new Set(Se.map(function(e){return v[e]})),je=null;function Fe(e){return je=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var r=je.get(n);if(r)return r;if(D(n)){r=[],je.set(n,r);for(var a=0,l=n.length;a<l;++a)r.push(t(n[a]))}else if(De.has(n.constructor))r=n;else{var c,d=K(n);for(c in r=d===Object.prototype?{}:Object.create(d),je.set(n,r),n)F(n,c)&&(r[c]=t(n[c]))}return r}(e),je=null,e}var qe={}.toString;function Ue(e){return qe.call(e).slice(8,-1)}var Be=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ye=typeof Be=="symbol"?function(e){var t;return e!=null&&(t=e[Be])&&t.apply(e)}:function(){return null};function he(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Ne={};function Ee(e){var t,n,r,a;if(arguments.length===1){if(D(e))return e.slice();if(this===Ne&&typeof e=="string")return[e];if(a=ye(e)){for(n=[];!(r=a.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var We=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Oe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ft=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Oe),Ve={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Qe(e,t){this.name=e,this.message=t}function _t(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,a){return a.indexOf(n)===r}).join(`
`)}function at(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=_t(e,t)}function it(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=_t(e,this.failures)}W(Qe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),W(at).from(Qe),W(it).from(Qe);var ct=ft.reduce(function(e,t){return e[t]=t+"Error",e},{}),Wt=Qe,ie=ft.reduce(function(e,t){var n=t+"Error";function r(a,l){this.name=n,a?typeof a=="string"?(this.message="".concat(a).concat(l?`
 `+l:""),this.inner=l||null):typeof a=="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=Ve[t]||n,this.inner=null)}return W(r).from(Wt),e[t]=r,e},{});ie.Syntax=SyntaxError,ie.Type=TypeError,ie.Range=RangeError;var Vt=Oe.reduce(function(e,t){return e[t+"Error"]=ie[t],e},{}),gt=ft.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=ie[t]),e},{});function xe(){}function Mt(e){return e}function wn(e,t){return e==null||e===Mt?t:function(n){return t(e(n))}}function wt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function xn(e,t){return e===xe?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var l=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?wt(r,this.onsuccess):r),a&&(this.onerror=this.onerror?wt(a,this.onerror):a),l!==void 0?l:n}}function kn(e,t){return e===xe?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?wt(n,this.onsuccess):n),r&&(this.onerror=this.onerror?wt(r,this.onerror):r)}}function Dn(e,t){return e===xe?t:function(n){var r=e.apply(this,arguments);O(n,r);var a=this.onsuccess,l=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?wt(a,this.onsuccess):a),l&&(this.onerror=this.onerror?wt(l,this.onerror):l),r===void 0?n===void 0?void 0:n:O(r,n)}}function ar(e,t){return e===xe?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function ae(e,t){return e===xe?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,a=arguments.length,l=new Array(a);a--;)l[a]=arguments[a];return n.then(function(){return t.apply(r,l)})}return t.apply(this,arguments)}}gt.ModifyError=at,gt.DexieError=Qe,gt.BulkError=it;var le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function be(e){le=e}var Ge={},Pe=100,Se=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,K(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,K(t),e]}(),Oe=Se[0],ft=Se[1],Se=Se[2],ft=ft&&ft.then,Ie=Oe&&Oe.constructor,Qt=!!Se,Kt=function(e,t){xt.push([e,t]),Le&&(queueMicrotask(wi),Le=!1)},Re=!0,Le=!0,ht=[],Gt=[],Xt=Mt,vt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:xe,pgp:!1,env:{},finalize:xe},ne=vt,xt=[],yt=0,Jt=[];function ee(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=ne;if(typeof e!="function"){if(e!==Ge)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ur(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,a){try{a(function(l){if(r._state===null){if(l===r)throw new TypeError("A promise cannot be resolved with itself.");var c=r._lib&&Zt();l&&typeof l.then=="function"?n(r,function(d,g){l instanceof ee?l._then(d,g):l.then(d,g)}):(r._state=!0,r._value=l,oo(r)),c&&$t()}},ur.bind(null,r))}catch(l){ur(r,l)}}(this,e)}var sr={get:function(){var e=ne,t=On;function n(r,a){var l=this,c=!e.global&&(e!==ne||t!==On),d=c&&!Et(),g=new ee(function(m,w){lr(l,new ro(ao(r,e,c,d),ao(a,e,c,d),m,w,e))});return this._consoleTask&&(g._consoleTask=this._consoleTask),g}return n.prototype=Ge,n},set:function(e){B(this,"then",e&&e.prototype===Ge?sr:{get:function(){return e},set:sr.set})}};function ro(e,t,n,r,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=a}function ur(e,t){var n,r;Gt.push(t),e._state===null&&(n=e._lib&&Zt(),t=Xt(t),e._state=!1,e._value=t,r=e,ht.some(function(a){return a._value===r._value})||ht.push(r),oo(e),n&&$t())}function oo(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)lr(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),yt===0&&(++yt,Kt(function(){--yt==0&&cr()},[]))}function lr(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++yt,Kt(_i,[n,e,t])}else e._listeners.push(t)}function _i(e,t,n){try{var r,a=t._value;!t._state&&Gt.length&&(Gt=[]),r=le&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),t._state||Gt.indexOf(a)!==-1||function(l){for(var c=ht.length;c;)if(ht[--c]._value===l._value)return ht.splice(c,1)}(t),n.resolve(r)}catch(l){n.reject(l)}finally{--yt==0&&cr(),--n.psd.ref||n.psd.finalize()}}function wi(){Ft(vt,function(){Zt()&&$t()})}function Zt(){var e=Re;return Le=Re=!1,e}function $t(){var e,t,n;do for(;0<xt.length;)for(e=xt,xt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(0<xt.length);Le=Re=!0}function cr(){var e=ht;ht=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Jt.slice(0),n=t.length;n;)t[--n]()}function Sn(e){return new ee(Ge,!1,e)}function Me(e,t){var n=ne;return function(){var r=Zt(),a=ne;try{return Ot(n,!0),e.apply(this,arguments)}catch(l){t&&t(l)}finally{Ot(a,!1),r&&$t()}}}I(ee.prototype,{then:sr,_then:function(e,t){lr(this,new ro(null,null,e,t,ne))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(r){return(r instanceof t?n:Sn)(r)}):this.then(null,function(r){return(r&&r.name===t?n:Sn)(r)})},finally:function(e){return this.then(function(t){return ee.resolve(e()).then(function(){return t})},function(t){return ee.resolve(e()).then(function(){return Sn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new ee(function(r,a){var l=setTimeout(function(){return a(new ie.Timeout(t))},e);n.then(r,a).finally(clearTimeout.bind(null,l))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&B(ee.prototype,Symbol.toStringTag,"Dexie.Promise"),vt.env=io(),I(ee,{all:function(){var e=Ee.apply(null,arguments).map(Cn);return new ee(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(a,l){return ee.resolve(a).then(function(c){e[l]=c,--r||t(e)},n)})})},resolve:function(e){return e instanceof ee?e:e&&typeof e.then=="function"?new ee(function(t,n){e.then(t,n)}):new ee(Ge,!0,e)},reject:Sn,race:function(){var e=Ee.apply(null,arguments).map(Cn);return new ee(function(t,n){e.map(function(r){return ee.resolve(r).then(t,n)})})},PSD:{get:function(){return ne},set:function(e){return ne=e}},totalEchoes:{get:function(){return On}},newPSD:Tt,usePSD:Ft,scheduler:{get:function(){return Kt},set:function(e){Kt=e}},rejectionMapper:{get:function(){return Xt},set:function(e){Xt=e}},follow:function(e,t){return new ee(function(n,r){return Tt(function(a,l){var c=ne;c.unhandleds=[],c.onunhandled=l,c.finalize=wt(function(){var d,g=this;d=function(){g.unhandleds.length===0?a():l(g.unhandleds[0])},Jt.push(function m(){d(),Jt.splice(Jt.indexOf(m),1)}),++yt,Kt(function(){--yt==0&&cr()},[])},c.finalize),e()},t,n,r)})}}),Ie&&(Ie.allSettled&&B(ee,"allSettled",function(){var e=Ee.apply(null,arguments).map(Cn);return new ee(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(a,l){return ee.resolve(a).then(function(c){return r[l]={status:"fulfilled",value:c}},function(c){return r[l]={status:"rejected",reason:c}}).then(function(){return--n||t(r)})})})}),Ie.any&&typeof AggregateError<"u"&&B(ee,"any",function(){var e=Ee.apply(null,arguments).map(Cn);return new ee(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,a=new Array(r);e.forEach(function(l,c){return ee.resolve(l).then(function(d){return t(d)},function(d){a[c]=d,--r||n(new AggregateError(a))})})})}),Ie.withResolvers&&(ee.withResolvers=Ie.withResolvers));var Xe={awaits:0,echoes:0,id:0},xi=0,Tn=[],En=0,On=0,ki=0;function Tt(e,t,n,r){var a=ne,l=Object.create(a);return l.parent=a,l.ref=0,l.global=!1,l.id=++ki,vt.env,l.env=Qt?{Promise:ee,PromiseProp:{value:ee,configurable:!0,writable:!0},all:ee.all,race:ee.race,allSettled:ee.allSettled,any:ee.any,resolve:ee.resolve,reject:ee.reject}:{},t&&O(l,t),++a.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Ft(l,e,n,r),l.ref===0&&l.finalize(),r}function en(){return Xe.id||(Xe.id=++xi),++Xe.awaits,Xe.echoes+=Pe,Xe.id}function Et(){return!!Xe.awaits&&(--Xe.awaits==0&&(Xe.id=0),Xe.echoes=Xe.awaits*Pe,!0)}function Cn(e){return Xe.echoes&&e&&e.constructor===Ie?(en(),e.then(function(t){return Et(),t},function(t){return Et(),He(t)})):e}function Di(){var e=Tn[Tn.length-1];Tn.pop(),Ot(e,!1)}function Ot(e,t){var n,r=ne;(t?!Xe.echoes||En++&&e===ne:!En||--En&&e===ne)||queueMicrotask(t?(function(a){++On,Xe.echoes&&--Xe.echoes!=0||(Xe.echoes=Xe.awaits=Xe.id=0),Tn.push(ne),Ot(a,!0)}).bind(null,e):Di),e!==ne&&(ne=e,r===vt&&(vt.env=io()),Qt&&(n=vt.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(v,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function io(){var e=v.Promise;return Qt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ft(e,t,n,r,a){var l=ne;try{return Ot(e,!0),t(n,r,a)}finally{Ot(l,!1)}}function ao(e,t,n,r){return typeof e!="function"?e:function(){var a=ne;n&&en(),Ot(t,!0);try{return e.apply(this,arguments)}finally{Ot(a,!1),r&&queueMicrotask(Et)}}}function fr(e){Promise===Ie&&Xe.echoes===0?En===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+ft).indexOf("[native code]")===-1&&(en=Et=xe);var He=ee.reject,qt="￿",kt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",so="String expected.",tn=[],Pn="__dbnames",dr="readonly",hr="readwrite";function Rt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var uo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function In(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=Fe(t))[e],t}}function lo(){throw ie.Type()}function me(e,t){try{var n=co(e),r=co(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(a,l){for(var c=a.length,d=l.length,g=c<d?c:d,m=0;m<g;++m)if(a[m]!==l[m])return a[m]<l[m]?-1:1;return c===d?0:c<d?-1:1}(fo(e),fo(t));case"Array":return function(a,l){for(var c=a.length,d=l.length,g=c<d?c:d,m=0;m<g;++m){var w=me(a[m],l[m]);if(w!==0)return w}return c===d?0:c<d?-1:1}(e,t)}}catch{}return NaN}function co(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Ue(e),e==="ArrayBuffer"?"binary":e)}function fo(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ho=(Ae.prototype._trans=function(e,t,n){var r=this._tx||ne.trans,a=this.name,l=le&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function c(m,w,h){if(!h.schema[a])throw new ie.NotFound("Table "+a+" not part of transaction");return t(h.idbtrans,h)}var d=Zt();try{var g=r&&r.db._novip===this.db._novip?r===ne.trans?r._promise(e,c,n):Tt(function(){return r._promise(e,c,n)},{trans:r,transless:ne.transless||ne}):function m(w,h,k,y){if(w.idbdb&&(w._state.openComplete||ne.letThrough||w._vip)){var _=w._createTransaction(h,k,w._dbSchema);try{_.create(),w._state.PR1398_maxLoop=3}catch(x){return x.name===ct.InvalidState&&w.isOpen()&&0<--w._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),w.close({disableAutoOpen:!1}),w.open().then(function(){return m(w,h,k,y)})):He(x)}return _._promise(h,function(x,b){return Tt(function(){return ne.trans=_,y(x,b,_)})}).then(function(x){if(h==="readwrite")try{_.idbtrans.commit()}catch{}return h==="readonly"?x:_._completion.then(function(){return x})})}if(w._state.openComplete)return He(new ie.DatabaseClosed(w._state.dbOpenError));if(!w._state.isBeingOpened){if(!w._state.autoOpen)return He(new ie.DatabaseClosed);w.open().catch(xe)}return w._state.dbReadyPromise.then(function(){return m(w,h,k,y)})}(this.db,e,[this.name],c);return l&&(g._consoleTask=l,g=g.catch(function(m){return console.trace(m),He(m)})),g}finally{d&&$t()}},Ae.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?He(new ie.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(a){return n.hook.reading.fire(a)})}).then(t)},Ae.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(D(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=p(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(d){if(d.compound&&t.every(function(m){return 0<=d.keyPath.indexOf(m)})){for(var g=0;g<t.length;++g)if(t.indexOf(d.keyPath[g])===-1)return!1;return!0}return!1}).sort(function(d,g){return d.keyPath.length-g.keyPath.length})[0];if(n&&this.db._maxKey!==qt){var l=n.keyPath.slice(0,t.length);return this.where(l).equals(l.map(function(g){return e[g]}))}!n&&le&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName;function a(d,g){return me(d,g)===0}var c=t.reduce(function(h,g){var m=h[0],w=h[1],h=r[g],k=e[g];return[m||h,m||!h?Rt(w,h&&h.multi?function(y){return y=X(y,g),D(y)&&y.some(function(_){return a(k,_)})}:function(y){return a(k,X(y,g))}):w]},[null,null]),l=c[0],c=c[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")},Ae.prototype.filter=function(e){return this.toCollection().and(e)},Ae.prototype.count=function(e){return this.toCollection().count(e)},Ae.prototype.offset=function(e){return this.toCollection().offset(e)},Ae.prototype.limit=function(e){return this.toCollection().limit(e)},Ae.prototype.each=function(e){return this.toCollection().each(e)},Ae.prototype.toArray=function(e){return this.toCollection().toArray(e)},Ae.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ae.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,D(e)?"[".concat(e.join("+"),"]"):e))},Ae.prototype.reverse=function(){return this.toCollection().reverse()},Ae.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function a(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof lo&&(function(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function w(){this.constructor=g}i(g,m),g.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)}(a,t=e),Object.defineProperty(a.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),a.prototype.table=function(){return r},e=a);for(var l=new Set,c=e.prototype;c;c=K(c))Object.getOwnPropertyNames(c).forEach(function(g){return l.add(g)});function d(g){if(!g)return g;var m,w=Object.create(e.prototype);for(m in g)if(!l.has(m))try{w[m]=g[m]}catch{}return w}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=d,this.hook("reading",d),e},Ae.prototype.defineClass=function(){return this.mapToClass(function(e){O(this,e)})},Ae.prototype.add=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,l=r.keyPath,c=e;return l&&a&&(c=In(l)(e)),this._trans("readwrite",function(d){return n.core.mutate({trans:d,type:"add",keys:t!=null?[t]:null,values:[c]})}).then(function(d){return d.numFailures?ee.reject(d.failures[0]):d.lastResult}).then(function(d){if(l)try{U(e,l,d)}catch{}return d})},Ae.prototype.update=function(e,t){return typeof e!="object"||D(e)?this.where(":id").equals(e).modify(t):(e=X(e,this.schema.primKey.keyPath),e===void 0?He(new ie.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},Ae.prototype.put=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,l=r.keyPath,c=e;return l&&a&&(c=In(l)(e)),this._trans("readwrite",function(d){return n.core.mutate({trans:d,type:"put",values:[c],keys:t!=null?[t]:null})}).then(function(d){return d.numFailures?ee.reject(d.failures[0]):d.lastResult}).then(function(d){if(l)try{U(e,l,d)}catch{}return d})},Ae.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?ee.reject(n.failures[0]):void 0})},Ae.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:uo})}).then(function(t){return t.numFailures?ee.reject(t.failures[0]):void 0})},Ae.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(a){return t.hook.reading.fire(a)})})})},Ae.prototype.bulkAdd=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,l=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(c){var m=r.schema.primKey,d=m.auto,m=m.keyPath;if(m&&a)throw new ie.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var g=e.length,m=m&&d?e.map(In(m)):e;return r.core.mutate({trans:c,type:"add",keys:a,values:m,wantResults:l}).then(function(_){var h=_.numFailures,k=_.results,y=_.lastResult,_=_.failures;if(h===0)return l?k:y;throw new it("".concat(r.name,".bulkAdd(): ").concat(h," of ").concat(g," operations failed"),_)})})},Ae.prototype.bulkPut=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,l=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(c){var m=r.schema.primKey,d=m.auto,m=m.keyPath;if(m&&a)throw new ie.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var g=e.length,m=m&&d?e.map(In(m)):e;return r.core.mutate({trans:c,type:"put",keys:a,values:m,wantResults:l}).then(function(_){var h=_.numFailures,k=_.results,y=_.lastResult,_=_.failures;if(h===0)return l?k:y;throw new it("".concat(r.name,".bulkPut(): ").concat(h," of ").concat(g," operations failed"),_)})})},Ae.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(c){return c.key}),a=e.map(function(c){return c.changes}),l=[];return this._trans("readwrite",function(c){return n.getMany({trans:c,keys:r,cache:"clone"}).then(function(d){var g=[],m=[];e.forEach(function(h,k){var y=h.key,_=h.changes,x=d[k];if(x){for(var b=0,S=Object.keys(_);b<S.length;b++){var T=S[b],E=_[T];if(T===t.schema.primKey.keyPath){if(me(E,y)!==0)throw new ie.Constraint("Cannot update primary key in bulkUpdate()")}else U(x,T,E)}l.push(k),g.push(y),m.push(x)}});var w=g.length;return n.mutate({trans:c,type:"put",keys:g,values:m,updates:{keys:r,changeSpecs:a}}).then(function(h){var k=h.numFailures,y=h.failures;if(k===0)return w;for(var _=0,x=Object.keys(y);_<x.length;_++){var b,S=x[_],T=l[Number(S)];T!=null&&(b=y[S],delete y[S],y[T]=b)}throw new it("".concat(t.name,".bulkUpdate(): ").concat(k," of ").concat(w," operations failed"),y)})})})},Ae.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(c){var a=c.numFailures,l=c.lastResult,c=c.failures;if(a===0)return l;throw new it("".concat(t.name,".bulkDelete(): ").concat(a," of ").concat(n," operations failed"),c)})},Ae);function Ae(){}function sn(e){function t(c,d){if(d){for(var g=arguments.length,m=new Array(g-1);--g;)m[g-1]=arguments[g];return n[c].subscribe.apply(null,m),e}if(typeof c=="string")return n[c]}var n={};t.addEventType=l;for(var r=1,a=arguments.length;r<a;++r)l(arguments[r]);return t;function l(c,d,g){if(typeof c!="object"){var m;d=d||ar;var w={subscribers:[],fire:g=g||xe,subscribe:function(h){w.subscribers.indexOf(h)===-1&&(w.subscribers.push(h),w.fire=d(w.fire,h))},unsubscribe:function(h){w.subscribers=w.subscribers.filter(function(k){return k!==h}),w.fire=w.subscribers.reduce(d,g)}};return n[c]=t[c]=w}p(m=c).forEach(function(h){var k=m[h];if(D(k))l(h,m[h][0],m[h][1]);else{if(k!=="asap")throw new ie.InvalidArgument("Invalid event config");var y=l(h,Mt,function(){for(var _=arguments.length,x=new Array(_);_--;)x[_]=arguments[_];y.subscribers.forEach(function(b){H(function(){b.apply(null,x)})})})}})}}function un(e,t){return W(t).from({prototype:e}),t}function nn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function vr(e,t){e.filter=Rt(e.filter,t)}function pr(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Rt(r(),t())}:t,e.justLimit=n&&!r}function jn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new ie.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function vo(e,t,n){var r=jn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function An(e,t,n,r){var a=e.replayFilter?Rt(e.filter,e.replayFilter()):e.filter;if(e.or){var l={},c=function(d,g,m){var w,h;a&&!a(g,m,function(k){return g.stop(k)},function(k){return g.fail(k)})||((h=""+(w=g.primaryKey))=="[object ArrayBuffer]"&&(h=""+new Uint8Array(w)),F(l,h)||(l[h]=!0,t(d,g,m)))};return Promise.all([e.or._iterate(c,n),po(vo(e,r,n),e.algorithm,c,!e.keysOnly&&e.valueMapper)])}return po(vo(e,r,n),Rt(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function po(e,t,n,r){var a=Me(r?function(l,c,d){return n(r(l),c,d)}:n);return e.then(function(l){if(l)return l.start(function(){var c=function(){return l.continue()};t&&!t(l,function(d){return c=d},function(d){l.stop(d),c=xe},function(d){l.fail(d),c=xe})||a(l.value,l,function(d){return c=d}),c()})})}var ln=(go.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(D(n))return f(f([],D(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var r=t.remove;if(D(r))return D(e)?e.filter(function(a){return!r.includes(a)}).sort():[];if(typeof r=="number")return Number(e)-r;if(typeof r=="bigint")try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError("Invalid subtrahend ".concat(r))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},go);function go(e){this["@@propmod"]=e}var Si=(ke.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,He.bind(null,n.error)):n.table._trans("readonly",e).then(t)},ke.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,He.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ke.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Rt(t.algorithm,e)},ke.prototype._iterate=function(e,t){return An(this._ctx,e,t,this._ctx.table.core)},ke.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&O(n,e),t._ctx=n,t},ke.prototype.raw=function(){return this._ctx.valueMapper=null,this},ke.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return An(t,e,n,t.table.core)})},ke.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,a=r.table.core;if(nn(r,!0))return a.count({trans:n,query:{index:jn(r,a.schema),range:r.range}}).then(function(c){return Math.min(c,r.limit)});var l=0;return An(r,function(){return++l,!1},n,a).then(function(){return l})}).then(e)},ke.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],a=n.length-1;function l(g,m){return m?l(g[n[m]],m-1):g[r]}var c=this._ctx.dir==="next"?1:-1;function d(g,m){return me(l(g,a),l(m,a))*c}return this.toArray(function(g){return g.sort(d)}).then(t)},ke.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if(r.dir==="next"&&nn(r,!0)&&0<r.limit){var a=r.valueMapper,l=jn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:l,range:r.range}}).then(function(d){return d=d.result,a?d.map(a):d})}var c=[];return An(r,function(d){return c.push(d)},n,r.table.core).then(function(){return c})},e)},ke.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,nn(t)?pr(t,function(){var n=e;return function(r,a){return n===0||(n===1?--n:a(function(){r.advance(n),n=0}),!1)}}):pr(t,function(){var n=e;return function(){return--n<0}})),this},ke.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),pr(this._ctx,function(){var t=e;return function(n,r,a){return--t<=0&&r(a),0<=t}},!0),this},ke.prototype.until=function(e,t){return vr(this._ctx,function(n,r,a){return!e(n.value)||(r(a),t)}),this},ke.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ke.prototype.last=function(e){return this.reverse().first(e)},ke.prototype.filter=function(e){var t;return vr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=Rt(t.isMatch,e),this},ke.prototype.and=function(e){return this.filter(e)},ke.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ke.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ke.prototype.desc=function(){return this.reverse()},ke.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},ke.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ke.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},ke.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,a){n.push(a.key)}).then(function(){return n}).then(e)},ke.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&nn(t,!0)&&0<t.limit)return this._read(function(r){var a=jn(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:a,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,a){n.push(a.primaryKey)}).then(function(){return n}).then(e)},ke.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ke.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ke.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ke.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return vr(this._ctx,function(a){var r=a.primaryKey.toString(),a=F(t,r);return t[r]=!0,!a}),this},ke.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var a,l,c;c=typeof e=="function"?e:(a=p(e),l=a.length,function(b){for(var S=!1,T=0;T<l;++T){var E=a[T],j=e[E],z=X(b,E);j instanceof ln?(U(b,E,j.execute(z)),S=!0):z!==j&&(U(b,E,j),S=!0)}return S});var d=n.table.core,h=d.schema.primaryKey,g=h.outbound,m=h.extractKey,w=200,h=t.db._options.modifyChunkSize;h&&(w=typeof h=="object"?h[d.name]||h["*"]||200:h);function k(b,E){var T=E.failures,E=E.numFailures;_+=b-E;for(var j=0,z=p(T);j<z.length;j++){var J=z[j];y.push(T[J])}}var y=[],_=0,x=[];return t.clone().primaryKeys().then(function(b){function S(E){var j=Math.min(w,b.length-E);return d.getMany({trans:r,keys:b.slice(E,E+j),cache:"immutable"}).then(function(z){for(var J=[],L=[],V=g?[]:null,Z=[],G=0;G<j;++G){var re=z[G],fe={value:Fe(re),primKey:b[E+G]};c.call(fe,fe.value,fe)!==!1&&(fe.value==null?Z.push(b[E+G]):g||me(m(re),m(fe.value))===0?(L.push(fe.value),g&&V.push(b[E+G])):(Z.push(b[E+G]),J.push(fe.value)))}return Promise.resolve(0<J.length&&d.mutate({trans:r,type:"add",values:J}).then(function(pe){for(var ge in pe.failures)Z.splice(parseInt(ge),1);k(J.length,pe)})).then(function(){return(0<L.length||T&&typeof e=="object")&&d.mutate({trans:r,type:"put",keys:V,values:L,criteria:T,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<E}).then(function(pe){return k(L.length,pe)})}).then(function(){return(0<Z.length||T&&e===gr)&&d.mutate({trans:r,type:"delete",keys:Z,criteria:T,isAdditionalChunk:0<E}).then(function(pe){return k(Z.length,pe)})}).then(function(){return b.length>E+j&&S(E+w)})})}var T=nn(n)&&n.limit===1/0&&(typeof e!="function"||e===gr)&&{index:n.index,range:n.range};return S(0).then(function(){if(0<y.length)throw new at("Error modifying one or more objects",y,_,x);return b.length})})})},ke.prototype.delete=function(){var e=this._ctx,t=e.range;return nn(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,a=t;return e.table.core.count({trans:n,query:{index:r,range:a}}).then(function(l){return e.table.core.mutate({trans:n,type:"deleteRange",range:a}).then(function(c){var d=c.failures;if(c.lastResult,c.results,c=c.numFailures,c)throw new at("Could not delete some values",Object.keys(d).map(function(g){return d[g]}),l-c);return l-c})})}):this.modify(gr)},ke);function ke(){}var gr=function(e,t){return t.value=null};function Ti(e,t){return e<t?-1:e===t?0:1}function Ei(e,t){return t<e?-1:e===t?0:1}function st(e,t,n){return e=e instanceof mo?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function rn(e){return new e.Collection(e,function(){return yo("")}).limit(0)}function Mn(e,t,n,r){var a,l,c,d,g,m,w,h=n.length;if(!n.every(function(_){return typeof _=="string"}))return st(e,so);function k(_){a=_==="next"?function(b){return b.toUpperCase()}:function(b){return b.toLowerCase()},l=_==="next"?function(b){return b.toLowerCase()}:function(b){return b.toUpperCase()},c=_==="next"?Ti:Ei;var x=n.map(function(b){return{lower:l(b),upper:a(b)}}).sort(function(b,S){return c(b.lower,S.lower)});d=x.map(function(b){return b.upper}),g=x.map(function(b){return b.lower}),w=(m=_)==="next"?"":r}k("next"),e=new e.Collection(e,function(){return Ct(d[0],g[h-1]+r)}),e._ondirectionchange=function(_){k(_)};var y=0;return e._addAlgorithm(function(_,x,b){var S=_.key;if(typeof S!="string")return!1;var T=l(S);if(t(T,g,y))return!0;for(var E=null,j=y;j<h;++j){var z=function(J,L,V,Z,G,re){for(var fe=Math.min(J.length,Z.length),pe=-1,ge=0;ge<fe;++ge){var ut=L[ge];if(ut!==Z[ge])return G(J[ge],V[ge])<0?J.substr(0,ge)+V[ge]+V.substr(ge+1):G(J[ge],Z[ge])<0?J.substr(0,ge)+Z[ge]+V.substr(ge+1):0<=pe?J.substr(0,pe)+L[pe]+V.substr(pe+1):null;G(J[ge],ut)<0&&(pe=ge)}return fe<Z.length&&re==="next"?J+V.substr(J.length):fe<J.length&&re==="prev"?J.substr(0,V.length):pe<0?null:J.substr(0,pe)+Z[pe]+V.substr(pe+1)}(S,T,d[j],g[j],c,m);z===null&&E===null?y=j+1:(E===null||0<c(E,z))&&(E=z)}return x(E!==null?function(){_.continue(E+w)}:b),!1}),e}function Ct(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function yo(e){return{type:1,lower:e,upper:e}}var mo=(Object.defineProperty(Je.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Je.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||r)&&(!n||!r)?rn(this):new this.Collection(this,function(){return Ct(e,t,!n,!r)})}catch{return st(this,kt)}},Je.prototype.equals=function(e){return e==null?st(this,kt):new this.Collection(this,function(){return yo(e)})},Je.prototype.above=function(e){return e==null?st(this,kt):new this.Collection(this,function(){return Ct(e,void 0,!0)})},Je.prototype.aboveOrEqual=function(e){return e==null?st(this,kt):new this.Collection(this,function(){return Ct(e,void 0,!1)})},Je.prototype.below=function(e){return e==null?st(this,kt):new this.Collection(this,function(){return Ct(void 0,e,!1,!0)})},Je.prototype.belowOrEqual=function(e){return e==null?st(this,kt):new this.Collection(this,function(){return Ct(void 0,e)})},Je.prototype.startsWith=function(e){return typeof e!="string"?st(this,so):this.between(e,e+qt,!0,!0)},Je.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Mn(this,function(t,n){return t.indexOf(n[0])===0},[e],qt)},Je.prototype.equalsIgnoreCase=function(e){return Mn(this,function(t,n){return t===n[0]},[e],"")},Je.prototype.anyOfIgnoreCase=function(){var e=Ee.apply(Ne,arguments);return e.length===0?rn(this):Mn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},Je.prototype.startsWithAnyOfIgnoreCase=function(){var e=Ee.apply(Ne,arguments);return e.length===0?rn(this):Mn(this,function(t,n){return n.some(function(r){return t.indexOf(r)===0})},e,qt)},Je.prototype.anyOf=function(){var e=this,t=Ee.apply(Ne,arguments),n=this._cmp;try{t.sort(n)}catch{return st(this,kt)}if(t.length===0)return rn(this);var r=new this.Collection(this,function(){return Ct(t[0],t[t.length-1])});r._ondirectionchange=function(l){n=l==="next"?e._ascending:e._descending,t.sort(n)};var a=0;return r._addAlgorithm(function(l,c,d){for(var g=l.key;0<n(g,t[a]);)if(++a===t.length)return c(d),!1;return n(g,t[a])===0||(c(function(){l.continue(t[a])}),!1)}),r},Je.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Je.prototype.noneOf=function(){var e=Ee.apply(Ne,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return st(this,kt)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Je.prototype.inAnyRange=function(S,t){var n=this,r=this._cmp,a=this._ascending,l=this._descending,c=this._min,d=this._max;if(S.length===0)return rn(this);if(!S.every(function(T){return T[0]!==void 0&&T[1]!==void 0&&a(T[0],T[1])<=0}))return st(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ie.InvalidArgument);var g=!t||t.includeLowers!==!1,m=t&&t.includeUppers===!0,w,h=a;function k(T,E){return h(T[0],E[0])}try{(w=S.reduce(function(T,E){for(var j=0,z=T.length;j<z;++j){var J=T[j];if(r(E[0],J[1])<0&&0<r(E[1],J[0])){J[0]=c(J[0],E[0]),J[1]=d(J[1],E[1]);break}}return j===z&&T.push(E),T},[])).sort(k)}catch{return st(this,kt)}var y=0,_=m?function(T){return 0<a(T,w[y][1])}:function(T){return 0<=a(T,w[y][1])},x=g?function(T){return 0<l(T,w[y][0])}:function(T){return 0<=l(T,w[y][0])},b=_,S=new this.Collection(this,function(){return Ct(w[0][0],w[w.length-1][1],!g,!m)});return S._ondirectionchange=function(T){h=T==="next"?(b=_,a):(b=x,l),w.sort(k)},S._addAlgorithm(function(T,E,j){for(var z,J=T.key;b(J);)if(++y===w.length)return E(j),!1;return!_(z=J)&&!x(z)||(n._cmp(J,w[y][1])===0||n._cmp(J,w[y][0])===0||E(function(){h===a?T.continue(w[y][0]):T.continue(w[y][1])}),!1)}),S},Je.prototype.startsWithAnyOf=function(){var e=Ee.apply(Ne,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?rn(this):this.inAnyRange(e.map(function(t){return[t,t+qt]})):st(this,"startsWithAnyOf() only works with strings")},Je);function Je(){}function mt(e){return Me(function(t){return cn(t),e(t.target.error),!1})}function cn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var fn="storagemutated",yr="x-storagemutated-1",Pt=sn(null,fn),Oi=(bt.prototype._lock=function(){return P(!ne.global),++this._reculock,this._reculock!==1||ne.global||(ne.lockOwnerFor=this),this},bt.prototype._unlock=function(){if(P(!ne.global),--this._reculock==0)for(ne.global||(ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ft(e[1],e[0])}catch{}}return this},bt.prototype._locked=function(){return this._reculock&&ne.lockOwnerFor!==this},bt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(P(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ie.DatabaseClosed(r);case"MissingAPIError":throw new ie.MissingAPI(r.message,r);default:throw new ie.OpenFailed(r)}if(!this.active)throw new ie.TransactionInactive;return P(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Me(function(a){cn(a),t._reject(e.error)}),e.onabort=Me(function(a){cn(a),t.active&&t._reject(new ie.Abort(e.error)),t.active=!1,t.on("abort").fire(a)}),e.oncomplete=Me(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Pt.storagemutated.fire(e.mutatedParts)}),this},bt.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return He(new ie.ReadOnly("Transaction is readonly"));if(!this.active)return He(new ie.TransactionInactive);if(this._locked())return new ee(function(l,c){r._blockedFuncs.push([function(){r._promise(e,t,n).then(l,c)},ne])});if(n)return Tt(function(){var l=new ee(function(c,d){r._lock();var g=t(c,d,r);g&&g.then&&g.then(c,d)});return l.finally(function(){return r._unlock()}),l._lib=!0,l});var a=new ee(function(l,c){var d=t(l,c,r);d&&d.then&&d.then(l,c)});return a._lib=!0,a},bt.prototype._root=function(){return this.parent?this.parent._root():this},bt.prototype.waitFor=function(e){var t,n=this._root(),r=ee.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function l(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=l)}());var a=n._waitingFor;return new ee(function(l,c){r.then(function(d){return n._waitingQueue.push(Me(l.bind(null,d)))},function(d){return n._waitingQueue.push(Me(c.bind(null,d)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},bt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ie.Abort))},bt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(F(t,e))return t[e];var n=this.schema[e];if(!n)throw new ie.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},bt);function bt(){}function mr(e,t,n,r,a,l,c){return{name:e,keyPath:t,unique:n,multi:r,auto:a,compound:l,src:(n&&!c?"&":"")+(r?"*":"")+(a?"++":"")+bo(t)}}function bo(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function br(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(a){return[a.name,a]},n.reduce(function(a,l,c){return c=r(l,c),c&&(a[c[0]]=c[1]),a},{}))};var r}var dn=function(e){try{return e.only([[]]),dn=function(){return[[]]},[[]]}catch{return dn=function(){return qt},qt}};function _r(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return X(n,t)}:function(n){return X(n,e)};var t}function _o(e){return[].slice.call(e)}var Ci=0;function hn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Pi(e,t,g){function r(b){if(b.type===3)return null;if(b.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var y=b.lower,_=b.upper,x=b.lowerOpen,b=b.upperOpen;return y===void 0?_===void 0?null:t.upperBound(_,!!b):_===void 0?t.lowerBound(y,!!x):t.bound(y,_,!!x,!!b)}function a(k){var y,_=k.name;return{name:_,schema:k,mutate:function(x){var b=x.trans,S=x.type,T=x.keys,E=x.values,j=x.range;return new Promise(function(z,J){z=Me(z);var L=b.objectStore(_),V=L.keyPath==null,Z=S==="put"||S==="add";if(!Z&&S!=="delete"&&S!=="deleteRange")throw new Error("Invalid operation type: "+S);var G,re=(T||E||{length:1}).length;if(T&&E&&T.length!==E.length)throw new Error("Given keys array must have same length as given values array.");if(re===0)return z({numFailures:0,failures:{},results:[],lastResult:void 0});function fe(tt){++ut,cn(tt)}var pe=[],ge=[],ut=0;if(S==="deleteRange"){if(j.type===4)return z({numFailures:ut,failures:ge,results:[],lastResult:void 0});j.type===3?pe.push(G=L.clear()):pe.push(G=L.delete(r(j)))}else{var V=Z?V?[E,T]:[E,null]:[T,null],ce=V[0],$e=V[1];if(Z)for(var et=0;et<re;++et)pe.push(G=$e&&$e[et]!==void 0?L[S](ce[et],$e[et]):L[S](ce[et])),G.onerror=fe;else for(et=0;et<re;++et)pe.push(G=L[S](ce[et])),G.onerror=fe}function Vn(tt){tt=tt.target.result,pe.forEach(function(Ht,Rr){return Ht.error!=null&&(ge[Rr]=Ht.error)}),z({numFailures:ut,failures:ge,results:S==="delete"?T:pe.map(function(Ht){return Ht.result}),lastResult:tt})}G.onerror=function(tt){fe(tt),Vn(tt)},G.onsuccess=Vn})},getMany:function(x){var b=x.trans,S=x.keys;return new Promise(function(T,E){T=Me(T);for(var j,z=b.objectStore(_),J=S.length,L=new Array(J),V=0,Z=0,G=function(pe){pe=pe.target,L[pe._pos]=pe.result,++Z===V&&T(L)},re=mt(E),fe=0;fe<J;++fe)S[fe]!=null&&((j=z.get(S[fe]))._pos=fe,j.onsuccess=G,j.onerror=re,++V);V===0&&T(L)})},get:function(x){var b=x.trans,S=x.key;return new Promise(function(T,E){T=Me(T);var j=b.objectStore(_).get(S);j.onsuccess=function(z){return T(z.target.result)},j.onerror=mt(E)})},query:(y=m,function(x){return new Promise(function(b,S){b=Me(b);var T,E,j,V=x.trans,z=x.values,J=x.limit,G=x.query,L=J===1/0?void 0:J,Z=G.index,G=G.range,V=V.objectStore(_),Z=Z.isPrimaryKey?V:V.index(Z.name),G=r(G);if(J===0)return b({result:[]});y?((L=z?Z.getAll(G,L):Z.getAllKeys(G,L)).onsuccess=function(re){return b({result:re.target.result})},L.onerror=mt(S)):(T=0,E=!z&&"openKeyCursor"in Z?Z.openKeyCursor(G):Z.openCursor(G),j=[],E.onsuccess=function(re){var fe=E.result;return fe?(j.push(z?fe.value:fe.primaryKey),++T===J?b({result:j}):void fe.continue()):b({result:j})},E.onerror=mt(S))})}),openCursor:function(x){var b=x.trans,S=x.values,T=x.query,E=x.reverse,j=x.unique;return new Promise(function(z,J){z=Me(z);var Z=T.index,L=T.range,V=b.objectStore(_),V=Z.isPrimaryKey?V:V.index(Z.name),Z=E?j?"prevunique":"prev":j?"nextunique":"next",G=!S&&"openKeyCursor"in V?V.openKeyCursor(r(L),Z):V.openCursor(r(L),Z);G.onerror=mt(J),G.onsuccess=Me(function(re){var fe,pe,ge,ut,ce=G.result;ce?(ce.___id=++Ci,ce.done=!1,fe=ce.continue.bind(ce),pe=(pe=ce.continuePrimaryKey)&&pe.bind(ce),ge=ce.advance.bind(ce),ut=function(){throw new Error("Cursor not stopped")},ce.trans=b,ce.stop=ce.continue=ce.continuePrimaryKey=ce.advance=function(){throw new Error("Cursor not started")},ce.fail=Me(J),ce.next=function(){var $e=this,et=1;return this.start(function(){return et--?$e.continue():$e.stop()}).then(function(){return $e})},ce.start=function($e){function et(){if(G.result)try{$e()}catch(tt){ce.fail(tt)}else ce.done=!0,ce.start=function(){throw new Error("Cursor behind last entry")},ce.stop()}var Vn=new Promise(function(tt,Ht){tt=Me(tt),G.onerror=mt(Ht),ce.fail=Ht,ce.stop=function(Rr){ce.stop=ce.continue=ce.continuePrimaryKey=ce.advance=ut,tt(Rr)}});return G.onsuccess=Me(function(tt){G.onsuccess=et,et()}),ce.continue=fe,ce.continuePrimaryKey=pe,ce.advance=ge,et(),Vn},z(ce)):z(null)},J)})},count:function(x){var b=x.query,S=x.trans,T=b.index,E=b.range;return new Promise(function(j,z){var J=S.objectStore(_),L=T.isPrimaryKey?J:J.index(T.name),J=r(E),L=J?L.count(J):L.count();L.onsuccess=Me(function(V){return j(V.target.result)}),L.onerror=mt(z)})}}}var l,c,d,w=(c=g,d=_o((l=e).objectStoreNames),{schema:{name:l.name,tables:d.map(function(k){return c.objectStore(k)}).map(function(k){var y=k.keyPath,b=k.autoIncrement,_=D(y),x={},b={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y==null,compound:_,keyPath:y,autoIncrement:b,unique:!0,extractKey:_r(y)},indexes:_o(k.indexNames).map(function(S){return k.index(S)}).map(function(j){var T=j.name,E=j.unique,z=j.multiEntry,j=j.keyPath,z={name:T,compound:D(j),keyPath:j,unique:E,multiEntry:z,extractKey:_r(j)};return x[hn(j)]=z}),getIndexByKeyPath:function(S){return x[hn(S)]}};return x[":id"]=b.primaryKey,y!=null&&(x[hn(y)]=b.primaryKey),b})},hasGetAll:0<d.length&&"getAll"in c.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),g=w.schema,m=w.hasGetAll,w=g.tables.map(a),h={};return w.forEach(function(k){return h[k.name]=k}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(k){if(!h[k])throw new Error("Table '".concat(k,"' not found"));return h[k]},MIN_KEY:-1/0,MAX_KEY:dn(t),schema:g}}function Ii(e,t,n,r){var a=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=Pi(t,a,r),e.dbcore.reduce(function(l,c){return c=c.create,u(u({},l),c(l))},r))}}function Kn(e,r){var n=r.db,r=Ii(e._middlewares,n,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(a){var l=a.name;e.core.schema.tables.some(function(c){return c.name===l})&&(a.core=e.core.table(l),e[l]instanceof e.Table&&(e[l].core=a.core))})}function Fn(e,t,n,r){n.forEach(function(a){var l=r[a];t.forEach(function(c){var d=function g(m,w){return $(m,w)||(m=K(m))&&g(m,w)}(c,a);(!d||"value"in d&&d.value===void 0)&&(c===e.Transaction.prototype||c instanceof e.Transaction?B(c,a,{get:function(){return this.table(a)},set:function(g){Y(this,a,{value:g,writable:!0,configurable:!0,enumerable:!0})}}):c[a]=new e.Table(a,l))})})}function wr(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function ji(e,t){return e._cfg.version-t._cfg.version}function Ai(e,t,n,r){var a=e._dbSchema;n.objectStoreNames.contains("$meta")&&!a.$meta&&(a.$meta=br("$meta",xo("")[0],[]),e._storeNames.push("$meta"));var l=e._createTransaction("readwrite",e._storeNames,a);l.create(n),l._completion.catch(r);var c=l._reject.bind(l),d=ne.transless||ne;Tt(function(){return ne.trans=l,ne.transless=d,t!==0?(Kn(e,n),m=t,((g=l).storeNames.includes("$meta")?g.table("$meta").get("version").then(function(w){return w??m}):ee.resolve(m)).then(function(w){return k=w,y=l,_=n,x=[],w=(h=e)._versions,b=h._dbSchema=Rn(0,h.idbdb,_),(w=w.filter(function(S){return S._cfg.version>=k})).length!==0?(w.forEach(function(S){x.push(function(){var T=b,E=S._cfg.dbschema;Bn(h,T,_),Bn(h,E,_),b=h._dbSchema=E;var j=xr(T,E);j.add.forEach(function(Z){kr(_,Z[0],Z[1].primKey,Z[1].indexes)}),j.change.forEach(function(Z){if(Z.recreate)throw new ie.Upgrade("Not yet support for changing primary key");var G=_.objectStore(Z.name);Z.add.forEach(function(re){return qn(G,re)}),Z.change.forEach(function(re){G.deleteIndex(re.name),qn(G,re)}),Z.del.forEach(function(re){return G.deleteIndex(re)})});var z=S._cfg.contentUpgrade;if(z&&S._cfg.version>k){Kn(h,_),y._memoizedTables={};var J=oe(E);j.del.forEach(function(Z){J[Z]=T[Z]}),wr(h,[h.Transaction.prototype]),Fn(h,[h.Transaction.prototype],p(J),J),y.schema=J;var L,V=We(z);return V&&en(),j=ee.follow(function(){var Z;(L=z(y))&&V&&(Z=Et.bind(null,null),L.then(Z,Z))}),L&&typeof L.then=="function"?ee.resolve(L):j.then(function(){return L})}}),x.push(function(T){var E,j,z=S._cfg.dbschema;E=z,j=T,[].slice.call(j.db.objectStoreNames).forEach(function(J){return E[J]==null&&j.db.deleteObjectStore(J)}),wr(h,[h.Transaction.prototype]),Fn(h,[h.Transaction.prototype],h._storeNames,h._dbSchema),y.schema=h._dbSchema}),x.push(function(T){h.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(h.idbdb.version/10)===S._cfg.version?(h.idbdb.deleteObjectStore("$meta"),delete h._dbSchema.$meta,h._storeNames=h._storeNames.filter(function(E){return E!=="$meta"})):T.objectStore("$meta").put(S._cfg.version,"version"))})}),function S(){return x.length?ee.resolve(x.shift()(y.idbtrans)).then(S):ee.resolve()}().then(function(){wo(b,_)})):ee.resolve();var h,k,y,_,x,b}).catch(c)):(p(a).forEach(function(w){kr(n,w,a[w].primKey,a[w].indexes)}),Kn(e,n),void ee.follow(function(){return e.on.populate.fire(l)}).catch(c));var g,m})}function Mi(e,t){wo(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Rn(0,e.idbdb,t);Bn(e,e._dbSchema,t);for(var r=0,a=xr(n,e._dbSchema).change;r<a.length;r++){var l=function(c){if(c.change.length||c.recreate)return console.warn("Unable to patch indexes of table ".concat(c.name," because it has changes on the type of index or primary key.")),{value:void 0};var d=t.objectStore(c.name);c.add.forEach(function(g){le&&console.debug("Dexie upgrade patch: Creating missing index ".concat(c.name,".").concat(g.src)),qn(d,g)})}(a[r]);if(typeof l=="object")return l.value}}function xr(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var a=e[n],l=t[n];if(a){var c={name:n,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||a.primKey.auto!==l.primKey.auto)c.recreate=!0,r.change.push(c);else{var d=a.idxByName,g=l.idxByName,m=void 0;for(m in d)g[m]||c.del.push(m);for(m in g){var w=d[m],h=g[m];w?w.src!==h.src&&c.change.push(h):c.add.push(h)}(0<c.del.length||0<c.add.length||0<c.change.length)&&r.change.push(c)}}else r.add.push([n,l])}return r}function kr(e,t,n,r){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(l){return qn(a,l)}),a}function wo(e,t){p(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(le&&console.debug("Dexie: Creating missing table",n),kr(t,n,e[n].primKey,e[n].indexes))})}function qn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Rn(e,t,n){var r={};return M(t.objectStoreNames,0).forEach(function(a){for(var l=n.objectStore(a),c=mr(bo(m=l.keyPath),m||"",!0,!1,!!l.autoIncrement,m&&typeof m!="string",!0),d=[],g=0;g<l.indexNames.length;++g){var w=l.index(l.indexNames[g]),m=w.keyPath,w=mr(w.name,m,!!w.unique,!!w.multiEntry,!1,m&&typeof m!="string",!1);d.push(w)}r[a]=br(a,c,d)}),r}function Bn(e,t,n){for(var r=n.db.objectStoreNames,a=0;a<r.length;++a){var l=r[a],c=n.objectStore(l);e._hasGetAll="getAll"in c;for(var d=0;d<c.indexNames.length;++d){var g=c.indexNames[d],m=c.index(g).keyPath,w=typeof m=="string"?m:"["+M(m).join("+")+"]";!t[l]||(m=t[l].idxByName[w])&&(m.name=g,delete t[l].idxByName[w],t[l].idxByName[g]=m)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function xo(e){return e.split(",").map(function(t,n){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return mr(r,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),D(a),n===0)})}var Ki=(Nn.prototype._parseStoresSpec=function(e,t){p(e).forEach(function(n){if(e[n]!==null){var r=xo(e[n]),a=r.shift();if(a.unique=!0,a.multi)throw new ie.Schema("Primary key cannot be multi-valued");r.forEach(function(l){if(l.auto)throw new ie.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new ie.Schema("Index must have a name and cannot be an empty string")}),t[n]=br(n,a,r)}})},Nn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?O(this._cfg.storesSource,n):n;var n=t._versions,r={},a={};return n.forEach(function(l){O(r,l._cfg.storesSource),a=l._cfg.dbschema={},l._parseStoresSpec(r,a)}),t._dbSchema=a,wr(t,[t._allTables,t,t.Transaction.prototype]),Fn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],p(a),a),t._storeNames=p(a),this},Nn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ae(this._cfg.contentUpgrade||xe,e),this},Nn);function Nn(){}function Dr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Dt(Pn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Sr(e){return e&&typeof e.databases=="function"}function Tr(e){return Tt(function(){return ne.letThrough=!0,e()})}function Er(e){return!("from"in e)}var Ze=function(e,t){if(!this){var n=new Ze;return e&&"d"in e&&O(n,e),n}O(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function vn(e,t,n){var r=me(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(Er(e))return O(e,{from:t,to:n,d:1});var a=e.l,r=e.r;if(me(n,e.from)<0)return a?vn(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Do(e);if(0<me(t,e.to))return r?vn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Do(e);me(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<me(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,a&&!e.l&&pn(e,a),r&&n&&pn(e,r)}}function pn(e,t){Er(t)||function n(r,g){var l=g.from,c=g.to,d=g.l,g=g.r;vn(r,l,c),d&&n(r,d),g&&n(r,g)}(e,t)}function ko(e,t){var n=Hn(t),r=n.next();if(r.done)return!1;for(var a=r.value,l=Hn(e),c=l.next(a.from),d=c.value;!r.done&&!c.done;){if(me(d.from,a.to)<=0&&0<=me(d.to,a.from))return!0;me(a.from,d.from)<0?a=(r=n.next(d.from)).value:d=(c=l.next(a.from)).value}return!1}function Hn(e){var t=Er(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&me(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||me(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Do(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),a=1<r?"r":r<-1?"l":"";a&&(t=a=="r"?"l":"r",n=u({},e),r=e[a],e.from=r.from,e.to=r.to,e[a]=r[a],n[a]=r[t],(e[t]=n).d=So(n)),e.d=So(e)}function So(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function zn(e,t){return p(t).forEach(function(n){e[n]?pn(e[n],t[n]):e[n]=function r(a){var l,c,d={};for(l in a)F(a,l)&&(c=a[l],d[l]=!c||typeof c!="object"||De.has(c.constructor)?c:r(c));return d}(t[n])}),e}function Or(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&ko(t[n],e[n])})}I(Ze.prototype,((ft={add:function(e){return pn(this,e),this},addKey:function(e){return vn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return vn(t,n,n)}),this},hasKey:function(e){var t=Hn(this).next(e).value;return t&&me(t.from,e)<=0&&0<=me(t.to,e)}})[Be]=function(){return Hn(this)},ft));var Bt={},Cr={},Pr=!1;function Ln(e){zn(Cr,e),Pr||(Pr=!0,setTimeout(function(){Pr=!1,Ir(Cr,!(Cr={}))},0))}function Ir(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,a=Object.values(Bt);r<a.length;r++)To(c=a[r],e,n,t);else for(var l in e){var c,d=/^idb\:\/\/(.*)\/(.*)\//.exec(l);d&&(l=d[1],d=d[2],(c=Bt["idb://".concat(l,"/").concat(d)])&&To(c,e,n,t))}n.forEach(function(g){return g()})}function To(e,t,n,r){for(var a=[],l=0,c=Object.entries(e.queries.query);l<c.length;l++){for(var d=c[l],g=d[0],m=[],w=0,h=d[1];w<h.length;w++){var k=h[w];Or(t,k.obsSet)?k.subscribers.forEach(function(b){return n.add(b)}):r&&m.push(k)}r&&a.push([g,m])}if(r)for(var y=0,_=a;y<_.length;y++){var x=_[y],g=x[0],m=x[1];e.queries.query[g]=m}}function Fi(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?He(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,a=Math.round(10*e.verno),l=!1;function c(){if(t.openCanceller!==r)throw new ie.DatabaseClosed("db.open() was cancelled")}function d(){return new ee(function(k,y){if(c(),!n)throw new ie.MissingAPI;var _=e.name,x=t.autoSchema||!a?n.open(_):n.open(_,a);if(!x)throw new ie.MissingAPI;x.onerror=mt(y),x.onblocked=Me(e._fireOnBlocked),x.onupgradeneeded=Me(function(b){var S;w=x.transaction,t.autoSchema&&!e._options.allowEmptyDB?(x.onerror=cn,w.abort(),x.result.close(),(S=n.deleteDatabase(_)).onsuccess=S.onerror=Me(function(){y(new ie.NoSuchDatabase("Database ".concat(_," doesnt exist")))})):(w.onerror=mt(y),b=b.oldVersion>Math.pow(2,62)?0:b.oldVersion,h=b<1,e.idbdb=x.result,l&&Mi(e,w),Ai(e,b/10,w,y))},y),x.onsuccess=Me(function(){w=null;var b,S,T,E,j,z=e.idbdb=x.result,J=M(z.objectStoreNames);if(0<J.length)try{var L=z.transaction((E=J).length===1?E[0]:E,"readonly");if(t.autoSchema)S=z,T=L,(b=e).verno=S.version/10,T=b._dbSchema=Rn(0,S,T),b._storeNames=M(S.objectStoreNames,0),Fn(b,[b._allTables],p(T),T);else if(Bn(e,e._dbSchema,L),((j=xr(Rn(0,(j=e).idbdb,L),j._dbSchema)).add.length||j.change.some(function(V){return V.add.length||V.change.length}))&&!l)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),z.close(),a=z.version+1,l=!0,k(d());Kn(e,L)}catch{}tn.push(e),z.onversionchange=Me(function(V){t.vcFired=!0,e.on("versionchange").fire(V)}),z.onclose=Me(function(V){e.on("close").fire(V)}),h&&(j=e._deps,L=_,z=j.indexedDB,j=j.IDBKeyRange,Sr(z)||L===Pn||Dr(z,j).put({name:L}).catch(xe)),k()},y)}).catch(function(k){switch(k==null?void 0:k.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d();break;case"VersionError":if(0<a)return a=0,d()}return ee.reject(k)})}var g,m=t.dbReadyResolve,w=null,h=!1;return ee.race([r,(typeof navigator>"u"?ee.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(k){function y(){return indexedDB.databases().finally(k)}g=setInterval(y,100),y()}).finally(function(){return clearInterval(g)}):Promise.resolve()).then(d)]).then(function(){return c(),t.onReadyBeingFired=[],ee.resolve(Tr(function(){return e.on.ready.fire(e.vip)})).then(function k(){if(0<t.onReadyBeingFired.length){var y=t.onReadyBeingFired.reduce(ae,xe);return t.onReadyBeingFired=[],ee.resolve(Tr(function(){return y(e.vip)})).then(k)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(k){t.dbOpenError=k;try{w&&w.abort()}catch{}return r===t.openCanceller&&e._close(),He(k)}).finally(function(){t.openComplete=!0,m()}).then(function(){var k;return h&&(k={},e.tables.forEach(function(y){y.schema.indexes.forEach(function(_){_.name&&(k["idb://".concat(e.name,"/").concat(y.name,"/").concat(_.name)]=new Ze(-1/0,[[[]]]))}),k["idb://".concat(e.name,"/").concat(y.name,"/")]=k["idb://".concat(e.name,"/").concat(y.name,"/:dels")]=new Ze(-1/0,[[[]]])}),Pt(fn).fire(k),Ir(k,!0)),e})}function jr(e){function t(l){return e.next(l)}var n=a(t),r=a(function(l){return e.throw(l)});function a(l){return function(g){var d=l(g),g=d.value;return d.done?g:g&&typeof g.then=="function"?g.then(n,r):D(g)?Promise.all(g).then(n,r):n(g)}}return a(t)()}function Un(e,t,n){for(var r=D(e)?e.slice():[e],a=0;a<n;++a)r.push(t);return r}var qi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return u(u({},e),{table:function(t){var n=e.table(t),r=n.schema,a={},l=[];function c(h,k,y){var _=hn(h),x=a[_]=a[_]||[],b=h==null?0:typeof h=="string"?1:h.length,S=0<k,S=u(u({},y),{name:S?"".concat(_,"(virtual-from:").concat(y.name,")"):y.name,lowLevelIndex:y,isVirtual:S,keyTail:k,keyLength:b,extractKey:_r(h),unique:!S&&y.unique});return x.push(S),S.isPrimaryKey||l.push(S),1<b&&c(b===2?h[0]:h.slice(0,b-1),k+1,y),x.sort(function(T,E){return T.keyTail-E.keyTail}),S}t=c(r.primaryKey.keyPath,0,r.primaryKey),a[":id"]=[t];for(var d=0,g=r.indexes;d<g.length;d++){var m=g[d];c(m.keyPath,0,m)}function w(h){var k,y=h.query.index;return y.isVirtual?u(u({},h),{query:{index:y.lowLevelIndex,range:(k=h.query.range,y=y.keyTail,{type:k.type===1?2:k.type,lower:Un(k.lower,k.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:Un(k.upper,k.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}):h}return u(u({},n),{schema:u(u({},r),{primaryKey:t,indexes:l,getIndexByKeyPath:function(h){return(h=a[hn(h)])&&h[0]}}),count:function(h){return n.count(w(h))},query:function(h){return n.query(w(h))},openCursor:function(h){var k=h.query.index,y=k.keyTail,_=k.isVirtual,x=k.keyLength;return _?n.openCursor(w(h)).then(function(S){return S&&b(S)}):n.openCursor(h);function b(S){return Object.create(S,{continue:{value:function(T){T!=null?S.continue(Un(T,h.reverse?e.MAX_KEY:e.MIN_KEY,y)):h.unique?S.continue(S.key.slice(0,x).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,y)):S.continue()}},continuePrimaryKey:{value:function(T,E){S.continuePrimaryKey(Un(T,e.MAX_KEY,y),E)}},primaryKey:{get:function(){return S.primaryKey}},key:{get:function(){var T=S.key;return x===1?T[0]:T.slice(0,x)}},value:{get:function(){return S.value}}})}}})}})}};function Ar(e,t,n,r){return n=n||{},r=r||"",p(e).forEach(function(a){var l,c,d;F(t,a)?(l=e[a],c=t[a],typeof l=="object"&&typeof c=="object"&&l&&c?(d=Ue(l))!==Ue(c)?n[r+a]=t[a]:d==="Object"?Ar(l,c,n,r+a+"."):l!==c&&(n[r+a]=t[a]):l!==c&&(n[r+a]=t[a])):n[r+a]=void 0}),p(t).forEach(function(a){F(e,a)||(n[r+a]=t[a])}),n}function Mr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Ri={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return u(u({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return u(u({},n),{mutate:function(a){var l=ne.trans,c=l.table(t).hook,d=c.deleting,g=c.creating,m=c.updating;switch(a.type){case"add":if(g.fire===xe)break;return l._promise("readwrite",function(){return w(a)},!0);case"put":if(g.fire===xe&&m.fire===xe)break;return l._promise("readwrite",function(){return w(a)},!0);case"delete":if(d.fire===xe)break;return l._promise("readwrite",function(){return w(a)},!0);case"deleteRange":if(d.fire===xe)break;return l._promise("readwrite",function(){return function h(k,y,_){return n.query({trans:k,values:!1,query:{index:r,range:y},limit:_}).then(function(x){var b=x.result;return w({type:"delete",keys:b,trans:k}).then(function(S){return 0<S.numFailures?Promise.reject(S.failures[0]):b.length<_?{failures:[],numFailures:0,lastResult:void 0}:h(k,u(u({},y),{lower:b[b.length-1],lowerOpen:!0}),_)})})}(a.trans,a.range,1e4)},!0)}return n.mutate(a);function w(h){var k,y,_,x=ne.trans,b=h.keys||Mr(r,h);if(!b)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?u(u({},h),{keys:b}):u({},h)).type!=="delete"&&(h.values=f([],h.values)),h.keys&&(h.keys=f([],h.keys)),k=n,_=b,((y=h).type==="add"?Promise.resolve([]):k.getMany({trans:y.trans,keys:_,cache:"immutable"})).then(function(S){var T=b.map(function(E,j){var z,J,L,V=S[j],Z={onerror:null,onsuccess:null};return h.type==="delete"?d.fire.call(Z,E,V,x):h.type==="add"||V===void 0?(z=g.fire.call(Z,E,h.values[j],x),E==null&&z!=null&&(h.keys[j]=E=z,r.outbound||U(h.values[j],r.keyPath,E))):(z=Ar(V,h.values[j]),(J=m.fire.call(Z,z,E,V,x))&&(L=h.values[j],Object.keys(J).forEach(function(G){F(L,G)?L[G]=J[G]:U(L,G,J[G])}))),Z});return n.mutate(h).then(function(E){for(var j=E.failures,z=E.results,J=E.numFailures,E=E.lastResult,L=0;L<b.length;++L){var V=(z||b)[L],Z=T[L];V==null?Z.onerror&&Z.onerror(j[L]):Z.onsuccess&&Z.onsuccess(h.type==="put"&&S[L]?h.values[L]:V)}return{failures:j,results:z,numFailures:J,lastResult:E}}).catch(function(E){return T.forEach(function(j){return j.onerror&&j.onerror(E)}),Promise.reject(E)})})}}})}})}};function Eo(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],a=0,l=0;a<t.keys.length&&l<e.length;++a)me(t.keys[a],e[l])===0&&(r.push(n?Fe(t.values[a]):t.values[a]),++l);return r.length===e.length?r:null}catch{return null}}var Bi={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return u(u({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var a=Eo(r.keys,r.trans._cache,r.cache==="clone");return a?ee.resolve(a):n.getMany(r).then(function(l){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Fe(l):l},l})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function Oo(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Co(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ni={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new Ze(e.MIN_KEY,e.MAX_KEY);return u(u({},e),{transaction:function(r,a,l){if(ne.subscr&&a!=="readonly")throw new ie.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ne.querier));return e.transaction(r,a,l)},table:function(r){var a=e.table(r),l=a.schema,c=l.primaryKey,h=l.indexes,d=c.extractKey,g=c.outbound,m=c.autoIncrement&&h.filter(function(y){return y.compound&&y.keyPath.includes(c.keyPath)}),w=u(u({},a),{mutate:function(y){function _(G){return G="idb://".concat(t,"/").concat(r,"/").concat(G),E[G]||(E[G]=new Ze)}var x,b,S,T=y.trans,E=y.mutatedParts||(y.mutatedParts={}),j=_(""),z=_(":dels"),J=y.type,Z=y.type==="deleteRange"?[y.range]:y.type==="delete"?[y.keys]:y.values.length<50?[Mr(c,y).filter(function(G){return G}),y.values]:[],L=Z[0],V=Z[1],Z=y.trans._cache;return D(L)?(j.addKeys(L),(Z=J==="delete"||L.length===V.length?Eo(L,Z):null)||z.addKeys(L),(Z||V)&&(x=_,b=Z,S=V,l.indexes.forEach(function(G){var re=x(G.name||"");function fe(ge){return ge!=null?G.extractKey(ge):null}function pe(ge){return G.multiEntry&&D(ge)?ge.forEach(function(ut){return re.addKey(ut)}):re.addKey(ge)}(b||S).forEach(function(ge,$e){var ce=b&&fe(b[$e]),$e=S&&fe(S[$e]);me(ce,$e)!==0&&(ce!=null&&pe(ce),$e!=null&&pe($e))})}))):L?(V={from:(V=L.lower)!==null&&V!==void 0?V:e.MIN_KEY,to:(V=L.upper)!==null&&V!==void 0?V:e.MAX_KEY},z.add(V),j.add(V)):(j.add(n),z.add(n),l.indexes.forEach(function(G){return _(G.name).add(n)})),a.mutate(y).then(function(G){return!L||y.type!=="add"&&y.type!=="put"||(j.addKeys(G.results),m&&m.forEach(function(re){for(var fe=y.values.map(function(ce){return re.extractKey(ce)}),pe=re.keyPath.findIndex(function(ce){return ce===c.keyPath}),ge=0,ut=G.results.length;ge<ut;++ge)fe[ge][pe]=G.results[ge];_(re.name).addKeys(fe)})),T.mutatedParts=zn(T.mutatedParts||{},E),G})}}),h=function(_){var x=_.query,_=x.index,x=x.range;return[_,new Ze((_=x.lower)!==null&&_!==void 0?_:e.MIN_KEY,(x=x.upper)!==null&&x!==void 0?x:e.MAX_KEY)]},k={get:function(y){return[c,new Ze(y.key)]},getMany:function(y){return[c,new Ze().addKeys(y.keys)]},count:h,query:h,openCursor:h};return p(k).forEach(function(y){w[y]=function(_){var x=ne.subscr,b=!!x,S=Oo(ne,a)&&Co(y,_)?_.obsSet={}:x;if(b){var T=function(V){return V="idb://".concat(t,"/").concat(r,"/").concat(V),S[V]||(S[V]=new Ze)},E=T(""),j=T(":dels"),x=k[y](_),b=x[0],x=x[1];if((y==="query"&&b.isPrimaryKey&&!_.values?j:T(b.name||"")).add(x),!b.isPrimaryKey){if(y!=="count"){var z=y==="query"&&g&&_.values&&a.query(u(u({},_),{values:!1}));return a[y].apply(this,arguments).then(function(V){if(y==="query"){if(g&&_.values)return z.then(function(fe){return fe=fe.result,E.addKeys(fe),V});var Z=_.values?V.result.map(d):V.result;(_.values?E:j).addKeys(Z)}else if(y==="openCursor"){var G=V,re=_.values;return G&&Object.create(G,{key:{get:function(){return j.addKey(G.primaryKey),G.key}},primaryKey:{get:function(){var fe=G.primaryKey;return j.addKey(fe),fe}},value:{get:function(){return re&&E.addKey(G.primaryKey),G.value}}})}return V})}j.add(n)}}return a[y].apply(this,arguments)}}),w}})}};function Po(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===r?null:(t=u({},t),D(t.keys)&&(t.keys=t.keys.filter(function(a,l){return!(l in n.failures)})),"values"in t&&D(t.values)&&(t.values=t.values.filter(function(a,l){return!(l in n.failures)})),t)}function Kr(e,t){return n=e,((r=t).lower===void 0||(r.lowerOpen?0<me(n,r.lower):0<=me(n,r.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?me(e,t.upper)<0:me(e,t.upper)<=0));var n,r}function Io(e,t,k,r,a,l){if(!k||k.length===0)return e;var c=t.query.index,d=c.multiEntry,g=t.query.range,m=r.schema.primaryKey.extractKey,w=c.extractKey,h=(c.lowLevelIndex||c).extractKey,k=k.reduce(function(y,_){var x=y,b=[];if(_.type==="add"||_.type==="put")for(var S=new Ze,T=_.values.length-1;0<=T;--T){var E,j=_.values[T],z=m(j);S.hasKey(z)||(E=w(j),(d&&D(E)?E.some(function(G){return Kr(G,g)}):Kr(E,g))&&(S.addKey(z),b.push(j)))}switch(_.type){case"add":var J=new Ze().addKeys(t.values?y.map(function(re){return m(re)}):y),x=y.concat(t.values?b.filter(function(re){return re=m(re),!J.hasKey(re)&&(J.addKey(re),!0)}):b.map(function(re){return m(re)}).filter(function(re){return!J.hasKey(re)&&(J.addKey(re),!0)}));break;case"put":var L=new Ze().addKeys(_.values.map(function(re){return m(re)}));x=y.filter(function(re){return!L.hasKey(t.values?m(re):re)}).concat(t.values?b:b.map(function(re){return m(re)}));break;case"delete":var V=new Ze().addKeys(_.keys);x=y.filter(function(re){return!V.hasKey(t.values?m(re):re)});break;case"deleteRange":var Z=_.range;x=y.filter(function(re){return!Kr(m(re),Z)})}return x},e);return k===e?e:(k.sort(function(y,_){return me(h(y),h(_))||me(m(y),m(_))}),t.limit&&t.limit<1/0&&(k.length>t.limit?k.length=t.limit:e.length===t.limit&&k.length<t.limit&&(a.dirty=!0)),l?Object.freeze(k):k)}function jo(e,t){return me(e.lower,t.lower)===0&&me(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Hi(e,t){return function(n,r,a,l){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=me(n,r))===0){if(a&&l)return 0;if(a)return 1;if(l)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,a,l){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=me(n,r))===0){if(a&&l)return 0;if(a)return-1;if(l)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function zi(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var a,l;e.subscribers.delete(n),e.subscribers.size===0&&(a=e,l=t,setTimeout(function(){a.subscribers.size===0&&he(l,a)},3e3))})}var Li={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return u(u({},e),{transaction:function(n,r,a){var l,c,d=e.transaction(n,r,a);return r==="readwrite"&&(c=(l=new AbortController).signal,a=function(g){return function(){if(l.abort(),r==="readwrite"){for(var m=new Set,w=0,h=n;w<h.length;w++){var k=h[w],y=Bt["idb://".concat(t,"/").concat(k)];if(y){var _=e.table(k),x=y.optimisticOps.filter(function(re){return re.trans===d});if(d._explicit&&g&&d.mutatedParts)for(var b=0,S=Object.values(y.queries.query);b<S.length;b++)for(var T=0,E=(J=S[b]).slice();T<E.length;T++)Or((L=E[T]).obsSet,d.mutatedParts)&&(he(J,L),L.subscribers.forEach(function(re){return m.add(re)}));else if(0<x.length){y.optimisticOps=y.optimisticOps.filter(function(re){return re.trans!==d});for(var j=0,z=Object.values(y.queries.query);j<z.length;j++)for(var J,L,V,Z=0,G=(J=z[j]).slice();Z<G.length;Z++)(L=G[Z]).res!=null&&d.mutatedParts&&(g&&!L.dirty?(V=Object.isFrozen(L.res),V=Io(L.res,L.req,x,_,L,V),L.dirty?(he(J,L),L.subscribers.forEach(function(re){return m.add(re)})):V!==L.res&&(L.res=V,L.promise=ee.resolve({result:V}))):(L.dirty&&he(J,L),L.subscribers.forEach(function(re){return m.add(re)})))}}}m.forEach(function(re){return re()})}}},d.addEventListener("abort",a(!1),{signal:c}),d.addEventListener("error",a(!1),{signal:c}),d.addEventListener("complete",a(!0),{signal:c})),d},table:function(n){var r=e.table(n),a=r.schema.primaryKey;return u(u({},r),{mutate:function(l){var c=ne.trans;if(a.outbound||c.db._options.cache==="disabled"||c.explicit||c.idbtrans.mode!=="readwrite")return r.mutate(l);var d=Bt["idb://".concat(t,"/").concat(n)];return d?(c=r.mutate(l),l.type!=="add"&&l.type!=="put"||!(50<=l.values.length||Mr(a,l).some(function(g){return g==null}))?(d.optimisticOps.push(l),l.mutatedParts&&Ln(l.mutatedParts),c.then(function(g){0<g.numFailures&&(he(d.optimisticOps,l),(g=Po(0,l,g))&&d.optimisticOps.push(g),l.mutatedParts&&Ln(l.mutatedParts))}),c.catch(function(){he(d.optimisticOps,l),l.mutatedParts&&Ln(l.mutatedParts)})):c.then(function(g){var m=Po(0,u(u({},l),{values:l.values.map(function(w,h){var k;return g.failures[h]?w:(w=(k=a.keyPath)!==null&&k!==void 0&&k.includes(".")?Fe(w):u({},w),U(w,a.keyPath,g.results[h]),w)})}),g);d.optimisticOps.push(m),queueMicrotask(function(){return l.mutatedParts&&Ln(l.mutatedParts)})}),c):r.mutate(l)},query:function(l){if(!Oo(ne,r)||!Co("query",l))return r.query(l);var c=((m=ne.trans)===null||m===void 0?void 0:m.db._options.cache)==="immutable",h=ne,d=h.requery,g=h.signal,m=function(_,x,b,S){var T=Bt["idb://".concat(_,"/").concat(x)];if(!T)return[];if(!(x=T.queries[b]))return[null,!1,T,null];var E=x[(S.query?S.query.index.name:null)||""];if(!E)return[null,!1,T,null];switch(b){case"query":var j=E.find(function(z){return z.req.limit===S.limit&&z.req.values===S.values&&jo(z.req.query.range,S.query.range)});return j?[j,!0,T,E]:[E.find(function(z){return("limit"in z.req?z.req.limit:1/0)>=S.limit&&(!S.values||z.req.values)&&Hi(z.req.query.range,S.query.range)}),!1,T,E];case"count":return j=E.find(function(z){return jo(z.req.query.range,S.query.range)}),[j,!!j,T,E]}}(t,n,"query",l),w=m[0],h=m[1],k=m[2],y=m[3];return w&&h?w.obsSet=l.obsSet:(h=r.query(l).then(function(_){var x=_.result;if(w&&(w.res=x),c){for(var b=0,S=x.length;b<S;++b)Object.freeze(x[b]);Object.freeze(x)}else _.result=Fe(x);return _}).catch(function(_){return y&&w&&he(y,w),Promise.reject(_)}),w={obsSet:l.obsSet,promise:h,subscribers:new Set,type:"query",req:l,dirty:!1},y?y.push(w):(y=[w],(k=k||(Bt["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[l.query.index.name||""]=y)),zi(w,y,d,g),w.promise.then(function(_){return{result:Io(_.result,l,k==null?void 0:k.optimisticOps,r,w,c)}})}})}})}};function Yn(e,t){return new Proxy(e,{get:function(n,r,a){return r==="db"?t:Reflect.get(n,r,a)}})}var Dt=(ze.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ie.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ie.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(ji),n.stores({}),this._state.autoSchema=!1,n)},ze.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||ne.letThrough||this._vip)?e():new ee(function(n,r){if(t._state.openComplete)return r(new ie.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new ie.DatabaseClosed);t.open().catch(xe)}t._state.dbReadyPromise.then(n,r)}).then(e)},ze.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,a=e.name;return a&&this.unuse({stack:t,name:a}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:r??10,name:a}),e.sort(function(l,c){return l.level-c.level}),this},ze.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(a){return r?a.create!==r:!!n&&a.name!==n})),this},ze.prototype.open=function(){var e=this;return Ft(vt,function(){return Fi(e)})},ze.prototype._close=function(){var e=this._state,t=tn.indexOf(this);if(0<=t&&tn.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ee(function(n){e.dbReadyResolve=n}),e.openCanceller=new ee(function(n,r){e.cancelOpen=r}))},ze.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new ie.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new ie.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},ze.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new ee(function(a,l){function c(){t.close(e);var d=t._deps.indexedDB.deleteDatabase(t.name);d.onsuccess=Me(function(){var g,m,w;g=t._deps,m=t.name,w=g.indexedDB,g=g.IDBKeyRange,Sr(w)||m===Pn||Dr(w,g).delete(m).catch(xe),a()}),d.onerror=mt(l),d.onblocked=t._fireOnBlocked}if(n)throw new ie.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(c):c()})},ze.prototype.backendDB=function(){return this.idbdb},ze.prototype.isOpen=function(){return this.idbdb!==null},ze.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},ze.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ze.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ze.prototype,"tables",{get:function(){var e=this;return p(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),ze.prototype.transaction=function(){var e=(function(t,n,r){var a=arguments.length;if(a<2)throw new ie.InvalidArgument("Too few arguments");for(var l=new Array(a-1);--a;)l[a-1]=arguments[a];return r=l.pop(),[t,se(l),r]}).apply(this,arguments);return this._transaction.apply(this,e)},ze.prototype._transaction=function(e,t,n){var r=this,a=ne.trans;a&&a.db===this&&e.indexOf("!")===-1||(a=null);var l,c,d=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(c=t.map(function(m){if(m=m instanceof r.Table?m.name:m,typeof m!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return m}),e=="r"||e===dr)l=dr;else{if(e!="rw"&&e!=hr)throw new ie.InvalidArgument("Invalid transaction mode: "+e);l=hr}if(a){if(a.mode===dr&&l===hr){if(!d)throw new ie.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&c.forEach(function(m){if(a&&a.storeNames.indexOf(m)===-1){if(!d)throw new ie.SubTransaction("Table "+m+" not included in parent transaction.");a=null}}),d&&a&&!a.active&&(a=null)}}catch(m){return a?a._promise(null,function(w,h){h(m)}):He(m)}var g=(function m(w,h,k,y,_){return ee.resolve().then(function(){var x=ne.transless||ne,b=w._createTransaction(h,k,w._dbSchema,y);if(b.explicit=!0,x={trans:b,transless:x},y)b.idbtrans=y.idbtrans;else try{b.create(),b.idbtrans._explicit=!0,w._state.PR1398_maxLoop=3}catch(E){return E.name===ct.InvalidState&&w.isOpen()&&0<--w._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),w.close({disableAutoOpen:!1}),w.open().then(function(){return m(w,h,k,null,_)})):He(E)}var S,T=We(_);return T&&en(),x=ee.follow(function(){var E;(S=_.call(b,b))&&(T?(E=Et.bind(null,null),S.then(E,E)):typeof S.next=="function"&&typeof S.throw=="function"&&(S=jr(S)))},x),(S&&typeof S.then=="function"?ee.resolve(S).then(function(E){return b.active?E:He(new ie.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):x.then(function(){return S})).then(function(E){return y&&b._resolve(),b._completion.then(function(){return E})}).catch(function(E){return b._reject(E),He(E)})})}).bind(null,this,l,c,a,n);return a?a._promise(l,g,"lock"):ne.trans?Ft(ne.transless,function(){return r._whenReady(g)}):this._whenReady(g)},ze.prototype.table=function(e){if(!F(this._allTables,e))throw new ie.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},ze);function ze(e,t){var n=this;this._middlewares={},this.verno=0;var r=ze.dependencies;this._options=t=u({addons:ze.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,l,c,d,g,m={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:xe,dbReadyPromise:null,cancelOpen:xe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};m.dbReadyPromise=new ee(function(h){m.dbReadyResolve=h}),m.openCanceller=new ee(function(h,k){m.cancelOpen=k}),this._state=m,this.name=e,this.on=sn(this,"populate","blocked","versionchange","close",{ready:[ae,xe]}),this.on.ready.subscribe=N(this.on.ready.subscribe,function(h){return function(k,y){ze.vip(function(){var _,x=n._state;x.openComplete?(x.dbOpenError||ee.resolve().then(k),y&&h(k)):x.onReadyBeingFired?(x.onReadyBeingFired.push(k),y&&h(k)):(h(k),_=n,y||h(function b(){_.on.ready.unsubscribe(k),_.on.ready.unsubscribe(b)}))})}}),this.Collection=(a=this,un(Si.prototype,function(S,b){this.db=a;var y=uo,_=null;if(b)try{y=b()}catch(T){_=T}var x=S._ctx,b=x.table,S=b.hook.reading.fire;this._ctx={table:b,index:x.index,isPrimKey:!x.index||b.schema.primKey.keyPath&&x.index===b.schema.primKey.name,range:y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:_,or:x.or,valueMapper:S!==Mt?S:null}})),this.Table=(l=this,un(ho.prototype,function(h,k,y){this.db=l,this._tx=y,this.name=h,this.schema=k,this.hook=l._allTables[h]?l._allTables[h].hook:sn(null,{creating:[xn,xe],reading:[wn,Mt],updating:[Dn,xe],deleting:[kn,xe]})})),this.Transaction=(c=this,un(Oi.prototype,function(h,k,y,_,x){var b=this;this.db=c,this.mode=h,this.storeNames=k,this.schema=y,this.chromeTransactionDurability=_,this.idbtrans=null,this.on=sn(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ee(function(S,T){b._resolve=S,b._reject=T}),this._completion.then(function(){b.active=!1,b.on.complete.fire()},function(S){var T=b.active;return b.active=!1,b.on.error.fire(S),b.parent?b.parent._reject(S):T&&b.idbtrans&&b.idbtrans.abort(),He(S)})})),this.Version=(d=this,un(Ki.prototype,function(h){this.db=d,this._cfg={version:h,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(g=this,un(mo.prototype,function(h,k,y){if(this.db=g,this._ctx={table:h,index:k===":id"?null:k,or:y},this._cmp=this._ascending=me,this._descending=function(_,x){return me(x,_)},this._max=function(_,x){return 0<me(_,x)?_:x},this._min=function(_,x){return me(_,x)<0?_:x},this._IDBKeyRange=g._deps.IDBKeyRange,!this._IDBKeyRange)throw new ie.MissingAPI})),this.on("versionchange",function(h){0<h.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(h){!h.newVersion||h.newVersion<h.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(h.oldVersion/10))}),this._maxKey=dn(t.IDBKeyRange),this._createTransaction=function(h,k,y,_){return new n.Transaction(h,k,y,n._options.chromeTransactionDurability,_)},this._fireOnBlocked=function(h){n.on("blocked").fire(h),tn.filter(function(k){return k.name===n.name&&k!==n&&!k._state.vcFired}).map(function(k){return k.on("versionchange").fire(h)})},this.use(Bi),this.use(Li),this.use(Ni),this.use(qi),this.use(Ri);var w=new Proxy(this,{get:function(h,k,y){if(k==="_vip")return!0;if(k==="table")return function(x){return Yn(n.table(x),w)};var _=Reflect.get(h,k,y);return _ instanceof ho?Yn(_,w):k==="tables"?_.map(function(x){return Yn(x,w)}):k==="_createTransaction"?function(){return Yn(_.apply(this,arguments),w)}:_}});this.vip=w,r.forEach(function(h){return h(n)})}var Wn,ft=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ui=(Fr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Fr.prototype[ft]=function(){return this},Fr);function Fr(e){this._subscribe=e}try{Wn={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{Wn={indexedDB:null,IDBKeyRange:null}}function Ao(e){var t,n=!1,r=new Ui(function(a){var l=We(e),c,d=!1,g={},m={},w={get closed(){return d},unsubscribe:function(){d||(d=!0,c&&c.abort(),h&&Pt.storagemutated.unsubscribe(y))}};a.start&&a.start(w);var h=!1,k=function(){return fr(_)},y=function(x){zn(g,x),Or(m,g)&&k()},_=function(){var x,b,S;!d&&Wn.indexedDB&&(g={},x={},c&&c.abort(),c=new AbortController,S=function(T){var E=Zt();try{l&&en();var j=Tt(e,T);return j=l?j.finally(Et):j}finally{E&&$t()}}(b={subscr:x,signal:c.signal,requery:k,querier:e,trans:null}),Promise.resolve(S).then(function(T){n=!0,t=T,d||b.signal.aborted||(g={},function(E){for(var j in E)if(F(E,j))return;return 1}(m=x)||h||(Pt(fn,y),h=!0),fr(function(){return!d&&a.next&&a.next(T)}))},function(T){n=!1,["DatabaseClosedError","AbortError"].includes(T==null?void 0:T.name)||d||fr(function(){d||a.error&&a.error(T)})}))};return setTimeout(k,0),w});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var Nt=Dt;function qr(e){var t=It;try{It=!0,Pt.storagemutated.fire(e),Ir(e,!0)}finally{It=t}}I(Nt,u(u({},gt),{delete:function(e){return new Nt(e,{addons:[]}).delete()},exists:function(e){return new Nt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=Nt.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Sr(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(a){return a.name}).filter(function(a){return a!==Pn})}):Dr(n,t).toCollection().primaryKeys()).then(e)}catch{return He(new ie.MissingAPI)}var t,n},defineClass:function(){return function(e){O(this,e)}},ignoreTransaction:function(e){return ne.trans?Ft(ne.transless,e):e()},vip:Tr,async:function(e){return function(){try{var t=jr(e.apply(this,arguments));return t&&typeof t.then=="function"?t:ee.resolve(t)}catch(n){return He(n)}}},spawn:function(e,t,n){try{var r=jr(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:ee.resolve(r)}catch(a){return He(a)}},currentTransaction:{get:function(){return ne.trans||null}},waitFor:function(e,t){return t=ee.resolve(typeof e=="function"?Nt.ignoreTransaction(e):e).timeout(t||6e4),ne.trans?ne.trans.waitFor(t):t},Promise:ee,debug:{get:function(){return le},set:function(e){be(e)}},derive:W,extend:O,props:I,override:N,Events:sn,on:Pt,liveQuery:Ao,extendObservabilitySet:zn,getByKeyPath:X,setByKeyPath:U,delByKeyPath:function(e,t){typeof t=="string"?U(e,t,void 0):"length"in t&&[].map.call(t,function(n){U(e,n,void 0)})},shallowClone:oe,deepClone:Fe,getObjectDiff:Ar,cmp:me,asap:H,minKey:-1/0,addons:[],connections:tn,errnames:ct,dependencies:Wn,cache:Bt,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),Nt.maxKey=dn(Nt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Pt(fn,function(e){It||(e=new CustomEvent(yr,{detail:e}),It=!0,dispatchEvent(e),It=!1)}),addEventListener(yr,function(e){e=e.detail,It||qr(e)}));var on,It=!1,Mo=function(){};return typeof BroadcastChannel<"u"&&((Mo=function(){(on=new BroadcastChannel(yr)).onmessage=function(e){return e.data&&qr(e.data)}})(),typeof on.unref=="function"&&on.unref(),Pt(fn,function(e){It||on.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Dt.disableBfCache&&e.persisted){le&&console.debug("Dexie: handling persisted pagehide"),on!=null&&on.close();for(var t=0,n=tn;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Dt.disableBfCache&&e.persisted&&(le&&console.debug("Dexie: handling persisted pageshow"),Mo(),qr({all:new Ze(-1/0,[[]])}))})),ee.rejectionMapper=function(e,t){return!e||e instanceof Qe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Vt[e.name]?e:(t=new Vt[e.name](t||e.message,e),"stack"in e&&B(t,"stack",{get:function(){return this.inner.stack}}),t)},be(le),u(Dt,Object.freeze({__proto__:null,Dexie:Dt,liveQuery:Ao,Entity:lo,cmp:me,PropModification:ln,replacePrefix:function(e,t){return new ln({replacePrefix:[e,t]})},add:function(e){return new ln({add:e})},remove:function(e){return new ln({remove:e})},default:Dt,RangeSet:Ze,mergeRanges:pn,rangesOverlap:ko}),{default:Dt}),Dt})}($n)),$n.exports}var Oa=Ea();const Wr=Sa(Oa),Lo=Symbol.for("Dexie"),nr=globalThis[Lo]||(globalThis[Lo]=Wr);if(Wr.semVer!==nr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Wr.semVer} and ${nr.semVer}`);const{liveQuery:rl,mergeRanges:ol,rangesOverlap:il,RangeSet:al,cmp:sl,Entity:ul,PropModification:ll,replacePrefix:cl,add:fl,remove:dl}=nr;class Ca{constructor(){this._db=new nr("FastingHours"),this._db.version(20).stores({history:"id, started",hunger:"id, created",water:"id, created"})}browseHistory(){return this._db.history.toArray()}browseHistoryByEnd(){return this._db.history.toArray().then(o=>o.filter(u=>u.ended===null)[0])}readHistory(o){return this._db.history.get({id:o})}editHistory(o){const i=Hr(o);return i.updated=new Date,this._db.history.put(i).then(()=>this._db.history.get({id:o.id}))}addHistory(){const o={id:crypto.randomUUID(),type:"history",created:new Date,updated:new Date,started:new Date,ended:null,notes:null};return this._db.history.add(o).then(()=>this._db.history.get({id:o.id}))}deleteHistory(o){return this._db.history.delete(o)}browseHunger(o=!1){return this._db.hunger.toArray().then(i=>o?(i.sort((u,f)=>u.created.getTime()<f.created.getTime()?1:u.created.getTime()>f.created.getTime()?-1:0),i.length===0?null:i[0]):i)}readHunger(o){return this._db.hunger.get({id:o})}editHunger(o){const i=Hr(o);return i.updated=new Date,this._db.hunger.put(i).then(()=>this._db.hunger.get({id:o.id}))}addHunger(o=5){const i={id:crypto.randomUUID(),type:"hunger",created:new Date,updated:new Date,level:o};return this._db.hunger.add(i).then(()=>this._db.hunger.get({id:i.id}))}deleteHunger(o){return this._db.hunger.delete(o)}browseWater(o=!1){return this._db.water.toArray().then(i=>{if(o){const u=new Date;u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0);const f=new Date(u.getTime());return f.setDate(f.getDate()+1),i.filter(v=>v.created.getTime()>u.getTime()&&v.created.getTime()<f.getTime())}else return i})}readWater(o){return this._db.water.get({id:o})}editWater(o){const i=Hr(o);return i.updated=new Date,this._db.water.put(i).then(()=>this._db.water.get({id:o.id}))}addWater(o){const i={id:crypto.randomUUID(),type:"water",created:new Date,updated:new Date,volume:o};return crypto.randomUUID(),this._db.water.add(i).then(()=>this._db.water.get({id:i.id}))}deleteWater(o){return this._db.water.delete(o)}}const ui=/^[a-z0-9]+(-[a-z0-9]+)*$/,or=(s,o,i,u="")=>{const f=s.split(":");if(s.slice(0,1)==="@"){if(f.length<2||f.length>3)return null;u=f.shift().slice(1)}if(f.length>3||!f.length)return null;if(f.length>1){const D=f.pop(),O=f.pop(),K={provider:f.length>0?f[0]:u,prefix:O,name:D};return o&&!er(K)?null:K}const v=f[0],p=v.split("-");if(p.length>1){const D={provider:u,prefix:p.shift(),name:p.join("-")};return o&&!er(D)?null:D}if(i&&u===""){const D={provider:u,prefix:"",name:v};return o&&!er(D,i)?null:D}return null},er=(s,o)=>s?!!((o&&s.prefix===""||s.prefix)&&s.name):!1,li=Object.freeze({left:0,top:0,width:16,height:16}),rr=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),ir=Object.freeze({...li,...rr}),Vr=Object.freeze({...ir,body:"",hidden:!1});function Pa(s,o){const i={};!s.hFlip!=!o.hFlip&&(i.hFlip=!0),!s.vFlip!=!o.vFlip&&(i.vFlip=!0);const u=((s.rotate||0)+(o.rotate||0))%4;return u&&(i.rotate=u),i}function Uo(s,o){const i=Pa(s,o);for(const u in Vr)u in rr?u in s&&!(u in i)&&(i[u]=rr[u]):u in o?i[u]=o[u]:u in s&&(i[u]=s[u]);return i}function Ia(s,o){const i=s.icons,u=s.aliases||Object.create(null),f=Object.create(null);function v(p){if(i[p])return f[p]=[];if(!(p in f)){f[p]=null;const D=u[p]&&u[p].parent,O=D&&v(D);O&&(f[p]=[D].concat(O))}return f[p]}return Object.keys(i).concat(Object.keys(u)).forEach(v),f}function ja(s,o,i){const u=s.icons,f=s.aliases||Object.create(null);let v={};function p(D){v=Uo(u[D]||f[D],v)}return p(o),i.forEach(p),Uo(s,v)}function ci(s,o){const i=[];if(typeof s!="object"||typeof s.icons!="object")return i;s.not_found instanceof Array&&s.not_found.forEach(f=>{o(f,null),i.push(f)});const u=Ia(s);for(const f in u){const v=u[f];v&&(o(f,ja(s,f,v)),i.push(f))}return i}const Aa={provider:"",aliases:{},not_found:{},...li};function zr(s,o){for(const i in o)if(i in s&&typeof s[i]!=typeof o[i])return!1;return!0}function fi(s){if(typeof s!="object"||s===null)return null;const o=s;if(typeof o.prefix!="string"||!s.icons||typeof s.icons!="object"||!zr(s,Aa))return null;const i=o.icons;for(const f in i){const v=i[f];if(!f||typeof v.body!="string"||!zr(v,Vr))return null}const u=o.aliases||Object.create(null);for(const f in u){const v=u[f],p=v.parent;if(!f||typeof p!="string"||!i[p]&&!u[p]||!zr(v,Vr))return null}return o}const Yo=Object.create(null);function Ma(s,o){return{provider:s,prefix:o,icons:Object.create(null),missing:new Set}}function an(s,o){const i=Yo[s]||(Yo[s]=Object.create(null));return i[o]||(i[o]=Ma(s,o))}function di(s,o){return fi(o)?ci(o,(i,u)=>{u?s.icons[i]=u:s.missing.add(i)}):[]}function Ka(s,o,i){try{if(typeof i.body=="string")return s.icons[o]={...i},!0}catch{}return!1}let _n=!1;function hi(s){return typeof s=="boolean"&&(_n=s),_n}function Fa(s){const o=typeof s=="string"?or(s,!0,_n):s;if(o){const i=an(o.provider,o.prefix),u=o.name;return i.icons[u]||(i.missing.has(u)?null:void 0)}}function qa(s,o){const i=or(s,!0,_n);if(!i)return!1;const u=an(i.provider,i.prefix);return o?Ka(u,i.name,o):(u.missing.add(i.name),!0)}function Ra(s,o){if(typeof s!="object")return!1;if(typeof o!="string"&&(o=s.provider||""),_n&&!o&&!s.prefix){let f=!1;return fi(s)&&(s.prefix="",ci(s,(v,p)=>{qa(v,p)&&(f=!0)})),f}const i=s.prefix;if(!er({prefix:i,name:"a"}))return!1;const u=an(o,i);return!!di(u,s)}const vi=Object.freeze({width:null,height:null}),pi=Object.freeze({...vi,...rr}),Ba=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Na=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Wo(s,o,i){if(o===1)return s;if(i=i||100,typeof s=="number")return Math.ceil(s*o*i)/i;if(typeof s!="string")return s;const u=s.split(Ba);if(u===null||!u.length)return s;const f=[];let v=u.shift(),p=Na.test(v);for(;;){if(p){const D=parseFloat(v);isNaN(D)?f.push(v):f.push(Math.ceil(D*o*i)/i)}else f.push(v);if(v=u.shift(),v===void 0)return f.join("");p=!p}}function Ha(s,o="defs"){let i="";const u=s.indexOf("<"+o);for(;u>=0;){const f=s.indexOf(">",u),v=s.indexOf("</"+o);if(f===-1||v===-1)break;const p=s.indexOf(">",v);if(p===-1)break;i+=s.slice(f+1,v).trim(),s=s.slice(0,u).trim()+s.slice(p+1)}return{defs:i,content:s}}function za(s,o){return s?"<defs>"+s+"</defs>"+o:o}function La(s,o,i){const u=Ha(s);return za(u.defs,o+u.content+i)}const Ua=s=>s==="unset"||s==="undefined"||s==="none";function Ya(s,o){const i={...ir,...s},u={...pi,...o},f={left:i.left,top:i.top,width:i.width,height:i.height};let v=i.body;[i,u].forEach(W=>{const $=[],Q=W.hFlip,M=W.vFlip;let N=W.rotate;Q?M?N+=2:($.push("translate("+(f.width+f.left).toString()+" "+(0-f.top).toString()+")"),$.push("scale(-1 1)"),f.top=f.left=0):M&&($.push("translate("+(0-f.left).toString()+" "+(f.height+f.top).toString()+")"),$.push("scale(1 -1)"),f.top=f.left=0);let P;switch(N<0&&(N-=Math.floor(N/4)*4),N=N%4,N){case 1:P=f.height/2+f.top,$.unshift("rotate(90 "+P.toString()+" "+P.toString()+")");break;case 2:$.unshift("rotate(180 "+(f.width/2+f.left).toString()+" "+(f.height/2+f.top).toString()+")");break;case 3:P=f.width/2+f.left,$.unshift("rotate(-90 "+P.toString()+" "+P.toString()+")");break}N%2===1&&(f.left!==f.top&&(P=f.left,f.left=f.top,f.top=P),f.width!==f.height&&(P=f.width,f.width=f.height,f.height=P)),$.length&&(v=La(v,'<g transform="'+$.join(" ")+'">',"</g>"))});const p=u.width,D=u.height,O=f.width,K=f.height;let A,F;p===null?(F=D===null?"1em":D==="auto"?K:D,A=Wo(F,O/K)):(A=p==="auto"?O:p,F=D===null?Wo(A,K/O):D==="auto"?K:D);const I={},Y=(W,$)=>{Ua($)||(I[W]=$.toString())};Y("width",A),Y("height",F);const B=[f.left,f.top,O,K];return I.viewBox=B.join(" "),{attributes:I,viewBox:B,body:v}}const Wa=/\sid="(\S+)"/g,Va="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Qa=0;function Ga(s,o=Va){const i=[];let u;for(;u=Wa.exec(s);)i.push(u[1]);if(!i.length)return s;const f="suffix"+(Math.random()*16777216|Date.now()).toString(16);return i.forEach(v=>{const p=typeof o=="function"?o(v):o+(Qa++).toString(),D=v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");s=s.replace(new RegExp('([#;"])('+D+')([")]|\\.[a-z])',"g"),"$1"+p+f+"$3")}),s=s.replace(new RegExp(f,"g"),""),s}const Qr=Object.create(null);function Xa(s,o){Qr[s]=o}function Gr(s){return Qr[s]||Qr[""]}function eo(s){let o;if(typeof s.resources=="string")o=[s.resources];else if(o=s.resources,!(o instanceof Array)||!o.length)return null;return{resources:o,path:s.path||"/",maxURL:s.maxURL||500,rotate:s.rotate||750,timeout:s.timeout||5e3,random:s.random===!0,index:s.index||0,dataAfterTimeout:s.dataAfterTimeout!==!1}}const to=Object.create(null),gn=["https://api.simplesvg.com","https://api.unisvg.com"],tr=[];for(;gn.length>0;)gn.length===1||Math.random()>.5?tr.push(gn.shift()):tr.push(gn.pop());to[""]=eo({resources:["https://api.iconify.design"].concat(tr)});function Ja(s,o){const i=eo(o);return i===null?!1:(to[s]=i,!0)}function no(s){return to[s]}const Za=()=>{let s;try{if(s=fetch,typeof s=="function")return s}catch{}};let Vo=Za();function $a(s,o){const i=no(s);if(!i)return 0;let u;if(!i.maxURL)u=0;else{let f=0;i.resources.forEach(p=>{f=Math.max(f,p.length)});const v=o+".json?icons=";u=i.maxURL-f-i.path.length-v.length}return u}function es(s){return s===404}const ts=(s,o,i)=>{const u=[],f=$a(s,o),v="icons";let p={type:v,provider:s,prefix:o,icons:[]},D=0;return i.forEach((O,K)=>{D+=O.length+1,D>=f&&K>0&&(u.push(p),p={type:v,provider:s,prefix:o,icons:[]},D=O.length),p.icons.push(O)}),u.push(p),u};function ns(s){if(typeof s=="string"){const o=no(s);if(o)return o.path}return"/"}const rs=(s,o,i)=>{if(!Vo){i("abort",424);return}let u=ns(o.provider);switch(o.type){case"icons":{const v=o.prefix,D=o.icons.join(","),O=new URLSearchParams({icons:D});u+=v+".json?"+O.toString();break}case"custom":{const v=o.uri;u+=v.slice(0,1)==="/"?v.slice(1):v;break}default:i("abort",400);return}let f=503;Vo(s+u).then(v=>{const p=v.status;if(p!==200){setTimeout(()=>{i(es(p)?"abort":"next",p)});return}return f=501,v.json()}).then(v=>{if(typeof v!="object"||v===null){setTimeout(()=>{v===404?i("abort",v):i("next",f)});return}setTimeout(()=>{i("success",v)})}).catch(()=>{i("next",f)})},os={prepare:ts,send:rs};function is(s){const o={loaded:[],missing:[],pending:[]},i=Object.create(null);s.sort((f,v)=>f.provider!==v.provider?f.provider.localeCompare(v.provider):f.prefix!==v.prefix?f.prefix.localeCompare(v.prefix):f.name.localeCompare(v.name));let u={provider:"",prefix:"",name:""};return s.forEach(f=>{if(u.name===f.name&&u.prefix===f.prefix&&u.provider===f.provider)return;u=f;const v=f.provider,p=f.prefix,D=f.name,O=i[v]||(i[v]=Object.create(null)),K=O[p]||(O[p]=an(v,p));let A;D in K.icons?A=o.loaded:p===""||K.missing.has(D)?A=o.missing:A=o.pending;const F={provider:v,prefix:p,name:D};A.push(F)}),o}function gi(s,o){s.forEach(i=>{const u=i.loaderCallbacks;u&&(i.loaderCallbacks=u.filter(f=>f.id!==o))})}function as(s){s.pendingCallbacksFlag||(s.pendingCallbacksFlag=!0,setTimeout(()=>{s.pendingCallbacksFlag=!1;const o=s.loaderCallbacks?s.loaderCallbacks.slice(0):[];if(!o.length)return;let i=!1;const u=s.provider,f=s.prefix;o.forEach(v=>{const p=v.icons,D=p.pending.length;p.pending=p.pending.filter(O=>{if(O.prefix!==f)return!0;const K=O.name;if(s.icons[K])p.loaded.push({provider:u,prefix:f,name:K});else if(s.missing.has(K))p.missing.push({provider:u,prefix:f,name:K});else return i=!0,!0;return!1}),p.pending.length!==D&&(i||gi([s],v.id),v.callback(p.loaded.slice(0),p.missing.slice(0),p.pending.slice(0),v.abort))})}))}let ss=0;function us(s,o,i){const u=ss++,f=gi.bind(null,i,u);if(!o.pending.length)return f;const v={id:u,icons:o,callback:s,abort:f};return i.forEach(p=>{(p.loaderCallbacks||(p.loaderCallbacks=[])).push(v)}),f}function ls(s,o=!0,i=!1){const u=[];return s.forEach(f=>{const v=typeof f=="string"?or(f,o,i):f;v&&u.push(v)}),u}var cs={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function fs(s,o,i,u){const f=s.resources.length,v=s.random?Math.floor(Math.random()*f):s.index;let p;if(s.random){let X=s.resources.slice(0);for(p=[];X.length>1;){const U=Math.floor(Math.random()*X.length);p.push(X[U]),X=X.slice(0,U).concat(X.slice(U+1))}p=p.concat(X)}else p=s.resources.slice(v).concat(s.resources.slice(0,v));const D=Date.now();let O="pending",K=0,A,F=null,I=[],Y=[];typeof u=="function"&&Y.push(u);function B(){F&&(clearTimeout(F),F=null)}function W(){O==="pending"&&(O="aborted"),B(),I.forEach(X=>{X.status==="pending"&&(X.status="aborted")}),I=[]}function $(X,U){U&&(Y=[]),typeof X=="function"&&Y.push(X)}function Q(){return{startTime:D,payload:o,status:O,queriesSent:K,queriesPending:I.length,subscribe:$,abort:W}}function M(){O="failed",Y.forEach(X=>{X(void 0,A)})}function N(){I.forEach(X=>{X.status==="pending"&&(X.status="aborted")}),I=[]}function P(X,U,oe){const de=U!=="success";switch(I=I.filter(se=>se!==X),O){case"pending":break;case"failed":if(de||!s.dataAfterTimeout)return;break;default:return}if(U==="abort"){A=oe,M();return}if(de){A=oe,I.length||(p.length?H():M());return}if(B(),N(),!s.random){const se=s.resources.indexOf(X.resource);se!==-1&&se!==s.index&&(s.index=se)}O="completed",Y.forEach(se=>{se(oe)})}function H(){if(O!=="pending")return;B();const X=p.shift();if(X===void 0){if(I.length){F=setTimeout(()=>{B(),O==="pending"&&(N(),M())},s.timeout);return}M();return}const U={status:"pending",resource:X,callback:(oe,de)=>{P(U,oe,de)}};I.push(U),K++,F=setTimeout(H,s.rotate),i(X,o,U.callback)}return setTimeout(H),Q}function yi(s){const o={...cs,...s};let i=[];function u(){i=i.filter(D=>D().status==="pending")}function f(D,O,K){const A=fs(o,D,O,(F,I)=>{u(),K&&K(F,I)});return i.push(A),A}function v(D){return i.find(O=>D(O))||null}return{query:f,find:v,setIndex:D=>{o.index=D},getIndex:()=>o.index,cleanup:u}}function Qo(){}const Lr=Object.create(null);function ds(s){if(!Lr[s]){const o=no(s);if(!o)return;const i=yi(o),u={config:o,redundancy:i};Lr[s]=u}return Lr[s]}function hs(s,o,i){let u,f;if(typeof s=="string"){const v=Gr(s);if(!v)return i(void 0,424),Qo;f=v.send;const p=ds(s);p&&(u=p.redundancy)}else{const v=eo(s);if(v){u=yi(v);const p=s.resources?s.resources[0]:"",D=Gr(p);D&&(f=D.send)}}return!u||!f?(i(void 0,424),Qo):u.query(o,f,i)().abort}function Go(){}function vs(s){s.iconsLoaderFlag||(s.iconsLoaderFlag=!0,setTimeout(()=>{s.iconsLoaderFlag=!1,as(s)}))}function ps(s){const o=[],i=[];return s.forEach(u=>{(u.match(ui)?o:i).push(u)}),{valid:o,invalid:i}}function yn(s,o,i){function u(){const f=s.pendingIcons;o.forEach(v=>{f&&f.delete(v),s.icons[v]||s.missing.add(v)})}if(i&&typeof i=="object")try{if(!di(s,i).length){u();return}}catch(f){console.error(f)}u(),vs(s)}function Xo(s,o){s instanceof Promise?s.then(i=>{o(i)}).catch(()=>{o(null)}):o(s)}function gs(s,o){s.iconsToLoad?s.iconsToLoad=s.iconsToLoad.concat(o).sort():s.iconsToLoad=o,s.iconsQueueFlag||(s.iconsQueueFlag=!0,setTimeout(()=>{s.iconsQueueFlag=!1;const{provider:i,prefix:u}=s,f=s.iconsToLoad;if(delete s.iconsToLoad,!f||!f.length)return;const v=s.loadIcon;if(s.loadIcons&&(f.length>1||!v)){Xo(s.loadIcons(f,u,i),A=>{yn(s,f,A)});return}if(v){f.forEach(A=>{const F=v(A,u,i);Xo(F,I=>{const Y=I?{prefix:u,icons:{[A]:I}}:null;yn(s,[A],Y)})});return}const{valid:p,invalid:D}=ps(f);if(D.length&&yn(s,D,null),!p.length)return;const O=u.match(ui)?Gr(i):null;if(!O){yn(s,p,null);return}O.prepare(i,u,p).forEach(A=>{hs(i,A,F=>{yn(s,A.icons,F)})})}))}const ys=(s,o)=>{const i=ls(s,!0,hi()),u=is(i);if(!u.pending.length){let O=!0;return o&&setTimeout(()=>{O&&o(u.loaded,u.missing,u.pending,Go)}),()=>{O=!1}}const f=Object.create(null),v=[];let p,D;return u.pending.forEach(O=>{const{provider:K,prefix:A}=O;if(A===D&&K===p)return;p=K,D=A,v.push(an(K,A));const F=f[K]||(f[K]=Object.create(null));F[A]||(F[A]=[])}),u.pending.forEach(O=>{const{provider:K,prefix:A,name:F}=O,I=an(K,A),Y=I.pendingIcons||(I.pendingIcons=new Set);Y.has(F)||(Y.add(F),f[K][A].push(F))}),v.forEach(O=>{const K=f[O.provider][O.prefix];K.length&&gs(O,K)}),o?us(o,u,v):Go};function ms(s,o){const i={...s};for(const u in o){const f=o[u],v=typeof f;u in vi?(f===null||f&&(v==="string"||v==="number"))&&(i[u]=f):v===typeof i[u]&&(i[u]=u==="rotate"?f%4:f)}return i}const bs=/[\s,]+/;function _s(s,o){o.split(bs).forEach(i=>{switch(i.trim()){case"horizontal":s.hFlip=!0;break;case"vertical":s.vFlip=!0;break}})}function ws(s,o=0){const i=s.replace(/^-?[0-9.]*/,"");function u(f){for(;f<0;)f+=4;return f%4}if(i===""){const f=parseInt(s);return isNaN(f)?0:u(f)}else if(i!==s){let f=0;switch(i){case"%":f=25;break;case"deg":f=90}if(f){let v=parseFloat(s.slice(0,s.length-i.length));return isNaN(v)?0:(v=v/f,v%1===0?u(v):0)}}return o}function xs(s,o){let i=s.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const u in o)i+=" "+u+'="'+o[u]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+s+"</svg>"}function ks(s){return s.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Ds(s){return"data:image/svg+xml,"+ks(s)}function Ss(s){return'url("'+Ds(s)+'")'}const Jo={...pi,inline:!1},Ts={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Es={display:"inline-block"},Xr={"background-color":"currentColor"},mi={"background-color":"transparent"},Zo={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},$o={"-webkit-mask":Xr,mask:Xr,background:mi};for(const s in $o){const o=$o[s];for(const i in Zo)o[s+"-"+i]=Zo[i]}function Os(s){return s+(s.match(/^[-0-9.]+$/)?"px":"")}function Cs(s,o){const i=ms(Jo,o),u=o.mode||"svg",f=u==="svg"?{...Ts}:{};s.body.indexOf("xlink:")===-1&&delete f["xmlns:xlink"];let v=typeof o.style=="string"?o.style:"";for(let Q in o){const M=o[Q];if(M!==void 0)switch(Q){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":i[Q]=M===!0||M==="true"||M===1;break;case"flip":typeof M=="string"&&_s(i,M);break;case"color":v=v+(v.length>0&&v.trim().slice(-1)!==";"?";":"")+"color: "+M+"; ";break;case"rotate":typeof M=="string"?i[Q]=ws(M):typeof M=="number"&&(i[Q]=M);break;case"ariaHidden":case"aria-hidden":M!==!0&&M!=="true"&&delete f["aria-hidden"];break;default:if(Q.slice(0,3)==="on:")break;Jo[Q]===void 0&&(f[Q]=M)}}const p=Ya(s,i),D=p.attributes;if(i.inline&&(v="vertical-align: -0.125em; "+v),u==="svg"){Object.assign(f,D),v!==""&&(f.style=v);let Q=0,M=o.id;return typeof M=="string"&&(M=M.replace(/-/g,"_")),{svg:!0,attributes:f,body:Ga(p.body,M?()=>M+"ID"+Q++:"iconifySvelte")}}const{body:O,width:K,height:A}=s,F=u==="mask"||(u==="bg"?!1:O.indexOf("currentColor")!==-1),I=xs(O,{...D,width:K+"",height:A+""}),B={"--svg":Ss(I)},W=Q=>{const M=D[Q];M&&(B[Q]=Os(M))};W("width"),W("height"),Object.assign(B,Es,F?Xr:mi);let $="";for(const Q in B)$+=Q+": "+B[Q]+";";return f.style=$+v,{svg:!1,attributes:f}}hi(!0);Xa("",os);if(typeof document<"u"&&typeof window<"u"){const s=window;if(s.IconifyPreload!==void 0){const o=s.IconifyPreload,i="Invalid IconifyPreload syntax.";typeof o=="object"&&o!==null&&(o instanceof Array?o:[o]).forEach(u=>{try{(typeof u!="object"||u===null||u instanceof Array||typeof u.icons!="object"||typeof u.prefix!="string"||!Ra(u))&&console.error(i)}catch{console.error(i)}})}if(s.IconifyProviders!==void 0){const o=s.IconifyProviders;if(typeof o=="object"&&o!==null)for(let i in o){const u="IconifyProviders["+i+"] is invalid.";try{const f=o[i];if(typeof f!="object"||!f||f.resources===void 0)continue;Ja(i,f)||console.error(u)}catch{console.error(u)}}}}function Ps(s,o,i,u,f){function v(){o.loading&&(o.loading.abort(),o.loading=null)}if(typeof s=="object"&&s!==null&&typeof s.body=="string")return o.name="",v(),{data:{...ir,...s}};let p;if(typeof s!="string"||(p=or(s,!1,!0))===null)return v(),null;const D=Fa(p);if(!D)return i&&(!o.loading||o.loading.name!==s)&&(v(),o.name="",o.loading={name:s,abort:ys([p],u)}),null;v(),o.name!==s&&(o.name=s,f&&!o.destroyed&&f(s));const O=["iconify"];return p.prefix!==""&&O.push("iconify--"+p.prefix),p.provider!==""&&O.push("iconify--"+p.provider),{data:D,classes:O}}function Is(s,o){return s?Cs({...ir,...s},o):null}var js=pa("<svg><!></svg>"),As=we("<span></span>");function lt(s,o){rt(o,!0);const i={name:"",loading:null,destroyed:!1},u=ma(o,["$$slots","$$events","$$legacy"]);let f=Ce(!1),v=Ce(0),p=Ce(null);ha(()=>{C(v);const F=!!o.ssr||C(f),I=Ps(o.icon,i,F,D,o.onload),Y=I?Is(I.data,u):null;Y&&I.classes&&(Y.attributes.class=(typeof u.class=="string"?u.class+" ":"")+I.classes.join(" ")),ue(p,Y,!0)});function D(){va(v)}Jr(()=>{ue(f,!0)}),Yi(()=>{i.destroyed=!0,i.loading&&(i.loading.abort(),i.loading=null)});var O=bn(),K=dt(O);{var A=F=>{var I=bn(),Y=dt(I);{var B=$=>{var Q=js();Bo(Q,()=>({...C(p).attributes}));var M=R(Q);ka(M,()=>C(p).body,!0),q(Q),ve($,Q)},W=$=>{var Q=As();Bo(Q,()=>({...C(p).attributes})),ve($,Q)};nt(Y,$=>{C(p).svg?$(B):$(W,!1)})}ve(F,I)};nt(K,F=>{C(p)&&F(A)})}ve(s,O),ot()}var Ms=we('<div class="hour svelte-efxz8w"></div>'),Ks=we('<div class="day svelte-efxz8w"><!></div>'),Fs=we('<p class="day svelte-efxz8w"> </p> <!>',1),qs=we('<div class="day svelte-efxz8w"><div class="hour svelte-efxz8w"></div></div>'),Rs=we('<div class="daynight svelte-efxz8w"><!> <p class="daynight svelte-efxz8w"><a href="https://sunrise-sunset.org" target="_blank" class="svelte-efxz8w"> </a></p></div>'),Bs=we('<figure class="svelte-efxz8w"><div class="labels svelte-efxz8w"><p class="date svelte-efxz8w">Date</p> <p class="hour svelte-efxz8w">0</p> <p class="hour svelte-efxz8w">12</p> <p class="hour svelte-efxz8w">24</p></div> <div class="grid svelte-efxz8w"><!></div> <div class="average grid svelte-efxz8w"><p class="day svelte-efxz8w">Avg</p> <!></div> <legend class="svelte-efxz8w"><!> <div class="color svelte-efxz8w"></div> <p class="svelte-efxz8w">Fasting</p></legend></figure>');function bi(s,o){rt(o,!0);let i=Te(o,"average",19,()=>[]),u=Te(o,"daily",3,null);Te(o,"days",3,10);let f=Ce(null),v=Ce(null),p=Ye(()=>C(v)===null?null:C(v).getTime()<Date.now()?"material-symbols:moon-stars-outline-rounded":"material-symbols:wb-sunny-outline-rounded");Jr(()=>{navigator.geolocation.getCurrentPosition(P=>{fetch(`https://api.sunrise-sunset.org/json?lat=${P.latitude}&lng=${P.longitude}&date=today`).then(H=>H.json()).then(H=>{ue(f,D(H.results.sunrise),!0),ue(v,D(H.results.sunset),!0),Date.now()>C(v).getTime()&&fetch(`https://api.sunrise-sunset.org/json?lat=${P.latitude}&lng=${P.longitude}&date=tomorrow`).then(X=>X.json()).then(X=>{ue(f,D(X.results.sunrise),!0),ue(v,D(X.results.sunset),!0)})})},P=>{console.log(P)})});function D(P){const H=P.match(/(\d+):(\d+):(\d+)\s*(AM|PM)/i);let X=parseInt(H[1],10);const U=parseInt(H[2],10),oe=parseInt(H[3],10),de=H[4].toUpperCase();de==="PM"&&X!==12?X+=12:de==="AM"&&X===12&&(X=0);const se=new Date;return se.setHours(X,U,oe,0),se}function O(P){return P=new Date(P+"T00:00:00"),new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(P)}function K(P){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(P)}function A(P,H){return P===0||H[P-1]===0?(1-H[P])*100+"%":0}var F=Bs(),I=te(R(F),2),Y=R(I);{var B=P=>{var H=bn(),X=dt(H);Ut(X,17,()=>Object.keys(u()),Lt,(U,oe)=>{var de=Fs();const se=Ye(()=>u()[C(oe)]);var De=dt(de),je=R(De,!0);q(De);var Fe=te(De,2);Ut(Fe,16,()=>({length:24}),Lt,(qe,Ue,Be)=>{var ye=Ks(),he=R(ye);{var Ne=Ee=>{var We=Ms();let Ve;Ke(Qe=>Ve=No(We,"",Ve,Qe),[()=>({"margin-left":A(Be,C(se)),width:100*C(se)[Be]+"%"})]),ve(Ee,We)};nt(he,Ee=>{C(se)[Be]!==0&&Ee(Ne)})}q(ye),ve(qe,ye)}),Ke(qe=>_e(je,qe),[()=>O(C(oe))]),ve(U,de)}),ve(P,H)};nt(Y,P=>{u()!==null&&P(B)})}q(I);var W=te(I,2),$=te(R(W),2);Ut($,16,()=>({length:24}),Lt,(P,H,X)=>{var U=qs(),oe=R(U);let de;q(U),Ke(se=>de=No(oe,"",de,se),[()=>({opacity:i()[X],width:"100%"})]),ve(P,U)}),q(W);var Q=te(W,2),M=R(Q);{var N=P=>{var H=Rs(),X=R(H);lt(X,{height:"16",get icon(){return C(p)},width:"16"});var U=te(X,2),oe=R(U),de=R(oe,!0);q(oe),q(U),q(H),Ke(se=>_e(de,se),[()=>K(C(f))]),ve(P,H)};nt(M,P=>{C(p)!==null&&P(N)})}Gn(4),q(Q),q(F),ve(s,F),ot()}var Ns=we('<article class="svelte-10tx4k0"><p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">hrs</span></p> <p class="colon svelte-10tx4k0">:</p> <p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">min</span></p> <p class="colon svelte-10tx4k0">:</p> <p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">sec</span></p></article>');function Hs(s,o){rt(o,!0);let i=Te(o,"now",3,null),u=Te(o,"started",3,null),f=Ye(()=>{if(u()===null)return{hours:0,minutes:"00",seconds:"00"};const W=Math.floor((i()-u().getTime())/1e3);return{hours:Math.floor(W/3600).toString(10).padStart(2,"0"),minutes:Math.floor(W%3600/60).toString(10).padStart(2,"0"),seconds:(W%60).toString(10).padStart(2,"0")}});var v=Ns(),p=R(v),D=R(p),O=R(D,!0);q(D),Gn(2),q(p);var K=te(p,4),A=R(K),F=R(A,!0);q(A),Gn(2),q(K);var I=te(K,4),Y=R(I),B=R(Y,!0);q(Y),Gn(2),q(I),q(v),Ke(()=>{_e(O,C(f).hours),_e(F,C(f).minutes),_e(B,C(f).seconds)}),ve(s,v),ot()}function zs(s,o,i){o()===null?i.onstart&&i.onstart():i.onend&&i.onend()}var Ls=we('<p class="svelte-81vq7f">You are not fasting.</p>'),Us=we('<p class="svelte-81vq7f">You are fasting.</p> <!> <p class="started svelte-81vq7f"> </p>',1),Ys=we('<section class="svelte-81vq7f"><header class="svelte-81vq7f"><h3 class="svelte-81vq7f">Fasting</h3> <button type="button" class="svelte-81vq7f"><!></button></header> <article class="svelte-81vq7f"><!> <button class="primary svelte-81vq7f" type="button"> </button></article> <article class="svelte-81vq7f"><!></article> <footer class="svelte-81vq7f"><button class="hunger secondary svelte-81vq7f" type="button"><!> <span> </span></button> <button class="water secondary svelte-81vq7f" type="button"><!> <span> </span></button></footer></section>');function Ws(s,o){rt(o,!0);let i=Te(o,"activity",3,null),u=Te(o,"hunger",3,5),f=Te(o,"levels",19,()=>[]),v=Te(o,"now",3,null),p=Te(o,"started",3,null),D=Te(o,"water",3,0);function O(ye){return f().find(Ne=>Ne.value===ye).label}function K(ye){return ye===null?null:new Intl.DateTimeFormat(navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(ye)}var A=Ys(),F=R(A),I=te(R(F),2);I.__click=function(...ye){var he;(he=o.onsettings)==null||he.apply(this,ye)};var Y=R(I);lt(Y,{height:"20",icon:"material-symbols:settings-outline",width:"20"}),q(I),q(F);var B=te(F,2),W=R(B);{var $=ye=>{var he=Ls();ve(ye,he)},Q=ye=>{var he=Us(),Ne=te(dt(he),2);Hs(Ne,{get now(){return v()},get started(){return p()}});var Ee=te(Ne,2),We=R(Ee);q(Ee),Ke(Ve=>_e(We,`Started ${Ve??""}`),[()=>K(p())]),ve(ye,he)};nt(W,ye=>{p()===null?ye($):ye(Q,!1)})}var M=te(W,2);M.__click=[zs,p,o];var N=R(M);q(M),q(B);var P=te(B,2),H=R(P);const X=Ye(()=>i()===null?[]:i().average),U=Ye(()=>i()===null?null:i().daily);bi(H,{get average(){return C(X)},get daily(){return C(U)},days:7}),q(P);var oe=te(P,2),de=R(oe);de.__click=function(...ye){var he;(he=o.onhunger)==null||he.apply(this,ye)};var se=R(de);lt(se,{height:"20",icon:"material-symbols:fork-spoon-rounded",width:"20"});var De=te(se,2),je=R(De,!0);q(De),q(de);var Fe=te(de,2);Fe.__click=function(...ye){var he;(he=o.onwater)==null||he.apply(this,ye)};var qe=R(Fe);lt(qe,{height:"20",icon:"material-symbols:water-drop-outline-rounded",width:"20"});var Ue=te(qe,2),Be=R(Ue);q(Ue),q(Fe),q(oe),q(A),Ke(ye=>{_e(N,`${p()===null?"Start":"Stop"} fasting`),_e(je,ye),_e(Be,`${D()??""} oz`)},[()=>O(u())]),ve(s,A),ot()}pt(["click"]);function Vs(s,o,i,u){const f=new Date(parseInt(s.currentTarget.getAttribute("data-year")),parseInt(s.currentTarget.getAttribute("data-month")),parseInt(s.currentTarget.getAttribute("data-date")));f.getMonth()!==o().getMonth()&&o(new Date(f.getTime())),i(new Date(f.getTime())),u.onchange&&u.onchange(i())}var Qs=we('<button type="button"> </button>'),Gs=we('<section><header class="svelte-1ll096s"><h3 class="svelte-1ll096s"> </h3> <button type="button" class="svelte-1ll096s"><!></button> <button type="button" class="svelte-1ll096s"><!></button></header> <article class="svelte-1ll096s"><p class="svelte-1ll096s">Sun</p> <p class="svelte-1ll096s">Mon</p> <p class="svelte-1ll096s">Tue</p> <p class="svelte-1ll096s">Wed</p> <p class="svelte-1ll096s">Thu</p> <p class="svelte-1ll096s">Fri</p> <p class="svelte-1ll096s">Sat</p></article> <article class="svelte-1ll096s"></article></section>');function Xs(s,o){rt(o,!0);let i=Te(o,"display",23,()=>new Date),u=Te(o,"value",23,()=>new Date),f=Ye(()=>new Intl.DateTimeFormat(navigator.language,{month:"long",year:"numeric"}).format(i())),v=Ye(()=>{const Q=[],M=new Date,N=new Date(i().getFullYear(),i().getMonth(),1);N.setDate(N.getDate()-N.getDay());for(let P=0;P<42;P++){const H={date:N.getDate(),month:N.getMonth(),year:N.getFullYear(),outside:!0,today:!1,selected:!1,after:!1};N.getFullYear()===i().getFullYear()&&N.getMonth()===i().getMonth()&&(H.outside=!1),N.getTime()>Date.now()&&(H.after=!0),N.getFullYear()===M.getFullYear()&&N.getMonth()===M.getMonth()&&N.getDate()===M.getDate()&&(H.today=!0),N.getFullYear()===u().getFullYear()&&N.getMonth()===u().getMonth()&&N.getDate()===u().getDate()&&(H.selected=!0),N.setDate(N.getDate()+1),Q.push(H)}return Q});function p(){let Q=i().getMonth(),M=i().getFullYear();M=Q===0?M-1:M,Q=Q===0?11:Q-1,i(new Date(M,Q,i().getDate()))}function D(){let Q=i().getMonth(),M=i().getFullYear();M=Q===11?M+1:M,Q=(Q+1)%12,i(new Date(M,Q,i().getDate()))}var O=Gs(),K=R(O),A=R(K),F=R(A,!0);q(A);var I=te(A,2);I.__click=p;var Y=R(I);lt(Y,{height:"24",icon:"material-symbols:navigate-before",width:"24"}),q(I);var B=te(I,2);B.__click=D;var W=R(B);lt(W,{height:"24",icon:"material-symbols:navigate-next",width:"24"}),q(B),q(K);var $=te(K,4);Ut($,21,()=>C(v),Lt,(Q,M)=>{var N=Qs();N.__click=[Vs,i,u,o];let P;var H=R(N,!0);q(N),Ke(X=>{Jn(N,"data-year",C(M).year),Jn(N,"data-month",C(M).month),Jn(N,"data-date",C(M).date),N.disabled=C(M).after,P=Yt(N,1,"svelte-1ll096s",null,P,X),_e(H,C(M).date)},[()=>({outside:C(M).outside,today:C(M).today,selected:C(M).selected})]),ve(Q,N)}),q($),q(O),Ke(()=>_e(F,C(f))),ve(s,O),ot()}pt(["click"]);function Js(s,o,i){const u=new Date(o().getTime());u.getHours()>=12?u.getHours()===12?u.setHours(23):u.setHours(u.getHours()-1):u.getHours()===0?u.setHours(11):u.setHours(u.getHours()-1),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function Zs(s,o,i){const u=new Date(o().getTime());u.getHours()>=12?u.getHours()===23?u.setHours(12):u.setHours(u.getHours()+1):u.getHours()===11?u.setHours(0):u.setHours(u.getHours()+1),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function $s(s,o,i){const u=new Date(o().getTime());u.getHours()>=12&&u.setHours(u.getHours()-12),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function eu(s,o,i){const u=new Date(o().getTime());u.getHours()<12&&u.setHours(u.getHours()+12),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function tu(s,o,i){const u=new Date(o().getTime());u.getMinutes()===0?u.setMinutes(59):u.setMinutes(u.getMinutes()-1),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function nu(s,o,i){const u=new Date(o().getTime());u.getMinutes()===59?u.setMinutes(0):u.setMinutes(u.getMinutes()+1),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}var ru=we('<article class="svelte-1bevvpj"><div class="time svelte-1bevvpj"><div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div> <p class="svelte-1bevvpj">:</p> <div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div></div> <div class="meridian svelte-1bevvpj"><button type="button">AM</button> <button type="button">PM</button></div></article>');function ou(s,o){rt(o,!0);let i=Te(o,"value",23,()=>new Date),u=Ye(()=>i().getHours()%12||12),f=Ye(()=>i().getMinutes().toString(10).padStart(2,"0")),v=Ye(()=>i().getHours()>=12?"PM":"AM");var p=ru(),D=R(p),O=R(D),K=R(O);K.__click=[Zs,i,o];var A=R(K);lt(A,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),q(K);var F=te(K,2),I=R(F,!0);q(F);var Y=te(F,2);Y.__click=[Js,i,o];var B=R(Y);lt(B,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),q(Y),q(O);var W=te(O,4),$=R(W);$.__click=[nu,i,o];var Q=R($);lt(Q,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),q($);var M=te($,2),N=R(M,!0);q(M);var P=te(M,2);P.__click=[tu,i,o];var H=R(P);lt(H,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),q(P),q(W),q(D);var X=te(D,2),U=R(X);U.__click=[$s,i,o];let oe;var de=te(U,2);de.__click=[eu,i,o];let se;q(X),q(p),Ke((De,je)=>{_e(I,C(u)),_e(N,C(f)),oe=Yt(U,1,"svelte-1bevvpj",null,oe,De),se=Yt(de,1,"svelte-1bevvpj",null,se,je)},[()=>({selected:C(v)==="AM"}),()=>({selected:C(v)==="PM"})]),ve(s,p),ot()}pt(["click"]);function iu(s,o){ue(o,"calendar")}function au(s,o){ue(o,"clock")}var su=we('<article class="svelte-8yzu2w"><header class="svelte-8yzu2w"><button type="button"><p class="svelte-8yzu2w"> </p> <p class="svelte-8yzu2w"> </p></button> <button type="button"><p class="svelte-8yzu2w"> </p></button></header> <!></article>');function uu(s,o){rt(o,!0);let i=Te(o,"value",23,()=>new Date),u=Ce("calendar");function f(U){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(U)}function v(U){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(U)}function p(U){U.setHours(i().getHours()),U.setMinutes(i().getMinutes()),U.setSeconds(i().getSeconds()),i(new Date(U.getTime())),o.onchange&&o.onchange(i())}function D(U){U.setFullYear(i().getFullYear()),U.getMonth(i().getMonth()),U.getDate(i().getDate()),i(new Date(U.getTime())),o.onchange&&o.onchange(i())}var O=su(),K=R(O),A=R(K);A.__click=[iu,u];let F;var I=R(A),Y=R(I,!0);q(I);var B=te(I,2),W=R(B,!0);q(B),q(A);var $=te(A,2);$.__click=[au,u];let Q;var M=R($),N=R(M,!0);q(M),q($),q(K);var P=te(K,2);{var H=U=>{Xs(U,{onchange:p,get value(){return i()}})},X=U=>{ou(U,{onchange:D,get value(){return i()}})};nt(P,U=>{C(u)===null||C(u)==="calendar"?U(H):U(X,!1)})}q(O),Ke((U,oe,de,se)=>{F=Yt(A,1,"svelte-8yzu2w",null,F,U),_e(Y,o.label),_e(W,oe),Q=Yt($,1,"svelte-8yzu2w",null,Q,de),_e(N,se)},[()=>({selected:C(u)==="calendar"}),()=>f(i()),()=>({selected:C(u)==="clock"}),()=>v(i())]),ve(s,O),ot()}pt(["click"]);function lu(s,o,i,u){o(),i(null),u.oncancel&&u.oncancel()}function cu(s,o,i){o.ondelete&&o.ondelete(i().id)}function fu(s,o){const i=s.currentTarget.value.trim().length===0?null:s.currentTarget.value;o({...o(),notes:i})}function du(s,o,i){o.onsave&&o.onsave(i())}var hu=we('<dialog class="svelte-13glclx"><h3 class="svelte-13glclx"> </h3> <!> <textarea placeholder="Notes" class="svelte-13glclx"></textarea> <footer class="svelte-13glclx"><button class="delete svelte-13glclx" type="button">Delete</button> <button class="cancel svelte-13glclx" type="button">Cancel</button> <button type="button" class="svelte-13glclx">Save</button></footer></dialog>');function vu(s,o){rt(o,!0);let i=Te(o,"field",3,"started"),u=Te(o,"item",7,null),f=Te(o,"label",3,"Started"),v=Te(o,"title",3,"Edit Fast Start"),p=Ce(void 0);function D(P){const H={...u()};H[i()]=new Date(P.getTime()),u({...H})}function O(){C(p).close()}function K(){C(p).showModal()}var A=hu(),F=R(A),I=R(F,!0);q(F);var Y=te(F,2);const B=Ye(()=>u()&&u().id&&u().id!==null?u()[i()]:new Date);uu(Y,{get label(){return f()},onchange:D,get value(){return C(B)}});var W=te(Y,2);ga(W),W.__input=[fu,u];var $=te(W,2),Q=R($);Q.__click=[cu,o,u];var M=te(Q,2);M.__click=[lu,O,u,o];var N=te(M,2);return N.__click=[du,o,u],q($),q(A),At(A,P=>ue(p,P),()=>C(p)),Ke(()=>{_e(I,v()),ya(W,u()&&u().id&&u().id!==null?u().notes:"")}),ve(s,A),ot({close:O,showModal:K})}pt(["input","click"]);var pu=we('<article class="svelte-o2f930"><p class="svelte-o2f930">Your fasting history<br/>will be displayed here.</p></article>'),gu=we('<li class="header svelte-o2f930"><p class="svelte-o2f930"> </p></li>'),yu=(s,o,i)=>o(C(i).type,C(i).id),mu=we('<p class="svelte-o2f930">Started Fast</p> <p class="svelte-o2f930"></p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p>',1),bu=we('<p class="svelte-o2f930">Water</p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p>',1),_u=we('<p class="svelte-o2f930"> </p> <p class="svelte-o2f930"></p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p>',1),wu=we('<p class="svelte-o2f930">Ended Fast</p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p>',1),xu=we('<li class="svelte-o2f930"><button type="button" class="svelte-o2f930"><!></button></li>'),ku=we('<ul class="svelte-o2f930"></ul>');function Du(s,o){rt(o,!0);let i=Te(o,"items",19,()=>[]);function u(I){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",year:"numeric"}).format(I)}function f(I,Y){const B=Y.getTime()-I.getTime(),W=Math.floor(B/1e3),$=Math.floor(W/3600),Q=Math.floor(W%3600/60);return new Intl.DurationFormat(navigator.language,{style:"short",units:["hour","minute"]}).format({hours:$,minutes:Q})}function v(I){return new Intl.DateTimeFormat(navigator.language,{weekday:"long",month:"short",day:"numeric"}).format(I)}function p(I){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(I)}function D(I,Y){o.onchange&&o.onchange(I,Y)}var O=bn(),K=dt(O);{var A=I=>{var Y=pu();ve(I,Y)},F=I=>{var Y=ku();Ut(Y,21,i,Lt,(B,W)=>{var $=bn(),Q=dt($);{var M=P=>{var H=gu(),X=R(H),U=R(X,!0);q(X),q(H),Ke(oe=>_e(U,oe),[()=>v(C(W).timed)]),ve(P,H)},N=P=>{var H=xu(),X=R(H);X.__click=[yu,D,W];var U=R(X);{var oe=se=>{var De=mu(),je=te(dt(De),4),Fe=R(je,!0);q(je);var qe=te(je,2),Ue=R(qe,!0);q(qe),Ke((Be,ye)=>{_e(Fe,Be),_e(Ue,ye)},[()=>u(C(W).timed),()=>p(C(W).timed)]),ve(se,De)},de=(se,De)=>{{var je=qe=>{var Ue=bu(),Be=te(dt(Ue),2),ye=R(Be);q(Be);var he=te(Be,2),Ne=R(he,!0);q(he);var Ee=te(he,2),We=R(Ee,!0);q(Ee),Ke((Ve,Qe)=>{_e(ye,`${C(W).volume??""} oz`),_e(Ne,Ve),_e(We,Qe)},[()=>u(C(W).timed),()=>p(C(W).timed)]),ve(qe,Ue)},Fe=(qe,Ue)=>{{var Be=he=>{var Ne=_u(),Ee=dt(Ne),We=R(Ee,!0);q(Ee);var Ve=te(Ee,4),Qe=R(Ve,!0);q(Ve);var _t=te(Ve,2),at=R(_t,!0);q(_t),Ke((it,ct)=>{_e(We,C(W).level),_e(Qe,it),_e(at,ct)},[()=>u(C(W).timed),()=>p(C(W).timed)]),ve(he,Ne)},ye=(he,Ne)=>{{var Ee=We=>{var Ve=wu(),Qe=te(dt(Ve),2),_t=R(Qe,!0);q(Qe);var at=te(Qe,2),it=R(at,!0);q(at);var ct=te(at,2),Wt=R(ct,!0);q(ct),Ke((ie,Vt,gt)=>{_e(_t,ie),_e(it,Vt),_e(Wt,gt)},[()=>f(C(W).started,C(W).ended),()=>u(C(W).timed),()=>p(C(W).timed)]),ve(We,Ve)};nt(he,We=>{C(W).type==="end"&&We(Ee)},Ne)}};nt(qe,he=>{C(W).type==="hunger"?he(Be):he(ye,!1)},Ue)}};nt(se,qe=>{C(W).type==="water"?qe(je):qe(Fe,!1)},De)}};nt(U,se=>{C(W).type==="start"?se(oe):se(de,!1)})}q(X),q(H),ve(P,H)};nt(Q,P=>{C(W).type==="header"?P(M):P(N,!1)})}ve(B,$)}),q(Y),ve(I,Y)};nt(K,I=>{i().length===0?I(A):I(F,!1)})}ve(s,O),ot()}pt(["click"]);var Su=we('<section class="svelte-jsa4zq"><header class="svelte-jsa4zq"><h3 class="svelte-jsa4zq">Hours</h3></header> <article class="svelte-jsa4zq"><!></article> <article class="svelte-jsa4zq"><!></article></section>');function Tu(s,o){rt(o,!0);let i=Te(o,"activity",3,null),u=Te(o,"history",19,()=>[]);Te(o,"levels",19,()=>[]);var f=Su(),v=te(R(f),2),p=R(v);const D=Ye(()=>i()===null?[]:i().average),O=Ye(()=>i()===null?null:i().daily);bi(p,{get average(){return C(D)},get daily(){return C(O)},days:7}),q(v);var K=te(v,2),A=R(K);Du(A,{get items(){return u()},get onchange(){return o.onchange}}),q(K),q(f),ve(s,f),ot()}function Eu(s,o,i,u){o(),i(null),u.oncancel&&u.oncancel()}function Ou(s,o,i){o.ondelete&&o.ondelete(i().id)}function Cu(s,o,i){o()===null&&o({...o(),level:5}),i.onsave&&i.onsave(o())}var Pu=(s,o,i)=>o(C(i).value),Iu=we('<li class="svelte-1gyfgoj"><button type="button" class="svelte-1gyfgoj"><p class="svelte-1gyfgoj"> </p> <!></button></li>'),ju=we('<button class="delete svelte-1gyfgoj" type="button">Delete</button>'),Au=we('<dialog class="svelte-1gyfgoj"><h3 class="svelte-1gyfgoj"> </h3> <ul class="svelte-1gyfgoj"></ul> <footer class="svelte-1gyfgoj"><!> <button class="cancel svelte-1gyfgoj" type="button">Cancel</button> <button type="button" class="svelte-1gyfgoj">Save</button></footer></dialog>');function Mu(s,o){rt(o,!0);let i=Te(o,"item",7,null),u=Te(o,"levels",19,()=>[]);Te(o,"units",3,"oz");let f=Ce(void 0),v=Ye(()=>i()&&i().level&&i().level!==null?i().level:5);function p(M){const N=M;i({...i(),level:N})}function D(){C(f).close()}function O(){C(f).showModal()}var K=Au(),A=R(K),F=R(A);q(A);var I=te(A,2);Ut(I,21,u,Lt,(M,N)=>{var P=Iu();const H=Ye(()=>C(N).value===C(v)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var X=R(P);X.__click=[Pu,p,N];var U=R(X),oe=R(U,!0);q(U);var de=te(U,2);const se=Ye(()=>C(N).value===C(v)?"#0284c7":"#161616");lt(de,{get color(){return C(se)},height:"20",get icon(){return C(H)},width:"20"}),q(X),q(P),Ke(()=>_e(oe,C(N).label)),ve(M,P)}),q(I);var Y=te(I,2),B=R(Y);{var W=M=>{var N=ju();N.__click=[Ou,o,i],ve(M,N)};nt(B,M=>{i()&&i().id&&i().id!==null&&M(W)})}var $=te(B,2);$.__click=[Eu,D,i,o];var Q=te($,2);return Q.__click=[Cu,i,o],q(Y),q(K),At(K,M=>ue(f,M),()=>C(f)),Ke(()=>_e(F,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Hunger`)),ve(s,K),ot({close:D,showModal:O})}pt(["click"]);function Ku(s,o,i){o()!==0&&(o(0),i.onchange&&i.onchange(o()))}function Fu(s,o,i){o()!==1&&(o(1),i.onchange&&i.onchange(o()))}var qu=we('<ul class="svelte-tu3q0a"><li><button type="button">Fasting</button></li> <li><button type="button">Hours</button></li></ul>');function Ru(s,o){rt(o,!0);let i=Te(o,"selected",7,0);var u=qu(),f=R(u),v=R(f);let p;v.__click=[Ku,i,o],q(f);var D=te(f,2),O=R(D);let K;O.__click=[Fu,i,o],q(D),q(u),Ke((A,F)=>{p=Yt(v,1,"fasting svelte-tu3q0a",null,p,A),K=Yt(O,1,"hours svelte-tu3q0a",null,K,F)},[()=>({selected:i()===0}),()=>({selected:i()===1})]),ve(s,u),ot()}pt(["click"]);function Bu(s,o){o()}var Nu=we('<dialog class="svelte-msa23r"><h3 class="svelte-msa23r">Settings</h3> <article class="svelte-msa23r"><p class="svelte-msa23r">Settings.</p></article> <footer class="svelte-msa23r"><button type="button" class="svelte-msa23r">Done</button></footer></dialog>');function Hu(s,o){rt(o,!0);let i=Ce(void 0);function u(){C(i).close()}function f(){C(i).showModal()}var v=Nu(),p=te(R(v),4),D=R(p);return D.__click=[Bu,u],q(p),q(v),At(v,O=>ue(i,O),()=>C(i)),ve(s,v),ot({close:u,showModal:f})}pt(["click"]);function zu(s,o,i,u){o(),i(null),u.oncancel&&u.oncancel()}function Lu(s,o,i){o.ondelete&&o.ondelete(i().id)}function Uu(s,o,i){o()===null&&o({...o(),volume:8}),i.onsave&&i.onsave(o())}var Yu=(s,o,i)=>o(C(i).value),Wu=we('<li class="svelte-1sbih0z"><button type="button" class="svelte-1sbih0z"><p class="svelte-1sbih0z"> </p> <p class="svelte-1sbih0z"> </p> <!></button></li>'),Vu=we('<button class="delete svelte-1sbih0z" type="button">Delete</button>'),Qu=we('<dialog class="svelte-1sbih0z"><h3 class="svelte-1sbih0z"> </h3> <ul class="svelte-1sbih0z"></ul> <footer class="svelte-1sbih0z"><!> <button class="cancel svelte-1sbih0z" type="button">Cancel</button> <button type="button" class="svelte-1sbih0z">Save</button></footer></dialog>');function Gu(s,o){rt(o,!0);let i=Te(o,"item",7,null),u=Te(o,"units",3,"oz"),f=Ce(void 0),v=Xn([{value:8,label:"Cup"},{value:12,label:"Can"},{value:16,label:"Bottle"},{value:20,label:"Medium"},{value:30,label:"Gatorade"},{value:32,label:"Big Q"},{value:44,label:"QT Large"},{value:52,label:"Extra Large"}]),p=Ye(()=>i()&&i().volume&&i().volume!==null?i().volume:8);function D(N){const P=N;i({...i(),volume:P})}function O(){C(f).close()}function K(){C(f).showModal()}var A=Qu(),F=R(A),I=R(F);q(F);var Y=te(F,2);Ut(Y,21,()=>v,Lt,(N,P)=>{var H=Wu();const X=Ye(()=>C(P).value===C(p)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var U=R(H);U.__click=[Yu,D,P];var oe=R(U),de=R(oe,!0);q(oe);var se=te(oe,2),De=R(se);q(se);var je=te(se,2);const Fe=Ye(()=>C(P).value===C(p)?"#0284c7":"#161616");lt(je,{get color(){return C(Fe)},height:"20",get icon(){return C(X)},width:"20"}),q(U),q(H),Ke(()=>{_e(de,C(P).label),_e(De,`${C(P).value??""} ${u()??""}`)}),ve(N,H)}),q(Y);var B=te(Y,2),W=R(B);{var $=N=>{var P=Vu();P.__click=[Lu,o,i],ve(N,P)};nt(W,N=>{i()&&i().id&&i().id!==null&&N($)})}var Q=te(W,2);Q.__click=[zu,O,i,o];var M=te(Q,2);return M.__click=[Uu,i,o],q(B),q(A),At(A,N=>ue(f,N),()=>C(f)),Ke(()=>_e(I,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Water`)),ve(s,A),ot({close:O,showModal:K})}pt(["click"]);var Xu=we('<main class="svelte-1p6a8xw"><header class="svelte-1p6a8xw"><span></span> <!> <button type="button" class="svelte-1p6a8xw"><!></button></header> <section class="svelte-1p6a8xw"><article class="svelte-1p6a8xw"><!></article> <article class="svelte-1p6a8xw"><!></article></section></main> <!> <!> <!> <!>',1);function hl(s,o){rt(o,!0);const i=new Ca;let u=0,f=Ce(Xn([])),v=Ce(Xn([])),p=Ce(void 0),D=Ce("started"),O=Ce(null),K=Ce("Started"),A=Ce("Edit Fast Started"),F=Ce(void 0),I=Ce(null),Y=Ce(5),B=Xn([{value:1,label:"Starving"},{value:2,label:"Very hungry"},{value:3,label:"Pretty hungry"},{value:4,label:"Snacky"},{value:5,label:"Satisfied"},{value:6,label:"Slightly full"},{value:7,label:"Uncomfortable"},{value:8,label:"Stuffed"},{value:9,label:"Stomach aches"},{value:10,label:"Sick"}]),W=Ce(null),$=Ce(0),Q=Ce(void 0),M=Ce(null),N=Ce(0),P=Ce(void 0),H=Ce(null);Jr(()=>{let ae=window.localStorage.getItem("fh_screen");ue($,ae===null?0:parseInt(ae),!0),setInterval(()=>{u===60?(U(),u=0):u=u+1,C(M)!==null&&ue(W,Date.now(),!0)},1e3),se(),U(),de(),De(),oe()});function X(ae){const le=ae.getFullYear(),be=String(ae.getMonth()+1).padStart(2,"0"),Ge=String(ae.getDate()).padStart(2,"0");return`${le}-${be}-${Ge}`}function U(ae=7){i.browseHistory().then(le=>{const be={},Ge=new Date,Pe=new Date(Ge.getFullYear(),Ge.getMonth(),Ge.getDate()),Oe=new Date(Pe);if(Oe.setDate(Pe.getDate()-(ae-1)),!Array.isArray(le)||le.length===0){const Re=new Date(Oe);for(;Re<=Pe;){const Le=X(Re);be[Le]=Array(24).fill(0),Re.setDate(Re.getDate()+1)}}else{for(const Le of le){const ht=new Date(Le.started),Gt=Le.ended?new Date(Le.ended):new Date,Xt=new Date(ht.getTime());Xt.setSeconds(0,0);const vt=new Date(Gt.getTime());vt.setSeconds(0,0);let ne=new Date(Xt);for(;ne<vt;){const xt=X(ne),yt=new Date(ne.getFullYear(),ne.getMonth(),ne.getDate());if(yt>=Oe&&yt<=Pe){const Jt=ne.getHours();be[xt]||(be[xt]=Array(24).fill(0)),be[xt][Jt]+=1}ne.setMinutes(ne.getMinutes()+1)}}for(const Le in be)be[Le]=be[Le].map(ht=>+(Math.min(ht,60)/60).toFixed(6));const Re=new Date(Oe);for(;Re<=Pe;){const Le=X(Re);be[Le]||(be[Le]=Array(24).fill(0)),Re.setDate(Re.getDate()+1)}}const Se=Object.keys(be).sort((Re,Le)=>Le.localeCompare(Re)),Ie={};for(const Re of Se)Ie[Re]=be[Re];const Qt=Array(24).fill(0);for(const Re of Array(24).keys())for(const Le of Se)Qt[Re]+=Ie[Le][Re];const Kt=Qt.map(Re=>+(Re/10).toFixed(6));ue(f,{daily:Ie,average:Kt},!0)})}function oe(){i.browseHistory().then(ae=>{let le=null,be=structuredClone(ae);be.forEach(Pe=>{Pe.type="start",Pe.timed=new Date(Pe.started.getTime())});let Ge=structuredClone(ae);Ge=Ge.filter(Pe=>Pe.ended!==null),Ge.forEach(Pe=>{Pe.type="end",Pe.timed=new Date(Pe.ended.getTime())}),be=be.concat(Ge),le=[...be],i.browseHunger().then(Pe=>(Pe=Pe.map(Oe=>{const Se=B.find(Ie=>Ie.value===Oe.level);return Oe.level=Se.label,Oe.timed=new Date(Oe.created.getTime()),Oe}),le=le.concat(Pe),i.browseWater())).then(Pe=>{Pe=Pe.map(Se=>(Se.timed=new Date(Se.created.getTime()),Se)),le=le.concat(Pe),le.sort((Se,Ie)=>Se.timed.getTime()<Ie.timed.getTime()?1:Se.timed.getTime()>Ie.timed.getTime()?-1:0);const Oe=[];for(let Se=0;Se<le.length;Se++){const Ie=new Date(le[Se].timed.getTime());Ie.setHours(23),Ie.setMinutes(59),Ie.setSeconds(59),Ie.setMilliseconds(999),Oe.length===0?Oe.push({type:"header",timed:Ie}):(Oe[Oe.length-1].timed.getDate()!==le[Se].timed.getDate()||Oe[Oe.length-1].timed.getMonth()!==le[Se].timed.getMonth()||Oe[Oe.length-1].timed.getFullYear()!==le[Se].timed.getFullYear())&&Oe.push({type:"header",timed:Ie})}le=le.concat(Oe),le.sort((Se,Ie)=>Se.timed.getTime()<Ie.timed.getTime()?1:Se.timed.getTime()>Ie.timed.getTime()?-1:0),ue(v,[...le],!0)})})}function de(){i.browseHunger(!0).then(ae=>{ae===null?ue(Y,5):ue(Y,ae.level,!0)})}function se(){i.browseHistory().then(ae=>{ae.length===0&&(ue(M,null),ue(W,null)),ae.sort((le,be)=>le.started.getTime()>be.started.getTime()?-1:le.started.getTime()<be.started.getTime()?1:0),ae[0].ended===null&&(ue(M,new Date(ae[0].started.getTime()),!0),ue(W,Date.now(),!0))})}function De(){i.browseWater(!0).then(ae=>{const le=ae.reduce((be,Ge)=>be+Ge.volume,0);ue(N,le,!0)})}function je(){ue(M,null),ue(W,null),i.browseHistoryByEnd().then(ae=>(ae.ended=new Date,i.editHistory(ae))).then(()=>{se(),U(),oe()})}function Fe(){C(F).showModal()}function qe(){i.addHistory().then(()=>{se(),U(),oe()})}function Ue(){C(P).showModal()}function Be(ae){C(O).started.getTime()===C(M).getTime()&&(ue(M,null),ue(W,null)),i.deleteHistory(ae).then(()=>{C(p).close(),ue(O,null),se(),U(),oe()})}function ye(ae){i.editHistory(ae).then(()=>{C(p).close(),ue(O,null),se(),U(),oe()})}function he(ae,le){ae==="start"?(ue(D,"started"),ue(K,"Started"),ue(A,"Edit Fast Started"),i.readHistory(le).then(be=>{ue(O,{...be},!0),C(p).showModal()})):ae==="end"?(ue(D,"ended"),ue(K,"Ended"),ue(A,"Edit Fast Ended"),i.readHistory(le).then(be=>{ue(O,{...be},!0),C(p).showModal()})):ae==="water"?i.readWater(le).then(be=>{ue(H,{...be},!0),C(P).showModal()}):ae==="hunger"&&i.readHunger(le).then(be=>{ue(I,{...be},!0),C(F).showModal()})}function Ne(ae){i.deleteHunger(ae).then(()=>{C(F).close(),ue(I,null),de(),oe()})}function Ee(ae){C(I)===null?i.addHunger(ae.level).then(le=>{C(F).close(),de(),oe()}):i.editHunger(ae).then(le=>{C(F).close(),ue(I,null),de(),oe()})}function We(ae){C($)!==ae&&(window.localStorage.setItem("fh_screen",ae),ue($,ae,!0))}function Ve(){C(Q).showModal()}function Qe(ae){i.deleteWater(ae).then(()=>{C(P).close(),ue(H,null),De(),oe()})}function _t(ae){C(H)===null?i.addWater(ae.volume).then(le=>{C(P).close(),De(),oe()}):i.editWater(ae).then(le=>{C(P).close(),ue(H,null),De(),oe()})}var at=Xu(),it=dt(at),ct=R(it),Wt=te(R(ct),2);Ru(Wt,{onchange:We,get selected(){return C($)}});var ie=te(Wt,2);ie.__click=Ve;var Vt=R(ie);lt(Vt,{height:"20",icon:"material-symbols:settings-outline",width:"20"}),q(ie),q(ct);var gt=te(ct,2),xe=R(gt),Mt=R(xe);Ws(Mt,{get activity(){return C(f)},get hunger(){return C(Y)},get levels(){return B},get now(){return C(W)},onend:je,onhunger:Fe,onsettings:Ve,onstart:qe,onwater:Ue,get started(){return C(M)},get water(){return C(N)}}),q(xe);var wn=te(xe,2),wt=R(wn);Tu(wt,{get activity(){return C(f)},get history(){return C(v)},get levels(){return B},onchange:he}),q(wn),q(gt),q(it);var xn=te(it,2);At(vu(xn,{get field(){return C(D)},get item(){return C(O)},get label(){return C(K)},ondelete:Be,onsave:ye,get title(){return C(A)}}),ae=>ue(p,ae,!0),()=>C(p));var kn=te(xn,2);At(Mu(kn,{get item(){return C(I)},get levels(){return B},ondelete:Ne,onsave:Ee}),ae=>ue(F,ae,!0),()=>C(F));var Dn=te(kn,2);At(Gu(Dn,{get item(){return C(H)},ondelete:Qe,onsave:_t}),ae=>ue(P,ae,!0),()=>C(P));var ar=te(Dn,2);At(Hu(ar,{}),ae=>ue(Q,ae,!0),()=>C(Q)),Ke(()=>Jn(gt,"data-screen",C($)===0?"fasting":"hours")),ve(s,at),ot()}pt(["click"]);export{hl as component};
