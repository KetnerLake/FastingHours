import"../chunks/CWj6FrbW.js";import{i as pi,c as gi,d as st,n as mi,a as yi,o as sn,b as bi,s as ke}from"../chunks/Erbj99cd.js";import{a3 as fo,av as ba,aw as _i,h as gt,a5 as pn,ac as _a,q as wa,af as wi,b as ho,i as ur,d as ro,w as m,A as ki,r as xi,e as Di,g as Jo,j as jn,m as on,a6 as ka,a9 as Si,k as xa,l as gr,p as Ti,ax as Gr,ad as Da,a1 as oo,ay as Xo,ar as Ei,az as Zo,aA as vo,aB as Ci,aC as Oi,aD as hr,aE as po,aF as Ii,a7 as Sa,aG as Ta,aH as Pi,V as je,aI as Ai,aa as Mi,a8 as ji,ag as $o,aJ as Ki,n as Ea,aK as qi,aL as Fi,aM as Ri,aN as Bi,aO as Ni,aP as Hi,z as Li,aQ as zi,R as Ze,K as Ui,c as an,f as wt,a as he,W as $e,as as _e,y as ae,aR as Yi,aS as Vi,X as L,Y as R,T as me,Z as G,at as ze,aT as Qr,x as Jr}from"../chunks/J1024-jQ.js";import{i as rt,r as Wi,p as pe,b as ft}from"../chunks/LcVB3aLj.js";const Gi=[];function Xr(o,r=!1){return lr(o,new Map,"",Gi)}function lr(o,r,a,s,l=null){if(typeof o=="object"&&o!==null){var f=r.get(o);if(f!==void 0)return f;if(o instanceof Map)return new Map(o);if(o instanceof Set)return new Set(o);if(fo(o)){var h=Array(o.length);r.set(o,h),l!==null&&r.set(l,h);for(var g=0;g<o.length;g+=1){var x=o[g];g in o&&(h[g]=lr(x,r,a,s))}return h}if(ba(o)===_i){h={},r.set(o,h),l!==null&&r.set(l,h);for(var I in o)h[I]=lr(o[I],r,a,s);return h}if(o instanceof Date)return structuredClone(o);if(typeof o.toJSON=="function")return lr(o.toJSON(),r,a,s,o)}if(o instanceof EventTarget)return o;try{return structuredClone(o)}catch{return o}}function Qi(o,r){if(r){const a=document.body;o.autofocus=!0,wa(()=>{document.activeElement===a&&o.focus()})}}function Ji(o){gt&&pn(o)!==null&&_a(o)}function xt(o,r){return r}function Xi(o,r,a,s){for(var l=[],f=r.length,h=0;h<f;h++)Ci(r[h].e,l,!0);var g=f>0&&l.length===0&&a!==null;if(g){var x=a.parentNode;_a(x),x.append(a),s.clear(),Qt(o,r[0].prev,r[f-1].next)}Oi(l,()=>{for(var I=0;I<f;I++){var j=r[I];g||(s.delete(j.k),Qt(o,j.prev,j.next)),hr(j.e,!g)}})}function Dt(o,r,a,s,l,f=null){var h=o,g={flags:r,items:new Map,first:null},x=(r&Ta)!==0;if(x){var I=o;h=gt?ur(pn(I)):I.appendChild(wi())}gt&&ro();var j=null,M=!1,D=ki(()=>{var H=a();return fo(H)?H:H==null?[]:Da(H)});ho(()=>{var H=m(D),z=H.length;if(M&&z===0)return;M=z===0;let N=!1;if(gt){var V=xi(h)===Di;V!==(z===0)&&(h=Jo(),ur(h),jn(!1),N=!0)}if(gt){for(var K=null,w,P=0;P<z;P++){if(on.nodeType===ka&&on.data===Si){h=on,N=!0,jn(!1);break}var S=H[P],B=s(S,P);w=Ca(on,g,K,null,S,B,P,l,r,a),g.items.set(B,w),K=w}z>0&&ur(Jo())}gt||Zi(H,g,h,l,r,s,a),f!==null&&(z===0?j?xa(j):j=gr(()=>f(h)):j!==null&&Ti(j,()=>{j=null})),N&&jn(!0),m(D)}),gt&&(h=on)}function Zi(o,r,a,s,l,f,h){var Ne,Ke,Qe,ot;var g=(l&Pi)!==0,x=(l&(po|vo))!==0,I=o.length,j=r.items,M=r.first,D=M,H,z=null,N,V=[],K=[],w,P,S,B;if(g)for(B=0;B<I;B+=1)w=o[B],P=f(w,B),S=j.get(P),S!==void 0&&((Ne=S.a)==null||Ne.measure(),(N??(N=new Set)).add(S));for(B=0;B<I;B+=1){if(w=o[B],P=f(w,B),S=j.get(P),S===void 0){var W=D?D.e.nodes_start:a;z=Ca(W,r,z,z===null?r.first:z.next,w,P,B,s,l,h),j.set(P,z),V=[],K=[],D=z.next;continue}if(x&&$i(S,w,B,l),(S.e.f&Gr)!==0&&(xa(S.e),g&&((Ke=S.a)==null||Ke.unfix(),(N??(N=new Set)).delete(S))),S!==D){if(H!==void 0&&H.has(S)){if(V.length<K.length){var U=K[0],ue;z=U.prev;var ve=V[0],le=V[V.length-1];for(ue=0;ue<V.length;ue+=1)ea(V[ue],U,a);for(ue=0;ue<K.length;ue+=1)H.delete(K[ue]);Qt(r,ve.prev,le.next),Qt(r,z,ve),Qt(r,le,U),D=U,z=le,B-=1,V=[],K=[]}else H.delete(S),ea(S,D,a),Qt(r,S.prev,S.next),Qt(r,S,z===null?r.first:z.next),Qt(r,z,S),z=S;continue}for(V=[],K=[];D!==null&&D.k!==P;)(D.e.f&Gr)===0&&(H??(H=new Set)).add(D),K.push(D),D=D.next;if(D===null)continue;S=D}V.push(S),z=S,D=S.next}if(D!==null||H!==void 0){for(var Ee=H===void 0?[]:Da(H);D!==null;)(D.e.f&Gr)===0&&Ee.push(D),D=D.next;var ye=Ee.length;if(ye>0){var be=(l&Ta)!==0&&I===0?a:null;if(g){for(B=0;B<ye;B+=1)(Qe=Ee[B].a)==null||Qe.measure();for(B=0;B<ye;B+=1)(ot=Ee[B].a)==null||ot.fix()}Xi(r,Ee,be,j)}}g&&wa(()=>{var He;if(N!==void 0)for(S of N)(He=S.a)==null||He.apply()}),oo.first=r.first&&r.first.e,oo.last=z&&z.e}function $i(o,r,a,s){(s&po)!==0&&Xo(o.v,r),(s&vo)!==0?Xo(o.i,a):o.i=a}function Ca(o,r,a,s,l,f,h,g,x,I){var j=(x&po)!==0,M=(x&Ii)===0,D=j?M?Ei(l,!1,!1):Zo(l):l,H=(x&vo)===0?h:Zo(h),z={i:H,v:D,k:f,a:null,e:null,prev:a,next:s};try{return z.e=gr(()=>g(o,D,H,I),gt),z.e.prev=a&&a.e,z.e.next=s&&s.e,a===null?r.first=z:(a.next=z,a.e.next=z.e),s!==null&&(s.prev=z,s.e.prev=z.e),z}finally{}}function ea(o,r,a){for(var s=o.next?o.next.e.nodes_start:a,l=r?r.e.nodes_start:a,f=o.e.nodes_start;f!==s;){var h=Sa(f);l.before(f),f=h}}function Qt(o,r,a){r===null?o.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}function es(o,r,a=!1,s=!1,l=!1){var f=o,h="";je(()=>{var g=oo;if(h===(h=r()??"")){gt&&ro();return}if(g.nodes_start!==null&&(Ai(g.nodes_start,g.nodes_end),g.nodes_start=g.nodes_end=null),h!==""){if(gt){on.data;for(var x=ro(),I=x;x!==null&&(x.nodeType!==ka||x.data!=="");)I=x,x=Sa(x);if(x===null)throw Mi(),ji;$o(on,I),f=ur(x);return}var j=h+"";a?j=`<svg>${j}</svg>`:s&&(j=`<math>${j}</math>`);var M=Ki(j);if((a||s)&&(M=pn(M)),$o(pn(M),M.lastChild),a||s)for(;pn(M);)f.before(pn(M));else f.before(M)}})}function ts(o,r){var a=void 0,s;ho(()=>{a!==(a=r())&&(s&&(hr(s),s=null),a&&(s=gr(()=>{Ea(()=>a(o))})))})}function Oa(o){var r,a,s="";if(typeof o=="string"||typeof o=="number")s+=o;else if(typeof o=="object")if(Array.isArray(o)){var l=o.length;for(r=0;r<l;r++)o[r]&&(a=Oa(o[r]))&&(s&&(s+=" "),s+=a)}else for(a in o)o[a]&&(s&&(s+=" "),s+=a);return s}function ns(){for(var o,r,a=0,s="",l=arguments.length;a<l;a++)(o=arguments[a])&&(r=Oa(o))&&(s&&(s+=" "),s+=r);return s}function rs(o){return typeof o=="object"?ns(o):o??""}const ta=[...` 	
\r\fÂ \v\uFEFF`];function os(o,r,a){var s=o==null?"":""+o;if(r&&(s=s?s+" "+r:r),a){for(var l in a)if(a[l])s=s?s+" "+l:l;else if(s.length)for(var f=l.length,h=0;(h=s.indexOf(l,h))>=0;){var g=h+f;(h===0||ta.includes(s[h-1]))&&(g===s.length||ta.includes(s[g]))?s=(h===0?"":s.substring(0,h))+s.substring(g+1):h=g}}return s===""?null:s}function na(o,r=!1){var a=r?" !important;":";",s="";for(var l in o){var f=o[l];f!=null&&f!==""&&(s+=" "+l+": "+f+a)}return s}function Zr(o){return o[0]!=="-"||o[1]!=="-"?o.toLowerCase():o}function as(o,r){if(r){var a="",s,l;if(Array.isArray(r)?(s=r[0],l=r[1]):s=r,o){o=String(o).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var f=!1,h=0,g=!1,x=[];s&&x.push(...Object.keys(s).map(Zr)),l&&x.push(...Object.keys(l).map(Zr));var I=0,j=-1;const N=o.length;for(var M=0;M<N;M++){var D=o[M];if(g?D==="/"&&o[M-1]==="*"&&(g=!1):f?f===D&&(f=!1):D==="/"&&o[M+1]==="*"?g=!0:D==='"'||D==="'"?f=D:D==="("?h++:D===")"&&h--,!g&&f===!1&&h===0){if(D===":"&&j===-1)j=M;else if(D===";"||M===N-1){if(j!==-1){var H=Zr(o.substring(I,j).trim());if(!x.includes(H)){D!==";"&&M++;var z=o.substring(I,M).trim();a+=" "+z+";"}}I=M+1,j=-1}}}}return s&&(a+=na(s)),l&&(a+=na(l,!0)),a=a.trim(),a===""?null:a}return o==null?null:String(o)}function Je(o,r,a,s,l,f){var h=o.__className;if(gt||h!==a||h===void 0){var g=os(a,s,f);(!gt||g!==o.getAttribute("class"))&&(g==null?o.removeAttribute("class"):r?o.className=g:o.setAttribute("class",g)),o.__className=a}else if(f&&l!==f)for(var x in f){var I=!!f[x];(l==null||I!==!!l[x])&&o.classList.toggle(x,I)}return f}function $r(o,r={},a,s){for(var l in a){var f=a[l];r[l]!==f&&(a[l]==null?o.style.removeProperty(l):o.style.setProperty(l,f,s))}}function gn(o,r,a,s){var l=o.__style;if(gt||l!==r){var f=as(r,s);(!gt||f!==o.getAttribute("style"))&&(f==null?o.removeAttribute("style"):o.style.cssText=f),o.__style=r}else s&&(Array.isArray(s)?($r(o,a==null?void 0:a[0],s[0]),$r(o,a==null?void 0:a[1],s[1],"important")):$r(o,a,s));return s}function ao(o,r,a){if(o.multiple){if(r==null)return;if(!fo(r))return qi();for(var s of o.options)s.selected=r.includes(ra(s));return}for(s of o.options){var l=ra(s);if(Fi(l,r)){s.selected=!0;return}}(!a||r!==void 0)&&(o.selectedIndex=-1)}function is(o){var r=new MutationObserver(()=>{ao(o,o.__value)});r.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ri(()=>{r.disconnect()})}function ra(o){return"__value"in o?o.__value:o.value}const In=Symbol("class"),Pn=Symbol("style"),Ia=Symbol("is custom element"),Pa=Symbol("is html");function ss(o,r){var a=go(o);a.value===(a.value=r??void 0)||o.value===r&&(r!==0||o.nodeName!=="PROGRESS")||(o.value=r??"")}function us(o,r){r?o.hasAttribute("selected")||o.setAttribute("selected",""):o.removeAttribute("selected")}function Jt(o,r,a,s){var l=go(o);gt&&(l[r]=o.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&o.nodeName==="LINK")||l[r]!==(l[r]=a)&&(r==="loading"&&(o[Hi]=a),a==null?o.removeAttribute(r):typeof a!="string"&&Aa(o).includes(r)?o[r]=a:o.setAttribute(r,a))}function ls(o,r,a,s,l=!1){var f=go(o),h=f[Ia],g=!f[Pa];let x=gt&&h;x&&jn(!1);var I=r||{},j=o.tagName==="OPTION";for(var M in r)M in a||(a[M]=null);a.class?a.class=rs(a.class):a[In]&&(a.class=null),a[Pn]&&(a.style??(a.style=null));var D=Aa(o);for(const P in a){let S=a[P];if(j&&P==="value"&&S==null){o.value=o.__value="",I[P]=S;continue}if(P==="class"){var H=o.namespaceURI==="http://www.w3.org/1999/xhtml";Je(o,H,S,s,r==null?void 0:r[In],a[In]),I[P]=S,I[In]=a[In];continue}if(P==="style"){gn(o,S,r==null?void 0:r[Pn],a[Pn]),I[P]=S,I[Pn]=a[Pn];continue}var z=I[P];if(!(S===z&&!(S===void 0&&o.hasAttribute(P)))){I[P]=S;var N=P[0]+P[1];if(N!=="$$")if(N==="on"){const B={},W="$$"+P;let U=P.slice(2);var V=yi(U);if(pi(U)&&(U=U.slice(0,-7),B.capture=!0),!V&&z){if(S!=null)continue;o.removeEventListener(U,I[W],B),I[W]=null}if(S!=null)if(V)o[`__${U}`]=S,st([U]);else{let ue=function(ve){I[P].call(this,ve)};I[W]=gi(U,o,ue,B)}else V&&(o[`__${U}`]=void 0)}else if(P==="style")Jt(o,P,S);else if(P==="autofocus")Qi(o,!!S);else if(!h&&(P==="__value"||P==="value"&&S!=null))o.value=o.__value=S;else if(P==="selected"&&j)us(o,S);else{var K=P;g||(K=mi(K));var w=K==="defaultValue"||K==="defaultChecked";if(S==null&&!h&&!w)if(f[P]=null,K==="value"||K==="checked"){let B=o;const W=r===void 0;if(K==="value"){let U=B.defaultValue;B.removeAttribute(K),B.defaultValue=U,B.value=B.__value=W?U:null}else{let U=B.defaultChecked;B.removeAttribute(K),B.defaultChecked=U,B.checked=W?U:!1}}else o.removeAttribute(P);else w||D.includes(K)&&(h||typeof S!="string")?o[K]=S:typeof S!="function"&&Jt(o,K,S)}}}return x&&jn(!0),I}function oa(o,r,a=[],s,l=!1,f=Li){const h=a.map(f);var g=void 0,x={},I=o.nodeName==="SELECT",j=!1;if(ho(()=>{var D=r(...h.map(m)),H=ls(o,g,D,s,l);j&&I&&"value"in D&&ao(o,D.value,!1);for(let N of Object.getOwnPropertySymbols(x))D[N]||hr(x[N]);for(let N of Object.getOwnPropertySymbols(D)){var z=D[N];N.description===zi&&(!g||z!==g[N])&&(x[N]&&hr(x[N]),x[N]=gr(()=>ts(o,()=>z))),H[N]=z}g=H}),I){var M=o;Ea(()=>{ao(M,g.value),is(M)})}j=!0}function go(o){return o.__attributes??(o.__attributes={[Ia]:o.nodeName.includes("-"),[Pa]:o.namespaceURI===Bi})}var aa=new Map;function Aa(o){var r=aa.get(o.nodeName);if(r)return r;aa.set(o.nodeName,r=[]);for(var a,s=o,l=Element.prototype;l!==s;){a=Ni(s);for(var f in a)a[f].set&&r.push(f);s=ba(s)}return r}var cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ma(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var cr={exports:{}},fs=cr.exports,ia;function ds(){return ia||(ia=1,function(o,r){(function(a,s){o.exports=s()})(fs,function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)};function l(e,t,n){for(var i,u=0,c=t.length;u<c;u++)!i&&u in t||((i=i||Array.prototype.slice.call(t,0,u))[u]=t[u]);return e.concat(i||Array.prototype.slice.call(t))}var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:cs,h=Object.keys,g=Array.isArray;function x(e,t){return typeof t!="object"||h(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||f.Promise||(f.Promise=Promise);var I=Object.getPrototypeOf,j={}.hasOwnProperty;function M(e,t){return j.call(e,t)}function D(e,t){typeof t=="function"&&(t=t(I(e))),(typeof Reflect>"u"?h:Reflect.ownKeys)(t).forEach(function(n){z(e,n,t[n])})}var H=Object.defineProperty;function z(e,t,n,i){H(e,t,x(n&&M(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function N(e){return{from:function(t){return e.prototype=Object.create(t.prototype),z(e.prototype,"constructor",e),{extend:D.bind(null,e.prototype)}}}}var V=Object.getOwnPropertyDescriptor,K=[].slice;function w(e,t,n){return K.call(e,t,n)}function P(e,t){return t(e)}function S(e){if(!e)throw new Error("Assertion Failed")}function B(e){f.setImmediate?setImmediate(e):setTimeout(e,0)}function W(e,t){if(typeof t=="string"&&M(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],i=0,u=t.length;i<u;++i){var c=W(e,t[i]);n.push(c)}return n}var d=t.indexOf(".");if(d!==-1){var v=e[t.substr(0,d)];return v==null?void 0:W(v,t.substr(d+1))}}function U(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){S(typeof n!="string"&&"length"in n);for(var i=0,u=t.length;i<u;++i)U(e,t[i],n[i])}else{var c,d,v=t.indexOf(".");v!==-1?(c=t.substr(0,v),(d=t.substr(v+1))===""?n===void 0?g(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=n:U(v=!(v=e[c])||!M(e,c)?e[c]={}:v,d,n)):n===void 0?g(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ue(e){var t,n={};for(t in e)M(e,t)&&(n[t]=e[t]);return n}var ve=[].concat;function le(e){return ve.apply([],e)}var At="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(le([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return f[e]}),Ee=new Set(At.map(function(e){return f[e]})),ye=null;function be(e){return ye=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var i=ye.get(n);if(i)return i;if(g(n)){i=[],ye.set(n,i);for(var u=0,c=n.length;u<c;++u)i.push(t(n[u]))}else if(Ee.has(n.constructor))i=n;else{var d,v=I(n);for(d in i=v===Object.prototype?{}:Object.create(v),ye.set(n,i),n)M(n,d)&&(i[d]=t(n[d]))}return i}(e),ye=null,e}var Ne={}.toString;function Ke(e){return Ne.call(e).slice(8,-1)}var Qe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ot=typeof Qe=="symbol"?function(e){var t;return e!=null&&(t=e[Qe])&&t.apply(e)}:function(){return null};function He(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var ut={};function Ue(e){var t,n,i,u;if(arguments.length===1){if(g(e))return e.slice();if(this===ut&&typeof e=="string")return[e];if(u=ot(e)){for(n=[];!(i=u.next()).done;)n.push(i.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var oe=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ht=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Pt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ht),ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function fe(e,t){this.name=e,this.message=t}function qe(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,i,u){return u.indexOf(n)===i}).join(`
`)}function Te(e,t,n,i){this.failures=t,this.failedKeys=i,this.successCount=n,this.message=qe(e,t)}function Fe(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=qe(e,this.failures)}N(fe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),N(Te).from(fe),N(Fe).from(fe);var Pe=Pt.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ye=fe,ie=Pt.reduce(function(e,t){var n=t+"Error";function i(u,c){this.name=n,u?typeof u=="string"?(this.message="".concat(u).concat(c?`
 `+c:""),this.inner=c||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=ce[t]||n,this.inner=null)}return N(i).from(Ye),e[t]=i,e},{});ie.Syntax=SyntaxError,ie.Type=TypeError,ie.Range=RangeError;var at=Ht.reduce(function(e,t){return e[t+"Error"]=ie[t],e},{}),it=Pt.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=ie[t]),e},{});function Se(){}function mt(e){return e}function yt(e,t){return e==null||e===mt?t:function(n){return t(e(n))}}function et(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Ot(e,t){return e===Se?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var i=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?et(i,this.onsuccess):i),u&&(this.onerror=this.onerror?et(u,this.onerror):u),c!==void 0?c:n}}function bt(e,t){return e===Se?t:function(){e.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?et(n,this.onsuccess):n),i&&(this.onerror=this.onerror?et(i,this.onerror):i)}}function dt(e,t){return e===Se?t:function(n){var i=e.apply(this,arguments);x(n,i);var u=this.onsuccess,c=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?et(u,this.onsuccess):u),c&&(this.onerror=this.onerror?et(c,this.onerror):c),i===void 0?n===void 0?void 0:n:x(i,n)}}function St(e,t){return e===Se?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function kt(e,t){return e===Se?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var i=this,u=arguments.length,c=new Array(u);u--;)c[u]=arguments[u];return n.then(function(){return t.apply(i,c)})}return t.apply(this,arguments)}}it.ModifyError=Te,it.DexieError=fe,it.BulkError=Fe;var Le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function qt(e){Le=e}var Nt={},qn=100,At=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,I(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,I(t),e]}(),Ht=At[0],Pt=At[1],At=At[2],Pt=Pt&&Pt.then,Mt=Ht&&Ht.constructor,yn=!!At,ne=function(e,t){Tt.push([e,t]),ge&&(queueMicrotask(Rn),ge=!1)},de=!0,ge=!0,Ae=[],Ie=[],Re=mt,De={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Se,pgp:!1,env:{},finalize:Se},$=De,Tt=[],Ft=0,We=[];function X(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=$;if(typeof e!="function"){if(e!==Nt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&un(this,this._value))}this._state=null,this._value=null,++t.ref,function n(i,u){try{u(function(c){if(i._state===null){if(c===i)throw new TypeError("A promise cannot be resolved with itself.");var d=i._lib&&Lt();c&&typeof c.then=="function"?n(i,function(v,y){c instanceof X?c._then(v,y):c.then(v,y)}):(i._state=!0,i._value=c,bn(i)),d&&ln()}},un.bind(null,i))}catch(c){un(i,c)}}(this,e)}var Xt={get:function(){var e=$,t=Ln;function n(i,u){var c=this,d=!e.global&&(e!==$||t!==Ln),v=d&&!Ut(),y=new X(function(_,E){It(c,new Fn(ko(i,e,d,v),ko(u,e,d,v),_,E,e))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return n.prototype=Nt,n},set:function(e){z(this,"then",e&&e.prototype===Nt?Xt:{get:function(){return e},set:Xt.set})}};function Fn(e,t,n,i,u){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=i,this.psd=u}function un(e,t){var n,i;Ie.push(t),e._state===null&&(n=e._lib&&Lt(),t=Re(t),e._state=!1,e._value=t,i=e,Ae.some(function(u){return u._value===i._value})||Ae.push(i),bn(e),n&&ln())}function bn(e){var t=e._listeners;e._listeners=[];for(var n=0,i=t.length;n<i;++n)It(e,t[n]);var u=e._PSD;--u.ref||u.finalize(),Ft===0&&(++Ft,ne(function(){--Ft==0&&br()},[]))}function It(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ft,ne(_n,[n,e,t])}else e._listeners.push(t)}function _n(e,t,n){try{var i,u=t._value;!t._state&&Ie.length&&(Ie=[]),i=Le&&t._consoleTask?t._consoleTask.run(function(){return e(u)}):e(u),t._state||Ie.indexOf(u)!==-1||function(c){for(var d=Ae.length;d;)if(Ae[--d]._value===c._value)return Ae.splice(d,1)}(t),n.resolve(i)}catch(c){n.reject(c)}finally{--Ft==0&&br(),--n.psd.ref||n.psd.finalize()}}function Rn(){Zt(De,function(){Lt()&&ln()})}function Lt(){var e=de;return ge=de=!1,e}function ln(){var e,t,n;do for(;0<Tt.length;)for(e=Tt,Tt=[],n=e.length,t=0;t<n;++t){var i=e[t];i[0].apply(null,i[1])}while(0<Tt.length);ge=de=!0}function br(){var e=Ae;Ae=[],e.forEach(function(i){i._PSD.onunhandled.call(null,i._value,i)});for(var t=We.slice(0),n=t.length;n;)t[--n]()}function Bn(e){return new X(Nt,!1,e)}function Ge(e,t){var n=$;return function(){var i=Lt(),u=$;try{return Yt(n,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{Yt(u,!1),i&&ln()}}}D(X.prototype,{then:Xt,_then:function(e,t){It(this,new Fn(null,null,e,t,$))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(i){return(i instanceof t?n:Bn)(i)}):this.then(null,function(i){return(i&&i.name===t?n:Bn)(i)})},finally:function(e){return this.then(function(t){return X.resolve(e()).then(function(){return t})},function(t){return X.resolve(e()).then(function(){return Bn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new X(function(i,u){var c=setTimeout(function(){return u(new ie.Timeout(t))},e);n.then(i,u).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&z(X.prototype,Symbol.toStringTag,"Dexie.Promise"),De.env=wo(),D(X,{all:function(){var e=Ue.apply(null,arguments).map(zn);return new X(function(t,n){e.length===0&&t([]);var i=e.length;e.forEach(function(u,c){return X.resolve(u).then(function(d){e[c]=d,--i||t(e)},n)})})},resolve:function(e){return e instanceof X?e:e&&typeof e.then=="function"?new X(function(t,n){e.then(t,n)}):new X(Nt,!0,e)},reject:Bn,race:function(){var e=Ue.apply(null,arguments).map(zn);return new X(function(t,n){e.map(function(i){return X.resolve(i).then(t,n)})})},PSD:{get:function(){return $},set:function(e){return $=e}},totalEchoes:{get:function(){return Ln}},newPSD:zt,usePSD:Zt,scheduler:{get:function(){return ne},set:function(e){ne=e}},rejectionMapper:{get:function(){return Re},set:function(e){Re=e}},follow:function(e,t){return new X(function(n,i){return zt(function(u,c){var d=$;d.unhandleds=[],d.onunhandled=c,d.finalize=et(function(){var v,y=this;v=function(){y.unhandleds.length===0?u():c(y.unhandleds[0])},We.push(function _(){v(),We.splice(We.indexOf(_),1)}),++Ft,ne(function(){--Ft==0&&br()},[])},d.finalize),e()},t,n,i)})}}),Mt&&(Mt.allSettled&&z(X,"allSettled",function(){var e=Ue.apply(null,arguments).map(zn);return new X(function(t){e.length===0&&t([]);var n=e.length,i=new Array(n);e.forEach(function(u,c){return X.resolve(u).then(function(d){return i[c]={status:"fulfilled",value:d}},function(d){return i[c]={status:"rejected",reason:d}}).then(function(){return--n||t(i)})})})}),Mt.any&&typeof AggregateError<"u"&&z(X,"any",function(){var e=Ue.apply(null,arguments).map(zn);return new X(function(t,n){e.length===0&&n(new AggregateError([]));var i=e.length,u=new Array(i);e.forEach(function(c,d){return X.resolve(c).then(function(v){return t(v)},function(v){u[d]=v,--i||n(new AggregateError(u))})})})}),Mt.withResolvers&&(X.withResolvers=Mt.withResolvers));var lt={awaits:0,echoes:0,id:0},Va=0,Nn=[],Hn=0,Ln=0,Wa=0;function zt(e,t,n,i){var u=$,c=Object.create(u);return c.parent=u,c.ref=0,c.global=!1,c.id=++Wa,De.env,c.env=yn?{Promise:X,PromiseProp:{value:X,configurable:!0,writable:!0},all:X.all,race:X.race,allSettled:X.allSettled,any:X.any,resolve:X.resolve,reject:X.reject}:{},t&&x(c,t),++u.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},i=Zt(c,e,n,i),c.ref===0&&c.finalize(),i}function cn(){return lt.id||(lt.id=++Va),++lt.awaits,lt.echoes+=qn,lt.id}function Ut(){return!!lt.awaits&&(--lt.awaits==0&&(lt.id=0),lt.echoes=lt.awaits*qn,!0)}function zn(e){return lt.echoes&&e&&e.constructor===Mt?(cn(),e.then(function(t){return Ut(),t},function(t){return Ut(),tt(t)})):e}function Ga(){var e=Nn[Nn.length-1];Nn.pop(),Yt(e,!1)}function Yt(e,t){var n,i=$;(t?!lt.echoes||Hn++&&e===$:!Hn||--Hn&&e===$)||queueMicrotask(t?(function(u){++Ln,lt.echoes&&--lt.echoes!=0||(lt.echoes=lt.awaits=lt.id=0),Nn.push($),Yt(u,!0)}).bind(null,e):Ga),e!==$&&($=e,i===De&&(De.env=wo()),yn&&(n=De.env.Promise,t=e.env,(i.global||e.global)&&(Object.defineProperty(f,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function wo(){var e=f.Promise;return yn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Zt(e,t,n,i,u){var c=$;try{return Yt(e,!0),t(n,i,u)}finally{Yt(c,!1)}}function ko(e,t,n,i){return typeof e!="function"?e:function(){var u=$;n&&cn(),Yt(t,!0);try{return e.apply(this,arguments)}finally{Yt(u,!1),i&&queueMicrotask(Ut)}}}function _r(e){Promise===Mt&&lt.echoes===0?Hn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Pt).indexOf("[native code]")===-1&&(cn=Ut=Se);var tt=X.reject,$t="ï¿¿",Rt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",xo="String expected.",fn=[],Un="__dbnames",wr="readonly",kr="readwrite";function en(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Do={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Yn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=be(t))[e],t}}function So(){throw ie.Type()}function Me(e,t){try{var n=To(e),i=To(t);if(n!==i)return n==="Array"?1:i==="Array"?-1:n==="binary"?1:i==="binary"?-1:n==="string"?1:i==="string"?-1:n==="Date"?1:i!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(u,c){for(var d=u.length,v=c.length,y=d<v?d:v,_=0;_<y;++_)if(u[_]!==c[_])return u[_]<c[_]?-1:1;return d===v?0:d<v?-1:1}(Eo(e),Eo(t));case"Array":return function(u,c){for(var d=u.length,v=c.length,y=d<v?d:v,_=0;_<y;++_){var E=Me(u[_],c[_]);if(E!==0)return E}return d===v?0:d<v?-1:1}(e,t)}}catch{}return NaN}function To(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Ke(e),e==="ArrayBuffer"?"binary":e)}function Eo(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Co=(Ve.prototype._trans=function(e,t,n){var i=this._tx||$.trans,u=this.name,c=Le&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function d(_,E,p){if(!p.schema[u])throw new ie.NotFound("Table "+u+" not part of transaction");return t(p.idbtrans,p)}var v=Lt();try{var y=i&&i.db._novip===this.db._novip?i===$.trans?i._promise(e,d,n):zt(function(){return i._promise(e,d,n)},{trans:i,transless:$.transless||$}):function _(E,p,O,b){if(E.idbdb&&(E._state.openComplete||$.letThrough||E._vip)){var T=E._createTransaction(p,O,E._dbSchema);try{T.create(),E._state.PR1398_maxLoop=3}catch(C){return C.name===Pe.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return _(E,p,O,b)})):tt(C)}return T._promise(p,function(C,k){return zt(function(){return $.trans=T,b(C,k,T)})}).then(function(C){if(p==="readwrite")try{T.idbtrans.commit()}catch{}return p==="readonly"?C:T._completion.then(function(){return C})})}if(E._state.openComplete)return tt(new ie.DatabaseClosed(E._state.dbOpenError));if(!E._state.isBeingOpened){if(!E._state.autoOpen)return tt(new ie.DatabaseClosed);E.open().catch(Se)}return E._state.dbReadyPromise.then(function(){return _(E,p,O,b)})}(this.db,e,[this.name],d);return c&&(y._consoleTask=c,y=y.catch(function(_){return console.trace(_),tt(_)})),y}finally{v&&ln()}},Ve.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?tt(new ie.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return n.core.get({trans:i,key:e}).then(function(u){return n.hook.reading.fire(u)})}).then(t)},Ve.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(g(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=h(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&t.every(function(_){return 0<=v.keyPath.indexOf(_)})){for(var y=0;y<t.length;++y)if(t.indexOf(v.keyPath[y])===-1)return!1;return!0}return!1}).sort(function(v,y){return v.keyPath.length-y.keyPath.length})[0];if(n&&this.db._maxKey!==$t){var c=n.keyPath.slice(0,t.length);return this.where(c).equals(c.map(function(y){return e[y]}))}!n&&Le&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName;function u(v,y){return Me(v,y)===0}var d=t.reduce(function(p,y){var _=p[0],E=p[1],p=i[y],O=e[y];return[_||p,_||!p?en(E,p&&p.multi?function(b){return b=W(b,y),g(b)&&b.some(function(T){return u(O,T)})}:function(b){return u(O,W(b,y))}):E]},[null,null]),c=d[0],d=d[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(d):n?this.filter(d):this.where(t).equals("")},Ve.prototype.filter=function(e){return this.toCollection().and(e)},Ve.prototype.count=function(e){return this.toCollection().count(e)},Ve.prototype.offset=function(e){return this.toCollection().offset(e)},Ve.prototype.limit=function(e){return this.toCollection().limit(e)},Ve.prototype.each=function(e){return this.toCollection().each(e)},Ve.prototype.toArray=function(e){return this.toCollection().toArray(e)},Ve.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ve.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,g(e)?"[".concat(e.join("+"),"]"):e))},Ve.prototype.reverse=function(){return this.toCollection().reverse()},Ve.prototype.mapToClass=function(e){var t,n=this.db,i=this.name;function u(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof So&&(function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function E(){this.constructor=y}a(y,_),y.prototype=_===null?Object.create(_):(E.prototype=_.prototype,new E)}(u,t=e),Object.defineProperty(u.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),u.prototype.table=function(){return i},e=u);for(var c=new Set,d=e.prototype;d;d=I(d))Object.getOwnPropertyNames(d).forEach(function(y){return c.add(y)});function v(y){if(!y)return y;var _,E=Object.create(e.prototype);for(_ in y)if(!c.has(_))try{E[_]=y[_]}catch{}return E}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),e},Ve.prototype.defineClass=function(){return this.mapToClass(function(e){x(this,e)})},Ve.prototype.add=function(e,t){var n=this,i=this.schema.primKey,u=i.auto,c=i.keyPath,d=e;return c&&u&&(d=Yn(c)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"add",keys:t!=null?[t]:null,values:[d]})}).then(function(v){return v.numFailures?X.reject(v.failures[0]):v.lastResult}).then(function(v){if(c)try{U(e,c,v)}catch{}return v})},Ve.prototype.update=function(e,t){return typeof e!="object"||g(e)?this.where(":id").equals(e).modify(t):(e=W(e,this.schema.primKey.keyPath),e===void 0?tt(new ie.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},Ve.prototype.put=function(e,t){var n=this,i=this.schema.primKey,u=i.auto,c=i.keyPath,d=e;return c&&u&&(d=Yn(c)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"put",values:[d],keys:t!=null?[t]:null})}).then(function(v){return v.numFailures?X.reject(v.failures[0]):v.lastResult}).then(function(v){if(c)try{U(e,c,v)}catch{}return v})},Ve.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?X.reject(n.failures[0]):void 0})},Ve.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Do})}).then(function(t){return t.numFailures?X.reject(t.failures[0]):void 0})},Ve.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(i){return i.map(function(u){return t.hook.reading.fire(u)})})})},Ve.prototype.bulkAdd=function(e,t,n){var i=this,u=Array.isArray(t)?t:void 0,c=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(d){var _=i.schema.primKey,v=_.auto,_=_.keyPath;if(_&&u)throw new ie.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,_=_&&v?e.map(Yn(_)):e;return i.core.mutate({trans:d,type:"add",keys:u,values:_,wantResults:c}).then(function(T){var p=T.numFailures,O=T.results,b=T.lastResult,T=T.failures;if(p===0)return c?O:b;throw new Fe("".concat(i.name,".bulkAdd(): ").concat(p," of ").concat(y," operations failed"),T)})})},Ve.prototype.bulkPut=function(e,t,n){var i=this,u=Array.isArray(t)?t:void 0,c=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(d){var _=i.schema.primKey,v=_.auto,_=_.keyPath;if(_&&u)throw new ie.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,_=_&&v?e.map(Yn(_)):e;return i.core.mutate({trans:d,type:"put",keys:u,values:_,wantResults:c}).then(function(T){var p=T.numFailures,O=T.results,b=T.lastResult,T=T.failures;if(p===0)return c?O:b;throw new Fe("".concat(i.name,".bulkPut(): ").concat(p," of ").concat(y," operations failed"),T)})})},Ve.prototype.bulkUpdate=function(e){var t=this,n=this.core,i=e.map(function(d){return d.key}),u=e.map(function(d){return d.changes}),c=[];return this._trans("readwrite",function(d){return n.getMany({trans:d,keys:i,cache:"clone"}).then(function(v){var y=[],_=[];e.forEach(function(p,O){var b=p.key,T=p.changes,C=v[O];if(C){for(var k=0,A=Object.keys(T);k<A.length;k++){var q=A[k],F=T[q];if(q===t.schema.primKey.keyPath){if(Me(F,b)!==0)throw new ie.Constraint("Cannot update primary key in bulkUpdate()")}else U(C,q,F)}c.push(O),y.push(b),_.push(C)}});var E=y.length;return n.mutate({trans:d,type:"put",keys:y,values:_,updates:{keys:i,changeSpecs:u}}).then(function(p){var O=p.numFailures,b=p.failures;if(O===0)return E;for(var T=0,C=Object.keys(b);T<C.length;T++){var k,A=C[T],q=c[Number(A)];q!=null&&(k=b[A],delete b[A],b[q]=k)}throw new Fe("".concat(t.name,".bulkUpdate(): ").concat(O," of ").concat(E," operations failed"),b)})})})},Ve.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"delete",keys:e})}).then(function(d){var u=d.numFailures,c=d.lastResult,d=d.failures;if(u===0)return c;throw new Fe("".concat(t.name,".bulkDelete(): ").concat(u," of ").concat(n," operations failed"),d)})},Ve);function Ve(){}function wn(e){function t(d,v){if(v){for(var y=arguments.length,_=new Array(y-1);--y;)_[y-1]=arguments[y];return n[d].subscribe.apply(null,_),e}if(typeof d=="string")return n[d]}var n={};t.addEventType=c;for(var i=1,u=arguments.length;i<u;++i)c(arguments[i]);return t;function c(d,v,y){if(typeof d!="object"){var _;v=v||St;var E={subscribers:[],fire:y=y||Se,subscribe:function(p){E.subscribers.indexOf(p)===-1&&(E.subscribers.push(p),E.fire=v(E.fire,p))},unsubscribe:function(p){E.subscribers=E.subscribers.filter(function(O){return O!==p}),E.fire=E.subscribers.reduce(v,y)}};return n[d]=t[d]=E}h(_=d).forEach(function(p){var O=_[p];if(g(O))c(p,_[p][0],_[p][1]);else{if(O!=="asap")throw new ie.InvalidArgument("Invalid event config");var b=c(p,mt,function(){for(var T=arguments.length,C=new Array(T);T--;)C[T]=arguments[T];b.subscribers.forEach(function(k){B(function(){k.apply(null,C)})})})}})}}function kn(e,t){return N(t).from({prototype:e}),t}function dn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function xr(e,t){e.filter=en(e.filter,t)}function Dr(e,t,n){var i=e.replayFilter;e.replayFilter=i?function(){return en(i(),t())}:t,e.justLimit=n&&!i}function Vn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new ie.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Oo(e,t,n){var i=Vn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:i,range:e.range}})}function Wn(e,t,n,i){var u=e.replayFilter?en(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},d=function(v,y,_){var E,p;u&&!u(y,_,function(O){return y.stop(O)},function(O){return y.fail(O)})||((p=""+(E=y.primaryKey))=="[object ArrayBuffer]"&&(p=""+new Uint8Array(E)),M(c,p)||(c[p]=!0,t(v,y,_)))};return Promise.all([e.or._iterate(d,n),Io(Oo(e,i,n),e.algorithm,d,!e.keysOnly&&e.valueMapper)])}return Io(Oo(e,i,n),en(e.algorithm,u),t,!e.keysOnly&&e.valueMapper)}function Io(e,t,n,i){var u=Ge(i?function(c,d,v){return n(i(c),d,v)}:n);return e.then(function(c){if(c)return c.start(function(){var d=function(){return c.continue()};t&&!t(c,function(v){return d=v},function(v){c.stop(v),d=Se},function(v){c.fail(v),d=Se})||u(c.value,c,function(v){return d=v}),d()})})}var xn=(Po.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(g(n))return l(l([],g(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var i=t.remove;if(g(i))return g(e)?e.filter(function(u){return!i.includes(u)}).sort():[];if(typeof i=="number")return Number(e)-i;if(typeof i=="bigint")try{return BigInt(e)-i}catch{return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Po);function Po(e){this["@@propmod"]=e}var Qa=(Be.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,tt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Be.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,tt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Be.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=en(t.algorithm,e)},Be.prototype._iterate=function(e,t){return Wn(this._ctx,e,t,this._ctx.table.core)},Be.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&x(n,e),t._ctx=n,t},Be.prototype.raw=function(){return this._ctx.valueMapper=null,this},Be.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Wn(t,e,n,t.table.core)})},Be.prototype.count=function(e){var t=this;return this._read(function(n){var i=t._ctx,u=i.table.core;if(dn(i,!0))return u.count({trans:n,query:{index:Vn(i,u.schema),range:i.range}}).then(function(d){return Math.min(d,i.limit)});var c=0;return Wn(i,function(){return++c,!1},n,u).then(function(){return c})}).then(e)},Be.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),i=n[0],u=n.length-1;function c(y,_){return _?c(y[n[_]],_-1):y[i]}var d=this._ctx.dir==="next"?1:-1;function v(y,_){return Me(c(y,u),c(_,u))*d}return this.toArray(function(y){return y.sort(v)}).then(t)},Be.prototype.toArray=function(e){var t=this;return this._read(function(n){var i=t._ctx;if(i.dir==="next"&&dn(i,!0)&&0<i.limit){var u=i.valueMapper,c=Vn(i,i.table.core.schema);return i.table.core.query({trans:n,limit:i.limit,values:!0,query:{index:c,range:i.range}}).then(function(v){return v=v.result,u?v.map(u):v})}var d=[];return Wn(i,function(v){return d.push(v)},n,i.table.core).then(function(){return d})},e)},Be.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,dn(t)?Dr(t,function(){var n=e;return function(i,u){return n===0||(n===1?--n:u(function(){i.advance(n),n=0}),!1)}}):Dr(t,function(){var n=e;return function(){return--n<0}})),this},Be.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Dr(this._ctx,function(){var t=e;return function(n,i,u){return--t<=0&&i(u),0<=t}},!0),this},Be.prototype.until=function(e,t){return xr(this._ctx,function(n,i,u){return!e(n.value)||(i(u),t)}),this},Be.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},Be.prototype.last=function(e){return this.reverse().first(e)},Be.prototype.filter=function(e){var t;return xr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=en(t.isMatch,e),this},Be.prototype.and=function(e){return this.filter(e)},Be.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Be.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Be.prototype.desc=function(){return this.reverse()},Be.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){e(i.key,i)})},Be.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Be.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){e(i.primaryKey,i)})},Be.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,u){n.push(u.key)}).then(function(){return n}).then(e)},Be.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&dn(t,!0)&&0<t.limit)return this._read(function(i){var u=Vn(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:u,range:t.range}})}).then(function(i){return i.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,u){n.push(u.primaryKey)}).then(function(){return n}).then(e)},Be.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Be.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},Be.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Be.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return xr(this._ctx,function(u){var i=u.primaryKey.toString(),u=M(t,i);return t[i]=!0,!u}),this},Be.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(i){var u,c,d;d=typeof e=="function"?e:(u=h(e),c=u.length,function(k){for(var A=!1,q=0;q<c;++q){var F=u[q],Y=e[F],Q=W(k,F);Y instanceof xn?(U(k,F,Y.execute(Q)),A=!0):Q!==Y&&(U(k,F,Y),A=!0)}return A});var v=n.table.core,p=v.schema.primaryKey,y=p.outbound,_=p.extractKey,E=200,p=t.db._options.modifyChunkSize;p&&(E=typeof p=="object"?p[v.name]||p["*"]||200:p);function O(k,F){var q=F.failures,F=F.numFailures;T+=k-F;for(var Y=0,Q=h(q);Y<Q.length;Y++){var te=Q[Y];b.push(q[te])}}var b=[],T=0,C=[];return t.clone().primaryKeys().then(function(k){function A(F){var Y=Math.min(E,k.length-F);return v.getMany({trans:i,keys:k.slice(F,F+Y),cache:"immutable"}).then(function(Q){for(var te=[],J=[],Z=y?[]:null,re=[],ee=0;ee<Y;++ee){var se=Q[ee],xe={value:be(se),primKey:k[F+ee]};d.call(xe,xe.value,xe)!==!1&&(xe.value==null?re.push(k[F+ee]):y||Me(_(se),_(xe.value))===0?(J.push(xe.value),y&&Z.push(k[F+ee])):(re.push(k[F+ee]),te.push(xe.value)))}return Promise.resolve(0<te.length&&v.mutate({trans:i,type:"add",values:te}).then(function(Ce){for(var Oe in Ce.failures)re.splice(parseInt(Oe),1);O(te.length,Ce)})).then(function(){return(0<J.length||q&&typeof e=="object")&&v.mutate({trans:i,type:"put",keys:Z,values:J,criteria:q,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<F}).then(function(Ce){return O(J.length,Ce)})}).then(function(){return(0<re.length||q&&e===Sr)&&v.mutate({trans:i,type:"delete",keys:re,criteria:q,isAdditionalChunk:0<F}).then(function(Ce){return O(re.length,Ce)})}).then(function(){return k.length>F+Y&&A(F+E)})})}var q=dn(n)&&n.limit===1/0&&(typeof e!="function"||e===Sr)&&{index:n.index,range:n.range};return A(0).then(function(){if(0<b.length)throw new Te("Error modifying one or more objects",b,T,C);return k.length})})})},Be.prototype.delete=function(){var e=this._ctx,t=e.range;return dn(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var i=e.table.core.schema.primaryKey,u=t;return e.table.core.count({trans:n,query:{index:i,range:u}}).then(function(c){return e.table.core.mutate({trans:n,type:"deleteRange",range:u}).then(function(d){var v=d.failures;if(d.lastResult,d.results,d=d.numFailures,d)throw new Te("Could not delete some values",Object.keys(v).map(function(y){return v[y]}),c-d);return c-d})})}):this.modify(Sr)},Be);function Be(){}var Sr=function(e,t){return t.value=null};function Ja(e,t){return e<t?-1:e===t?0:1}function Xa(e,t){return t<e?-1:e===t?0:1}function Et(e,t,n){return e=e instanceof Mo?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function hn(e){return new e.Collection(e,function(){return Ao("")}).limit(0)}function Gn(e,t,n,i){var u,c,d,v,y,_,E,p=n.length;if(!n.every(function(T){return typeof T=="string"}))return Et(e,xo);function O(T){u=T==="next"?function(k){return k.toUpperCase()}:function(k){return k.toLowerCase()},c=T==="next"?function(k){return k.toLowerCase()}:function(k){return k.toUpperCase()},d=T==="next"?Ja:Xa;var C=n.map(function(k){return{lower:c(k),upper:u(k)}}).sort(function(k,A){return d(k.lower,A.lower)});v=C.map(function(k){return k.upper}),y=C.map(function(k){return k.lower}),E=(_=T)==="next"?"":i}O("next"),e=new e.Collection(e,function(){return Vt(v[0],y[p-1]+i)}),e._ondirectionchange=function(T){O(T)};var b=0;return e._addAlgorithm(function(T,C,k){var A=T.key;if(typeof A!="string")return!1;var q=c(A);if(t(q,y,b))return!0;for(var F=null,Y=b;Y<p;++Y){var Q=function(te,J,Z,re,ee,se){for(var xe=Math.min(te.length,re.length),Ce=-1,Oe=0;Oe<xe;++Oe){var Ct=J[Oe];if(Ct!==re[Oe])return ee(te[Oe],Z[Oe])<0?te.substr(0,Oe)+Z[Oe]+Z.substr(Oe+1):ee(te[Oe],re[Oe])<0?te.substr(0,Oe)+re[Oe]+Z.substr(Oe+1):0<=Ce?te.substr(0,Ce)+J[Ce]+Z.substr(Ce+1):null;ee(te[Oe],Ct)<0&&(Ce=Oe)}return xe<re.length&&se==="next"?te+Z.substr(te.length):xe<te.length&&se==="prev"?te.substr(0,Z.length):Ce<0?null:te.substr(0,Ce)+re[Ce]+Z.substr(Ce+1)}(A,q,v[Y],y[Y],d,_);Q===null&&F===null?b=Y+1:(F===null||0<d(F,Q))&&(F=Q)}return C(F!==null?function(){T.continue(F+E)}:k),!1}),e}function Vt(e,t,n,i){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:i}}function Ao(e){return{type:1,lower:e,upper:e}}var Mo=(Object.defineProperty(ct.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ct.prototype.between=function(e,t,n,i){n=n!==!1,i=i===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||i)&&(!n||!i)?hn(this):new this.Collection(this,function(){return Vt(e,t,!n,!i)})}catch{return Et(this,Rt)}},ct.prototype.equals=function(e){return e==null?Et(this,Rt):new this.Collection(this,function(){return Ao(e)})},ct.prototype.above=function(e){return e==null?Et(this,Rt):new this.Collection(this,function(){return Vt(e,void 0,!0)})},ct.prototype.aboveOrEqual=function(e){return e==null?Et(this,Rt):new this.Collection(this,function(){return Vt(e,void 0,!1)})},ct.prototype.below=function(e){return e==null?Et(this,Rt):new this.Collection(this,function(){return Vt(void 0,e,!1,!0)})},ct.prototype.belowOrEqual=function(e){return e==null?Et(this,Rt):new this.Collection(this,function(){return Vt(void 0,e)})},ct.prototype.startsWith=function(e){return typeof e!="string"?Et(this,xo):this.between(e,e+$t,!0,!0)},ct.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Gn(this,function(t,n){return t.indexOf(n[0])===0},[e],$t)},ct.prototype.equalsIgnoreCase=function(e){return Gn(this,function(t,n){return t===n[0]},[e],"")},ct.prototype.anyOfIgnoreCase=function(){var e=Ue.apply(ut,arguments);return e.length===0?hn(this):Gn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},ct.prototype.startsWithAnyOfIgnoreCase=function(){var e=Ue.apply(ut,arguments);return e.length===0?hn(this):Gn(this,function(t,n){return n.some(function(i){return t.indexOf(i)===0})},e,$t)},ct.prototype.anyOf=function(){var e=this,t=Ue.apply(ut,arguments),n=this._cmp;try{t.sort(n)}catch{return Et(this,Rt)}if(t.length===0)return hn(this);var i=new this.Collection(this,function(){return Vt(t[0],t[t.length-1])});i._ondirectionchange=function(c){n=c==="next"?e._ascending:e._descending,t.sort(n)};var u=0;return i._addAlgorithm(function(c,d,v){for(var y=c.key;0<n(y,t[u]);)if(++u===t.length)return d(v),!1;return n(y,t[u])===0||(d(function(){c.continue(t[u])}),!1)}),i},ct.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ct.prototype.noneOf=function(){var e=Ue.apply(ut,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Et(this,Rt)}var t=e.reduce(function(n,i){return n?n.concat([[n[n.length-1][1],i]]):[[-1/0,i]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},ct.prototype.inAnyRange=function(A,t){var n=this,i=this._cmp,u=this._ascending,c=this._descending,d=this._min,v=this._max;if(A.length===0)return hn(this);if(!A.every(function(q){return q[0]!==void 0&&q[1]!==void 0&&u(q[0],q[1])<=0}))return Et(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ie.InvalidArgument);var y=!t||t.includeLowers!==!1,_=t&&t.includeUppers===!0,E,p=u;function O(q,F){return p(q[0],F[0])}try{(E=A.reduce(function(q,F){for(var Y=0,Q=q.length;Y<Q;++Y){var te=q[Y];if(i(F[0],te[1])<0&&0<i(F[1],te[0])){te[0]=d(te[0],F[0]),te[1]=v(te[1],F[1]);break}}return Y===Q&&q.push(F),q},[])).sort(O)}catch{return Et(this,Rt)}var b=0,T=_?function(q){return 0<u(q,E[b][1])}:function(q){return 0<=u(q,E[b][1])},C=y?function(q){return 0<c(q,E[b][0])}:function(q){return 0<=c(q,E[b][0])},k=T,A=new this.Collection(this,function(){return Vt(E[0][0],E[E.length-1][1],!y,!_)});return A._ondirectionchange=function(q){p=q==="next"?(k=T,u):(k=C,c),E.sort(O)},A._addAlgorithm(function(q,F,Y){for(var Q,te=q.key;k(te);)if(++b===E.length)return F(Y),!1;return!T(Q=te)&&!C(Q)||(n._cmp(te,E[b][1])===0||n._cmp(te,E[b][0])===0||F(function(){p===u?q.continue(E[b][0]):q.continue(E[b][1])}),!1)}),A},ct.prototype.startsWithAnyOf=function(){var e=Ue.apply(ut,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?hn(this):this.inAnyRange(e.map(function(t){return[t,t+$t]})):Et(this,"startsWithAnyOf() only works with strings")},ct);function ct(){}function jt(e){return Ge(function(t){return Dn(t),e(t.target.error),!1})}function Dn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Sn="storagemutated",Tr="x-storagemutated-1",Wt=wn(null,Sn),Za=(Kt.prototype._lock=function(){return S(!$.global),++this._reculock,this._reculock!==1||$.global||($.lockOwnerFor=this),this},Kt.prototype._unlock=function(){if(S(!$.global),--this._reculock==0)for($.global||($.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Zt(e[1],e[0])}catch{}}return this},Kt.prototype._locked=function(){return this._reculock&&$.lockOwnerFor!==this},Kt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,i=this.db._state.dbOpenError;if(S(!this.idbtrans),!e&&!n)switch(i&&i.name){case"DatabaseClosedError":throw new ie.DatabaseClosed(i);case"MissingAPIError":throw new ie.MissingAPI(i.message,i);default:throw new ie.OpenFailed(i)}if(!this.active)throw new ie.TransactionInactive;return S(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ge(function(u){Dn(u),t._reject(e.error)}),e.onabort=Ge(function(u){Dn(u),t.active&&t._reject(new ie.Abort(e.error)),t.active=!1,t.on("abort").fire(u)}),e.oncomplete=Ge(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Wt.storagemutated.fire(e.mutatedParts)}),this},Kt.prototype._promise=function(e,t,n){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return tt(new ie.ReadOnly("Transaction is readonly"));if(!this.active)return tt(new ie.TransactionInactive);if(this._locked())return new X(function(c,d){i._blockedFuncs.push([function(){i._promise(e,t,n).then(c,d)},$])});if(n)return zt(function(){var c=new X(function(d,v){i._lock();var y=t(d,v,i);y&&y.then&&y.then(d,v)});return c.finally(function(){return i._unlock()}),c._lib=!0,c});var u=new X(function(c,d){var v=t(c,d,i);v&&v.then&&v.then(c,d)});return u._lib=!0,u},Kt.prototype._root=function(){return this.parent?this.parent._root():this},Kt.prototype.waitFor=function(e){var t,n=this._root(),i=X.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return i}):(n._waitingFor=i,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function c(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=c)}());var u=n._waitingFor;return new X(function(c,d){i.then(function(v){return n._waitingQueue.push(Ge(c.bind(null,v)))},function(v){return n._waitingQueue.push(Ge(d.bind(null,v)))}).finally(function(){n._waitingFor===u&&(n._waitingFor=null)})})},Kt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ie.Abort))},Kt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(M(t,e))return t[e];var n=this.schema[e];if(!n)throw new ie.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},Kt);function Kt(){}function Er(e,t,n,i,u,c,d){return{name:e,keyPath:t,unique:n,multi:i,auto:u,compound:c,src:(n&&!d?"&":"")+(i?"*":"")+(u?"++":"")+jo(t)}}function jo(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Cr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(i=function(u){return[u.name,u]},n.reduce(function(u,c,d){return d=i(c,d),d&&(u[d[0]]=d[1]),u},{}))};var i}var Tn=function(e){try{return e.only([[]]),Tn=function(){return[[]]},[[]]}catch{return Tn=function(){return $t},$t}};function Or(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return W(n,t)}:function(n){return W(n,e)};var t}function Ko(e){return[].slice.call(e)}var $a=0;function En(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function ei(e,t,y){function i(k){if(k.type===3)return null;if(k.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var b=k.lower,T=k.upper,C=k.lowerOpen,k=k.upperOpen;return b===void 0?T===void 0?null:t.upperBound(T,!!k):T===void 0?t.lowerBound(b,!!C):t.bound(b,T,!!C,!!k)}function u(O){var b,T=O.name;return{name:T,schema:O,mutate:function(C){var k=C.trans,A=C.type,q=C.keys,F=C.values,Y=C.range;return new Promise(function(Q,te){Q=Ge(Q);var J=k.objectStore(T),Z=J.keyPath==null,re=A==="put"||A==="add";if(!re&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var ee,se=(q||F||{length:1}).length;if(q&&F&&q.length!==F.length)throw new Error("Given keys array must have same length as given values array.");if(se===0)return Q({numFailures:0,failures:{},results:[],lastResult:void 0});function xe(_t){++Ct,Dn(_t)}var Ce=[],Oe=[],Ct=0;if(A==="deleteRange"){if(Y.type===4)return Q({numFailures:Ct,failures:Oe,results:[],lastResult:void 0});Y.type===3?Ce.push(ee=J.clear()):Ce.push(ee=J.delete(i(Y)))}else{var Z=re?Z?[F,q]:[F,null]:[q,null],we=Z[0],vt=Z[1];if(re)for(var pt=0;pt<se;++pt)Ce.push(ee=vt&&vt[pt]!==void 0?J[A](we[pt],vt[pt]):J[A](we[pt])),ee.onerror=xe;else for(pt=0;pt<se;++pt)Ce.push(ee=J[A](we[pt])),ee.onerror=xe}function sr(_t){_t=_t.target.result,Ce.forEach(function(rn,Wr){return rn.error!=null&&(Oe[Wr]=rn.error)}),Q({numFailures:Ct,failures:Oe,results:A==="delete"?q:Ce.map(function(rn){return rn.result}),lastResult:_t})}ee.onerror=function(_t){xe(_t),sr(_t)},ee.onsuccess=sr})},getMany:function(C){var k=C.trans,A=C.keys;return new Promise(function(q,F){q=Ge(q);for(var Y,Q=k.objectStore(T),te=A.length,J=new Array(te),Z=0,re=0,ee=function(Ce){Ce=Ce.target,J[Ce._pos]=Ce.result,++re===Z&&q(J)},se=jt(F),xe=0;xe<te;++xe)A[xe]!=null&&((Y=Q.get(A[xe]))._pos=xe,Y.onsuccess=ee,Y.onerror=se,++Z);Z===0&&q(J)})},get:function(C){var k=C.trans,A=C.key;return new Promise(function(q,F){q=Ge(q);var Y=k.objectStore(T).get(A);Y.onsuccess=function(Q){return q(Q.target.result)},Y.onerror=jt(F)})},query:(b=_,function(C){return new Promise(function(k,A){k=Ge(k);var q,F,Y,Z=C.trans,Q=C.values,te=C.limit,ee=C.query,J=te===1/0?void 0:te,re=ee.index,ee=ee.range,Z=Z.objectStore(T),re=re.isPrimaryKey?Z:Z.index(re.name),ee=i(ee);if(te===0)return k({result:[]});b?((J=Q?re.getAll(ee,J):re.getAllKeys(ee,J)).onsuccess=function(se){return k({result:se.target.result})},J.onerror=jt(A)):(q=0,F=!Q&&"openKeyCursor"in re?re.openKeyCursor(ee):re.openCursor(ee),Y=[],F.onsuccess=function(se){var xe=F.result;return xe?(Y.push(Q?xe.value:xe.primaryKey),++q===te?k({result:Y}):void xe.continue()):k({result:Y})},F.onerror=jt(A))})}),openCursor:function(C){var k=C.trans,A=C.values,q=C.query,F=C.reverse,Y=C.unique;return new Promise(function(Q,te){Q=Ge(Q);var re=q.index,J=q.range,Z=k.objectStore(T),Z=re.isPrimaryKey?Z:Z.index(re.name),re=F?Y?"prevunique":"prev":Y?"nextunique":"next",ee=!A&&"openKeyCursor"in Z?Z.openKeyCursor(i(J),re):Z.openCursor(i(J),re);ee.onerror=jt(te),ee.onsuccess=Ge(function(se){var xe,Ce,Oe,Ct,we=ee.result;we?(we.___id=++$a,we.done=!1,xe=we.continue.bind(we),Ce=(Ce=we.continuePrimaryKey)&&Ce.bind(we),Oe=we.advance.bind(we),Ct=function(){throw new Error("Cursor not stopped")},we.trans=k,we.stop=we.continue=we.continuePrimaryKey=we.advance=function(){throw new Error("Cursor not started")},we.fail=Ge(te),we.next=function(){var vt=this,pt=1;return this.start(function(){return pt--?vt.continue():vt.stop()}).then(function(){return vt})},we.start=function(vt){function pt(){if(ee.result)try{vt()}catch(_t){we.fail(_t)}else we.done=!0,we.start=function(){throw new Error("Cursor behind last entry")},we.stop()}var sr=new Promise(function(_t,rn){_t=Ge(_t),ee.onerror=jt(rn),we.fail=rn,we.stop=function(Wr){we.stop=we.continue=we.continuePrimaryKey=we.advance=Ct,_t(Wr)}});return ee.onsuccess=Ge(function(_t){ee.onsuccess=pt,pt()}),we.continue=xe,we.continuePrimaryKey=Ce,we.advance=Oe,pt(),sr},Q(we)):Q(null)},te)})},count:function(C){var k=C.query,A=C.trans,q=k.index,F=k.range;return new Promise(function(Y,Q){var te=A.objectStore(T),J=q.isPrimaryKey?te:te.index(q.name),te=i(F),J=te?J.count(te):J.count();J.onsuccess=Ge(function(Z){return Y(Z.target.result)}),J.onerror=jt(Q)})}}}var c,d,v,E=(d=y,v=Ko((c=e).objectStoreNames),{schema:{name:c.name,tables:v.map(function(O){return d.objectStore(O)}).map(function(O){var b=O.keyPath,k=O.autoIncrement,T=g(b),C={},k={name:O.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b==null,compound:T,keyPath:b,autoIncrement:k,unique:!0,extractKey:Or(b)},indexes:Ko(O.indexNames).map(function(A){return O.index(A)}).map(function(Y){var q=Y.name,F=Y.unique,Q=Y.multiEntry,Y=Y.keyPath,Q={name:q,compound:g(Y),keyPath:Y,unique:F,multiEntry:Q,extractKey:Or(Y)};return C[En(Y)]=Q}),getIndexByKeyPath:function(A){return C[En(A)]}};return C[":id"]=k.primaryKey,b!=null&&(C[En(b)]=k.primaryKey),k})},hasGetAll:0<v.length&&"getAll"in d.objectStore(v[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),y=E.schema,_=E.hasGetAll,E=y.tables.map(u),p={};return E.forEach(function(O){return p[O.name]=O}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(O){if(!p[O])throw new Error("Table '".concat(O,"' not found"));return p[O]},MIN_KEY:-1/0,MAX_KEY:Tn(t),schema:y}}function ti(e,t,n,i){var u=n.IDBKeyRange;return n.indexedDB,{dbcore:(i=ei(t,u,i),e.dbcore.reduce(function(c,d){return d=d.create,s(s({},c),d(c))},i))}}function Qn(e,i){var n=i.db,i=ti(e._middlewares,n,e._deps,i);e.core=i.dbcore,e.tables.forEach(function(u){var c=u.name;e.core.schema.tables.some(function(d){return d.name===c})&&(u.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=u.core))})}function Jn(e,t,n,i){n.forEach(function(u){var c=i[u];t.forEach(function(d){var v=function y(_,E){return V(_,E)||(_=I(_))&&y(_,E)}(d,u);(!v||"value"in v&&v.value===void 0)&&(d===e.Transaction.prototype||d instanceof e.Transaction?z(d,u,{get:function(){return this.table(u)},set:function(y){H(this,u,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):d[u]=new e.Table(u,c))})})}function Ir(e,t){t.forEach(function(n){for(var i in n)n[i]instanceof e.Table&&delete n[i]})}function ni(e,t){return e._cfg.version-t._cfg.version}function ri(e,t,n,i){var u=e._dbSchema;n.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=Cr("$meta",Fo("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,u);c.create(n),c._completion.catch(i);var d=c._reject.bind(c),v=$.transless||$;zt(function(){return $.trans=c,$.transless=v,t!==0?(Qn(e,n),_=t,((y=c).storeNames.includes("$meta")?y.table("$meta").get("version").then(function(E){return E??_}):X.resolve(_)).then(function(E){return O=E,b=c,T=n,C=[],E=(p=e)._versions,k=p._dbSchema=Zn(0,p.idbdb,T),(E=E.filter(function(A){return A._cfg.version>=O})).length!==0?(E.forEach(function(A){C.push(function(){var q=k,F=A._cfg.dbschema;$n(p,q,T),$n(p,F,T),k=p._dbSchema=F;var Y=Pr(q,F);Y.add.forEach(function(re){Ar(T,re[0],re[1].primKey,re[1].indexes)}),Y.change.forEach(function(re){if(re.recreate)throw new ie.Upgrade("Not yet support for changing primary key");var ee=T.objectStore(re.name);re.add.forEach(function(se){return Xn(ee,se)}),re.change.forEach(function(se){ee.deleteIndex(se.name),Xn(ee,se)}),re.del.forEach(function(se){return ee.deleteIndex(se)})});var Q=A._cfg.contentUpgrade;if(Q&&A._cfg.version>O){Qn(p,T),b._memoizedTables={};var te=ue(F);Y.del.forEach(function(re){te[re]=q[re]}),Ir(p,[p.Transaction.prototype]),Jn(p,[p.Transaction.prototype],h(te),te),b.schema=te;var J,Z=oe(Q);return Z&&cn(),Y=X.follow(function(){var re;(J=Q(b))&&Z&&(re=Ut.bind(null,null),J.then(re,re))}),J&&typeof J.then=="function"?X.resolve(J):Y.then(function(){return J})}}),C.push(function(q){var F,Y,Q=A._cfg.dbschema;F=Q,Y=q,[].slice.call(Y.db.objectStoreNames).forEach(function(te){return F[te]==null&&Y.db.deleteObjectStore(te)}),Ir(p,[p.Transaction.prototype]),Jn(p,[p.Transaction.prototype],p._storeNames,p._dbSchema),b.schema=p._dbSchema}),C.push(function(q){p.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(p.idbdb.version/10)===A._cfg.version?(p.idbdb.deleteObjectStore("$meta"),delete p._dbSchema.$meta,p._storeNames=p._storeNames.filter(function(F){return F!=="$meta"})):q.objectStore("$meta").put(A._cfg.version,"version"))})}),function A(){return C.length?X.resolve(C.shift()(b.idbtrans)).then(A):X.resolve()}().then(function(){qo(k,T)})):X.resolve();var p,O,b,T,C,k}).catch(d)):(h(u).forEach(function(E){Ar(n,E,u[E].primKey,u[E].indexes)}),Qn(e,n),void X.follow(function(){return e.on.populate.fire(c)}).catch(d));var y,_})}function oi(e,t){qo(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Zn(0,e.idbdb,t);$n(e,e._dbSchema,t);for(var i=0,u=Pr(n,e._dbSchema).change;i<u.length;i++){var c=function(d){if(d.change.length||d.recreate)return console.warn("Unable to patch indexes of table ".concat(d.name," because it has changes on the type of index or primary key.")),{value:void 0};var v=t.objectStore(d.name);d.add.forEach(function(y){Le&&console.debug("Dexie upgrade patch: Creating missing index ".concat(d.name,".").concat(y.src)),Xn(v,y)})}(u[i]);if(typeof c=="object")return c.value}}function Pr(e,t){var n,i={del:[],add:[],change:[]};for(n in e)t[n]||i.del.push(n);for(n in t){var u=e[n],c=t[n];if(u){var d={name:n,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||u.primKey.auto!==c.primKey.auto)d.recreate=!0,i.change.push(d);else{var v=u.idxByName,y=c.idxByName,_=void 0;for(_ in v)y[_]||d.del.push(_);for(_ in y){var E=v[_],p=y[_];E?E.src!==p.src&&d.change.push(p):d.add.push(p)}(0<d.del.length||0<d.add.length||0<d.change.length)&&i.change.push(d)}}else i.add.push([n,c])}return i}function Ar(e,t,n,i){var u=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach(function(c){return Xn(u,c)}),u}function qo(e,t){h(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(Le&&console.debug("Dexie: Creating missing table",n),Ar(t,n,e[n].primKey,e[n].indexes))})}function Xn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Zn(e,t,n){var i={};return w(t.objectStoreNames,0).forEach(function(u){for(var c=n.objectStore(u),d=Er(jo(_=c.keyPath),_||"",!0,!1,!!c.autoIncrement,_&&typeof _!="string",!0),v=[],y=0;y<c.indexNames.length;++y){var E=c.index(c.indexNames[y]),_=E.keyPath,E=Er(E.name,_,!!E.unique,!!E.multiEntry,!1,_&&typeof _!="string",!1);v.push(E)}i[u]=Cr(u,d,v)}),i}function $n(e,t,n){for(var i=n.db.objectStoreNames,u=0;u<i.length;++u){var c=i[u],d=n.objectStore(c);e._hasGetAll="getAll"in d;for(var v=0;v<d.indexNames.length;++v){var y=d.indexNames[v],_=d.index(y).keyPath,E=typeof _=="string"?_:"["+w(_).join("+")+"]";!t[c]||(_=t[c].idxByName[E])&&(_.name=y,delete t[c].idxByName[E],t[c].idxByName[y]=_)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Fo(e){return e.split(",").map(function(t,n){var i=(t=t.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return Er(i,u||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),g(u),n===0)})}var ai=(er.prototype._parseStoresSpec=function(e,t){h(e).forEach(function(n){if(e[n]!==null){var i=Fo(e[n]),u=i.shift();if(u.unique=!0,u.multi)throw new ie.Schema("Primary key cannot be multi-valued");i.forEach(function(c){if(c.auto)throw new ie.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new ie.Schema("Index must have a name and cannot be an empty string")}),t[n]=Cr(n,u,i)}})},er.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?x(this._cfg.storesSource,n):n;var n=t._versions,i={},u={};return n.forEach(function(c){x(i,c._cfg.storesSource),u=c._cfg.dbschema={},c._parseStoresSpec(i,u)}),t._dbSchema=u,Ir(t,[t._allTables,t,t.Transaction.prototype]),Jn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],h(u),u),t._storeNames=h(u),this},er.prototype.upgrade=function(e){return this._cfg.contentUpgrade=kt(this._cfg.contentUpgrade||Se,e),this},er);function er(){}function Mr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Bt(Un,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function jr(e){return e&&typeof e.databases=="function"}function Kr(e){return zt(function(){return $.letThrough=!0,e()})}function qr(e){return!("from"in e)}var ht=function(e,t){if(!this){var n=new ht;return e&&"d"in e&&x(n,e),n}x(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Cn(e,t,n){var i=Me(t,n);if(!isNaN(i)){if(0<i)throw RangeError();if(qr(e))return x(e,{from:t,to:n,d:1});var u=e.l,i=e.r;if(Me(n,e.from)<0)return u?Cn(u,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Bo(e);if(0<Me(t,e.to))return i?Cn(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Bo(e);Me(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),0<Me(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,u&&!e.l&&On(e,u),i&&n&&On(e,i)}}function On(e,t){qr(t)||function n(i,y){var c=y.from,d=y.to,v=y.l,y=y.r;Cn(i,c,d),v&&n(i,v),y&&n(i,y)}(e,t)}function Ro(e,t){var n=tr(t),i=n.next();if(i.done)return!1;for(var u=i.value,c=tr(e),d=c.next(u.from),v=d.value;!i.done&&!d.done;){if(Me(v.from,u.to)<=0&&0<=Me(v.to,u.from))return!0;Me(u.from,v.from)<0?u=(i=n.next(v.from)).value:v=(d=c.next(u.from)).value}return!1}function tr(e){var t=qr(e)?null:{s:0,n:e};return{next:function(n){for(var i=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,i)for(;t.n.l&&Me(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!i||Me(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Bo(e){var t,n,i=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),u=1<i?"r":i<-1?"l":"";u&&(t=u=="r"?"l":"r",n=s({},e),i=e[u],e.from=i.from,e.to=i.to,e[u]=i[u],n[u]=i[t],(e[t]=n).d=No(n)),e.d=No(e)}function No(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function nr(e,t){return h(t).forEach(function(n){e[n]?On(e[n],t[n]):e[n]=function i(u){var c,d,v={};for(c in u)M(u,c)&&(d=u[c],v[c]=!d||typeof d!="object"||Ee.has(d.constructor)?d:i(d));return v}(t[n])}),e}function Fr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Ro(t[n],e[n])})}D(ht.prototype,((Pt={add:function(e){return On(this,e),this},addKey:function(e){return Cn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Cn(t,n,n)}),this},hasKey:function(e){var t=tr(this).next(e).value;return t&&Me(t.from,e)<=0&&0<=Me(t.to,e)}})[Qe]=function(){return tr(this)},Pt));var tn={},Rr={},Br=!1;function rr(e){nr(Rr,e),Br||(Br=!0,setTimeout(function(){Br=!1,Nr(Rr,!(Rr={}))},0))}function Nr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var i=0,u=Object.values(tn);i<u.length;i++)Ho(d=u[i],e,n,t);else for(var c in e){var d,v=/^idb\:\/\/(.*)\/(.*)\//.exec(c);v&&(c=v[1],v=v[2],(d=tn["idb://".concat(c,"/").concat(v)])&&Ho(d,e,n,t))}n.forEach(function(y){return y()})}function Ho(e,t,n,i){for(var u=[],c=0,d=Object.entries(e.queries.query);c<d.length;c++){for(var v=d[c],y=v[0],_=[],E=0,p=v[1];E<p.length;E++){var O=p[E];Fr(t,O.obsSet)?O.subscribers.forEach(function(k){return n.add(k)}):i&&_.push(O)}i&&u.push([y,_])}if(i)for(var b=0,T=u;b<T.length;b++){var C=T[b],y=C[0],_=C[1];e.queries.query[y]=_}}function ii(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?tt(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var i=t.openCanceller,u=Math.round(10*e.verno),c=!1;function d(){if(t.openCanceller!==i)throw new ie.DatabaseClosed("db.open() was cancelled")}function v(){return new X(function(O,b){if(d(),!n)throw new ie.MissingAPI;var T=e.name,C=t.autoSchema||!u?n.open(T):n.open(T,u);if(!C)throw new ie.MissingAPI;C.onerror=jt(b),C.onblocked=Ge(e._fireOnBlocked),C.onupgradeneeded=Ge(function(k){var A;E=C.transaction,t.autoSchema&&!e._options.allowEmptyDB?(C.onerror=Dn,E.abort(),C.result.close(),(A=n.deleteDatabase(T)).onsuccess=A.onerror=Ge(function(){b(new ie.NoSuchDatabase("Database ".concat(T," doesnt exist")))})):(E.onerror=jt(b),k=k.oldVersion>Math.pow(2,62)?0:k.oldVersion,p=k<1,e.idbdb=C.result,c&&oi(e,E),ri(e,k/10,E,b))},b),C.onsuccess=Ge(function(){E=null;var k,A,q,F,Y,Q=e.idbdb=C.result,te=w(Q.objectStoreNames);if(0<te.length)try{var J=Q.transaction((F=te).length===1?F[0]:F,"readonly");if(t.autoSchema)A=Q,q=J,(k=e).verno=A.version/10,q=k._dbSchema=Zn(0,A,q),k._storeNames=w(A.objectStoreNames,0),Jn(k,[k._allTables],h(q),q);else if($n(e,e._dbSchema,J),((Y=Pr(Zn(0,(Y=e).idbdb,J),Y._dbSchema)).add.length||Y.change.some(function(Z){return Z.add.length||Z.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Q.close(),u=Q.version+1,c=!0,O(v());Qn(e,J)}catch{}fn.push(e),Q.onversionchange=Ge(function(Z){t.vcFired=!0,e.on("versionchange").fire(Z)}),Q.onclose=Ge(function(Z){e.on("close").fire(Z)}),p&&(Y=e._deps,J=T,Q=Y.indexedDB,Y=Y.IDBKeyRange,jr(Q)||J===Un||Mr(Q,Y).put({name:J}).catch(Se)),O()},b)}).catch(function(O){switch(O==null?void 0:O.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),v();break;case"VersionError":if(0<u)return u=0,v()}return X.reject(O)})}var y,_=t.dbReadyResolve,E=null,p=!1;return X.race([i,(typeof navigator>"u"?X.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(O){function b(){return indexedDB.databases().finally(O)}y=setInterval(b,100),b()}).finally(function(){return clearInterval(y)}):Promise.resolve()).then(v)]).then(function(){return d(),t.onReadyBeingFired=[],X.resolve(Kr(function(){return e.on.ready.fire(e.vip)})).then(function O(){if(0<t.onReadyBeingFired.length){var b=t.onReadyBeingFired.reduce(kt,Se);return t.onReadyBeingFired=[],X.resolve(Kr(function(){return b(e.vip)})).then(O)}})}).finally(function(){t.openCanceller===i&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(O){t.dbOpenError=O;try{E&&E.abort()}catch{}return i===t.openCanceller&&e._close(),tt(O)}).finally(function(){t.openComplete=!0,_()}).then(function(){var O;return p&&(O={},e.tables.forEach(function(b){b.schema.indexes.forEach(function(T){T.name&&(O["idb://".concat(e.name,"/").concat(b.name,"/").concat(T.name)]=new ht(-1/0,[[[]]]))}),O["idb://".concat(e.name,"/").concat(b.name,"/")]=O["idb://".concat(e.name,"/").concat(b.name,"/:dels")]=new ht(-1/0,[[[]]])}),Wt(Sn).fire(O),Nr(O,!0)),e})}function Hr(e){function t(c){return e.next(c)}var n=u(t),i=u(function(c){return e.throw(c)});function u(c){return function(y){var v=c(y),y=v.value;return v.done?y:y&&typeof y.then=="function"?y.then(n,i):g(y)?Promise.all(y).then(n,i):n(y)}}return u(t)()}function or(e,t,n){for(var i=g(e)?e.slice():[e],u=0;u<n;++u)i.push(t);return i}var si={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),i=n.schema,u={},c=[];function d(p,O,b){var T=En(p),C=u[T]=u[T]||[],k=p==null?0:typeof p=="string"?1:p.length,A=0<O,A=s(s({},b),{name:A?"".concat(T,"(virtual-from:").concat(b.name,")"):b.name,lowLevelIndex:b,isVirtual:A,keyTail:O,keyLength:k,extractKey:Or(p),unique:!A&&b.unique});return C.push(A),A.isPrimaryKey||c.push(A),1<k&&d(k===2?p[0]:p.slice(0,k-1),O+1,b),C.sort(function(q,F){return q.keyTail-F.keyTail}),A}t=d(i.primaryKey.keyPath,0,i.primaryKey),u[":id"]=[t];for(var v=0,y=i.indexes;v<y.length;v++){var _=y[v];d(_.keyPath,0,_)}function E(p){var O,b=p.query.index;return b.isVirtual?s(s({},p),{query:{index:b.lowLevelIndex,range:(O=p.query.range,b=b.keyTail,{type:O.type===1?2:O.type,lower:or(O.lower,O.lowerOpen?e.MAX_KEY:e.MIN_KEY,b),lowerOpen:!0,upper:or(O.upper,O.upperOpen?e.MIN_KEY:e.MAX_KEY,b),upperOpen:!0})}}):p}return s(s({},n),{schema:s(s({},i),{primaryKey:t,indexes:c,getIndexByKeyPath:function(p){return(p=u[En(p)])&&p[0]}}),count:function(p){return n.count(E(p))},query:function(p){return n.query(E(p))},openCursor:function(p){var O=p.query.index,b=O.keyTail,T=O.isVirtual,C=O.keyLength;return T?n.openCursor(E(p)).then(function(A){return A&&k(A)}):n.openCursor(p);function k(A){return Object.create(A,{continue:{value:function(q){q!=null?A.continue(or(q,p.reverse?e.MAX_KEY:e.MIN_KEY,b)):p.unique?A.continue(A.key.slice(0,C).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,b)):A.continue()}},continuePrimaryKey:{value:function(q,F){A.continuePrimaryKey(or(q,e.MAX_KEY,b),F)}},primaryKey:{get:function(){return A.primaryKey}},key:{get:function(){var q=A.key;return C===1?q[0]:q.slice(0,C)}},value:{get:function(){return A.value}}})}}})}})}};function Lr(e,t,n,i){return n=n||{},i=i||"",h(e).forEach(function(u){var c,d,v;M(t,u)?(c=e[u],d=t[u],typeof c=="object"&&typeof d=="object"&&c&&d?(v=Ke(c))!==Ke(d)?n[i+u]=t[u]:v==="Object"?Lr(c,d,n,i+u+"."):c!==d&&(n[i+u]=t[u]):c!==d&&(n[i+u]=t[u])):n[i+u]=void 0}),h(t).forEach(function(u){M(e,u)||(n[i+u]=t[u])}),n}function zr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ui={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),i=n.schema.primaryKey;return s(s({},n),{mutate:function(u){var c=$.trans,d=c.table(t).hook,v=d.deleting,y=d.creating,_=d.updating;switch(u.type){case"add":if(y.fire===Se)break;return c._promise("readwrite",function(){return E(u)},!0);case"put":if(y.fire===Se&&_.fire===Se)break;return c._promise("readwrite",function(){return E(u)},!0);case"delete":if(v.fire===Se)break;return c._promise("readwrite",function(){return E(u)},!0);case"deleteRange":if(v.fire===Se)break;return c._promise("readwrite",function(){return function p(O,b,T){return n.query({trans:O,values:!1,query:{index:i,range:b},limit:T}).then(function(C){var k=C.result;return E({type:"delete",keys:k,trans:O}).then(function(A){return 0<A.numFailures?Promise.reject(A.failures[0]):k.length<T?{failures:[],numFailures:0,lastResult:void 0}:p(O,s(s({},b),{lower:k[k.length-1],lowerOpen:!0}),T)})})}(u.trans,u.range,1e4)},!0)}return n.mutate(u);function E(p){var O,b,T,C=$.trans,k=p.keys||zr(i,p);if(!k)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?s(s({},p),{keys:k}):s({},p)).type!=="delete"&&(p.values=l([],p.values)),p.keys&&(p.keys=l([],p.keys)),O=n,T=k,((b=p).type==="add"?Promise.resolve([]):O.getMany({trans:b.trans,keys:T,cache:"immutable"})).then(function(A){var q=k.map(function(F,Y){var Q,te,J,Z=A[Y],re={onerror:null,onsuccess:null};return p.type==="delete"?v.fire.call(re,F,Z,C):p.type==="add"||Z===void 0?(Q=y.fire.call(re,F,p.values[Y],C),F==null&&Q!=null&&(p.keys[Y]=F=Q,i.outbound||U(p.values[Y],i.keyPath,F))):(Q=Lr(Z,p.values[Y]),(te=_.fire.call(re,Q,F,Z,C))&&(J=p.values[Y],Object.keys(te).forEach(function(ee){M(J,ee)?J[ee]=te[ee]:U(J,ee,te[ee])}))),re});return n.mutate(p).then(function(F){for(var Y=F.failures,Q=F.results,te=F.numFailures,F=F.lastResult,J=0;J<k.length;++J){var Z=(Q||k)[J],re=q[J];Z==null?re.onerror&&re.onerror(Y[J]):re.onsuccess&&re.onsuccess(p.type==="put"&&A[J]?p.values[J]:Z)}return{failures:Y,results:Q,numFailures:te,lastResult:F}}).catch(function(F){return q.forEach(function(Y){return Y.onerror&&Y.onerror(F)}),Promise.reject(F)})})}}})}})}};function Lo(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var i=[],u=0,c=0;u<t.keys.length&&c<e.length;++u)Me(t.keys[u],e[c])===0&&(i.push(n?be(t.values[u]):t.values[u]),++c);return i.length===e.length?i:null}catch{return null}}var li={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return s(s({},n),{getMany:function(i){if(!i.cache)return n.getMany(i);var u=Lo(i.keys,i.trans._cache,i.cache==="clone");return u?X.resolve(u):n.getMany(i).then(function(c){return i.trans._cache={keys:i.keys,values:i.cache==="clone"?be(c):c},c})},mutate:function(i){return i.type!=="add"&&(i.trans._cache=null),n.mutate(i)}})}}}};function zo(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Uo(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ci={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new ht(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(i,u,c){if($.subscr&&u!=="readonly")throw new ie.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat($.querier));return e.transaction(i,u,c)},table:function(i){var u=e.table(i),c=u.schema,d=c.primaryKey,p=c.indexes,v=d.extractKey,y=d.outbound,_=d.autoIncrement&&p.filter(function(b){return b.compound&&b.keyPath.includes(d.keyPath)}),E=s(s({},u),{mutate:function(b){function T(ee){return ee="idb://".concat(t,"/").concat(i,"/").concat(ee),F[ee]||(F[ee]=new ht)}var C,k,A,q=b.trans,F=b.mutatedParts||(b.mutatedParts={}),Y=T(""),Q=T(":dels"),te=b.type,re=b.type==="deleteRange"?[b.range]:b.type==="delete"?[b.keys]:b.values.length<50?[zr(d,b).filter(function(ee){return ee}),b.values]:[],J=re[0],Z=re[1],re=b.trans._cache;return g(J)?(Y.addKeys(J),(re=te==="delete"||J.length===Z.length?Lo(J,re):null)||Q.addKeys(J),(re||Z)&&(C=T,k=re,A=Z,c.indexes.forEach(function(ee){var se=C(ee.name||"");function xe(Oe){return Oe!=null?ee.extractKey(Oe):null}function Ce(Oe){return ee.multiEntry&&g(Oe)?Oe.forEach(function(Ct){return se.addKey(Ct)}):se.addKey(Oe)}(k||A).forEach(function(Oe,vt){var we=k&&xe(k[vt]),vt=A&&xe(A[vt]);Me(we,vt)!==0&&(we!=null&&Ce(we),vt!=null&&Ce(vt))})}))):J?(Z={from:(Z=J.lower)!==null&&Z!==void 0?Z:e.MIN_KEY,to:(Z=J.upper)!==null&&Z!==void 0?Z:e.MAX_KEY},Q.add(Z),Y.add(Z)):(Y.add(n),Q.add(n),c.indexes.forEach(function(ee){return T(ee.name).add(n)})),u.mutate(b).then(function(ee){return!J||b.type!=="add"&&b.type!=="put"||(Y.addKeys(ee.results),_&&_.forEach(function(se){for(var xe=b.values.map(function(we){return se.extractKey(we)}),Ce=se.keyPath.findIndex(function(we){return we===d.keyPath}),Oe=0,Ct=ee.results.length;Oe<Ct;++Oe)xe[Oe][Ce]=ee.results[Oe];T(se.name).addKeys(xe)})),q.mutatedParts=nr(q.mutatedParts||{},F),ee})}}),p=function(T){var C=T.query,T=C.index,C=C.range;return[T,new ht((T=C.lower)!==null&&T!==void 0?T:e.MIN_KEY,(C=C.upper)!==null&&C!==void 0?C:e.MAX_KEY)]},O={get:function(b){return[d,new ht(b.key)]},getMany:function(b){return[d,new ht().addKeys(b.keys)]},count:p,query:p,openCursor:p};return h(O).forEach(function(b){E[b]=function(T){var C=$.subscr,k=!!C,A=zo($,u)&&Uo(b,T)?T.obsSet={}:C;if(k){var q=function(Z){return Z="idb://".concat(t,"/").concat(i,"/").concat(Z),A[Z]||(A[Z]=new ht)},F=q(""),Y=q(":dels"),C=O[b](T),k=C[0],C=C[1];if((b==="query"&&k.isPrimaryKey&&!T.values?Y:q(k.name||"")).add(C),!k.isPrimaryKey){if(b!=="count"){var Q=b==="query"&&y&&T.values&&u.query(s(s({},T),{values:!1}));return u[b].apply(this,arguments).then(function(Z){if(b==="query"){if(y&&T.values)return Q.then(function(xe){return xe=xe.result,F.addKeys(xe),Z});var re=T.values?Z.result.map(v):Z.result;(T.values?F:Y).addKeys(re)}else if(b==="openCursor"){var ee=Z,se=T.values;return ee&&Object.create(ee,{key:{get:function(){return Y.addKey(ee.primaryKey),ee.key}},primaryKey:{get:function(){var xe=ee.primaryKey;return Y.addKey(xe),xe}},value:{get:function(){return se&&F.addKey(ee.primaryKey),ee.value}}})}return Z})}Y.add(n)}}return u[b].apply(this,arguments)}}),E}})}};function Yo(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var i=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===i?null:(t=s({},t),g(t.keys)&&(t.keys=t.keys.filter(function(u,c){return!(c in n.failures)})),"values"in t&&g(t.values)&&(t.values=t.values.filter(function(u,c){return!(c in n.failures)})),t)}function Ur(e,t){return n=e,((i=t).lower===void 0||(i.lowerOpen?0<Me(n,i.lower):0<=Me(n,i.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?Me(e,t.upper)<0:Me(e,t.upper)<=0));var n,i}function Vo(e,t,O,i,u,c){if(!O||O.length===0)return e;var d=t.query.index,v=d.multiEntry,y=t.query.range,_=i.schema.primaryKey.extractKey,E=d.extractKey,p=(d.lowLevelIndex||d).extractKey,O=O.reduce(function(b,T){var C=b,k=[];if(T.type==="add"||T.type==="put")for(var A=new ht,q=T.values.length-1;0<=q;--q){var F,Y=T.values[q],Q=_(Y);A.hasKey(Q)||(F=E(Y),(v&&g(F)?F.some(function(ee){return Ur(ee,y)}):Ur(F,y))&&(A.addKey(Q),k.push(Y)))}switch(T.type){case"add":var te=new ht().addKeys(t.values?b.map(function(se){return _(se)}):b),C=b.concat(t.values?k.filter(function(se){return se=_(se),!te.hasKey(se)&&(te.addKey(se),!0)}):k.map(function(se){return _(se)}).filter(function(se){return!te.hasKey(se)&&(te.addKey(se),!0)}));break;case"put":var J=new ht().addKeys(T.values.map(function(se){return _(se)}));C=b.filter(function(se){return!J.hasKey(t.values?_(se):se)}).concat(t.values?k:k.map(function(se){return _(se)}));break;case"delete":var Z=new ht().addKeys(T.keys);C=b.filter(function(se){return!Z.hasKey(t.values?_(se):se)});break;case"deleteRange":var re=T.range;C=b.filter(function(se){return!Ur(_(se),re)})}return C},e);return O===e?e:(O.sort(function(b,T){return Me(p(b),p(T))||Me(_(b),_(T))}),t.limit&&t.limit<1/0&&(O.length>t.limit?O.length=t.limit:e.length===t.limit&&O.length<t.limit&&(u.dirty=!0)),c?Object.freeze(O):O)}function Wo(e,t){return Me(e.lower,t.lower)===0&&Me(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function fi(e,t){return function(n,i,u,c){if(n===void 0)return i!==void 0?-1:0;if(i===void 0)return 1;if((i=Me(n,i))===0){if(u&&c)return 0;if(u)return 1;if(c)return-1}return i}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,i,u,c){if(n===void 0)return i!==void 0?1:0;if(i===void 0)return-1;if((i=Me(n,i))===0){if(u&&c)return 0;if(u)return-1;if(c)return 1}return i}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function di(e,t,n,i){e.subscribers.add(n),i.addEventListener("abort",function(){var u,c;e.subscribers.delete(n),e.subscribers.size===0&&(u=e,c=t,setTimeout(function(){u.subscribers.size===0&&He(c,u)},3e3))})}var hi={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(n,i,u){var c,d,v=e.transaction(n,i,u);return i==="readwrite"&&(d=(c=new AbortController).signal,u=function(y){return function(){if(c.abort(),i==="readwrite"){for(var _=new Set,E=0,p=n;E<p.length;E++){var O=p[E],b=tn["idb://".concat(t,"/").concat(O)];if(b){var T=e.table(O),C=b.optimisticOps.filter(function(se){return se.trans===v});if(v._explicit&&y&&v.mutatedParts)for(var k=0,A=Object.values(b.queries.query);k<A.length;k++)for(var q=0,F=(te=A[k]).slice();q<F.length;q++)Fr((J=F[q]).obsSet,v.mutatedParts)&&(He(te,J),J.subscribers.forEach(function(se){return _.add(se)}));else if(0<C.length){b.optimisticOps=b.optimisticOps.filter(function(se){return se.trans!==v});for(var Y=0,Q=Object.values(b.queries.query);Y<Q.length;Y++)for(var te,J,Z,re=0,ee=(te=Q[Y]).slice();re<ee.length;re++)(J=ee[re]).res!=null&&v.mutatedParts&&(y&&!J.dirty?(Z=Object.isFrozen(J.res),Z=Vo(J.res,J.req,C,T,J,Z),J.dirty?(He(te,J),J.subscribers.forEach(function(se){return _.add(se)})):Z!==J.res&&(J.res=Z,J.promise=X.resolve({result:Z}))):(J.dirty&&He(te,J),J.subscribers.forEach(function(se){return _.add(se)})))}}}_.forEach(function(se){return se()})}}},v.addEventListener("abort",u(!1),{signal:d}),v.addEventListener("error",u(!1),{signal:d}),v.addEventListener("complete",u(!0),{signal:d})),v},table:function(n){var i=e.table(n),u=i.schema.primaryKey;return s(s({},i),{mutate:function(c){var d=$.trans;if(u.outbound||d.db._options.cache==="disabled"||d.explicit||d.idbtrans.mode!=="readwrite")return i.mutate(c);var v=tn["idb://".concat(t,"/").concat(n)];return v?(d=i.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||zr(u,c).some(function(y){return y==null}))?(v.optimisticOps.push(c),c.mutatedParts&&rr(c.mutatedParts),d.then(function(y){0<y.numFailures&&(He(v.optimisticOps,c),(y=Yo(0,c,y))&&v.optimisticOps.push(y),c.mutatedParts&&rr(c.mutatedParts))}),d.catch(function(){He(v.optimisticOps,c),c.mutatedParts&&rr(c.mutatedParts)})):d.then(function(y){var _=Yo(0,s(s({},c),{values:c.values.map(function(E,p){var O;return y.failures[p]?E:(E=(O=u.keyPath)!==null&&O!==void 0&&O.includes(".")?be(E):s({},E),U(E,u.keyPath,y.results[p]),E)})}),y);v.optimisticOps.push(_),queueMicrotask(function(){return c.mutatedParts&&rr(c.mutatedParts)})}),d):i.mutate(c)},query:function(c){if(!zo($,i)||!Uo("query",c))return i.query(c);var d=((_=$.trans)===null||_===void 0?void 0:_.db._options.cache)==="immutable",p=$,v=p.requery,y=p.signal,_=function(T,C,k,A){var q=tn["idb://".concat(T,"/").concat(C)];if(!q)return[];if(!(C=q.queries[k]))return[null,!1,q,null];var F=C[(A.query?A.query.index.name:null)||""];if(!F)return[null,!1,q,null];switch(k){case"query":var Y=F.find(function(Q){return Q.req.limit===A.limit&&Q.req.values===A.values&&Wo(Q.req.query.range,A.query.range)});return Y?[Y,!0,q,F]:[F.find(function(Q){return("limit"in Q.req?Q.req.limit:1/0)>=A.limit&&(!A.values||Q.req.values)&&fi(Q.req.query.range,A.query.range)}),!1,q,F];case"count":return Y=F.find(function(Q){return Wo(Q.req.query.range,A.query.range)}),[Y,!!Y,q,F]}}(t,n,"query",c),E=_[0],p=_[1],O=_[2],b=_[3];return E&&p?E.obsSet=c.obsSet:(p=i.query(c).then(function(T){var C=T.result;if(E&&(E.res=C),d){for(var k=0,A=C.length;k<A;++k)Object.freeze(C[k]);Object.freeze(C)}else T.result=be(C);return T}).catch(function(T){return b&&E&&He(b,E),Promise.reject(T)}),E={obsSet:c.obsSet,promise:p,subscribers:new Set,type:"query",req:c,dirty:!1},b?b.push(E):(b=[E],(O=O||(tn["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=b)),di(E,b,v,y),E.promise.then(function(T){return{result:Vo(T.result,c,O==null?void 0:O.optimisticOps,i,E,d)}})}})}})}};function ar(e,t){return new Proxy(e,{get:function(n,i,u){return i==="db"?t:Reflect.get(n,i,u)}})}var Bt=(nt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ie.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ie.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(i){return i._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(ni),n.stores({}),this._state.autoSchema=!1,n)},nt.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||$.letThrough||this._vip)?e():new X(function(n,i){if(t._state.openComplete)return i(new ie.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void i(new ie.DatabaseClosed);t.open().catch(Se)}t._state.dbReadyPromise.then(n,i)}).then(e)},nt.prototype.use=function(e){var t=e.stack,n=e.create,i=e.level,u=e.name;return u&&this.unuse({stack:t,name:u}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:i??10,name:u}),e.sort(function(c,d){return c.level-d.level}),this},nt.prototype.unuse=function(e){var t=e.stack,n=e.name,i=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(u){return i?u.create!==i:!!n&&u.name!==n})),this},nt.prototype.open=function(){var e=this;return Zt(De,function(){return ii(e)})},nt.prototype._close=function(){var e=this._state,t=fn.indexOf(this);if(0<=t&&fn.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new X(function(n){e.dbReadyResolve=n}),e.openCanceller=new X(function(n,i){e.cancelOpen=i}))},nt.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new ie.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new ie.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},nt.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",i=this._state;return new X(function(u,c){function d(){t.close(e);var v=t._deps.indexedDB.deleteDatabase(t.name);v.onsuccess=Ge(function(){var y,_,E;y=t._deps,_=t.name,E=y.indexedDB,y=y.IDBKeyRange,jr(E)||_===Un||Mr(E,y).delete(_).catch(Se),u()}),v.onerror=jt(c),v.onblocked=t._fireOnBlocked}if(n)throw new ie.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(d):d()})},nt.prototype.backendDB=function(){return this.idbdb},nt.prototype.isOpen=function(){return this.idbdb!==null},nt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},nt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},nt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nt.prototype,"tables",{get:function(){var e=this;return h(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),nt.prototype.transaction=function(){var e=(function(t,n,i){var u=arguments.length;if(u<2)throw new ie.InvalidArgument("Too few arguments");for(var c=new Array(u-1);--u;)c[u-1]=arguments[u];return i=c.pop(),[t,le(c),i]}).apply(this,arguments);return this._transaction.apply(this,e)},nt.prototype._transaction=function(e,t,n){var i=this,u=$.trans;u&&u.db===this&&e.indexOf("!")===-1||(u=null);var c,d,v=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(d=t.map(function(_){if(_=_ instanceof i.Table?_.name:_,typeof _!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return _}),e=="r"||e===wr)c=wr;else{if(e!="rw"&&e!=kr)throw new ie.InvalidArgument("Invalid transaction mode: "+e);c=kr}if(u){if(u.mode===wr&&c===kr){if(!v)throw new ie.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&d.forEach(function(_){if(u&&u.storeNames.indexOf(_)===-1){if(!v)throw new ie.SubTransaction("Table "+_+" not included in parent transaction.");u=null}}),v&&u&&!u.active&&(u=null)}}catch(_){return u?u._promise(null,function(E,p){p(_)}):tt(_)}var y=(function _(E,p,O,b,T){return X.resolve().then(function(){var C=$.transless||$,k=E._createTransaction(p,O,E._dbSchema,b);if(k.explicit=!0,C={trans:k,transless:C},b)k.idbtrans=b.idbtrans;else try{k.create(),k.idbtrans._explicit=!0,E._state.PR1398_maxLoop=3}catch(F){return F.name===Pe.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return _(E,p,O,null,T)})):tt(F)}var A,q=oe(T);return q&&cn(),C=X.follow(function(){var F;(A=T.call(k,k))&&(q?(F=Ut.bind(null,null),A.then(F,F)):typeof A.next=="function"&&typeof A.throw=="function"&&(A=Hr(A)))},C),(A&&typeof A.then=="function"?X.resolve(A).then(function(F){return k.active?F:tt(new ie.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):C.then(function(){return A})).then(function(F){return b&&k._resolve(),k._completion.then(function(){return F})}).catch(function(F){return k._reject(F),tt(F)})})}).bind(null,this,c,d,u,n);return u?u._promise(c,y,"lock"):$.trans?Zt($.transless,function(){return i._whenReady(y)}):this._whenReady(y)},nt.prototype.table=function(e){if(!M(this._allTables,e))throw new ie.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},nt);function nt(e,t){var n=this;this._middlewares={},this.verno=0;var i=nt.dependencies;this._options=t=s({addons:nt.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},i=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u,c,d,v,y,_={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};_.dbReadyPromise=new X(function(p){_.dbReadyResolve=p}),_.openCanceller=new X(function(p,O){_.cancelOpen=O}),this._state=_,this.name=e,this.on=wn(this,"populate","blocked","versionchange","close",{ready:[kt,Se]}),this.on.ready.subscribe=P(this.on.ready.subscribe,function(p){return function(O,b){nt.vip(function(){var T,C=n._state;C.openComplete?(C.dbOpenError||X.resolve().then(O),b&&p(O)):C.onReadyBeingFired?(C.onReadyBeingFired.push(O),b&&p(O)):(p(O),T=n,b||p(function k(){T.on.ready.unsubscribe(O),T.on.ready.unsubscribe(k)}))})}}),this.Collection=(u=this,kn(Qa.prototype,function(A,k){this.db=u;var b=Do,T=null;if(k)try{b=k()}catch(q){T=q}var C=A._ctx,k=C.table,A=k.hook.reading.fire;this._ctx={table:k,index:C.index,isPrimKey:!C.index||k.schema.primKey.keyPath&&C.index===k.schema.primKey.name,range:b,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:T,or:C.or,valueMapper:A!==mt?A:null}})),this.Table=(c=this,kn(Co.prototype,function(p,O,b){this.db=c,this._tx=b,this.name=p,this.schema=O,this.hook=c._allTables[p]?c._allTables[p].hook:wn(null,{creating:[Ot,Se],reading:[yt,mt],updating:[dt,Se],deleting:[bt,Se]})})),this.Transaction=(d=this,kn(Za.prototype,function(p,O,b,T,C){var k=this;this.db=d,this.mode=p,this.storeNames=O,this.schema=b,this.chromeTransactionDurability=T,this.idbtrans=null,this.on=wn(this,"complete","error","abort"),this.parent=C||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new X(function(A,q){k._resolve=A,k._reject=q}),this._completion.then(function(){k.active=!1,k.on.complete.fire()},function(A){var q=k.active;return k.active=!1,k.on.error.fire(A),k.parent?k.parent._reject(A):q&&k.idbtrans&&k.idbtrans.abort(),tt(A)})})),this.Version=(v=this,kn(ai.prototype,function(p){this.db=v,this._cfg={version:p,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(y=this,kn(Mo.prototype,function(p,O,b){if(this.db=y,this._ctx={table:p,index:O===":id"?null:O,or:b},this._cmp=this._ascending=Me,this._descending=function(T,C){return Me(C,T)},this._max=function(T,C){return 0<Me(T,C)?T:C},this._min=function(T,C){return Me(T,C)<0?T:C},this._IDBKeyRange=y._deps.IDBKeyRange,!this._IDBKeyRange)throw new ie.MissingAPI})),this.on("versionchange",function(p){0<p.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=Tn(t.IDBKeyRange),this._createTransaction=function(p,O,b,T){return new n.Transaction(p,O,b,n._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(p){n.on("blocked").fire(p),fn.filter(function(O){return O.name===n.name&&O!==n&&!O._state.vcFired}).map(function(O){return O.on("versionchange").fire(p)})},this.use(li),this.use(hi),this.use(ci),this.use(si),this.use(ui);var E=new Proxy(this,{get:function(p,O,b){if(O==="_vip")return!0;if(O==="table")return function(C){return ar(n.table(C),E)};var T=Reflect.get(p,O,b);return T instanceof Co?ar(T,E):O==="tables"?T.map(function(C){return ar(C,E)}):O==="_createTransaction"?function(){return ar(T.apply(this,arguments),E)}:T}});this.vip=E,i.forEach(function(p){return p(n)})}var ir,Pt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",vi=(Yr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Yr.prototype[Pt]=function(){return this},Yr);function Yr(e){this._subscribe=e}try{ir={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch{ir={indexedDB:null,IDBKeyRange:null}}function Go(e){var t,n=!1,i=new vi(function(u){var c=oe(e),d,v=!1,y={},_={},E={get closed(){return v},unsubscribe:function(){v||(v=!0,d&&d.abort(),p&&Wt.storagemutated.unsubscribe(b))}};u.start&&u.start(E);var p=!1,O=function(){return _r(T)},b=function(C){nr(y,C),Fr(_,y)&&O()},T=function(){var C,k,A;!v&&ir.indexedDB&&(y={},C={},d&&d.abort(),d=new AbortController,A=function(q){var F=Lt();try{c&&cn();var Y=zt(e,q);return Y=c?Y.finally(Ut):Y}finally{F&&ln()}}(k={subscr:C,signal:d.signal,requery:O,querier:e,trans:null}),Promise.resolve(A).then(function(q){n=!0,t=q,v||k.signal.aborted||(y={},function(F){for(var Y in F)if(M(F,Y))return;return 1}(_=C)||p||(Wt(Sn,b),p=!0),_r(function(){return!v&&u.next&&u.next(q)}))},function(q){n=!1,["DatabaseClosedError","AbortError"].includes(q==null?void 0:q.name)||v||_r(function(){v||u.error&&u.error(q)})}))};return setTimeout(O,0),E});return i.hasValue=function(){return n},i.getValue=function(){return t},i}var nn=Bt;function Vr(e){var t=Gt;try{Gt=!0,Wt.storagemutated.fire(e),Nr(e,!0)}finally{Gt=t}}D(nn,s(s({},it),{delete:function(e){return new nn(e,{addons:[]}).delete()},exists:function(e){return new nn(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=nn.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(jr(n)?Promise.resolve(n.databases()).then(function(i){return i.map(function(u){return u.name}).filter(function(u){return u!==Un})}):Mr(n,t).toCollection().primaryKeys()).then(e)}catch{return tt(new ie.MissingAPI)}var t,n},defineClass:function(){return function(e){x(this,e)}},ignoreTransaction:function(e){return $.trans?Zt($.transless,e):e()},vip:Kr,async:function(e){return function(){try{var t=Hr(e.apply(this,arguments));return t&&typeof t.then=="function"?t:X.resolve(t)}catch(n){return tt(n)}}},spawn:function(e,t,n){try{var i=Hr(e.apply(n,t||[]));return i&&typeof i.then=="function"?i:X.resolve(i)}catch(u){return tt(u)}},currentTransaction:{get:function(){return $.trans||null}},waitFor:function(e,t){return t=X.resolve(typeof e=="function"?nn.ignoreTransaction(e):e).timeout(t||6e4),$.trans?$.trans.waitFor(t):t},Promise:X,debug:{get:function(){return Le},set:function(e){qt(e)}},derive:N,extend:x,props:D,override:P,Events:wn,on:Wt,liveQuery:Go,extendObservabilitySet:nr,getByKeyPath:W,setByKeyPath:U,delByKeyPath:function(e,t){typeof t=="string"?U(e,t,void 0):"length"in t&&[].map.call(t,function(n){U(e,n,void 0)})},shallowClone:ue,deepClone:be,getObjectDiff:Lr,cmp:Me,asap:B,minKey:-1/0,addons:[],connections:fn,errnames:Pe,dependencies:ir,cache:tn,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),nn.maxKey=Tn(nn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Wt(Sn,function(e){Gt||(e=new CustomEvent(Tr,{detail:e}),Gt=!0,dispatchEvent(e),Gt=!1)}),addEventListener(Tr,function(e){e=e.detail,Gt||Vr(e)}));var vn,Gt=!1,Qo=function(){};return typeof BroadcastChannel<"u"&&((Qo=function(){(vn=new BroadcastChannel(Tr)).onmessage=function(e){return e.data&&Vr(e.data)}})(),typeof vn.unref=="function"&&vn.unref(),Wt(Sn,function(e){Gt||vn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Bt.disableBfCache&&e.persisted){Le&&console.debug("Dexie: handling persisted pagehide"),vn!=null&&vn.close();for(var t=0,n=fn;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Bt.disableBfCache&&e.persisted&&(Le&&console.debug("Dexie: handling persisted pageshow"),Qo(),Vr({all:new ht(-1/0,[[]])}))})),X.rejectionMapper=function(e,t){return!e||e instanceof fe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!at[e.name]?e:(t=new at[e.name](t||e.message,e),"stack"in e&&z(t,"stack",{get:function(){return this.inner.stack}}),t)},qt(Le),s(Bt,Object.freeze({__proto__:null,Dexie:Bt,liveQuery:Go,Entity:So,cmp:Me,PropModification:xn,replacePrefix:function(e,t){return new xn({replacePrefix:[e,t]})},add:function(e){return new xn({add:e})},remove:function(e){return new xn({remove:e})},default:Bt,RangeSet:ht,mergeRanges:On,rangesOverlap:Ro}),{default:Bt}),Bt})}(cr)),cr.exports}var hs=ds();const io=Ma(hs),sa=Symbol.for("Dexie"),vr=globalThis[sa]||(globalThis[sa]=io);if(io.semVer!==vr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${io.semVer} and ${vr.semVer}`);const{liveQuery:Sc,mergeRanges:Tc,rangesOverlap:Ec,RangeSet:Cc,cmp:Oc,Entity:Ic,PropModification:Pc,replacePrefix:Ac,add:Mc,remove:jc}=vr;class vs{constructor(){this._db=new vr("FastingHours"),this._db.version(20).stores({history:"id, started",hunger:"id, created",water:"id, created"})}browseHistory(){return this._db.history.toArray()}browseHistoryByEnd(){return this._db.history.toArray().then(r=>r.filter(s=>s.ended===null)[0])}readHistory(r){return this._db.history.get({id:r})}editHistory(r){const a=Xr(r);return a.updated=new Date,this._db.history.put(a).then(()=>this._db.history.get({id:r.id}))}addHistory(){const r={id:crypto.randomUUID(),type:"history",created:new Date,updated:new Date,started:new Date,ended:null,notes:null};return this._db.history.add(r).then(()=>this._db.history.get({id:r.id}))}deleteHistory(r){return this._db.history.delete(r)}browseHunger(r=!1){return this._db.hunger.toArray().then(a=>r?(a.sort((s,l)=>s.created.getTime()<l.created.getTime()?1:s.created.getTime()>l.created.getTime()?-1:0),a.length===0?null:a[0]):a)}readHunger(r){return this._db.hunger.get({id:r})}editHunger(r){const a=Xr(r);return a.updated=new Date,this._db.hunger.put(a).then(()=>this._db.hunger.get({id:r.id}))}addHunger(r=5){const a={id:crypto.randomUUID(),type:"hunger",created:new Date,updated:new Date,level:r};return this._db.hunger.add(a).then(()=>this._db.hunger.get({id:a.id}))}deleteHunger(r){return this._db.hunger.delete(r)}browseWater(r=!1){return this._db.water.toArray().then(a=>{if(r){const s=new Date;s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);const l=new Date(s.getTime());return l.setDate(l.getDate()+1),a.filter(f=>f.created.getTime()>s.getTime()&&f.created.getTime()<l.getTime())}else return a})}readWater(r){return this._db.water.get({id:r})}editWater(r){const a=Xr(r);return a.updated=new Date,this._db.water.put(a).then(()=>this._db.water.get({id:r.id}))}addWater(r){const a={id:crypto.randomUUID(),type:"water",created:new Date,updated:new Date,volume:r};return crypto.randomUUID(),this._db.water.add(a).then(()=>this._db.water.get({id:a.id}))}deleteWater(r){return this._db.water.delete(r)}}var eo={exports:{}},ua;function ps(){return ua||(ua=1,function(o,r){(function(){var a=Math.PI,s=Math.sin,l=Math.cos,f=Math.tan,h=Math.asin,g=Math.atan2,x=Math.acos,I=a/180,j=1e3*60*60*24,M=2440588,D=2451545;function H(oe){return oe.valueOf()/j-.5+M}function z(oe){return new Date((oe+.5-M)*j)}function N(oe){return H(oe)-D}var V=I*23.4397;function K(oe,ce){return g(s(oe)*l(V)-f(ce)*s(V),l(oe))}function w(oe,ce){return h(s(ce)*l(V)+l(ce)*s(V)*s(oe))}function P(oe,ce,fe){return g(s(oe),l(oe)*s(ce)-f(fe)*l(ce))}function S(oe,ce,fe){return h(s(ce)*s(fe)+l(ce)*l(fe)*l(oe))}function B(oe,ce){return I*(280.16+360.9856235*oe)-ce}function W(oe){return oe<0&&(oe=0),2967e-7/Math.tan(oe+.00312536/(oe+.08901179))}function U(oe){return I*(357.5291+.98560028*oe)}function ue(oe){var ce=I*(1.9148*s(oe)+.02*s(2*oe)+3e-4*s(3*oe)),fe=I*102.9372;return oe+ce+fe+a}function ve(oe){var ce=U(oe),fe=ue(ce);return{dec:w(fe,0),ra:K(fe,0)}}var le={};le.getPosition=function(oe,ce,fe){var qe=I*-fe,Te=I*ce,Fe=N(oe),Pe=ve(Fe),Ye=B(Fe,qe)-Pe.ra;return{azimuth:P(Ye,Te,Pe.dec),altitude:S(Ye,Te,Pe.dec)}};var Ee=le.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];le.addTime=function(oe,ce,fe){Ee.push([oe,ce,fe])};var ye=9e-4;function be(oe,ce){return Math.round(oe-ye-ce/(2*a))}function Ne(oe,ce,fe){return ye+(oe+ce)/(2*a)+fe}function Ke(oe,ce,fe){return D+oe+.0053*s(ce)-.0069*s(2*fe)}function Qe(oe,ce,fe){return x((s(oe)-s(ce)*s(fe))/(l(ce)*l(fe)))}function ot(oe){return-2.076*Math.sqrt(oe)/60}function He(oe,ce,fe,qe,Te,Fe,Pe){var Ye=Qe(oe,fe,qe),ie=Ne(Ye,ce,Te);return Ke(ie,Fe,Pe)}le.getTimes=function(oe,ce,fe,qe){qe=qe||0;var Te=I*-fe,Fe=I*ce,Pe=ot(qe),Ye=N(oe),ie=be(Ye,Te),at=Ne(0,Te,ie),it=U(at),Se=ue(it),mt=w(Se,0),yt=Ke(at,it,Se),et,Ot,bt,dt,St,kt,Le={solarNoon:z(yt),nadir:z(yt-.5)};for(et=0,Ot=Ee.length;et<Ot;et+=1)bt=Ee[et],dt=(bt[0]+Pe)*I,St=He(dt,Te,Fe,mt,ie,it,Se),kt=yt-(St-yt),Le[bt[1]]=z(kt),Le[bt[2]]=z(St);return Le};function ut(oe){var ce=I*(218.316+13.176396*oe),fe=I*(134.963+13.064993*oe),qe=I*(93.272+13.22935*oe),Te=ce+I*6.289*s(fe),Fe=I*5.128*s(qe),Pe=385001-20905*l(fe);return{ra:K(Te,Fe),dec:w(Te,Fe),dist:Pe}}le.getMoonPosition=function(oe,ce,fe){var qe=I*-fe,Te=I*ce,Fe=N(oe),Pe=ut(Fe),Ye=B(Fe,qe)-Pe.ra,ie=S(Ye,Te,Pe.dec),at=g(s(Ye),f(Te)*l(Pe.dec)-s(Pe.dec)*l(Ye));return ie=ie+W(ie),{azimuth:P(Ye,Te,Pe.dec),altitude:ie,distance:Pe.dist,parallacticAngle:at}},le.getMoonIllumination=function(oe){var ce=N(oe||new Date),fe=ve(ce),qe=ut(ce),Te=149598e3,Fe=x(s(fe.dec)*s(qe.dec)+l(fe.dec)*l(qe.dec)*l(fe.ra-qe.ra)),Pe=g(Te*s(Fe),qe.dist-Te*l(Fe)),Ye=g(l(fe.dec)*s(fe.ra-qe.ra),s(fe.dec)*l(qe.dec)-l(fe.dec)*s(qe.dec)*l(fe.ra-qe.ra));return{fraction:(1+l(Pe))/2,phase:.5+.5*Pe*(Ye<0?-1:1)/Math.PI,angle:Ye}};function Ue(oe,ce){return new Date(oe.valueOf()+ce*j/24)}le.getMoonTimes=function(oe,ce,fe,qe){var Te=new Date(oe);qe?Te.setUTCHours(0,0,0,0):Te.setHours(0,0,0,0);for(var Fe=.133*I,Pe=le.getMoonPosition(Te,ce,fe).altitude-Fe,Ye,ie,at,it,Se,mt,yt,et,Ot,bt,dt,St,kt,Le=1;Le<=24&&(Ye=le.getMoonPosition(Ue(Te,Le),ce,fe).altitude-Fe,ie=le.getMoonPosition(Ue(Te,Le+1),ce,fe).altitude-Fe,Se=(Pe+ie)/2-Ye,mt=(ie-Pe)/2,yt=-mt/(2*Se),et=(Se*yt+mt)*yt+Ye,Ot=mt*mt-4*Se*Ye,bt=0,Ot>=0&&(kt=Math.sqrt(Ot)/(Math.abs(Se)*2),dt=yt-kt,St=yt+kt,Math.abs(dt)<=1&&bt++,Math.abs(St)<=1&&bt++,dt<-1&&(dt=St)),bt===1?Pe<0?at=Le+dt:it=Le+dt:bt===2&&(at=Le+(et<0?St:dt),it=Le+(et<0?dt:St)),!(at&&it));Le+=2)Pe=ie;var qt={};return at&&(qt.rise=Ue(Te,at)),it&&(qt.set=Ue(Te,it)),!at&&!it&&(qt[et>0?"alwaysUp":"alwaysDown"]=!0),qt},o.exports=le})()}(eo)),eo.exports}var gs=ps();const ms=Ma(gs),ja=/^[a-z0-9]+(-[a-z0-9]+)*$/,mr=(o,r,a,s="")=>{const l=o.split(":");if(o.slice(0,1)==="@"){if(l.length<2||l.length>3)return null;s=l.shift().slice(1)}if(l.length>3||!l.length)return null;if(l.length>1){const g=l.pop(),x=l.pop(),I={provider:l.length>0?l[0]:s,prefix:x,name:g};return r&&!fr(I)?null:I}const f=l[0],h=f.split("-");if(h.length>1){const g={provider:s,prefix:h.shift(),name:h.join("-")};return r&&!fr(g)?null:g}if(a&&s===""){const g={provider:s,prefix:"",name:f};return r&&!fr(g,a)?null:g}return null},fr=(o,r)=>o?!!((r&&o.prefix===""||o.prefix)&&o.name):!1,Ka=Object.freeze({left:0,top:0,width:16,height:16}),pr=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),yr=Object.freeze({...Ka,...pr}),so=Object.freeze({...yr,body:"",hidden:!1});function ys(o,r){const a={};!o.hFlip!=!r.hFlip&&(a.hFlip=!0),!o.vFlip!=!r.vFlip&&(a.vFlip=!0);const s=((o.rotate||0)+(r.rotate||0))%4;return s&&(a.rotate=s),a}function la(o,r){const a=ys(o,r);for(const s in so)s in pr?s in o&&!(s in a)&&(a[s]=pr[s]):s in r?a[s]=r[s]:s in o&&(a[s]=o[s]);return a}function bs(o,r){const a=o.icons,s=o.aliases||Object.create(null),l=Object.create(null);function f(h){if(a[h])return l[h]=[];if(!(h in l)){l[h]=null;const g=s[h]&&s[h].parent,x=g&&f(g);x&&(l[h]=[g].concat(x))}return l[h]}return Object.keys(a).concat(Object.keys(s)).forEach(f),l}function _s(o,r,a){const s=o.icons,l=o.aliases||Object.create(null);let f={};function h(g){f=la(s[g]||l[g],f)}return h(r),a.forEach(h),la(o,f)}function qa(o,r){const a=[];if(typeof o!="object"||typeof o.icons!="object")return a;o.not_found instanceof Array&&o.not_found.forEach(l=>{r(l,null),a.push(l)});const s=bs(o);for(const l in s){const f=s[l];f&&(r(l,_s(o,l,f)),a.push(l))}return a}const ws={provider:"",aliases:{},not_found:{},...Ka};function to(o,r){for(const a in r)if(a in o&&typeof o[a]!=typeof r[a])return!1;return!0}function Fa(o){if(typeof o!="object"||o===null)return null;const r=o;if(typeof r.prefix!="string"||!o.icons||typeof o.icons!="object"||!to(o,ws))return null;const a=r.icons;for(const l in a){const f=a[l];if(!l||typeof f.body!="string"||!to(f,so))return null}const s=r.aliases||Object.create(null);for(const l in s){const f=s[l],h=f.parent;if(!l||typeof h!="string"||!a[h]&&!s[h]||!to(f,so))return null}return r}const ca=Object.create(null);function ks(o,r){return{provider:o,prefix:r,icons:Object.create(null),missing:new Set}}function mn(o,r){const a=ca[o]||(ca[o]=Object.create(null));return a[r]||(a[r]=ks(o,r))}function Ra(o,r){return Fa(r)?qa(r,(a,s)=>{s?o.icons[a]=s:o.missing.add(a)}):[]}function xs(o,r,a){try{if(typeof a.body=="string")return o.icons[r]={...a},!0}catch{}return!1}let Kn=!1;function Ba(o){return typeof o=="boolean"&&(Kn=o),Kn}function Ds(o){const r=typeof o=="string"?mr(o,!0,Kn):o;if(r){const a=mn(r.provider,r.prefix),s=r.name;return a.icons[s]||(a.missing.has(s)?null:void 0)}}function Ss(o,r){const a=mr(o,!0,Kn);if(!a)return!1;const s=mn(a.provider,a.prefix);return r?xs(s,a.name,r):(s.missing.add(a.name),!0)}function Ts(o,r){if(typeof o!="object")return!1;if(typeof r!="string"&&(r=o.provider||""),Kn&&!r&&!o.prefix){let l=!1;return Fa(o)&&(o.prefix="",qa(o,(f,h)=>{Ss(f,h)&&(l=!0)})),l}const a=o.prefix;if(!fr({prefix:a,name:"a"}))return!1;const s=mn(r,a);return!!Ra(s,o)}const Na=Object.freeze({width:null,height:null}),Ha=Object.freeze({...Na,...pr}),Es=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Cs=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function fa(o,r,a){if(r===1)return o;if(a=a||100,typeof o=="number")return Math.ceil(o*r*a)/a;if(typeof o!="string")return o;const s=o.split(Es);if(s===null||!s.length)return o;const l=[];let f=s.shift(),h=Cs.test(f);for(;;){if(h){const g=parseFloat(f);isNaN(g)?l.push(f):l.push(Math.ceil(g*r*a)/a)}else l.push(f);if(f=s.shift(),f===void 0)return l.join("");h=!h}}function Os(o,r="defs"){let a="";const s=o.indexOf("<"+r);for(;s>=0;){const l=o.indexOf(">",s),f=o.indexOf("</"+r);if(l===-1||f===-1)break;const h=o.indexOf(">",f);if(h===-1)break;a+=o.slice(l+1,f).trim(),o=o.slice(0,s).trim()+o.slice(h+1)}return{defs:a,content:o}}function Is(o,r){return o?"<defs>"+o+"</defs>"+r:r}function Ps(o,r,a){const s=Os(o);return Is(s.defs,r+s.content+a)}const As=o=>o==="unset"||o==="undefined"||o==="none";function Ms(o,r){const a={...yr,...o},s={...Ha,...r},l={left:a.left,top:a.top,width:a.width,height:a.height};let f=a.body;[a,s].forEach(N=>{const V=[],K=N.hFlip,w=N.vFlip;let P=N.rotate;K?w?P+=2:(V.push("translate("+(l.width+l.left).toString()+" "+(0-l.top).toString()+")"),V.push("scale(-1 1)"),l.top=l.left=0):w&&(V.push("translate("+(0-l.left).toString()+" "+(l.height+l.top).toString()+")"),V.push("scale(1 -1)"),l.top=l.left=0);let S;switch(P<0&&(P-=Math.floor(P/4)*4),P=P%4,P){case 1:S=l.height/2+l.top,V.unshift("rotate(90 "+S.toString()+" "+S.toString()+")");break;case 2:V.unshift("rotate(180 "+(l.width/2+l.left).toString()+" "+(l.height/2+l.top).toString()+")");break;case 3:S=l.width/2+l.left,V.unshift("rotate(-90 "+S.toString()+" "+S.toString()+")");break}P%2===1&&(l.left!==l.top&&(S=l.left,l.left=l.top,l.top=S),l.width!==l.height&&(S=l.width,l.width=l.height,l.height=S)),V.length&&(f=Ps(f,'<g transform="'+V.join(" ")+'">',"</g>"))});const h=s.width,g=s.height,x=l.width,I=l.height;let j,M;h===null?(M=g===null?"1em":g==="auto"?I:g,j=fa(M,x/I)):(j=h==="auto"?x:h,M=g===null?fa(j,I/x):g==="auto"?I:g);const D={},H=(N,V)=>{As(V)||(D[N]=V.toString())};H("width",j),H("height",M);const z=[l.left,l.top,x,I];return D.viewBox=z.join(" "),{attributes:D,viewBox:z,body:f}}const js=/\sid="(\S+)"/g,Ks="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let qs=0;function Fs(o,r=Ks){const a=[];let s;for(;s=js.exec(o);)a.push(s[1]);if(!a.length)return o;const l="suffix"+(Math.random()*16777216|Date.now()).toString(16);return a.forEach(f=>{const h=typeof r=="function"?r(f):r+(qs++).toString(),g=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o=o.replace(new RegExp('([#;"])('+g+')([")]|\\.[a-z])',"g"),"$1"+h+l+"$3")}),o=o.replace(new RegExp(l,"g"),""),o}const uo=Object.create(null);function Rs(o,r){uo[o]=r}function lo(o){return uo[o]||uo[""]}function mo(o){let r;if(typeof o.resources=="string")r=[o.resources];else if(r=o.resources,!(r instanceof Array)||!r.length)return null;return{resources:r,path:o.path||"/",maxURL:o.maxURL||500,rotate:o.rotate||750,timeout:o.timeout||5e3,random:o.random===!0,index:o.index||0,dataAfterTimeout:o.dataAfterTimeout!==!1}}const yo=Object.create(null),An=["https://api.simplesvg.com","https://api.unisvg.com"],dr=[];for(;An.length>0;)An.length===1||Math.random()>.5?dr.push(An.shift()):dr.push(An.pop());yo[""]=mo({resources:["https://api.iconify.design"].concat(dr)});function Bs(o,r){const a=mo(r);return a===null?!1:(yo[o]=a,!0)}function bo(o){return yo[o]}const Ns=()=>{let o;try{if(o=fetch,typeof o=="function")return o}catch{}};let da=Ns();function Hs(o,r){const a=bo(o);if(!a)return 0;let s;if(!a.maxURL)s=0;else{let l=0;a.resources.forEach(h=>{l=Math.max(l,h.length)});const f=r+".json?icons=";s=a.maxURL-l-a.path.length-f.length}return s}function Ls(o){return o===404}const zs=(o,r,a)=>{const s=[],l=Hs(o,r),f="icons";let h={type:f,provider:o,prefix:r,icons:[]},g=0;return a.forEach((x,I)=>{g+=x.length+1,g>=l&&I>0&&(s.push(h),h={type:f,provider:o,prefix:r,icons:[]},g=x.length),h.icons.push(x)}),s.push(h),s};function Us(o){if(typeof o=="string"){const r=bo(o);if(r)return r.path}return"/"}const Ys=(o,r,a)=>{if(!da){a("abort",424);return}let s=Us(r.provider);switch(r.type){case"icons":{const f=r.prefix,g=r.icons.join(","),x=new URLSearchParams({icons:g});s+=f+".json?"+x.toString();break}case"custom":{const f=r.uri;s+=f.slice(0,1)==="/"?f.slice(1):f;break}default:a("abort",400);return}let l=503;da(o+s).then(f=>{const h=f.status;if(h!==200){setTimeout(()=>{a(Ls(h)?"abort":"next",h)});return}return l=501,f.json()}).then(f=>{if(typeof f!="object"||f===null){setTimeout(()=>{f===404?a("abort",f):a("next",l)});return}setTimeout(()=>{a("success",f)})}).catch(()=>{a("next",l)})},Vs={prepare:zs,send:Ys};function Ws(o){const r={loaded:[],missing:[],pending:[]},a=Object.create(null);o.sort((l,f)=>l.provider!==f.provider?l.provider.localeCompare(f.provider):l.prefix!==f.prefix?l.prefix.localeCompare(f.prefix):l.name.localeCompare(f.name));let s={provider:"",prefix:"",name:""};return o.forEach(l=>{if(s.name===l.name&&s.prefix===l.prefix&&s.provider===l.provider)return;s=l;const f=l.provider,h=l.prefix,g=l.name,x=a[f]||(a[f]=Object.create(null)),I=x[h]||(x[h]=mn(f,h));let j;g in I.icons?j=r.loaded:h===""||I.missing.has(g)?j=r.missing:j=r.pending;const M={provider:f,prefix:h,name:g};j.push(M)}),r}function La(o,r){o.forEach(a=>{const s=a.loaderCallbacks;s&&(a.loaderCallbacks=s.filter(l=>l.id!==r))})}function Gs(o){o.pendingCallbacksFlag||(o.pendingCallbacksFlag=!0,setTimeout(()=>{o.pendingCallbacksFlag=!1;const r=o.loaderCallbacks?o.loaderCallbacks.slice(0):[];if(!r.length)return;let a=!1;const s=o.provider,l=o.prefix;r.forEach(f=>{const h=f.icons,g=h.pending.length;h.pending=h.pending.filter(x=>{if(x.prefix!==l)return!0;const I=x.name;if(o.icons[I])h.loaded.push({provider:s,prefix:l,name:I});else if(o.missing.has(I))h.missing.push({provider:s,prefix:l,name:I});else return a=!0,!0;return!1}),h.pending.length!==g&&(a||La([o],f.id),f.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),f.abort))})}))}let Qs=0;function Js(o,r,a){const s=Qs++,l=La.bind(null,a,s);if(!r.pending.length)return l;const f={id:s,icons:r,callback:o,abort:l};return a.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(f)}),l}function Xs(o,r=!0,a=!1){const s=[];return o.forEach(l=>{const f=typeof l=="string"?mr(l,r,a):l;f&&s.push(f)}),s}var Zs={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function $s(o,r,a,s){const l=o.resources.length,f=o.random?Math.floor(Math.random()*l):o.index;let h;if(o.random){let W=o.resources.slice(0);for(h=[];W.length>1;){const U=Math.floor(Math.random()*W.length);h.push(W[U]),W=W.slice(0,U).concat(W.slice(U+1))}h=h.concat(W)}else h=o.resources.slice(f).concat(o.resources.slice(0,f));const g=Date.now();let x="pending",I=0,j,M=null,D=[],H=[];typeof s=="function"&&H.push(s);function z(){M&&(clearTimeout(M),M=null)}function N(){x==="pending"&&(x="aborted"),z(),D.forEach(W=>{W.status==="pending"&&(W.status="aborted")}),D=[]}function V(W,U){U&&(H=[]),typeof W=="function"&&H.push(W)}function K(){return{startTime:g,payload:r,status:x,queriesSent:I,queriesPending:D.length,subscribe:V,abort:N}}function w(){x="failed",H.forEach(W=>{W(void 0,j)})}function P(){D.forEach(W=>{W.status==="pending"&&(W.status="aborted")}),D=[]}function S(W,U,ue){const ve=U!=="success";switch(D=D.filter(le=>le!==W),x){case"pending":break;case"failed":if(ve||!o.dataAfterTimeout)return;break;default:return}if(U==="abort"){j=ue,w();return}if(ve){j=ue,D.length||(h.length?B():w());return}if(z(),P(),!o.random){const le=o.resources.indexOf(W.resource);le!==-1&&le!==o.index&&(o.index=le)}x="completed",H.forEach(le=>{le(ue)})}function B(){if(x!=="pending")return;z();const W=h.shift();if(W===void 0){if(D.length){M=setTimeout(()=>{z(),x==="pending"&&(P(),w())},o.timeout);return}w();return}const U={status:"pending",resource:W,callback:(ue,ve)=>{S(U,ue,ve)}};D.push(U),I++,M=setTimeout(B,o.rotate),a(W,r,U.callback)}return setTimeout(B),K}function za(o){const r={...Zs,...o};let a=[];function s(){a=a.filter(g=>g().status==="pending")}function l(g,x,I){const j=$s(r,g,x,(M,D)=>{s(),I&&I(M,D)});return a.push(j),j}function f(g){return a.find(x=>g(x))||null}return{query:l,find:f,setIndex:g=>{r.index=g},getIndex:()=>r.index,cleanup:s}}function ha(){}const no=Object.create(null);function eu(o){if(!no[o]){const r=bo(o);if(!r)return;const a=za(r),s={config:r,redundancy:a};no[o]=s}return no[o]}function tu(o,r,a){let s,l;if(typeof o=="string"){const f=lo(o);if(!f)return a(void 0,424),ha;l=f.send;const h=eu(o);h&&(s=h.redundancy)}else{const f=mo(o);if(f){s=za(f);const h=o.resources?o.resources[0]:"",g=lo(h);g&&(l=g.send)}}return!s||!l?(a(void 0,424),ha):s.query(r,l,a)().abort}function va(){}function nu(o){o.iconsLoaderFlag||(o.iconsLoaderFlag=!0,setTimeout(()=>{o.iconsLoaderFlag=!1,Gs(o)}))}function ru(o){const r=[],a=[];return o.forEach(s=>{(s.match(ja)?r:a).push(s)}),{valid:r,invalid:a}}function Mn(o,r,a){function s(){const l=o.pendingIcons;r.forEach(f=>{l&&l.delete(f),o.icons[f]||o.missing.add(f)})}if(a&&typeof a=="object")try{if(!Ra(o,a).length){s();return}}catch(l){console.error(l)}s(),nu(o)}function pa(o,r){o instanceof Promise?o.then(a=>{r(a)}).catch(()=>{r(null)}):r(o)}function ou(o,r){o.iconsToLoad?o.iconsToLoad=o.iconsToLoad.concat(r).sort():o.iconsToLoad=r,o.iconsQueueFlag||(o.iconsQueueFlag=!0,setTimeout(()=>{o.iconsQueueFlag=!1;const{provider:a,prefix:s}=o,l=o.iconsToLoad;if(delete o.iconsToLoad,!l||!l.length)return;const f=o.loadIcon;if(o.loadIcons&&(l.length>1||!f)){pa(o.loadIcons(l,s,a),j=>{Mn(o,l,j)});return}if(f){l.forEach(j=>{const M=f(j,s,a);pa(M,D=>{const H=D?{prefix:s,icons:{[j]:D}}:null;Mn(o,[j],H)})});return}const{valid:h,invalid:g}=ru(l);if(g.length&&Mn(o,g,null),!h.length)return;const x=s.match(ja)?lo(a):null;if(!x){Mn(o,h,null);return}x.prepare(a,s,h).forEach(j=>{tu(a,j,M=>{Mn(o,j.icons,M)})})}))}const au=(o,r)=>{const a=Xs(o,!0,Ba()),s=Ws(a);if(!s.pending.length){let x=!0;return r&&setTimeout(()=>{x&&r(s.loaded,s.missing,s.pending,va)}),()=>{x=!1}}const l=Object.create(null),f=[];let h,g;return s.pending.forEach(x=>{const{provider:I,prefix:j}=x;if(j===g&&I===h)return;h=I,g=j,f.push(mn(I,j));const M=l[I]||(l[I]=Object.create(null));M[j]||(M[j]=[])}),s.pending.forEach(x=>{const{provider:I,prefix:j,name:M}=x,D=mn(I,j),H=D.pendingIcons||(D.pendingIcons=new Set);H.has(M)||(H.add(M),l[I][j].push(M))}),f.forEach(x=>{const I=l[x.provider][x.prefix];I.length&&ou(x,I)}),r?Js(r,s,f):va};function iu(o,r){const a={...o};for(const s in r){const l=r[s],f=typeof l;s in Na?(l===null||l&&(f==="string"||f==="number"))&&(a[s]=l):f===typeof a[s]&&(a[s]=s==="rotate"?l%4:l)}return a}const su=/[\s,]+/;function uu(o,r){r.split(su).forEach(a=>{switch(a.trim()){case"horizontal":o.hFlip=!0;break;case"vertical":o.vFlip=!0;break}})}function lu(o,r=0){const a=o.replace(/^-?[0-9.]*/,"");function s(l){for(;l<0;)l+=4;return l%4}if(a===""){const l=parseInt(o);return isNaN(l)?0:s(l)}else if(a!==o){let l=0;switch(a){case"%":l=25;break;case"deg":l=90}if(l){let f=parseFloat(o.slice(0,o.length-a.length));return isNaN(f)?0:(f=f/l,f%1===0?s(f):0)}}return r}function cu(o,r){let a=o.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in r)a+=" "+s+'="'+r[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+a+">"+o+"</svg>"}function fu(o){return o.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function du(o){return"data:image/svg+xml,"+fu(o)}function hu(o){return'url("'+du(o)+'")'}const ga={...Ha,inline:!1},vu={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},pu={display:"inline-block"},co={"background-color":"currentColor"},Ua={"background-color":"transparent"},ma={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},ya={"-webkit-mask":co,mask:co,background:Ua};for(const o in ya){const r=ya[o];for(const a in ma)r[o+"-"+a]=ma[a]}function gu(o){return o+(o.match(/^[-0-9.]+$/)?"px":"")}function mu(o,r){const a=iu(ga,r),s=r.mode||"svg",l=s==="svg"?{...vu}:{};o.body.indexOf("xlink:")===-1&&delete l["xmlns:xlink"];let f=typeof r.style=="string"?r.style:"";for(let K in r){const w=r[K];if(w!==void 0)switch(K){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":a[K]=w===!0||w==="true"||w===1;break;case"flip":typeof w=="string"&&uu(a,w);break;case"color":f=f+(f.length>0&&f.trim().slice(-1)!==";"?";":"")+"color: "+w+"; ";break;case"rotate":typeof w=="string"?a[K]=lu(w):typeof w=="number"&&(a[K]=w);break;case"ariaHidden":case"aria-hidden":w!==!0&&w!=="true"&&delete l["aria-hidden"];break;default:if(K.slice(0,3)==="on:")break;ga[K]===void 0&&(l[K]=w)}}const h=Ms(o,a),g=h.attributes;if(a.inline&&(f="vertical-align: -0.125em; "+f),s==="svg"){Object.assign(l,g),f!==""&&(l.style=f);let K=0,w=r.id;return typeof w=="string"&&(w=w.replace(/-/g,"_")),{svg:!0,attributes:l,body:Fs(h.body,w?()=>w+"ID"+K++:"iconifySvelte")}}const{body:x,width:I,height:j}=o,M=s==="mask"||(s==="bg"?!1:x.indexOf("currentColor")!==-1),D=cu(x,{...g,width:I+"",height:j+""}),z={"--svg":hu(D)},N=K=>{const w=g[K];w&&(z[K]=gu(w))};N("width"),N("height"),Object.assign(z,pu,M?co:Ua);let V="";for(const K in z)V+=K+": "+z[K]+";";return l.style=V+f,{svg:!1,attributes:l}}Ba(!0);Rs("",Vs);if(typeof document<"u"&&typeof window<"u"){const o=window;if(o.IconifyPreload!==void 0){const r=o.IconifyPreload,a="Invalid IconifyPreload syntax.";typeof r=="object"&&r!==null&&(r instanceof Array?r:[r]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!Ts(s))&&console.error(a)}catch{console.error(a)}})}if(o.IconifyProviders!==void 0){const r=o.IconifyProviders;if(typeof r=="object"&&r!==null)for(let a in r){const s="IconifyProviders["+a+"] is invalid.";try{const l=r[a];if(typeof l!="object"||!l||l.resources===void 0)continue;Bs(a,l)||console.error(s)}catch{console.error(s)}}}}function yu(o,r,a,s,l){function f(){r.loading&&(r.loading.abort(),r.loading=null)}if(typeof o=="object"&&o!==null&&typeof o.body=="string")return r.name="",f(),{data:{...yr,...o}};let h;if(typeof o!="string"||(h=mr(o,!1,!0))===null)return f(),null;const g=Ds(h);if(!g)return a&&(!r.loading||r.loading.name!==o)&&(f(),r.name="",r.loading={name:o,abort:au([h],s)}),null;f(),r.name!==o&&(r.name=o,l&&!r.destroyed&&l(o));const x=["iconify"];return h.prefix!==""&&x.push("iconify--"+h.prefix),h.provider!==""&&x.push("iconify--"+h.provider),{data:g,classes:x}}function bu(o,r){return o?mu({...yr,...o},r):null}var _u=Vi("<svg><!></svg>"),wu=me("<span></span>");function Xe(o,r){Ze(r,!0);const a={name:"",loading:null,destroyed:!1},s=Wi(r,["$$slots","$$events","$$legacy"]);let l=_e(!1),f=_e(0),h=_e(null);Ui(()=>{m(f);const M=!!r.ssr||m(l),D=yu(r.icon,a,M,g,r.onload),H=D?bu(D.data,s):null;H&&D.classes&&(H.attributes.class=(typeof s.class=="string"?s.class+" ":"")+D.classes.join(" ")),ae(h,H,!0)});function g(){Yi(f)}sn(()=>{ae(l,!0)}),bi(()=>{a.destroyed=!0,a.loading&&(a.loading.abort(),a.loading=null)});var x=an(),I=wt(x);{var j=M=>{var D=an(),H=wt(D);{var z=V=>{var K=_u();oa(K,()=>({...m(h).attributes}));var w=L(K);es(w,()=>m(h).body,!0),R(K),he(V,K)},N=V=>{var K=wu();oa(K,()=>({...m(h).attributes})),he(V,K)};rt(H,V=>{m(h).svg?V(z):V(N,!1)})}he(M,D)};rt(I,M=>{m(h)&&M(j)})}he(o,x),$e()}var ku=(o,r)=>r(0),xu=(o,r)=>r(14),Du=(o,r)=>r(16),Su=(o,r)=>r(23),Tu=(o,r)=>r(40),Eu=me('<div class="svelte-ziixid"><button type="button"><!></button> <button type="button">14h</button> <button type="button">16h</button> <button type="button">23h</button> <button type="button">40h</button></div>');function Cu(o,r){Ze(r,!0);let a=pe(r,"value",7,0);function s(V){a(V),r.onchange&&r.onchange(a())}var l=Eu(),f=L(l);f.__click=[ku,s];let h;var g=L(f);Xe(g,{height:"20",icon:"stash:infinity-duotone",width:"20"}),R(f);var x=G(f,2);x.__click=[xu,s];let I;var j=G(x,2);j.__click=[Du,s];let M;var D=G(j,2);D.__click=[Su,s];let H;var z=G(D,2);z.__click=[Tu,s];let N;R(l),je((V,K,w,P,S)=>{h=Je(f,1,"svelte-ziixid",null,h,V),I=Je(x,1,"svelte-ziixid",null,I,K),M=Je(j,1,"svelte-ziixid",null,M,w),H=Je(D,1,"svelte-ziixid",null,H,P),N=Je(z,1,"svelte-ziixid",null,N,S)},[()=>({selected:a()===0}),()=>({selected:a()===14}),()=>({selected:a()===16}),()=>({selected:a()===23}),()=>({selected:a()===40})]),he(o,l),$e()}st(["click"]);var Ou=me('<div class="hour svelte-z94qzf"></div>'),Iu=me('<div class="day svelte-z94qzf"><!></div>'),Pu=me('<p class="day svelte-z94qzf"> </p> <!>',1),Au=me('<div class="day svelte-z94qzf"><div class="hour svelte-z94qzf"></div></div>'),Mu=me('<figure class="svelte-z94qzf"><div class="labels svelte-z94qzf"><p class="date svelte-z94qzf">Date</p> <p class="hour svelte-z94qzf">0</p> <p class="hour svelte-z94qzf">12</p> <p class="hour svelte-z94qzf">24</p></div> <div class="grid svelte-z94qzf"><!></div> <div class="average grid svelte-z94qzf"><p class="day svelte-z94qzf">Avg</p> <!></div></figure>');function ju(o,r){Ze(r,!0);let a=pe(r,"average",19,()=>[]),s=pe(r,"daily",3,null);pe(r,"days",3,10);function l(D){return D=new Date(D+"T00:00:00"),new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(D)}function f(D,H){return D===0||H[D-1]===0?(1-H[D])*100+"%":0}var h=Mu(),g=G(L(h),2),x=L(g);{var I=D=>{var H=an(),z=wt(H);Dt(z,17,()=>Object.keys(s()),xt,(N,V)=>{var K=Pu();const w=ze(()=>s()[m(V)]);var P=wt(K),S=L(P,!0);R(P);var B=G(P,2);Dt(B,16,()=>({length:24}),xt,(W,U,ue)=>{var ve=Iu(),le=L(ve);{var Ee=ye=>{var be=Ou();let Ne;je(Ke=>Ne=gn(be,"",Ne,Ke),[()=>({"margin-left":f(ue,m(w)),width:100*m(w)[ue]+"%"})]),he(ye,be)};rt(le,ye=>{m(w)[ue]!==0&&ye(Ee)})}R(ve),he(W,ve)}),je(W=>ke(S,W),[()=>l(m(V))]),he(N,K)}),he(D,H)};rt(x,D=>{s()!==null&&D(I)})}R(g);var j=G(g,2),M=G(L(j),2);Dt(M,16,()=>({length:24}),xt,(D,H,z)=>{var N=Au(),V=L(N);let K;R(N),je(w=>K=gn(V,"",K,w),[()=>({opacity:a()[z],width:"100%"})]),he(D,N)}),R(j),R(h),he(o,h),$e()}function Ku(o,r,a,s){const l=m(r).getBoundingClientRect();m(a).style.width=l.width-2+"px",ae(s,!m(s))}var qu=(o,r,a)=>r(m(a)),Fu=me('<li><button type="button" class="svelte-dpktq5"><!> <span class="svelte-dpktq5"> </span> <!></button></li>'),Ru=me('<label class="svelte-dpktq5"><button type="button" class="svelte-dpktq5"><!> <span class="svelte-dpktq5"> </span> <!></button> <ul></ul></label>');function Bu(o,r){Ze(r,!0);let a=pe(r,"items",19,()=>[]),s=pe(r,"value",7,0),l=_e(!1),f=_e(void 0),h=_e(void 0),g=ze(()=>a().length>0?a()[s()].icon:""),x=ze(()=>a().length>0?a()[s()].label:"");sn(()=>(document.addEventListener("click",I),()=>{document.removeEventListener("click",I)}));function I(P){!m(f).contains(P.target)&&!m(h).contains(P.target)&&ae(l,!1)}function j(P){s(P.value),ae(l,!1),r.onchange&&r.onchange(P)}var M=Ru(),D=L(M);D.__click=[Ku,f,h,l];var H=L(D);Xe(H,{height:"20",get icon(){return m(g)},width:"20"});var z=G(H,2),N=L(z,!0);R(z);var V=G(z,2);Xe(V,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),R(D),ft(D,P=>ae(f,P),()=>m(f));var K=G(D,2);let w;Dt(K,21,a,xt,(P,S)=>{var B=Fu();let W;var U=L(B);U.__click=[qu,j,S];var ue=L(U);Xe(ue,{height:"20",get icon(){return m(S).icon},width:"20"});var ve=G(ue,2),le=L(ve,!0);R(ve);var Ee=G(ve,2);{var ye=be=>{Xe(be,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};rt(Ee,be=>{m(S).value===s()&&be(ye)})}R(U),R(B),je(be=>{W=Je(B,1,"svelte-dpktq5",null,W,be),ke(le,m(S).label)},[()=>({selected:s()===m(S).value})]),he(P,B)}),R(K),ft(K,P=>ae(h,P),()=>m(h)),R(M),je(P=>{ke(N,m(x)),w=Je(K,1,"svelte-dpktq5",null,w,P)},[()=>({open:m(l)})]),he(o,M),$e()}st(["click"]);var Nu=me('<p class="svelte-1lve2pk">0</p>'),Hu=me('<p class="svelte-1lve2pk"> </p>'),Lu=me('<p class="svelte-1lve2pk"> </p>'),zu=me('<div class="column svelte-1lve2pk"><p class="svelte-1lve2pk"> </p></div>'),Uu=me('<div class="line svelte-1lve2pk"></div>'),Yu=me('<div class="average svelte-1lve2pk"></div>'),Vu=me('<figure class="svelte-1lve2pk"><div class="labels svelte-1lve2pk"><!></div> <div class="chart svelte-1lve2pk"><div class="labels svelte-1lve2pk"></div> <div class="columns svelte-1lve2pk"><!> <!> <!></div></div></figure>');function Wu(o,r){Ze(r,!0);let a=pe(r,"average",3,0),s=pe(r,"daily",19,()=>[]),l=ze(()=>s().reduce((S,B)=>(S=B.volume>S?B.volume:S,S),0)),f=ze(()=>{const S=Math.floor(m(l)+m(l)*.1);return[0,Math.round(S/4)*1,Math.round(S/4)*2,Math.round(S/4)*3,S]});function h(S){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(S)}var g=Vu(),x=L(g),I=L(x);{var j=S=>{var B=Nu();he(S,B)},M=S=>{var B=an(),W=wt(B);Dt(W,17,()=>m(f),xt,(U,ue)=>{var ve=Hu();const le=ze(()=>m(ue)===0?"0":m(ue)+" oz");var Ee=L(ve,!0);R(ve),je(()=>ke(Ee,m(le))),he(U,ve)}),he(S,B)};rt(I,S=>{m(l)===0?S(j):S(M,!1)})}R(x);var D=G(x,2),H=L(D);Dt(H,21,s,xt,(S,B)=>{var W=Lu(),U=L(W,!0);R(W),je(ue=>ke(U,ue),[()=>h(m(B).created)]),he(S,W)}),R(H);var z=G(H,2),N=L(z);{var V=S=>{var B=an(),W=wt(B);Dt(W,17,s,xt,(U,ue)=>{var ve=zu();let le;var Ee=L(ve),ye=L(Ee);R(Ee),R(ve),je(be=>{le=gn(ve,"",le,be),ke(ye,`${m(ue).volume??""} oz`)},[()=>({width:`${m(ue).volume/Math.floor(m(l)+m(l)*.1)*100}%`})]),he(U,ve)}),he(S,B)};rt(N,S=>{m(l)!==0&&S(V)})}var K=G(N,2);Dt(K,16,()=>({length:4}),xt,(S,B,W)=>{var U=Uu();Jt(U,"data-value",W),gn(U,"",{},{left:`${25*(W+1)}%`}),he(S,U)});var w=G(K,2);{var P=S=>{var B=Yu();let W;je(U=>{Jt(B,"data-value",a()),W=gn(B,"",W,U)},[()=>({left:`${a()/Math.floor(m(l)+m(l)*.1)*100}%`})]),he(S,B)};rt(w,S=>{a()>0&&S(P)})}R(z),R(D),R(g),he(o,g),$e()}var Gu=me('<button class="sun svelte-wl8176" type="button">Sunrise/sunset</button>'),Qu=me('<!> <p class="svelte-wl8176"> </p>',1),Ju=me('<section class="svelte-wl8176"><!> <footer class="svelte-wl8176"><div class="daynight svelte-wl8176"><!></div> <!></footer></section>');function Ya(o,r){Ze(r,!0);let a=pe(r,"activity",3,null),s=pe(r,"days",3,10),l=pe(r,"water",3,null);const f=[{icon:"material-symbols:local-fire-department-outline-rounded",label:"Fasting",value:0},{icon:"material-symbols:water-drop-outline-rounded",label:"Water",value:1}];let h=_e(0);function g(w){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(w)}var x=Ju(),I=L(x);{var j=w=>{const P=ze(()=>a()&&a().average?a().average:[]),S=ze(()=>a()&&a().daily?a().daily:[]);ju(w,{get average(){return m(P)},get daily(){return m(S)},get days(){return s()}})},M=(w,P)=>{{var S=B=>{const W=ze(()=>l()&&l().average?l().average:null),U=ze(()=>l()&&l().daily?l().daily:null);Wu(B,{get average(){return m(W)},get daily(){return m(U)}})};rt(w,B=>{m(h)===1&&B(S)},P)}};rt(I,w=>{m(h)===0?w(j):w(M,!1)})}var D=G(I,2),H=L(D),z=L(H);{var N=w=>{var P=Gu();P.__click=function(...S){var B;(B=r.onsun)==null||B.apply(this,S)},he(w,P)},V=w=>{var P=Qu(),S=wt(P);const B=ze(()=>r.sun&&r.sun.icon?r.sun.icon:null);Xe(S,{height:"16",get icon(){return m(B)},width:"16"});var W=G(S,2),U=L(W,!0);R(W),je(ue=>ke(U,ue),[()=>r.sun&&r.sun.timing?g(r.sun.timing):""]),he(w,P)};rt(z,w=>{r.sun===null?w(N):w(V,!1)})}R(H);var K=G(H,2);Bu(K,{get items(){return f},mount:"top",onchange:w=>ae(h,w.value,!0)}),R(D),R(x),he(o,x),$e()}st(["click"]);function Xu(o,r){ae(r,!m(r))}var Zu=(o,r,a)=>r(m(a)),$u=me('<li class="svelte-a6ycms"><button type="button" class="svelte-a6ycms"><span class="svelte-a6ycms"> </span></button></li>'),el=me('<label class="svelte-a6ycms"><button type="button" class="svelte-a6ycms"><!> <span class="svelte-a6ycms"> </span> <!></button> <ul></ul></label>');function tl(o,r){Ze(r,!0);let a=pe(r,"items",19,()=>[]),s=pe(r,"value",3,5),l=_e(!1),f=_e(void 0),h=_e(void 0),g=ze(()=>a().find(P=>P.value===s()).label);sn(()=>(document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}));function x(w){!m(f).contains(w.target)&&!m(h).contains(w.target)&&ae(l,!1)}function I(w){ae(l,!1),r.onchange&&r.onchange(w.value)}var j=el(),M=L(j);M.__click=[Xu,l];var D=L(M);Xe(D,{height:"20",icon:"material-symbols:fork-spoon-rounded",width:"20"});var H=G(D,2),z=L(H,!0);R(H);var N=G(H,2);Xe(N,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),R(M),ft(M,w=>ae(f,w),()=>m(f));var V=G(M,2);let K;Dt(V,21,a,xt,(w,P)=>{var S=$u(),B=L(S);B.__click=[Zu,I,P];var W=L(B),U=L(W,!0);R(W),R(B),R(S),je(()=>ke(U,m(P).label)),he(w,S)}),R(V),ft(V,w=>ae(h,w),()=>m(h)),R(j),je(w=>{ke(z,m(g)),K=Je(V,1,"svelte-a6ycms",null,K,w)},[()=>({open:m(l)})]),he(o,j),$e()}st(["click"]);var nl=me('<article><p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">hrs</span></p> <p class="colon svelte-1yn3hhw">:</p> <p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">min</span></p> <p class="colon svelte-1yn3hhw">:</p> <p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">sec</span></p></article>');function rl(o,r){Ze(r,!0);let a=pe(r,"duration",3,0),s=pe(r,"now",3,null),l=pe(r,"started",3,null),f=ze(()=>{let w=Math.floor((s()-l().getTime())/1e3);if(a()!==0){const P=new Date(l().getTime()+a()*36e5);w=Math.floor((P.getTime()-s())/1e3)}return w}),h=ze(()=>{if(l()===null)return{hours:0,minutes:"00",seconds:"00"};let w=Math.floor(m(f)/3600);return w=w<0?"+"+Math.abs(w).toString(10):Math.abs(w).toString(10),{hours:w,minutes:Math.abs(Math.floor(m(f)%3600/60)).toString(10).padStart(2,"0"),seconds:Math.abs(m(f)%60).toString(10).padStart(2,"0")}});var g=nl();let x;var I=L(g),j=L(I),M=L(j,!0);R(j),Qr(2),R(I);var D=G(I,4),H=L(D),z=L(H,!0);R(H),Qr(2),R(D);var N=G(D,4),V=L(N),K=L(V,!0);R(V),Qr(2),R(N),R(g),je(w=>{x=Je(g,1,"svelte-1yn3hhw",null,x,w),ke(M,m(h).hours),ke(z,m(h).minutes),ke(K,m(h).seconds)},[()=>({complete:m(f)<0})]),he(o,g),$e()}function ol(o,r){ae(r,!m(r))}var al=(o,r,a)=>r(m(a)),il=me('<li class="svelte-1yteqtn"><button type="button" class="svelte-1yteqtn"><span class="svelte-1yteqtn"> </span> <span class="svelte-1yteqtn"> </span></button></li>'),sl=me('<label class="svelte-1yteqtn"><button type="button" class="svelte-1yteqtn"><!> <span class="svelte-1yteqtn"> </span> <!></button> <ul></ul></label>');function ul(o,r){Ze(r,!0);let a=pe(r,"items",19,()=>[]),s=pe(r,"units",3,"oz"),l=pe(r,"value",3,0),f=_e(!1),h=_e(void 0),g=_e(void 0);sn(()=>(document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}));function x(w){!m(h).contains(w.target)&&!m(g).contains(w.target)&&ae(f,!1)}function I(w){ae(f,!1),r.onchange&&r.onchange(w.value)}var j=sl(),M=L(j);M.__click=[ol,f];var D=L(M);Xe(D,{height:"20",icon:"material-symbols:water-drop-outline-rounded",width:"20"});var H=G(D,2),z=L(H);R(H);var N=G(H,2);Xe(N,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),R(M),ft(M,w=>ae(h,w),()=>m(h));var V=G(M,2);let K;Dt(V,21,a,xt,(w,P)=>{var S=il(),B=L(S);B.__click=[al,I,P];var W=L(B),U=L(W,!0);R(W);var ue=G(W,2),ve=L(ue);R(ue),R(B),R(S),je(()=>{ke(U,m(P).label),ke(ve,`${m(P).value??""} ${s()??""}`)}),he(w,S)}),R(V),ft(V,w=>ae(g,w),()=>m(g)),R(j),je(w=>{ke(z,`${l()??""} ${s()??""}`),K=Je(V,1,"svelte-1yteqtn",null,K,w)},[()=>({open:m(f)})]),he(o,j),$e()}st(["click"]);function ll(o,r,a){r()===null?a.onstart&&a.onstart():a.onend&&a.onend()}var cl=me('<p class="svelte-1wi0ic3">You are not fasting.</p>'),fl=me('<p class="svelte-1wi0ic3">You are fasting.</p> <!> <!> <p class="started svelte-1wi0ic3"> </p>',1),dl=me('<section class="svelte-1wi0ic3"><header class="svelte-1wi0ic3"><h3 class="svelte-1wi0ic3">Fasting</h3> <button type="button" class="svelte-1wi0ic3"><!></button></header> <article class="svelte-1wi0ic3"><!> <button class="primary svelte-1wi0ic3" type="button"> </button></article> <div class="graph svelte-1wi0ic3"><!></div> <footer class="svelte-1wi0ic3"><!> <!></footer></section>');function hl(o,r){Ze(r,!0);let a=pe(r,"activity",3,null),s=pe(r,"duration",3,0),l=pe(r,"hunger",3,5),f=pe(r,"levels",19,()=>[]),h=pe(r,"now",3,null),g=pe(r,"started",3,null),x=pe(r,"sun",3,null),I=pe(r,"volume",3,null),j=pe(r,"volumes",19,()=>[]),M=pe(r,"water",3,0);function D(ye){return ye===null?null:new Intl.DateTimeFormat(navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(ye)}var H=dl(),z=L(H),N=G(L(z),2);N.__click=function(...ye){var be;(be=r.onsettings)==null||be.apply(this,ye)};var V=L(N);Xe(V,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),R(N),R(z);var K=G(z,2),w=L(K);{var P=ye=>{var be=cl();he(ye,be)},S=ye=>{var be=fl(),Ne=G(wt(be),2);rl(Ne,{get duration(){return s()},get now(){return h()},get started(){return g()}});var Ke=G(Ne,2);Cu(Ke,{get onchange(){return r.onduration},get value(){return s()}});var Qe=G(Ke,2),ot=L(Qe);R(Qe),je(He=>ke(ot,`Started ${He??""}`),[()=>D(g())]),he(ye,be)};rt(w,ye=>{g()===null?ye(P):ye(S,!1)})}var B=G(w,2);B.__click=[ll,g,r];var W=L(B);R(B),R(K);var U=G(K,2),ue=L(U);Ya(ue,{get activity(){return a()},days:7,get onsun(){return r.onsun},get sun(){return x()},get water(){return I()}}),R(U);var ve=G(U,2),le=L(ve);tl(le,{get items(){return f()},get onchange(){return r.onhunger},get value(){return l()}});var Ee=G(le,2);ul(Ee,{get items(){return j()},get onchange(){return r.onwater},get value(){return M()}}),R(ve),R(H),je(()=>ke(W,`${g()===null?"Start":"Stop"} fasting`)),he(o,H),$e()}st(["click"]);function vl(o,r,a,s){const l=new Date(parseInt(o.currentTarget.getAttribute("data-year")),parseInt(o.currentTarget.getAttribute("data-month")),parseInt(o.currentTarget.getAttribute("data-date")));l.getMonth()!==r().getMonth()&&r(new Date(l.getTime())),a(new Date(l.getTime())),s.onchange&&s.onchange(a())}var pl=me('<button type="button"> </button>'),gl=me('<section><header class="svelte-1ll096s"><h3 class="svelte-1ll096s"> </h3> <button type="button" class="svelte-1ll096s"><!></button> <button type="button" class="svelte-1ll096s"><!></button></header> <article class="svelte-1ll096s"><p class="svelte-1ll096s">Sun</p> <p class="svelte-1ll096s">Mon</p> <p class="svelte-1ll096s">Tue</p> <p class="svelte-1ll096s">Wed</p> <p class="svelte-1ll096s">Thu</p> <p class="svelte-1ll096s">Fri</p> <p class="svelte-1ll096s">Sat</p></article> <article class="svelte-1ll096s"></article></section>');function ml(o,r){Ze(r,!0);let a=pe(r,"display",23,()=>new Date),s=pe(r,"value",23,()=>new Date),l=ze(()=>new Intl.DateTimeFormat(navigator.language,{month:"long",year:"numeric"}).format(a())),f=ze(()=>{const K=[],w=new Date,P=new Date(a().getFullYear(),a().getMonth(),1);P.setDate(P.getDate()-P.getDay());for(let S=0;S<42;S++){const B={date:P.getDate(),month:P.getMonth(),year:P.getFullYear(),outside:!0,today:!1,selected:!1,after:!1};P.getFullYear()===a().getFullYear()&&P.getMonth()===a().getMonth()&&(B.outside=!1),P.getTime()>Date.now()&&(B.after=!0),P.getFullYear()===w.getFullYear()&&P.getMonth()===w.getMonth()&&P.getDate()===w.getDate()&&(B.today=!0),P.getFullYear()===s().getFullYear()&&P.getMonth()===s().getMonth()&&P.getDate()===s().getDate()&&(B.selected=!0),P.setDate(P.getDate()+1),K.push(B)}return K});function h(){let K=a().getMonth(),w=a().getFullYear();w=K===0?w-1:w,K=K===0?11:K-1,a(new Date(w,K,a().getDate()))}function g(){let K=a().getMonth(),w=a().getFullYear();w=K===11?w+1:w,K=(K+1)%12,a(new Date(w,K,a().getDate()))}var x=gl(),I=L(x),j=L(I),M=L(j,!0);R(j);var D=G(j,2);D.__click=h;var H=L(D);Xe(H,{height:"24",icon:"material-symbols:navigate-before",width:"24"}),R(D);var z=G(D,2);z.__click=g;var N=L(z);Xe(N,{height:"24",icon:"material-symbols:navigate-next",width:"24"}),R(z),R(I);var V=G(I,4);Dt(V,21,()=>m(f),xt,(K,w)=>{var P=pl();P.__click=[vl,a,s,r];let S;var B=L(P,!0);R(P),je(W=>{Jt(P,"data-year",m(w).year),Jt(P,"data-month",m(w).month),Jt(P,"data-date",m(w).date),P.disabled=m(w).after,S=Je(P,1,"svelte-1ll096s",null,S,W),ke(B,m(w).date)},[()=>({outside:m(w).outside,today:m(w).today,selected:m(w).selected})]),he(K,P)}),R(V),R(x),je(()=>ke(M,m(l))),he(o,x),$e()}st(["click"]);function yl(o,r,a){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===12?s.setHours(23):s.setHours(s.getHours()-1):s.getHours()===0?s.setHours(11):s.setHours(s.getHours()-1),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function bl(o,r,a){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===23?s.setHours(12):s.setHours(s.getHours()+1):s.getHours()===11?s.setHours(0):s.setHours(s.getHours()+1),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function _l(o,r,a){const s=new Date(r().getTime());s.getHours()>=12&&s.setHours(s.getHours()-12),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function wl(o,r,a){const s=new Date(r().getTime());s.getHours()<12&&s.setHours(s.getHours()+12),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function kl(o,r,a){const s=new Date(r().getTime());s.getMinutes()===0?s.setMinutes(59):s.setMinutes(s.getMinutes()-1),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function xl(o,r,a){const s=new Date(r().getTime());s.getMinutes()===59?s.setMinutes(0):s.setMinutes(s.getMinutes()+1),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}var Dl=me('<article class="svelte-1bevvpj"><div class="time svelte-1bevvpj"><div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div> <p class="svelte-1bevvpj">:</p> <div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div></div> <div class="meridian svelte-1bevvpj"><button type="button">AM</button> <button type="button">PM</button></div></article>');function Sl(o,r){Ze(r,!0);let a=pe(r,"value",23,()=>new Date),s=ze(()=>a().getHours()%12||12),l=ze(()=>a().getMinutes().toString(10).padStart(2,"0")),f=ze(()=>a().getHours()>=12?"PM":"AM");var h=Dl(),g=L(h),x=L(g),I=L(x);I.__click=[bl,a,r];var j=L(I);Xe(j,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),R(I);var M=G(I,2),D=L(M,!0);R(M);var H=G(M,2);H.__click=[yl,a,r];var z=L(H);Xe(z,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),R(H),R(x);var N=G(x,4),V=L(N);V.__click=[xl,a,r];var K=L(V);Xe(K,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),R(V);var w=G(V,2),P=L(w,!0);R(w);var S=G(w,2);S.__click=[kl,a,r];var B=L(S);Xe(B,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),R(S),R(N),R(g);var W=G(g,2),U=L(W);U.__click=[_l,a,r];let ue;var ve=G(U,2);ve.__click=[wl,a,r];let le;R(W),R(h),je((Ee,ye)=>{ke(D,m(s)),ke(P,m(l)),ue=Je(U,1,"svelte-1bevvpj",null,ue,Ee),le=Je(ve,1,"svelte-1bevvpj",null,le,ye)},[()=>({selected:m(f)==="AM"}),()=>({selected:m(f)==="PM"})]),he(o,h),$e()}st(["click"]);function Tl(o,r){ae(r,"calendar")}function El(o,r){ae(r,"clock")}var Cl=me('<article class="svelte-8yzu2w"><header class="svelte-8yzu2w"><button type="button"><p class="svelte-8yzu2w"> </p> <p class="svelte-8yzu2w"> </p></button> <button type="button"><p class="svelte-8yzu2w"> </p></button></header> <!></article>');function _o(o,r){Ze(r,!0);let a=pe(r,"value",23,()=>new Date),s=_e("calendar");function l(U){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(U)}function f(U){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(U)}function h(U){U.setHours(a().getHours()),U.setMinutes(a().getMinutes()),U.setSeconds(a().getSeconds()),a(new Date(U.getTime())),r.onchange&&r.onchange(a())}function g(U){U.setFullYear(a().getFullYear()),U.getMonth(a().getMonth()),U.getDate(a().getDate()),a(new Date(U.getTime())),r.onchange&&r.onchange(a())}var x=Cl(),I=L(x),j=L(I);j.__click=[Tl,s];let M;var D=L(j),H=L(D,!0);R(D);var z=G(D,2),N=L(z,!0);R(z),R(j);var V=G(j,2);V.__click=[El,s];let K;var w=L(V),P=L(w,!0);R(w),R(V),R(I);var S=G(I,2);{var B=U=>{ml(U,{onchange:h,get value(){return a()}})},W=U=>{Sl(U,{onchange:g,get value(){return a()}})};rt(S,U=>{m(s)===null||m(s)==="calendar"?U(B):U(W,!1)})}R(x),je((U,ue,ve,le)=>{M=Je(j,1,"svelte-8yzu2w",null,M,U),ke(H,r.label),ke(N,ue),K=Je(V,1,"svelte-8yzu2w",null,K,ve),ke(P,le)},[()=>({selected:m(s)==="calendar"}),()=>l(a()),()=>({selected:m(s)==="clock"}),()=>f(a())]),he(o,x),$e()}st(["click"]);function Ol(o,r,a,s){r(),a(null),s.oncancel&&s.oncancel()}function Il(o,r,a){r.ondelete&&r.ondelete(a().id)}function Pl(o,r){const a=o.currentTarget.value.trim().length===0?null:o.currentTarget.value;r({...r(),notes:a})}function Al(o,r,a){r.onsave&&r.onsave(a())}var Ml=me('<dialog class="svelte-13glclx"><h3 class="svelte-13glclx"> </h3> <!> <textarea placeholder="Notes" class="svelte-13glclx"></textarea> <footer class="svelte-13glclx"><button class="delete svelte-13glclx" type="button">Delete</button> <button class="cancel svelte-13glclx" type="button">Cancel</button> <button type="button" class="svelte-13glclx">Save</button></footer></dialog>');function jl(o,r){Ze(r,!0);let a=pe(r,"field",3,"started"),s=pe(r,"item",7,null),l=pe(r,"label",3,"Started"),f=pe(r,"title",3,"Edit Fast Start"),h=_e(void 0);function g(S){const B={...s()};B[a()]=new Date(S.getTime()),s({...B})}function x(){m(h).close()}function I(){m(h).showModal()}var j=Ml(),M=L(j),D=L(M,!0);R(M);var H=G(M,2);const z=ze(()=>s()&&s().id&&s().id!==null?s()[a()]:new Date);_o(H,{get label(){return l()},onchange:g,get value(){return m(z)}});var N=G(H,2);Ji(N),N.__input=[Pl,s];var V=G(N,2),K=L(V);K.__click=[Il,r,s];var w=G(K,2);w.__click=[Ol,x,s,r];var P=G(w,2);return P.__click=[Al,r,s],R(V),R(j),ft(j,S=>ae(h,S),()=>m(h)),je(()=>{ke(D,f()),ss(N,s()&&s().id&&s().id!==null?s().notes:"")}),he(o,j),$e({close:x,showModal:I})}st(["input","click"]);var Kl=me('<article class="svelte-1vxkmhw"><p class="svelte-1vxkmhw">Your fasting history<br/>will be displayed here.</p></article>'),ql=me('<li class="header svelte-1vxkmhw"><p class="svelte-1vxkmhw"> </p></li>'),Fl=(o,r,a)=>r(m(a).type,m(a).id),Rl=me('<p class="svelte-1vxkmhw">Started Fast</p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Bl=me('<p class="svelte-1vxkmhw">Water</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Nl=me('<p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Hl=me('<p class="svelte-1vxkmhw">Ended Fast</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Ll=me('<li class="svelte-1vxkmhw"><button type="button" class="svelte-1vxkmhw"><!></button></li>'),zl=me('<ul class="svelte-1vxkmhw"></ul>');function Ul(o,r){Ze(r,!0);let a=pe(r,"items",19,()=>[]);function s(D){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",year:"numeric"}).format(D)}function l(D,H){const z=H.getTime()-D.getTime(),N=Math.floor(z/1e3),V=Math.floor(N/3600),K=Math.floor(N%3600/60);return new Intl.DurationFormat(navigator.language,{style:"short",units:["hour","minute"]}).format({hours:V,minutes:K})}function f(D){return new Intl.DateTimeFormat(navigator.language,{weekday:"long",month:"short",day:"numeric"}).format(D)}function h(D){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(D)}function g(D,H){r.onchange&&r.onchange(D,H)}var x=an(),I=wt(x);{var j=D=>{var H=Kl();he(D,H)},M=D=>{var H=zl();Dt(H,21,a,xt,(z,N)=>{var V=an(),K=wt(V);{var w=S=>{var B=ql(),W=L(B),U=L(W,!0);R(W),R(B),je(ue=>ke(U,ue),[()=>f(m(N).timed)]),he(S,B)},P=S=>{var B=Ll(),W=L(B);W.__click=[Fl,g,N];var U=L(W);{var ue=le=>{var Ee=Rl(),ye=G(wt(Ee),4),be=L(ye,!0);R(ye);var Ne=G(ye,2),Ke=L(Ne,!0);R(Ne),je((Qe,ot)=>{ke(be,Qe),ke(Ke,ot)},[()=>s(m(N).timed),()=>h(m(N).timed)]),he(le,Ee)},ve=(le,Ee)=>{{var ye=Ne=>{var Ke=Bl(),Qe=G(wt(Ke),2),ot=L(Qe);R(Qe);var He=G(Qe,2),ut=L(He,!0);R(He);var Ue=G(He,2),oe=L(Ue,!0);R(Ue),je((ce,fe)=>{ke(ot,`${m(N).volume??""} oz`),ke(ut,ce),ke(oe,fe)},[()=>s(m(N).timed),()=>h(m(N).timed)]),he(Ne,Ke)},be=(Ne,Ke)=>{{var Qe=He=>{var ut=Nl(),Ue=wt(ut),oe=L(Ue,!0);R(Ue);var ce=G(Ue,4),fe=L(ce,!0);R(ce);var qe=G(ce,2),Te=L(qe,!0);R(qe),je((Fe,Pe)=>{ke(oe,m(N).level),ke(fe,Fe),ke(Te,Pe)},[()=>s(m(N).timed),()=>h(m(N).timed)]),he(He,ut)},ot=(He,ut)=>{{var Ue=oe=>{var ce=Hl(),fe=G(wt(ce),2),qe=L(fe,!0);R(fe);var Te=G(fe,2),Fe=L(Te,!0);R(Te);var Pe=G(Te,2),Ye=L(Pe,!0);R(Pe),je((ie,at,it)=>{ke(qe,ie),ke(Fe,at),ke(Ye,it)},[()=>l(m(N).started,m(N).ended),()=>s(m(N).timed),()=>h(m(N).timed)]),he(oe,ce)};rt(He,oe=>{m(N).type==="end"&&oe(Ue)},ut)}};rt(Ne,He=>{m(N).type==="hunger"?He(Qe):He(ot,!1)},Ke)}};rt(le,Ne=>{m(N).type==="water"?Ne(ye):Ne(be,!1)},Ee)}};rt(U,le=>{m(N).type==="start"?le(ue):le(ve,!1)})}R(W),R(B),he(S,B)};rt(K,S=>{m(N).type==="header"?S(w):S(P,!1)})}he(z,V)}),R(H),he(D,H)};rt(I,D=>{a().length===0?D(j):D(M,!1)})}he(o,x),$e()}st(["click"]);var Yl=me('<section class="svelte-1moll0f"><header class="svelte-1moll0f"><h3 class="svelte-1moll0f">Hours</h3></header> <div class="svelte-1moll0f"><!></div> <article class="svelte-1moll0f"><!></article></section>');function Vl(o,r){let a=pe(r,"activity",3,null),s=pe(r,"history",19,()=>[]);pe(r,"levels",19,()=>[]);let l=pe(r,"sun",3,null);var f=Yl(),h=G(L(f),2),g=L(h);Ya(g,{get activity(){return a()},days:7,get onsun(){return r.onsun},get sun(){return l()},get water(){return r.volume}}),R(h);var x=G(h,2),I=L(x);Ul(I,{get items(){return s()},get onchange(){return r.onchange}}),R(x),R(f),he(o,f)}function Wl(o,r,a,s){const l=m(r).getBoundingClientRect();m(a).style.width=l.width-2+"px",ae(s,!m(s))}var Gl=(o,r,a)=>r(m(a)),Ql=me('<li><button type="button" class="svelte-148k8wo"><span class="svelte-148k8wo"> </span> <!></button></li>'),Jl=me('<label class="svelte-148k8wo"><button tabindex="-1" type="button" class="svelte-148k8wo"><span class="svelte-148k8wo"> </span> <!></button> <ul></ul></label>');function Xl(o,r){Ze(r,!0);let a=pe(r,"items",19,()=>[]),s=pe(r,"value",7,0),l=_e(!1),f=_e(void 0),h=_e(void 0),g=ze(()=>a().length===0?"":a().find(w=>w.value===s()).label);sn(()=>(document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}));function x(K){!m(f).contains(K.target)&&!m(h).contains(K.target)&&ae(l,!1)}function I(K){s(K.value),ae(l,!1),r.onchange&&r.onchange(K.value)}var j=Jl(),M=L(j);M.__click=[Wl,f,h,l];var D=L(M),H=L(D,!0);R(D);var z=G(D,2);Xe(z,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),R(M),ft(M,K=>ae(f,K),()=>m(f));var N=G(M,2);let V;Dt(N,21,a,xt,(K,w)=>{var P=Ql();let S;var B=L(P);B.__click=[Gl,I,w];var W=L(B),U=L(W,!0);R(W);var ue=G(W,2);{var ve=le=>{Xe(le,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};rt(ue,le=>{m(w).value===s()&&le(ve)})}R(B),R(P),je(le=>{S=Je(P,1,"svelte-148k8wo",null,S,le),ke(U,m(w).label)},[()=>({selected:s()===m(w).value})]),he(K,P)}),R(N),ft(N,K=>ae(h,K),()=>m(h)),R(j),je(K=>{ke(H,m(g)),V=Je(N,1,"svelte-148k8wo",null,V,K)},[()=>({open:m(l)})]),he(o,j),$e()}st(["click"]);function Zl(o,r,a,s){r(),a(null),s.oncancel&&s.oncancel()}function $l(o,r,a){r.ondelete&&r.ondelete(a().id)}function ec(o,r,a){r.onsave&&r.onsave(a())}var tc=me('<dialog class="svelte-1hqchgg"><h3 class="svelte-1hqchgg">Edit Hunger</h3> <!> <!> <footer class="svelte-1hqchgg"><button class="delete svelte-1hqchgg" type="button">Delete</button> <button class="cancel svelte-1hqchgg" type="button">Cancel</button> <button type="button" class="svelte-1hqchgg">Save</button></footer></dialog>');function nc(o,r){Ze(r,!0);let a=pe(r,"item",7,null),s=pe(r,"levels",19,()=>[]),l=_e(void 0),f=ze(()=>a()&&a().level&&a().level!==null?a().level:5);function h(w){const P=new Date(w.getTime());a({...a(),created:P})}function g(w){const P=w;a({...a(),level:P})}function x(){m(l).close(),a(null)}function I(){m(l).showModal()}var j=tc(),M=G(L(j),2);Xl(M,{get items(){return s()},onchange:g,get value(){return m(f)}});var D=G(M,2);const H=ze(()=>a()&&a().created?a().created:new Date);_o(D,{label:"Checked",onchange:h,get value(){return m(H)}});var z=G(D,2),N=L(z);N.__click=[$l,r,a];var V=G(N,2);V.__click=[Zl,x,a,r];var K=G(V,2);return K.__click=[ec,r,a],R(z),R(j),ft(j,w=>ae(l,w),()=>m(l)),he(o,j),$e({close:x,showModal:I})}st(["click"]);function rc(o,r,a){r()!==0&&(r(0),a.onchange&&a.onchange(r()))}function oc(o,r,a){r()!==1&&(r(1),a.onchange&&a.onchange(r()))}var ac=me('<ul class="svelte-tu3q0a"><li><button type="button">Fasting</button></li> <li><button type="button">Hours</button></li></ul>');function ic(o,r){Ze(r,!0);let a=pe(r,"value",7,0);var s=ac(),l=L(s),f=L(l);let h;f.__click=[rc,a,r],R(l);var g=G(l,2),x=L(g);let I;x.__click=[oc,a,r],R(g),R(s),je((j,M)=>{h=Je(f,1,"fasting svelte-tu3q0a",null,h,j),I=Je(x,1,"hours svelte-tu3q0a",null,I,M)},[()=>({selected:a()===0}),()=>({selected:a()===1})]),he(o,s),$e()}st(["click"]);function sc(o,r){r()}var uc=me('<dialog class="svelte-msa23r"><h3 class="svelte-msa23r">Settings</h3> <article class="svelte-msa23r"><p class="svelte-msa23r">Settings.</p></article> <footer class="svelte-msa23r"><button type="button" class="svelte-msa23r">Done</button></footer></dialog>');function lc(o,r){Ze(r,!0);let a=_e(void 0);function s(){m(a).close()}function l(){m(a).showModal()}var f=uc(),h=G(L(f),4),g=L(h);return g.__click=[sc,s],R(h),R(f),ft(f,x=>ae(a,x),()=>m(a)),he(o,f),$e({close:s,showModal:l})}st(["click"]);function cc(o,r,a,s){const l=m(r).getBoundingClientRect();m(a).style.width=l.width-2+"px",ae(s,!m(s))}var fc=(o,r,a)=>r(m(a)),dc=me('<li><button type="button" class="svelte-148k8wo"><span class="svelte-148k8wo"> </span> <span class="svelte-148k8wo"> </span> <!></button></li>'),hc=me('<label class="svelte-148k8wo"><button tabindex="-1" type="button" class="svelte-148k8wo"><span class="svelte-148k8wo"> </span> <span class="svelte-148k8wo"> </span> <!></button> <ul></ul></label>');function vc(o,r){Ze(r,!0);let a=pe(r,"items",19,()=>[]),s=pe(r,"units",3,"oz"),l=pe(r,"value",7,0),f=_e(!1),h=_e(void 0),g=_e(void 0),x=ze(()=>a().length===0?"":a().find(B=>B.value===l()).label);sn(()=>(document.addEventListener("click",I),()=>{document.removeEventListener("click",I)}));function I(S){!m(h).contains(S.target)&&!m(g).contains(S.target)&&ae(f,!1)}function j(S){l(S.value),ae(f,!1),r.onchange&&r.onchange(S.value)}var M=hc(),D=L(M);D.__click=[cc,h,g,f];var H=L(D),z=L(H,!0);R(H);var N=G(H,2),V=L(N);R(N);var K=G(N,2);Xe(K,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),R(D),ft(D,S=>ae(h,S),()=>m(h));var w=G(D,2);let P;Dt(w,21,a,xt,(S,B)=>{var W=dc();let U;var ue=L(W);ue.__click=[fc,j,B];var ve=L(ue),le=L(ve,!0);R(ve);var Ee=G(ve,2),ye=L(Ee);R(Ee);var be=G(Ee,2);{var Ne=Ke=>{Xe(Ke,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};rt(be,Ke=>{m(B).value===l()&&Ke(Ne)})}R(ue),R(W),je(Ke=>{U=Je(W,1,"svelte-148k8wo",null,U,Ke),ke(le,m(B).label),ke(ye,`${m(B).value??""} oz`)},[()=>({selected:l()===m(B).value})]),he(S,W)}),R(w),ft(w,S=>ae(g,S),()=>m(g)),R(M),je(S=>{ke(z,m(x)),ke(V,`${l()??""} ${s()??""}`),P=Je(w,1,"svelte-148k8wo",null,P,S)},[()=>({open:m(f)})]),he(o,M),$e()}st(["click"]);function pc(o,r,a,s){r(),a(null),s.oncancel&&s.oncancel()}function gc(o,r,a){r.ondelete&&r.ondelete(a().id)}function mc(o,r,a){r.onsave&&r.onsave(a())}var yc=me('<dialog class="svelte-1kewhwu"><h3 class="svelte-1kewhwu">Edit Water</h3> <!> <!> <footer class="svelte-1kewhwu"><button class="delete svelte-1kewhwu" type="button">Delete</button> <button class="cancel svelte-1kewhwu" type="button">Cancel</button> <button type="button" class="svelte-1kewhwu">Save</button></footer></dialog>');function bc(o,r){Ze(r,!0);let a=pe(r,"item",7,null),s=pe(r,"options",19,()=>[]),l=pe(r,"units",3,"oz"),f=_e(void 0),h=ze(()=>a()&&a().volume&&a().volume!==null?a().volume:8);function g(P){const S=new Date(P.getTime());a({...a(),created:S})}function x(P){const S=P;a({...a(),volume:S})}function I(){m(f).close(),a(null)}function j(){m(f).showModal()}var M=yc(),D=G(L(M),2);vc(D,{get items(){return s()},onchange:x,get units(){return l()},get value(){return m(h)}});var H=G(D,2);const z=ze(()=>a()&&a().created?a().created:new Date);_o(H,{label:"Finished",onchange:g,get value(){return m(z)}});var N=G(H,2),V=L(N);V.__click=[gc,r,a];var K=G(V,2);K.__click=[pc,I,a,r];var w=G(K,2);return w.__click=[mc,r,a],R(N),R(M),ft(M,P=>ae(f,P),()=>m(f)),he(o,M),$e({close:I,showModal:j})}st(["click"]);var _c=me('<main class="svelte-odvko0"><header class="svelte-odvko0"><span></span> <!> <button type="button" class="svelte-odvko0"><!></button></header> <section class="svelte-odvko0"><article class="svelte-odvko0"><!></article> <article class="svelte-odvko0"><!></article></section></main> <!> <!> <!> <!>',1);function Kc(o,r){Ze(r,!0);const a=new vs,s=ms;let l=0,f=_e(null),h=_e(0),g=_e(Jr([])),x=_e(void 0),I=_e("started"),j=_e(null),M=_e("Started"),D=_e("Edit Fast Started"),H=_e(void 0),z=_e(null),N=_e(5),V=_e(null),K=_e(0),w=_e(void 0),P=_e(null),S=_e(null),B=_e(null),W=_e(0),U=_e(void 0),ue=_e(null),ve=Jr([{value:1,label:"Starving"},{value:2,label:"Very hungry"},{value:3,label:"Pretty hungry"},{value:4,label:"Snacky"},{value:5,label:"Satisfied"},{value:6,label:"Slightly full"},{value:7,label:"Uncomfortable"},{value:8,label:"Stuffed"},{value:9,label:"Stomach aches"},{value:10,label:"Sick"}]),le=Jr([{value:8,label:"Cup"},{value:12,label:"Can"},{value:16,label:"Bottle"},{value:20,label:"Medium"},{value:30,label:"Gatorade"},{value:32,label:"Big Q"},{value:44,label:"QT Large"},{value:52,label:"Extra Large"}]);sn(()=>{let ne=window.localStorage.getItem("fh_screen");ae(K,ne===null?0:parseInt(ne),!0);let de=window.localStorage.getItem("fh_duration");ae(h,de===null?0:parseInt(de),!0);const ge=window.localStorage.getItem("fh_latitude");ge!==null&&ge!=="DENIED"&&Qe(),setInterval(()=>{if(l===60){ye();const Ae=window.localStorage.getItem("fh_latitude");Ae!==null&&Ae!=="DENIED"&&Qe(),l=0}else l=l+1;m(P)!==null&&ae(V,Date.now(),!0)},1e3),Ke(),ye(),Ne(),ot(),be()});function Ee(ne){const de=ne.getFullYear(),ge=String(ne.getMonth()+1).padStart(2,"0"),Ae=String(ne.getDate()).padStart(2,"0");return`${de}-${ge}-${Ae}`}function ye(ne=7){a.browseHistory().then(de=>{const ge={},Ae=new Date,Ie=new Date(Ae.getFullYear(),Ae.getMonth(),Ae.getDate()),Re=new Date(Ie);if(Re.setDate(Ie.getDate()-(ne-1)),!Array.isArray(de)||de.length===0){const We=new Date(Re);for(;We<=Ie;){const X=Ee(We);ge[X]=Array(24).fill(0),We.setDate(We.getDate()+1)}}else{for(const X of de){const Xt=new Date(X.started),Fn=X.ended?new Date(X.ended):new Date,un=new Date(Xt.getTime());un.setSeconds(0,0);const bn=new Date(Fn.getTime());bn.setSeconds(0,0);let It=new Date(un);for(;It<bn;){const _n=Ee(It),Rn=new Date(It.getFullYear(),It.getMonth(),It.getDate());if(Rn>=Re&&Rn<=Ie){const Lt=It.getHours();ge[_n]||(ge[_n]=Array(24).fill(0)),ge[_n][Lt]+=1}It.setMinutes(It.getMinutes()+1)}}for(const X in ge)ge[X]=ge[X].map(Xt=>+(Math.min(Xt,60)/60).toFixed(6));const We=new Date(Re);for(;We<=Ie;){const X=Ee(We);ge[X]||(ge[X]=Array(24).fill(0)),We.setDate(We.getDate()+1)}}const De=Object.keys(ge).sort((We,X)=>X.localeCompare(We)),$={};for(const We of De)$[We]=ge[We];const Tt=Array(24).fill(0);for(const We of Array(24).keys())for(const X of De)Tt[We]+=$[X][We];const Ft=Tt.map(We=>+(We/ne).toFixed(6));ae(f,{daily:$,average:Ft},!0)})}function be(){a.browseHistory().then(ne=>{let de=null,ge=structuredClone(ne);ge.forEach(Ie=>{Ie.type="start",Ie.timed=new Date(Ie.started.getTime())});let Ae=structuredClone(ne);Ae=Ae.filter(Ie=>Ie.ended!==null),Ae.forEach(Ie=>{Ie.type="end",Ie.timed=new Date(Ie.ended.getTime())}),ge=ge.concat(Ae),de=[...ge],a.browseHunger().then(Ie=>(Ie=Ie.map(Re=>{const De=ve.find($=>$.value===Re.level);return Re.level=De.label,Re.timed=new Date(Re.created.getTime()),Re}),de=de.concat(Ie),a.browseWater())).then(Ie=>{Ie=Ie.map(De=>(De.timed=new Date(De.created.getTime()),De)),de=de.concat(Ie),de.sort((De,$)=>De.timed.getTime()<$.timed.getTime()?1:De.timed.getTime()>$.timed.getTime()?-1:0);const Re=[];for(let De=0;De<de.length;De++){const $=new Date(de[De].timed.getTime());$.setHours(23),$.setMinutes(59),$.setSeconds(59),$.setMilliseconds(999),Re.length===0?Re.push({type:"header",timed:$}):(Re[Re.length-1].timed.getDate()!==de[De].timed.getDate()||Re[Re.length-1].timed.getMonth()!==de[De].timed.getMonth()||Re[Re.length-1].timed.getFullYear()!==de[De].timed.getFullYear())&&Re.push({type:"header",timed:$})}de=de.concat(Re),de.sort((De,$)=>De.timed.getTime()<$.timed.getTime()?1:De.timed.getTime()>$.timed.getTime()?-1:0),ae(g,[...de],!0)})})}function Ne(){a.browseHunger(!0).then(ne=>{if(ne===null)ae(N,5);else{const de=new Date,ge=new Date(ne.created);de.getFullYear()===ge.getFullYear()&&de.getMonth()===ge.getMonth()&&de.getDate()===ge.getDate()?ae(N,ne.level,!0):ae(N,5)}})}function Ke(){a.browseHistory().then(ne=>{ne.length===0&&(ae(P,null),ae(V,null)),ne.sort((de,ge)=>de.started.getTime()>ge.started.getTime()?-1:de.started.getTime()<ge.started.getTime()?1:0),ne[0].ended===null&&(ae(P,new Date(ne[0].started.getTime()),!0),ae(V,Date.now(),!0))})}function Qe(){const ne=parseFloat(window.localStorage.getItem("fh_latitude")),de=parseFloat(window.localStorage.getItem("fh_longitude")),ge=new Date;let Ae=null,Ie=s.getTimes(ge,ne,de),Re=null;if(Date.now()<Ie.sunrise.getTime())Re=new Date(Ie.sunrise.getTime()),Ae="material-symbols:wb-sunny-outline-rounded";else if(Date.now()>Ie.sunrise.getTime()&&Date.now()<Ie.sunset.getTime())Re=new Date(Ie.sunset.getTime()),Ae="material-symbols:moon-stars-outline-rounded";else{const De=new Date;De.setDate(ge.getDate()+1),Ie=s.getTimes(De,ne,de),Re=new Date(Ie.sunrise.getTime()),Ae="material-symbols:wb-sunny-outline-rounded"}ae(S,{icon:Ae,timing:Re},!0)}function ot(){a.browseWater(!0).then(ne=>{const de=ne.reduce((ge,Ae)=>ge+Ae.volume,0);return ae(W,de,!0),a.browseWater()}).then(ne=>{const de=new Date;de.setHours(0,0,0,0);const ge={};for(const{created:De,volume:$}of ne){const Tt=He(De);ge[Tt]=(ge[Tt]||0)+$}const Ae=[];for(let De=0;De<7;De++){const $=new Date(de.getTime());$.setDate(de.getDate()-De);const Tt=He($);Ae.push({created:new Date($.getTime()),volume:ge[Tt]||0})}const Re=Ae.reduce((De,{volume:$})=>De+$,0)/Ae.length;ae(B,{average:Re,daily:[...Ae]},!0)})}function He(ne){const de=ne.getFullYear(),ge=String(ne.getMonth()+1).padStart(2,"0"),Ae=String(ne.getDate()).padStart(2,"0");return`${de}-${ge}-${Ae}`}function ut(ne){ae(h,ne,!0),window.localStorage.setItem("fh_duration",m(h))}function Ue(){ae(P,null),ae(V,null),a.browseHistoryByEnd().then(ne=>(ne.ended=new Date,a.editHistory(ne))).then(()=>{Ke(),ye(),be()})}function oe(){a.addHistory().then(()=>{Ke(),ye(),be()})}function ce(ne){m(P)!==null&&m(j).started.getTime()===m(P).getTime()&&(ae(P,null),ae(V,null)),a.deleteHistory(ne).then(()=>{m(x).close(),ae(j,null),Ke(),ye(),be()})}function fe(ne){a.editHistory(ne).then(()=>{m(x).close(),ae(j,null),Ke(),ye(),be()})}function qe(ne,de){ne==="start"?(ae(I,"started"),ae(M,"Started"),ae(D,"Edit Fast Started"),a.readHistory(de).then(ge=>{ae(j,{...ge},!0),m(x).showModal()})):ne==="end"?(ae(I,"ended"),ae(M,"Ended"),ae(D,"Edit Fast Ended"),a.readHistory(de).then(ge=>{ae(j,{...ge},!0),m(x).showModal()})):ne==="water"?a.readWater(de).then(ge=>{ae(ue,{...ge},!0),m(U).showModal()}):ne==="hunger"&&a.readHunger(de).then(ge=>{ae(z,{...ge},!0),m(H).showModal()})}function Te(ne){a.addHunger(ne).then(de=>{Ne(),be()})}function Fe(ne){a.deleteHunger(ne).then(()=>{m(H).close(),ae(z,null),Ne(),be()})}function Pe(ne){a.editHunger(ne).then(de=>{m(H).close(),ae(z,null),Ne(),be()})}function Ye(ne){m(K)!==ne&&(window.localStorage.setItem("fh_screen",ne),ae(K,ne,!0))}function ie(){m(w).showModal()}function at(){confirm("Sunrise/set (important for religious observations) needs to know your location? Enable location detection?")?navigator.geolocation.getCurrentPosition(de=>{window.localStorage.setItem("fh_latitude",de.coords.latitude),window.localStorage.setItem("fh_longitude",de.coords.longitude),Qe()}):window.localStorage.setItem("fh_latitude","DENIED")}function it(ne){a.addWater(ne).then(de=>{ot(),be()})}function Se(ne){a.deleteWater(ne).then(()=>{m(U).close(),ae(ue,null),ot(),be()})}function mt(ne){a.editWater(ne).then(de=>{m(U).close(),ae(ue,null),ot(),be()})}var yt=_c(),et=wt(yt),Ot=L(et),bt=G(L(Ot),2);ic(bt,{onchange:Ye,get value(){return m(K)}});var dt=G(bt,2);dt.__click=ie;var St=L(dt);Xe(St,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),R(dt),R(Ot);var kt=G(Ot,2),Le=L(kt),qt=L(Le);hl(qt,{get activity(){return m(f)},get duration(){return m(h)},get hunger(){return m(N)},get levels(){return ve},get now(){return m(V)},onduration:ut,onend:Ue,onhunger:Te,onsettings:ie,onstart:oe,onsun:at,onwater:it,get started(){return m(P)},get sun(){return m(S)},get volume(){return m(B)},get volumes(){return le},get water(){return m(W)}}),R(Le);var Nt=G(Le,2),qn=L(Nt);Vl(qn,{get activity(){return m(f)},get history(){return m(g)},get levels(){return ve},onchange:qe,onsun:at,get sun(){return m(S)},get volume(){return m(B)}}),R(Nt),R(kt),R(et);var Ht=G(et,2);ft(jl(Ht,{get field(){return m(I)},get item(){return m(j)},get label(){return m(M)},ondelete:ce,onsave:fe,get title(){return m(D)}}),ne=>ae(x,ne,!0),()=>m(x));var At=G(Ht,2);ft(nc(At,{get item(){return m(z)},get levels(){return ve},ondelete:Fe,onsave:Pe}),ne=>ae(H,ne,!0),()=>m(H));var Mt=G(At,2);ft(bc(Mt,{get item(){return m(ue)},ondelete:Se,onsave:mt,get options(){return le}}),ne=>ae(U,ne,!0),()=>m(U));var yn=G(Mt,2);ft(lc(yn,{}),ne=>ae(w,ne,!0),()=>m(w)),je(()=>Jt(kt,"data-screen",m(K)===0?"fasting":"hours")),he(o,yt),$e()}st(["click"]);export{Kc as component};
