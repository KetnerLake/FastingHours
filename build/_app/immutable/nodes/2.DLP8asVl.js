import"../chunks/CWj6FrbW.js";import{s as be,o as $o,a as Yi}from"../chunks/Bw5SblC_.js";import{L as ei,aA as Wi,aE as Vi,z as Qi,b as Gi,aF as ti,q as Qn,h as St,l as mn,d as Ur,a0 as P,aj as Xi,a5 as Ji,a6 as Zi,a7 as Mo,s as Br,k as Lt,C as ni,r as $i,a8 as ri,i as oi,a9 as ea,aG as Nr,x as ii,a4 as ta,D as Yr,aH as Jr,aI as Ko,aJ as Zr,au as na,aK as Fo,aL as ra,aM as oa,w as ia,aN as aa,j as sa,aO as ua,o as ai,_ as qe,aP as la,u as ca,p as fa,g as qo,e as da,A as nt,V as _e,a as he,F as rt,Z as re,Y as R,$ as q,aQ as Gn,c as bn,f as ft,av as Qe,I as ha,X as je,W as ue,aR as va,aS as pa,ah as Xn}from"../chunks/DRc7Yoe1.js";import{d as pt}from"../chunks/DsYsQ4cv.js";import{a as Ro,b as Bo,s as Jn,c as Yt,r as ya,d as ga}from"../chunks/bqaKyPmf.js";import{p as Se,i as it,r as ma,b as At}from"../chunks/C0Ly_kSk.js";const ba=[];function Hr(s,o=!1){return Zn(s,new Map,"",ba)}function Zn(s,o,i,u,f=null){if(typeof s=="object"&&s!==null){var v=o.get(s);if(v!==void 0)return v;if(s instanceof Map)return new Map(s);if(s instanceof Set)return new Set(s);if(ei(s)){var p=Array(s.length);o.set(s,p),f!==null&&o.set(f,p);for(var D=0;D<s.length;D+=1){var O=s[D];D in s&&(p[D]=Zn(O,o,i,u))}return p}if(Wi(s)===Vi){p={},o.set(s,p),f!==null&&o.set(f,p);for(var M in s)p[M]=Zn(s[M],o,i,u);return p}if(s instanceof Date)return structuredClone(s);if(typeof s.toJSON=="function")return Zn(s.toJSON(),o,i,u,s)}if(s instanceof EventTarget)return s;try{return structuredClone(s)}catch{return s}}function zt(s,o){return o}function _a(s,o,i,u){for(var f=[],v=o.length,p=0;p<v;p++)oa(o[p].e,f,!0);var D=v>0&&f.length===0&&i!==null;if(D){var O=i.parentNode;ia(O),O.append(i),u.clear(),jt(s,o[0].prev,o[v-1].next)}aa(f,()=>{for(var M=0;M<v;M++){var A=o[M];D||(u.delete(A.k),jt(s,A.prev,A.next)),sa(A.e,!D)}})}function Ut(s,o,i,u,f,v=null){var p=s,D={flags:o,items:new Map,first:null},O=(o&ti)!==0;if(O){var M=s;p=St?Qn(mn(M)):M.appendChild(Qi())}St&&Ur();var A=null,K=!1,C=Xi(()=>{var H=i();return ei(H)?H:H==null?[]:ii(H)});Gi(()=>{var H=P(C),B=H.length;if(K&&B===0)return;K=B===0;let U=!1;if(St){var X=Ji(p)===Zi;X!==(B===0)&&(p=Mo(),Qn(p),Br(!1),U=!0)}if(St){for(var Y=null,j,N=0;N<B;N++){if(Lt.nodeType===ni&&Lt.data===$i){p=Lt,U=!0,Br(!1);break}var F=H[N],$=u(F,N);j=si(Lt,D,Y,null,F,$,N,f,o,i),D.items.set($,j),Y=j}B>0&&Qn(Mo())}St||wa(H,D,p,f,o,u,i),v!==null&&(B===0?A?ri(A):A=oi(()=>v(p)):A!==null&&ea(A,()=>{A=null})),U&&Br(!0),P(C)}),St&&(p=Lt)}function wa(s,o,i,u,f,v,p){var Re,He,Ue,we;var D=(f&ra)!==0,O=(f&(Jr|Zr))!==0,M=s.length,A=o.items,K=o.first,C=K,H,B=null,U,X=[],Y=[],j,N,F,$;if(D)for($=0;$<M;$+=1)j=s[$],N=v(j,$),F=A.get(N),F!==void 0&&((Re=F.a)==null||Re.measure(),(U??(U=new Set)).add(F));for($=0;$<M;$+=1){if(j=s[$],N=v(j,$),F=A.get(N),F===void 0){var ee=C?C.e.nodes_start:i;B=si(ee,o,B,B===null?o.first:B.next,j,N,$,u,f,p),A.set(N,B),X=[],Y=[],C=B.next;continue}if(O&&xa(F,j,$,f),(F.e.f&Nr)!==0&&(ri(F.e),D&&((He=F.a)==null||He.unfix(),(U??(U=new Set)).delete(F))),F!==C){if(H!==void 0&&H.has(F)){if(X.length<Y.length){var G=Y[0],ae;B=G.prev;var ge=X[0],le=X[X.length-1];for(ae=0;ae<X.length;ae+=1)No(X[ae],G,i);for(ae=0;ae<Y.length;ae+=1)H.delete(Y[ae]);jt(o,ge.prev,le.next),jt(o,B,ge),jt(o,le,G),C=G,B=le,$-=1,X=[],Y=[]}else H.delete(F),No(F,C,i),jt(o,F.prev,F.next),jt(o,F,B===null?o.first:B.next),jt(o,B,F),B=F;continue}for(X=[],Y=[];C!==null&&C.k!==N;)(C.e.f&Nr)===0&&(H??(H=new Set)).add(C),Y.push(C),C=C.next;if(C===null)continue;F=C}X.push(F),B=F,C=F.next}if(C!==null||H!==void 0){for(var Te=H===void 0?[]:ii(H);C!==null;)(C.e.f&Nr)===0&&Te.push(C),C=C.next;var Ee=Te.length;if(Ee>0){var Ae=(f&ti)!==0&&M===0?i:null;if(D){for($=0;$<Ee;$+=1)(Ue=Te[$].a)==null||Ue.measure();for($=0;$<Ee;$+=1)(we=Te[$].a)==null||we.fix()}_a(o,Te,Ae,A)}}D&&ta(()=>{var de;if(U!==void 0)for(F of U)(de=F.a)==null||de.apply()}),Yr.first=o.first&&o.first.e,Yr.last=B&&B.e}function xa(s,o,i,u){(u&Jr)!==0&&Ko(s.v,o),(u&Zr)!==0?Ko(s.i,i):s.i=i}function si(s,o,i,u,f,v,p,D,O,M){var A=(O&Jr)!==0,K=(O&ua)===0,C=A?K?na(f,!1,!1):Fo(f):f,H=(O&Zr)===0?p:Fo(p),B={i:H,v:C,k:v,a:null,e:null,prev:i,next:u};try{return B.e=oi(()=>D(s,C,H,M),St),B.e.prev=i&&i.e,B.e.next=u&&u.e,i===null?o.first=B:(i.next=B,i.e.next=B.e),u!==null&&(u.prev=B,u.e.prev=B.e),B}finally{}}function No(s,o,i){for(var u=s.next?s.next.e.nodes_start:i,f=o?o.e.nodes_start:i,v=s.e.nodes_start;v!==u;){var p=ai(v);f.before(v),v=p}}function jt(s,o,i){o===null?s.first=i:(o.next=i,o.e.next=i&&i.e),i!==null&&(i.prev=o,i.e.prev=o&&o.e)}function ka(s,o,i=!1,u=!1,f=!1){var v=s,p="";qe(()=>{var D=Yr;if(p===(p=o()??"")){St&&Ur();return}if(D.nodes_start!==null&&(la(D.nodes_start,D.nodes_end),D.nodes_start=D.nodes_end=null),p!==""){if(St){Lt.data;for(var O=Ur(),M=O;O!==null&&(O.nodeType!==ni||O.data!=="");)M=O,O=ai(O);if(O===null)throw ca(),fa;qo(Lt,M),v=Qn(O);return}var A=p+"";i?A=`<svg>${A}</svg>`:u&&(A=`<math>${A}</math>`);var K=da(A);if((i||u)&&(K=mn(K)),qo(mn(K),K.lastChild),i||u)for(;mn(K);)v.before(mn(K));else v.before(K)}})}var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sa(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var $n={exports:{}},Ta=$n.exports,Ho;function Ea(){return Ho||(Ho=1,function(s,o){(function(i,u){s.exports=u()})(Ta,function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(e,t)},u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function f(e,t,n){for(var r,a=0,l=t.length;a<l;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Da,p=Object.keys,D=Array.isArray;function O(e,t){return typeof t!="object"||p(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||v.Promise||(v.Promise=Promise);var M=Object.getPrototypeOf,A={}.hasOwnProperty;function K(e,t){return A.call(e,t)}function C(e,t){typeof t=="function"&&(t=t(M(e))),(typeof Reflect>"u"?p:Reflect.ownKeys)(t).forEach(function(n){B(e,n,t[n])})}var H=Object.defineProperty;function B(e,t,n,r){H(e,t,O(n&&K(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function U(e){return{from:function(t){return e.prototype=Object.create(t.prototype),B(e.prototype,"constructor",e),{extend:C.bind(null,e.prototype)}}}}var X=Object.getOwnPropertyDescriptor,Y=[].slice;function j(e,t,n){return Y.call(e,t,n)}function N(e,t){return t(e)}function F(e){if(!e)throw new Error("Assertion Failed")}function $(e){v.setImmediate?setImmediate(e):setTimeout(e,0)}function ee(e,t){if(typeof t=="string"&&K(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,a=t.length;r<a;++r){var l=ee(e,t[r]);n.push(l)}return n}var c=t.indexOf(".");if(c!==-1){var d=e[t.substr(0,c)];return d==null?void 0:ee(d,t.substr(c+1))}}function G(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){F(typeof n!="string"&&"length"in n);for(var r=0,a=t.length;r<a;++r)G(e,t[r],n[r])}else{var l,c,d=t.indexOf(".");d!==-1?(l=t.substr(0,d),(c=t.substr(d+1))===""?n===void 0?D(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=n:G(d=!(d=e[l])||!K(e,l)?e[l]={}:d,c,n)):n===void 0?D(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ae(e){var t,n={};for(t in e)K(e,t)&&(n[t]=e[t]);return n}var ge=[].concat;function le(e){return ge.apply([],e)}var De="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(le([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return v[e]}),Te=new Set(De.map(function(e){return v[e]})),Ee=null;function Ae(e){return Ee=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var r=Ee.get(n);if(r)return r;if(D(n)){r=[],Ee.set(n,r);for(var a=0,l=n.length;a<l;++a)r.push(t(n[a]))}else if(Te.has(n.constructor))r=n;else{var c,d=M(n);for(c in r=d===Object.prototype?{}:Object.create(d),Ee.set(n,r),n)K(n,c)&&(r[c]=t(n[c]))}return r}(e),Ee=null,e}var Re={}.toString;function He(e){return Re.call(e).slice(8,-1)}var Ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",we=typeof Ue=="symbol"?function(e){var t;return e!=null&&(t=e[Ue])&&t.apply(e)}:function(){return null};function de(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Le={};function Ke(e){var t,n,r,a;if(arguments.length===1){if(D(e))return e.slice();if(this===Le&&typeof e=="string")return[e];if(a=we(e)){for(n=[];!(r=a.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var $e=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Oe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ct=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Oe),et={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ge(e,t){this.name=e,this.message=t}function _t(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,a){return a.indexOf(n)===r}).join(`
`)}function at(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=_t(e,t)}function ot(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=_t(e,this.failures)}U(Ge).from(Error).extend({toString:function(){return this.name+": "+this.message}}),U(at).from(Ge),U(ot).from(Ge);var lt=ct.reduce(function(e,t){return e[t]=t+"Error",e},{}),Wt=Ge,oe=ct.reduce(function(e,t){var n=t+"Error";function r(a,l){this.name=n,a?typeof a=="string"?(this.message="".concat(a).concat(l?`
 `+l:""),this.inner=l||null):typeof a=="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=et[t]||n,this.inner=null)}return U(r).from(Wt),e[t]=r,e},{});oe.Syntax=SyntaxError,oe.Type=TypeError,oe.Range=RangeError;var Vt=Oe.reduce(function(e,t){return e[t+"Error"]=oe[t],e},{}),yt=ct.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=oe[t]),e},{});function xe(){}function Mt(e){return e}function wn(e,t){return e==null||e===Mt?t:function(n){return t(e(n))}}function wt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function xn(e,t){return e===xe?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var l=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?wt(r,this.onsuccess):r),a&&(this.onerror=this.onerror?wt(a,this.onerror):a),l!==void 0?l:n}}function kn(e,t){return e===xe?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?wt(n,this.onsuccess):n),r&&(this.onerror=this.onerror?wt(r,this.onerror):r)}}function Dn(e,t){return e===xe?t:function(n){var r=e.apply(this,arguments);O(n,r);var a=this.onsuccess,l=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?wt(a,this.onsuccess):a),l&&(this.onerror=this.onerror?wt(l,this.onerror):l),r===void 0?n===void 0?void 0:n:O(r,n)}}function ar(e,t){return e===xe?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function ie(e,t){return e===xe?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,a=arguments.length,l=new Array(a);a--;)l[a]=arguments[a];return n.then(function(){return t.apply(r,l)})}return t.apply(this,arguments)}}yt.ModifyError=at,yt.DexieError=Ge,yt.BulkError=ot;var se=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function me(e){se=e}var Ye={},Ce=100,De=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,M(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,M(t),e]}(),Oe=De[0],ct=De[1],De=De[2],ct=ct&&ct.then,Pe=Oe&&Oe.constructor,Qt=!!De,Kt=function(e,t){xt.push([e,t]),ze&&(queueMicrotask(wi),ze=!1)},Fe=!0,ze=!0,ht=[],Gt=[],Xt=Mt,vt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:xe,pgp:!1,env:{},finalize:xe},te=vt,xt=[],gt=0,Jt=[];function Z(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=te;if(typeof e!="function"){if(e!==Ye)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ur(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,a){try{a(function(l){if(r._state===null){if(l===r)throw new TypeError("A promise cannot be resolved with itself.");var c=r._lib&&Zt();l&&typeof l.then=="function"?n(r,function(d,y){l instanceof Z?l._then(d,y):l.then(d,y)}):(r._state=!0,r._value=l,ro(r)),c&&$t()}},ur.bind(null,r))}catch(l){ur(r,l)}}(this,e)}var sr={get:function(){var e=te,t=On;function n(r,a){var l=this,c=!e.global&&(e!==te||t!==On),d=c&&!Et(),y=new Z(function(m,w){lr(l,new no(io(r,e,c,d),io(a,e,c,d),m,w,e))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return n.prototype=Ye,n},set:function(e){B(this,"then",e&&e.prototype===Ye?sr:{get:function(){return e},set:sr.set})}};function no(e,t,n,r,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=a}function ur(e,t){var n,r;Gt.push(t),e._state===null&&(n=e._lib&&Zt(),t=Xt(t),e._state=!1,e._value=t,r=e,ht.some(function(a){return a._value===r._value})||ht.push(r),ro(e),n&&$t())}function ro(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)lr(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),gt===0&&(++gt,Kt(function(){--gt==0&&cr()},[]))}function lr(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++gt,Kt(_i,[n,e,t])}else e._listeners.push(t)}function _i(e,t,n){try{var r,a=t._value;!t._state&&Gt.length&&(Gt=[]),r=se&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),t._state||Gt.indexOf(a)!==-1||function(l){for(var c=ht.length;c;)if(ht[--c]._value===l._value)return ht.splice(c,1)}(t),n.resolve(r)}catch(l){n.reject(l)}finally{--gt==0&&cr(),--n.psd.ref||n.psd.finalize()}}function wi(){Ft(vt,function(){Zt()&&$t()})}function Zt(){var e=Fe;return ze=Fe=!1,e}function $t(){var e,t,n;do for(;0<xt.length;)for(e=xt,xt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(0<xt.length);ze=Fe=!0}function cr(){var e=ht;ht=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Jt.slice(0),n=t.length;n;)t[--n]()}function Sn(e){return new Z(Ye,!1,e)}function Me(e,t){var n=te;return function(){var r=Zt(),a=te;try{return Ot(n,!0),e.apply(this,arguments)}catch(l){t&&t(l)}finally{Ot(a,!1),r&&$t()}}}C(Z.prototype,{then:sr,_then:function(e,t){lr(this,new no(null,null,e,t,te))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(r){return(r instanceof t?n:Sn)(r)}):this.then(null,function(r){return(r&&r.name===t?n:Sn)(r)})},finally:function(e){return this.then(function(t){return Z.resolve(e()).then(function(){return t})},function(t){return Z.resolve(e()).then(function(){return Sn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new Z(function(r,a){var l=setTimeout(function(){return a(new oe.Timeout(t))},e);n.then(r,a).finally(clearTimeout.bind(null,l))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&B(Z.prototype,Symbol.toStringTag,"Dexie.Promise"),vt.env=oo(),C(Z,{all:function(){var e=Ke.apply(null,arguments).map(Cn);return new Z(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(a,l){return Z.resolve(a).then(function(c){e[l]=c,--r||t(e)},n)})})},resolve:function(e){return e instanceof Z?e:e&&typeof e.then=="function"?new Z(function(t,n){e.then(t,n)}):new Z(Ye,!0,e)},reject:Sn,race:function(){var e=Ke.apply(null,arguments).map(Cn);return new Z(function(t,n){e.map(function(r){return Z.resolve(r).then(t,n)})})},PSD:{get:function(){return te},set:function(e){return te=e}},totalEchoes:{get:function(){return On}},newPSD:Tt,usePSD:Ft,scheduler:{get:function(){return Kt},set:function(e){Kt=e}},rejectionMapper:{get:function(){return Xt},set:function(e){Xt=e}},follow:function(e,t){return new Z(function(n,r){return Tt(function(a,l){var c=te;c.unhandleds=[],c.onunhandled=l,c.finalize=wt(function(){var d,y=this;d=function(){y.unhandleds.length===0?a():l(y.unhandleds[0])},Jt.push(function m(){d(),Jt.splice(Jt.indexOf(m),1)}),++gt,Kt(function(){--gt==0&&cr()},[])},c.finalize),e()},t,n,r)})}}),Pe&&(Pe.allSettled&&B(Z,"allSettled",function(){var e=Ke.apply(null,arguments).map(Cn);return new Z(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(a,l){return Z.resolve(a).then(function(c){return r[l]={status:"fulfilled",value:c}},function(c){return r[l]={status:"rejected",reason:c}}).then(function(){return--n||t(r)})})})}),Pe.any&&typeof AggregateError<"u"&&B(Z,"any",function(){var e=Ke.apply(null,arguments).map(Cn);return new Z(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,a=new Array(r);e.forEach(function(l,c){return Z.resolve(l).then(function(d){return t(d)},function(d){a[c]=d,--r||n(new AggregateError(a))})})})}),Pe.withResolvers&&(Z.withResolvers=Pe.withResolvers));var We={awaits:0,echoes:0,id:0},xi=0,Tn=[],En=0,On=0,ki=0;function Tt(e,t,n,r){var a=te,l=Object.create(a);return l.parent=a,l.ref=0,l.global=!1,l.id=++ki,vt.env,l.env=Qt?{Promise:Z,PromiseProp:{value:Z,configurable:!0,writable:!0},all:Z.all,race:Z.race,allSettled:Z.allSettled,any:Z.any,resolve:Z.resolve,reject:Z.reject}:{},t&&O(l,t),++a.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Ft(l,e,n,r),l.ref===0&&l.finalize(),r}function en(){return We.id||(We.id=++xi),++We.awaits,We.echoes+=Ce,We.id}function Et(){return!!We.awaits&&(--We.awaits==0&&(We.id=0),We.echoes=We.awaits*Ce,!0)}function Cn(e){return We.echoes&&e&&e.constructor===Pe?(en(),e.then(function(t){return Et(),t},function(t){return Et(),Be(t)})):e}function Di(){var e=Tn[Tn.length-1];Tn.pop(),Ot(e,!1)}function Ot(e,t){var n,r=te;(t?!We.echoes||En++&&e===te:!En||--En&&e===te)||queueMicrotask(t?(function(a){++On,We.echoes&&--We.echoes!=0||(We.echoes=We.awaits=We.id=0),Tn.push(te),Ot(a,!0)}).bind(null,e):Di),e!==te&&(te=e,r===vt&&(vt.env=oo()),Qt&&(n=vt.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(v,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function oo(){var e=v.Promise;return Qt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ft(e,t,n,r,a){var l=te;try{return Ot(e,!0),t(n,r,a)}finally{Ot(l,!1)}}function io(e,t,n,r){return typeof e!="function"?e:function(){var a=te;n&&en(),Ot(t,!0);try{return e.apply(this,arguments)}finally{Ot(a,!1),r&&queueMicrotask(Et)}}}function fr(e){Promise===Pe&&We.echoes===0?En===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+ct).indexOf("[native code]")===-1&&(en=Et=xe);var Be=Z.reject,qt="￿",kt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ao="String expected.",tn=[],Pn="__dbnames",dr="readonly",hr="readwrite";function Rt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var so={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function In(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=Ae(t))[e],t}}function uo(){throw oe.Type()}function ye(e,t){try{var n=lo(e),r=lo(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(a,l){for(var c=a.length,d=l.length,y=c<d?c:d,m=0;m<y;++m)if(a[m]!==l[m])return a[m]<l[m]?-1:1;return c===d?0:c<d?-1:1}(co(e),co(t));case"Array":return function(a,l){for(var c=a.length,d=l.length,y=c<d?c:d,m=0;m<y;++m){var w=ye(a[m],l[m]);if(w!==0)return w}return c===d?0:c<d?-1:1}(e,t)}}catch{}return NaN}function lo(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=He(e),e==="ArrayBuffer"?"binary":e)}function co(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var fo=(Ie.prototype._trans=function(e,t,n){var r=this._tx||te.trans,a=this.name,l=se&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function c(m,w,h){if(!h.schema[a])throw new oe.NotFound("Table "+a+" not part of transaction");return t(h.idbtrans,h)}var d=Zt();try{var y=r&&r.db._novip===this.db._novip?r===te.trans?r._promise(e,c,n):Tt(function(){return r._promise(e,c,n)},{trans:r,transless:te.transless||te}):function m(w,h,k,g){if(w.idbdb&&(w._state.openComplete||te.letThrough||w._vip)){var _=w._createTransaction(h,k,w._dbSchema);try{_.create(),w._state.PR1398_maxLoop=3}catch(x){return x.name===lt.InvalidState&&w.isOpen()&&0<--w._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),w.close({disableAutoOpen:!1}),w.open().then(function(){return m(w,h,k,g)})):Be(x)}return _._promise(h,function(x,b){return Tt(function(){return te.trans=_,g(x,b,_)})}).then(function(x){if(h==="readwrite")try{_.idbtrans.commit()}catch{}return h==="readonly"?x:_._completion.then(function(){return x})})}if(w._state.openComplete)return Be(new oe.DatabaseClosed(w._state.dbOpenError));if(!w._state.isBeingOpened){if(!w._state.autoOpen)return Be(new oe.DatabaseClosed);w.open().catch(xe)}return w._state.dbReadyPromise.then(function(){return m(w,h,k,g)})}(this.db,e,[this.name],c);return l&&(y._consoleTask=l,y=y.catch(function(m){return console.trace(m),Be(m)})),y}finally{d&&$t()}},Ie.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?Be(new oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(a){return n.hook.reading.fire(a)})}).then(t)},Ie.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(D(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=p(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(d){if(d.compound&&t.every(function(m){return 0<=d.keyPath.indexOf(m)})){for(var y=0;y<t.length;++y)if(t.indexOf(d.keyPath[y])===-1)return!1;return!0}return!1}).sort(function(d,y){return d.keyPath.length-y.keyPath.length})[0];if(n&&this.db._maxKey!==qt){var l=n.keyPath.slice(0,t.length);return this.where(l).equals(l.map(function(y){return e[y]}))}!n&&se&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName;function a(d,y){return ye(d,y)===0}var c=t.reduce(function(h,y){var m=h[0],w=h[1],h=r[y],k=e[y];return[m||h,m||!h?Rt(w,h&&h.multi?function(g){return g=ee(g,y),D(g)&&g.some(function(_){return a(k,_)})}:function(g){return a(k,ee(g,y))}):w]},[null,null]),l=c[0],c=c[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")},Ie.prototype.filter=function(e){return this.toCollection().and(e)},Ie.prototype.count=function(e){return this.toCollection().count(e)},Ie.prototype.offset=function(e){return this.toCollection().offset(e)},Ie.prototype.limit=function(e){return this.toCollection().limit(e)},Ie.prototype.each=function(e){return this.toCollection().each(e)},Ie.prototype.toArray=function(e){return this.toCollection().toArray(e)},Ie.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ie.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,D(e)?"[".concat(e.join("+"),"]"):e))},Ie.prototype.reverse=function(){return this.toCollection().reverse()},Ie.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function a(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof uo&&(function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function w(){this.constructor=y}i(y,m),y.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)}(a,t=e),Object.defineProperty(a.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),a.prototype.table=function(){return r},e=a);for(var l=new Set,c=e.prototype;c;c=M(c))Object.getOwnPropertyNames(c).forEach(function(y){return l.add(y)});function d(y){if(!y)return y;var m,w=Object.create(e.prototype);for(m in y)if(!l.has(m))try{w[m]=y[m]}catch{}return w}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=d,this.hook("reading",d),e},Ie.prototype.defineClass=function(){return this.mapToClass(function(e){O(this,e)})},Ie.prototype.add=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,l=r.keyPath,c=e;return l&&a&&(c=In(l)(e)),this._trans("readwrite",function(d){return n.core.mutate({trans:d,type:"add",keys:t!=null?[t]:null,values:[c]})}).then(function(d){return d.numFailures?Z.reject(d.failures[0]):d.lastResult}).then(function(d){if(l)try{G(e,l,d)}catch{}return d})},Ie.prototype.update=function(e,t){return typeof e!="object"||D(e)?this.where(":id").equals(e).modify(t):(e=ee(e,this.schema.primKey.keyPath),e===void 0?Be(new oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},Ie.prototype.put=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,l=r.keyPath,c=e;return l&&a&&(c=In(l)(e)),this._trans("readwrite",function(d){return n.core.mutate({trans:d,type:"put",values:[c],keys:t!=null?[t]:null})}).then(function(d){return d.numFailures?Z.reject(d.failures[0]):d.lastResult}).then(function(d){if(l)try{G(e,l,d)}catch{}return d})},Ie.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?Z.reject(n.failures[0]):void 0})},Ie.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:so})}).then(function(t){return t.numFailures?Z.reject(t.failures[0]):void 0})},Ie.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(a){return t.hook.reading.fire(a)})})})},Ie.prototype.bulkAdd=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,l=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(c){var m=r.schema.primKey,d=m.auto,m=m.keyPath;if(m&&a)throw new oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,m=m&&d?e.map(In(m)):e;return r.core.mutate({trans:c,type:"add",keys:a,values:m,wantResults:l}).then(function(_){var h=_.numFailures,k=_.results,g=_.lastResult,_=_.failures;if(h===0)return l?k:g;throw new ot("".concat(r.name,".bulkAdd(): ").concat(h," of ").concat(y," operations failed"),_)})})},Ie.prototype.bulkPut=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,l=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(c){var m=r.schema.primKey,d=m.auto,m=m.keyPath;if(m&&a)throw new oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,m=m&&d?e.map(In(m)):e;return r.core.mutate({trans:c,type:"put",keys:a,values:m,wantResults:l}).then(function(_){var h=_.numFailures,k=_.results,g=_.lastResult,_=_.failures;if(h===0)return l?k:g;throw new ot("".concat(r.name,".bulkPut(): ").concat(h," of ").concat(y," operations failed"),_)})})},Ie.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(c){return c.key}),a=e.map(function(c){return c.changes}),l=[];return this._trans("readwrite",function(c){return n.getMany({trans:c,keys:r,cache:"clone"}).then(function(d){var y=[],m=[];e.forEach(function(h,k){var g=h.key,_=h.changes,x=d[k];if(x){for(var b=0,S=Object.keys(_);b<S.length;b++){var T=S[b],E=_[T];if(T===t.schema.primKey.keyPath){if(ye(E,g)!==0)throw new oe.Constraint("Cannot update primary key in bulkUpdate()")}else G(x,T,E)}l.push(k),y.push(g),m.push(x)}});var w=y.length;return n.mutate({trans:c,type:"put",keys:y,values:m,updates:{keys:r,changeSpecs:a}}).then(function(h){var k=h.numFailures,g=h.failures;if(k===0)return w;for(var _=0,x=Object.keys(g);_<x.length;_++){var b,S=x[_],T=l[Number(S)];T!=null&&(b=g[S],delete g[S],g[T]=b)}throw new ot("".concat(t.name,".bulkUpdate(): ").concat(k," of ").concat(w," operations failed"),g)})})})},Ie.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(c){var a=c.numFailures,l=c.lastResult,c=c.failures;if(a===0)return l;throw new ot("".concat(t.name,".bulkDelete(): ").concat(a," of ").concat(n," operations failed"),c)})},Ie);function Ie(){}function sn(e){function t(c,d){if(d){for(var y=arguments.length,m=new Array(y-1);--y;)m[y-1]=arguments[y];return n[c].subscribe.apply(null,m),e}if(typeof c=="string")return n[c]}var n={};t.addEventType=l;for(var r=1,a=arguments.length;r<a;++r)l(arguments[r]);return t;function l(c,d,y){if(typeof c!="object"){var m;d=d||ar;var w={subscribers:[],fire:y=y||xe,subscribe:function(h){w.subscribers.indexOf(h)===-1&&(w.subscribers.push(h),w.fire=d(w.fire,h))},unsubscribe:function(h){w.subscribers=w.subscribers.filter(function(k){return k!==h}),w.fire=w.subscribers.reduce(d,y)}};return n[c]=t[c]=w}p(m=c).forEach(function(h){var k=m[h];if(D(k))l(h,m[h][0],m[h][1]);else{if(k!=="asap")throw new oe.InvalidArgument("Invalid event config");var g=l(h,Mt,function(){for(var _=arguments.length,x=new Array(_);_--;)x[_]=arguments[_];g.subscribers.forEach(function(b){$(function(){b.apply(null,x)})})})}})}}function un(e,t){return U(t).from({prototype:e}),t}function nn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function vr(e,t){e.filter=Rt(e.filter,t)}function pr(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Rt(r(),t())}:t,e.justLimit=n&&!r}function jn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new oe.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function ho(e,t,n){var r=jn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function An(e,t,n,r){var a=e.replayFilter?Rt(e.filter,e.replayFilter()):e.filter;if(e.or){var l={},c=function(d,y,m){var w,h;a&&!a(y,m,function(k){return y.stop(k)},function(k){return y.fail(k)})||((h=""+(w=y.primaryKey))=="[object ArrayBuffer]"&&(h=""+new Uint8Array(w)),K(l,h)||(l[h]=!0,t(d,y,m)))};return Promise.all([e.or._iterate(c,n),vo(ho(e,r,n),e.algorithm,c,!e.keysOnly&&e.valueMapper)])}return vo(ho(e,r,n),Rt(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function vo(e,t,n,r){var a=Me(r?function(l,c,d){return n(r(l),c,d)}:n);return e.then(function(l){if(l)return l.start(function(){var c=function(){return l.continue()};t&&!t(l,function(d){return c=d},function(d){l.stop(d),c=xe},function(d){l.fail(d),c=xe})||a(l.value,l,function(d){return c=d}),c()})})}var ln=(po.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(D(n))return f(f([],D(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var r=t.remove;if(D(r))return D(e)?e.filter(function(a){return!r.includes(a)}).sort():[];if(typeof r=="number")return Number(e)-r;if(typeof r=="bigint")try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError("Invalid subtrahend ".concat(r))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},po);function po(e){this["@@propmod"]=e}var Si=(ke.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Be.bind(null,n.error)):n.table._trans("readonly",e).then(t)},ke.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Be.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ke.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Rt(t.algorithm,e)},ke.prototype._iterate=function(e,t){return An(this._ctx,e,t,this._ctx.table.core)},ke.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&O(n,e),t._ctx=n,t},ke.prototype.raw=function(){return this._ctx.valueMapper=null,this},ke.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return An(t,e,n,t.table.core)})},ke.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,a=r.table.core;if(nn(r,!0))return a.count({trans:n,query:{index:jn(r,a.schema),range:r.range}}).then(function(c){return Math.min(c,r.limit)});var l=0;return An(r,function(){return++l,!1},n,a).then(function(){return l})}).then(e)},ke.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],a=n.length-1;function l(y,m){return m?l(y[n[m]],m-1):y[r]}var c=this._ctx.dir==="next"?1:-1;function d(y,m){return ye(l(y,a),l(m,a))*c}return this.toArray(function(y){return y.sort(d)}).then(t)},ke.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if(r.dir==="next"&&nn(r,!0)&&0<r.limit){var a=r.valueMapper,l=jn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:l,range:r.range}}).then(function(d){return d=d.result,a?d.map(a):d})}var c=[];return An(r,function(d){return c.push(d)},n,r.table.core).then(function(){return c})},e)},ke.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,nn(t)?pr(t,function(){var n=e;return function(r,a){return n===0||(n===1?--n:a(function(){r.advance(n),n=0}),!1)}}):pr(t,function(){var n=e;return function(){return--n<0}})),this},ke.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),pr(this._ctx,function(){var t=e;return function(n,r,a){return--t<=0&&r(a),0<=t}},!0),this},ke.prototype.until=function(e,t){return vr(this._ctx,function(n,r,a){return!e(n.value)||(r(a),t)}),this},ke.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ke.prototype.last=function(e){return this.reverse().first(e)},ke.prototype.filter=function(e){var t;return vr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=Rt(t.isMatch,e),this},ke.prototype.and=function(e){return this.filter(e)},ke.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ke.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ke.prototype.desc=function(){return this.reverse()},ke.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},ke.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ke.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},ke.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,a){n.push(a.key)}).then(function(){return n}).then(e)},ke.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&nn(t,!0)&&0<t.limit)return this._read(function(r){var a=jn(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:a,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,a){n.push(a.primaryKey)}).then(function(){return n}).then(e)},ke.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ke.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ke.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ke.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return vr(this._ctx,function(a){var r=a.primaryKey.toString(),a=K(t,r);return t[r]=!0,!a}),this},ke.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var a,l,c;c=typeof e=="function"?e:(a=p(e),l=a.length,function(b){for(var S=!1,T=0;T<l;++T){var E=a[T],I=e[E],L=ee(b,E);I instanceof ln?(G(b,E,I.execute(L)),S=!0):L!==I&&(G(b,E,I),S=!0)}return S});var d=n.table.core,h=d.schema.primaryKey,y=h.outbound,m=h.extractKey,w=200,h=t.db._options.modifyChunkSize;h&&(w=typeof h=="object"?h[d.name]||h["*"]||200:h);function k(b,E){var T=E.failures,E=E.numFailures;_+=b-E;for(var I=0,L=p(T);I<L.length;I++){var Q=L[I];g.push(T[Q])}}var g=[],_=0,x=[];return t.clone().primaryKeys().then(function(b){function S(E){var I=Math.min(w,b.length-E);return d.getMany({trans:r,keys:b.slice(E,E+I),cache:"immutable"}).then(function(L){for(var Q=[],z=[],W=y?[]:null,J=[],V=0;V<I;++V){var ne=L[V],fe={value:Ae(ne),primKey:b[E+V]};c.call(fe,fe.value,fe)!==!1&&(fe.value==null?J.push(b[E+V]):y||ye(m(ne),m(fe.value))===0?(z.push(fe.value),y&&W.push(b[E+V])):(J.push(b[E+V]),Q.push(fe.value)))}return Promise.resolve(0<Q.length&&d.mutate({trans:r,type:"add",values:Q}).then(function(ve){for(var pe in ve.failures)J.splice(parseInt(pe),1);k(Q.length,ve)})).then(function(){return(0<z.length||T&&typeof e=="object")&&d.mutate({trans:r,type:"put",keys:W,values:z,criteria:T,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<E}).then(function(ve){return k(z.length,ve)})}).then(function(){return(0<J.length||T&&e===yr)&&d.mutate({trans:r,type:"delete",keys:J,criteria:T,isAdditionalChunk:0<E}).then(function(ve){return k(J.length,ve)})}).then(function(){return b.length>E+I&&S(E+w)})})}var T=nn(n)&&n.limit===1/0&&(typeof e!="function"||e===yr)&&{index:n.index,range:n.range};return S(0).then(function(){if(0<g.length)throw new at("Error modifying one or more objects",g,_,x);return b.length})})})},ke.prototype.delete=function(){var e=this._ctx,t=e.range;return nn(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,a=t;return e.table.core.count({trans:n,query:{index:r,range:a}}).then(function(l){return e.table.core.mutate({trans:n,type:"deleteRange",range:a}).then(function(c){var d=c.failures;if(c.lastResult,c.results,c=c.numFailures,c)throw new at("Could not delete some values",Object.keys(d).map(function(y){return d[y]}),l-c);return l-c})})}):this.modify(yr)},ke);function ke(){}var yr=function(e,t){return t.value=null};function Ti(e,t){return e<t?-1:e===t?0:1}function Ei(e,t){return t<e?-1:e===t?0:1}function st(e,t,n){return e=e instanceof go?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function rn(e){return new e.Collection(e,function(){return yo("")}).limit(0)}function Mn(e,t,n,r){var a,l,c,d,y,m,w,h=n.length;if(!n.every(function(_){return typeof _=="string"}))return st(e,ao);function k(_){a=_==="next"?function(b){return b.toUpperCase()}:function(b){return b.toLowerCase()},l=_==="next"?function(b){return b.toLowerCase()}:function(b){return b.toUpperCase()},c=_==="next"?Ti:Ei;var x=n.map(function(b){return{lower:l(b),upper:a(b)}}).sort(function(b,S){return c(b.lower,S.lower)});d=x.map(function(b){return b.upper}),y=x.map(function(b){return b.lower}),w=(m=_)==="next"?"":r}k("next"),e=new e.Collection(e,function(){return Ct(d[0],y[h-1]+r)}),e._ondirectionchange=function(_){k(_)};var g=0;return e._addAlgorithm(function(_,x,b){var S=_.key;if(typeof S!="string")return!1;var T=l(S);if(t(T,y,g))return!0;for(var E=null,I=g;I<h;++I){var L=function(Q,z,W,J,V,ne){for(var fe=Math.min(Q.length,J.length),ve=-1,pe=0;pe<fe;++pe){var ut=z[pe];if(ut!==J[pe])return V(Q[pe],W[pe])<0?Q.substr(0,pe)+W[pe]+W.substr(pe+1):V(Q[pe],J[pe])<0?Q.substr(0,pe)+J[pe]+W.substr(pe+1):0<=ve?Q.substr(0,ve)+z[ve]+W.substr(ve+1):null;V(Q[pe],ut)<0&&(ve=pe)}return fe<J.length&&ne==="next"?Q+W.substr(Q.length):fe<Q.length&&ne==="prev"?Q.substr(0,W.length):ve<0?null:Q.substr(0,ve)+J[ve]+W.substr(ve+1)}(S,T,d[I],y[I],c,m);L===null&&E===null?g=I+1:(E===null||0<c(E,L))&&(E=L)}return x(E!==null?function(){_.continue(E+w)}:b),!1}),e}function Ct(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function yo(e){return{type:1,lower:e,upper:e}}var go=(Object.defineProperty(Ve.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ve.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||r)&&(!n||!r)?rn(this):new this.Collection(this,function(){return Ct(e,t,!n,!r)})}catch{return st(this,kt)}},Ve.prototype.equals=function(e){return e==null?st(this,kt):new this.Collection(this,function(){return yo(e)})},Ve.prototype.above=function(e){return e==null?st(this,kt):new this.Collection(this,function(){return Ct(e,void 0,!0)})},Ve.prototype.aboveOrEqual=function(e){return e==null?st(this,kt):new this.Collection(this,function(){return Ct(e,void 0,!1)})},Ve.prototype.below=function(e){return e==null?st(this,kt):new this.Collection(this,function(){return Ct(void 0,e,!1,!0)})},Ve.prototype.belowOrEqual=function(e){return e==null?st(this,kt):new this.Collection(this,function(){return Ct(void 0,e)})},Ve.prototype.startsWith=function(e){return typeof e!="string"?st(this,ao):this.between(e,e+qt,!0,!0)},Ve.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Mn(this,function(t,n){return t.indexOf(n[0])===0},[e],qt)},Ve.prototype.equalsIgnoreCase=function(e){return Mn(this,function(t,n){return t===n[0]},[e],"")},Ve.prototype.anyOfIgnoreCase=function(){var e=Ke.apply(Le,arguments);return e.length===0?rn(this):Mn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},Ve.prototype.startsWithAnyOfIgnoreCase=function(){var e=Ke.apply(Le,arguments);return e.length===0?rn(this):Mn(this,function(t,n){return n.some(function(r){return t.indexOf(r)===0})},e,qt)},Ve.prototype.anyOf=function(){var e=this,t=Ke.apply(Le,arguments),n=this._cmp;try{t.sort(n)}catch{return st(this,kt)}if(t.length===0)return rn(this);var r=new this.Collection(this,function(){return Ct(t[0],t[t.length-1])});r._ondirectionchange=function(l){n=l==="next"?e._ascending:e._descending,t.sort(n)};var a=0;return r._addAlgorithm(function(l,c,d){for(var y=l.key;0<n(y,t[a]);)if(++a===t.length)return c(d),!1;return n(y,t[a])===0||(c(function(){l.continue(t[a])}),!1)}),r},Ve.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ve.prototype.noneOf=function(){var e=Ke.apply(Le,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return st(this,kt)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Ve.prototype.inAnyRange=function(S,t){var n=this,r=this._cmp,a=this._ascending,l=this._descending,c=this._min,d=this._max;if(S.length===0)return rn(this);if(!S.every(function(T){return T[0]!==void 0&&T[1]!==void 0&&a(T[0],T[1])<=0}))return st(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",oe.InvalidArgument);var y=!t||t.includeLowers!==!1,m=t&&t.includeUppers===!0,w,h=a;function k(T,E){return h(T[0],E[0])}try{(w=S.reduce(function(T,E){for(var I=0,L=T.length;I<L;++I){var Q=T[I];if(r(E[0],Q[1])<0&&0<r(E[1],Q[0])){Q[0]=c(Q[0],E[0]),Q[1]=d(Q[1],E[1]);break}}return I===L&&T.push(E),T},[])).sort(k)}catch{return st(this,kt)}var g=0,_=m?function(T){return 0<a(T,w[g][1])}:function(T){return 0<=a(T,w[g][1])},x=y?function(T){return 0<l(T,w[g][0])}:function(T){return 0<=l(T,w[g][0])},b=_,S=new this.Collection(this,function(){return Ct(w[0][0],w[w.length-1][1],!y,!m)});return S._ondirectionchange=function(T){h=T==="next"?(b=_,a):(b=x,l),w.sort(k)},S._addAlgorithm(function(T,E,I){for(var L,Q=T.key;b(Q);)if(++g===w.length)return E(I),!1;return!_(L=Q)&&!x(L)||(n._cmp(Q,w[g][1])===0||n._cmp(Q,w[g][0])===0||E(function(){h===a?T.continue(w[g][0]):T.continue(w[g][1])}),!1)}),S},Ve.prototype.startsWithAnyOf=function(){var e=Ke.apply(Le,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?rn(this):this.inAnyRange(e.map(function(t){return[t,t+qt]})):st(this,"startsWithAnyOf() only works with strings")},Ve);function Ve(){}function mt(e){return Me(function(t){return cn(t),e(t.target.error),!1})}function cn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var fn="storagemutated",gr="x-storagemutated-1",Pt=sn(null,fn),Oi=(bt.prototype._lock=function(){return F(!te.global),++this._reculock,this._reculock!==1||te.global||(te.lockOwnerFor=this),this},bt.prototype._unlock=function(){if(F(!te.global),--this._reculock==0)for(te.global||(te.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ft(e[1],e[0])}catch{}}return this},bt.prototype._locked=function(){return this._reculock&&te.lockOwnerFor!==this},bt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(F(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new oe.DatabaseClosed(r);case"MissingAPIError":throw new oe.MissingAPI(r.message,r);default:throw new oe.OpenFailed(r)}if(!this.active)throw new oe.TransactionInactive;return F(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Me(function(a){cn(a),t._reject(e.error)}),e.onabort=Me(function(a){cn(a),t.active&&t._reject(new oe.Abort(e.error)),t.active=!1,t.on("abort").fire(a)}),e.oncomplete=Me(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Pt.storagemutated.fire(e.mutatedParts)}),this},bt.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return Be(new oe.ReadOnly("Transaction is readonly"));if(!this.active)return Be(new oe.TransactionInactive);if(this._locked())return new Z(function(l,c){r._blockedFuncs.push([function(){r._promise(e,t,n).then(l,c)},te])});if(n)return Tt(function(){var l=new Z(function(c,d){r._lock();var y=t(c,d,r);y&&y.then&&y.then(c,d)});return l.finally(function(){return r._unlock()}),l._lib=!0,l});var a=new Z(function(l,c){var d=t(l,c,r);d&&d.then&&d.then(l,c)});return a._lib=!0,a},bt.prototype._root=function(){return this.parent?this.parent._root():this},bt.prototype.waitFor=function(e){var t,n=this._root(),r=Z.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function l(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=l)}());var a=n._waitingFor;return new Z(function(l,c){r.then(function(d){return n._waitingQueue.push(Me(l.bind(null,d)))},function(d){return n._waitingQueue.push(Me(c.bind(null,d)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},bt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new oe.Abort))},bt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(K(t,e))return t[e];var n=this.schema[e];if(!n)throw new oe.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},bt);function bt(){}function mr(e,t,n,r,a,l,c){return{name:e,keyPath:t,unique:n,multi:r,auto:a,compound:l,src:(n&&!c?"&":"")+(r?"*":"")+(a?"++":"")+mo(t)}}function mo(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function br(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(a){return[a.name,a]},n.reduce(function(a,l,c){return c=r(l,c),c&&(a[c[0]]=c[1]),a},{}))};var r}var dn=function(e){try{return e.only([[]]),dn=function(){return[[]]},[[]]}catch{return dn=function(){return qt},qt}};function _r(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return ee(n,t)}:function(n){return ee(n,e)};var t}function bo(e){return[].slice.call(e)}var Ci=0;function hn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Pi(e,t,y){function r(b){if(b.type===3)return null;if(b.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var g=b.lower,_=b.upper,x=b.lowerOpen,b=b.upperOpen;return g===void 0?_===void 0?null:t.upperBound(_,!!b):_===void 0?t.lowerBound(g,!!x):t.bound(g,_,!!x,!!b)}function a(k){var g,_=k.name;return{name:_,schema:k,mutate:function(x){var b=x.trans,S=x.type,T=x.keys,E=x.values,I=x.range;return new Promise(function(L,Q){L=Me(L);var z=b.objectStore(_),W=z.keyPath==null,J=S==="put"||S==="add";if(!J&&S!=="delete"&&S!=="deleteRange")throw new Error("Invalid operation type: "+S);var V,ne=(T||E||{length:1}).length;if(T&&E&&T.length!==E.length)throw new Error("Given keys array must have same length as given values array.");if(ne===0)return L({numFailures:0,failures:{},results:[],lastResult:void 0});function fe(tt){++ut,cn(tt)}var ve=[],pe=[],ut=0;if(S==="deleteRange"){if(I.type===4)return L({numFailures:ut,failures:pe,results:[],lastResult:void 0});I.type===3?ve.push(V=z.clear()):ve.push(V=z.delete(r(I)))}else{var W=J?W?[E,T]:[E,null]:[T,null],ce=W[0],Je=W[1];if(J)for(var Ze=0;Ze<ne;++Ze)ve.push(V=Je&&Je[Ze]!==void 0?z[S](ce[Ze],Je[Ze]):z[S](ce[Ze])),V.onerror=fe;else for(Ze=0;Ze<ne;++Ze)ve.push(V=z[S](ce[Ze])),V.onerror=fe}function Vn(tt){tt=tt.target.result,ve.forEach(function(Ht,Rr){return Ht.error!=null&&(pe[Rr]=Ht.error)}),L({numFailures:ut,failures:pe,results:S==="delete"?T:ve.map(function(Ht){return Ht.result}),lastResult:tt})}V.onerror=function(tt){fe(tt),Vn(tt)},V.onsuccess=Vn})},getMany:function(x){var b=x.trans,S=x.keys;return new Promise(function(T,E){T=Me(T);for(var I,L=b.objectStore(_),Q=S.length,z=new Array(Q),W=0,J=0,V=function(ve){ve=ve.target,z[ve._pos]=ve.result,++J===W&&T(z)},ne=mt(E),fe=0;fe<Q;++fe)S[fe]!=null&&((I=L.get(S[fe]))._pos=fe,I.onsuccess=V,I.onerror=ne,++W);W===0&&T(z)})},get:function(x){var b=x.trans,S=x.key;return new Promise(function(T,E){T=Me(T);var I=b.objectStore(_).get(S);I.onsuccess=function(L){return T(L.target.result)},I.onerror=mt(E)})},query:(g=m,function(x){return new Promise(function(b,S){b=Me(b);var T,E,I,W=x.trans,L=x.values,Q=x.limit,V=x.query,z=Q===1/0?void 0:Q,J=V.index,V=V.range,W=W.objectStore(_),J=J.isPrimaryKey?W:W.index(J.name),V=r(V);if(Q===0)return b({result:[]});g?((z=L?J.getAll(V,z):J.getAllKeys(V,z)).onsuccess=function(ne){return b({result:ne.target.result})},z.onerror=mt(S)):(T=0,E=!L&&"openKeyCursor"in J?J.openKeyCursor(V):J.openCursor(V),I=[],E.onsuccess=function(ne){var fe=E.result;return fe?(I.push(L?fe.value:fe.primaryKey),++T===Q?b({result:I}):void fe.continue()):b({result:I})},E.onerror=mt(S))})}),openCursor:function(x){var b=x.trans,S=x.values,T=x.query,E=x.reverse,I=x.unique;return new Promise(function(L,Q){L=Me(L);var J=T.index,z=T.range,W=b.objectStore(_),W=J.isPrimaryKey?W:W.index(J.name),J=E?I?"prevunique":"prev":I?"nextunique":"next",V=!S&&"openKeyCursor"in W?W.openKeyCursor(r(z),J):W.openCursor(r(z),J);V.onerror=mt(Q),V.onsuccess=Me(function(ne){var fe,ve,pe,ut,ce=V.result;ce?(ce.___id=++Ci,ce.done=!1,fe=ce.continue.bind(ce),ve=(ve=ce.continuePrimaryKey)&&ve.bind(ce),pe=ce.advance.bind(ce),ut=function(){throw new Error("Cursor not stopped")},ce.trans=b,ce.stop=ce.continue=ce.continuePrimaryKey=ce.advance=function(){throw new Error("Cursor not started")},ce.fail=Me(Q),ce.next=function(){var Je=this,Ze=1;return this.start(function(){return Ze--?Je.continue():Je.stop()}).then(function(){return Je})},ce.start=function(Je){function Ze(){if(V.result)try{Je()}catch(tt){ce.fail(tt)}else ce.done=!0,ce.start=function(){throw new Error("Cursor behind last entry")},ce.stop()}var Vn=new Promise(function(tt,Ht){tt=Me(tt),V.onerror=mt(Ht),ce.fail=Ht,ce.stop=function(Rr){ce.stop=ce.continue=ce.continuePrimaryKey=ce.advance=ut,tt(Rr)}});return V.onsuccess=Me(function(tt){V.onsuccess=Ze,Ze()}),ce.continue=fe,ce.continuePrimaryKey=ve,ce.advance=pe,Ze(),Vn},L(ce)):L(null)},Q)})},count:function(x){var b=x.query,S=x.trans,T=b.index,E=b.range;return new Promise(function(I,L){var Q=S.objectStore(_),z=T.isPrimaryKey?Q:Q.index(T.name),Q=r(E),z=Q?z.count(Q):z.count();z.onsuccess=Me(function(W){return I(W.target.result)}),z.onerror=mt(L)})}}}var l,c,d,w=(c=y,d=bo((l=e).objectStoreNames),{schema:{name:l.name,tables:d.map(function(k){return c.objectStore(k)}).map(function(k){var g=k.keyPath,b=k.autoIncrement,_=D(g),x={},b={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g==null,compound:_,keyPath:g,autoIncrement:b,unique:!0,extractKey:_r(g)},indexes:bo(k.indexNames).map(function(S){return k.index(S)}).map(function(I){var T=I.name,E=I.unique,L=I.multiEntry,I=I.keyPath,L={name:T,compound:D(I),keyPath:I,unique:E,multiEntry:L,extractKey:_r(I)};return x[hn(I)]=L}),getIndexByKeyPath:function(S){return x[hn(S)]}};return x[":id"]=b.primaryKey,g!=null&&(x[hn(g)]=b.primaryKey),b})},hasGetAll:0<d.length&&"getAll"in c.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),y=w.schema,m=w.hasGetAll,w=y.tables.map(a),h={};return w.forEach(function(k){return h[k.name]=k}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(k){if(!h[k])throw new Error("Table '".concat(k,"' not found"));return h[k]},MIN_KEY:-1/0,MAX_KEY:dn(t),schema:y}}function Ii(e,t,n,r){var a=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=Pi(t,a,r),e.dbcore.reduce(function(l,c){return c=c.create,u(u({},l),c(l))},r))}}function Kn(e,r){var n=r.db,r=Ii(e._middlewares,n,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(a){var l=a.name;e.core.schema.tables.some(function(c){return c.name===l})&&(a.core=e.core.table(l),e[l]instanceof e.Table&&(e[l].core=a.core))})}function Fn(e,t,n,r){n.forEach(function(a){var l=r[a];t.forEach(function(c){var d=function y(m,w){return X(m,w)||(m=M(m))&&y(m,w)}(c,a);(!d||"value"in d&&d.value===void 0)&&(c===e.Transaction.prototype||c instanceof e.Transaction?B(c,a,{get:function(){return this.table(a)},set:function(y){H(this,a,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):c[a]=new e.Table(a,l))})})}function wr(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function ji(e,t){return e._cfg.version-t._cfg.version}function Ai(e,t,n,r){var a=e._dbSchema;n.objectStoreNames.contains("$meta")&&!a.$meta&&(a.$meta=br("$meta",wo("")[0],[]),e._storeNames.push("$meta"));var l=e._createTransaction("readwrite",e._storeNames,a);l.create(n),l._completion.catch(r);var c=l._reject.bind(l),d=te.transless||te;Tt(function(){return te.trans=l,te.transless=d,t!==0?(Kn(e,n),m=t,((y=l).storeNames.includes("$meta")?y.table("$meta").get("version").then(function(w){return w??m}):Z.resolve(m)).then(function(w){return k=w,g=l,_=n,x=[],w=(h=e)._versions,b=h._dbSchema=Rn(0,h.idbdb,_),(w=w.filter(function(S){return S._cfg.version>=k})).length!==0?(w.forEach(function(S){x.push(function(){var T=b,E=S._cfg.dbschema;Bn(h,T,_),Bn(h,E,_),b=h._dbSchema=E;var I=xr(T,E);I.add.forEach(function(J){kr(_,J[0],J[1].primKey,J[1].indexes)}),I.change.forEach(function(J){if(J.recreate)throw new oe.Upgrade("Not yet support for changing primary key");var V=_.objectStore(J.name);J.add.forEach(function(ne){return qn(V,ne)}),J.change.forEach(function(ne){V.deleteIndex(ne.name),qn(V,ne)}),J.del.forEach(function(ne){return V.deleteIndex(ne)})});var L=S._cfg.contentUpgrade;if(L&&S._cfg.version>k){Kn(h,_),g._memoizedTables={};var Q=ae(E);I.del.forEach(function(J){Q[J]=T[J]}),wr(h,[h.Transaction.prototype]),Fn(h,[h.Transaction.prototype],p(Q),Q),g.schema=Q;var z,W=$e(L);return W&&en(),I=Z.follow(function(){var J;(z=L(g))&&W&&(J=Et.bind(null,null),z.then(J,J))}),z&&typeof z.then=="function"?Z.resolve(z):I.then(function(){return z})}}),x.push(function(T){var E,I,L=S._cfg.dbschema;E=L,I=T,[].slice.call(I.db.objectStoreNames).forEach(function(Q){return E[Q]==null&&I.db.deleteObjectStore(Q)}),wr(h,[h.Transaction.prototype]),Fn(h,[h.Transaction.prototype],h._storeNames,h._dbSchema),g.schema=h._dbSchema}),x.push(function(T){h.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(h.idbdb.version/10)===S._cfg.version?(h.idbdb.deleteObjectStore("$meta"),delete h._dbSchema.$meta,h._storeNames=h._storeNames.filter(function(E){return E!=="$meta"})):T.objectStore("$meta").put(S._cfg.version,"version"))})}),function S(){return x.length?Z.resolve(x.shift()(g.idbtrans)).then(S):Z.resolve()}().then(function(){_o(b,_)})):Z.resolve();var h,k,g,_,x,b}).catch(c)):(p(a).forEach(function(w){kr(n,w,a[w].primKey,a[w].indexes)}),Kn(e,n),void Z.follow(function(){return e.on.populate.fire(l)}).catch(c));var y,m})}function Mi(e,t){_o(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Rn(0,e.idbdb,t);Bn(e,e._dbSchema,t);for(var r=0,a=xr(n,e._dbSchema).change;r<a.length;r++){var l=function(c){if(c.change.length||c.recreate)return console.warn("Unable to patch indexes of table ".concat(c.name," because it has changes on the type of index or primary key.")),{value:void 0};var d=t.objectStore(c.name);c.add.forEach(function(y){se&&console.debug("Dexie upgrade patch: Creating missing index ".concat(c.name,".").concat(y.src)),qn(d,y)})}(a[r]);if(typeof l=="object")return l.value}}function xr(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var a=e[n],l=t[n];if(a){var c={name:n,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||a.primKey.auto!==l.primKey.auto)c.recreate=!0,r.change.push(c);else{var d=a.idxByName,y=l.idxByName,m=void 0;for(m in d)y[m]||c.del.push(m);for(m in y){var w=d[m],h=y[m];w?w.src!==h.src&&c.change.push(h):c.add.push(h)}(0<c.del.length||0<c.add.length||0<c.change.length)&&r.change.push(c)}}else r.add.push([n,l])}return r}function kr(e,t,n,r){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(l){return qn(a,l)}),a}function _o(e,t){p(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(se&&console.debug("Dexie: Creating missing table",n),kr(t,n,e[n].primKey,e[n].indexes))})}function qn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Rn(e,t,n){var r={};return j(t.objectStoreNames,0).forEach(function(a){for(var l=n.objectStore(a),c=mr(mo(m=l.keyPath),m||"",!0,!1,!!l.autoIncrement,m&&typeof m!="string",!0),d=[],y=0;y<l.indexNames.length;++y){var w=l.index(l.indexNames[y]),m=w.keyPath,w=mr(w.name,m,!!w.unique,!!w.multiEntry,!1,m&&typeof m!="string",!1);d.push(w)}r[a]=br(a,c,d)}),r}function Bn(e,t,n){for(var r=n.db.objectStoreNames,a=0;a<r.length;++a){var l=r[a],c=n.objectStore(l);e._hasGetAll="getAll"in c;for(var d=0;d<c.indexNames.length;++d){var y=c.indexNames[d],m=c.index(y).keyPath,w=typeof m=="string"?m:"["+j(m).join("+")+"]";!t[l]||(m=t[l].idxByName[w])&&(m.name=y,delete t[l].idxByName[w],t[l].idxByName[y]=m)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function wo(e){return e.split(",").map(function(t,n){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return mr(r,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),D(a),n===0)})}var Ki=(Nn.prototype._parseStoresSpec=function(e,t){p(e).forEach(function(n){if(e[n]!==null){var r=wo(e[n]),a=r.shift();if(a.unique=!0,a.multi)throw new oe.Schema("Primary key cannot be multi-valued");r.forEach(function(l){if(l.auto)throw new oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new oe.Schema("Index must have a name and cannot be an empty string")}),t[n]=br(n,a,r)}})},Nn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?O(this._cfg.storesSource,n):n;var n=t._versions,r={},a={};return n.forEach(function(l){O(r,l._cfg.storesSource),a=l._cfg.dbschema={},l._parseStoresSpec(r,a)}),t._dbSchema=a,wr(t,[t._allTables,t,t.Transaction.prototype]),Fn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],p(a),a),t._storeNames=p(a),this},Nn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ie(this._cfg.contentUpgrade||xe,e),this},Nn);function Nn(){}function Dr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Dt(Pn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Sr(e){return e&&typeof e.databases=="function"}function Tr(e){return Tt(function(){return te.letThrough=!0,e()})}function Er(e){return!("from"in e)}var Xe=function(e,t){if(!this){var n=new Xe;return e&&"d"in e&&O(n,e),n}O(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function vn(e,t,n){var r=ye(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(Er(e))return O(e,{from:t,to:n,d:1});var a=e.l,r=e.r;if(ye(n,e.from)<0)return a?vn(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},ko(e);if(0<ye(t,e.to))return r?vn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},ko(e);ye(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<ye(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,a&&!e.l&&pn(e,a),r&&n&&pn(e,r)}}function pn(e,t){Er(t)||function n(r,y){var l=y.from,c=y.to,d=y.l,y=y.r;vn(r,l,c),d&&n(r,d),y&&n(r,y)}(e,t)}function xo(e,t){var n=Hn(t),r=n.next();if(r.done)return!1;for(var a=r.value,l=Hn(e),c=l.next(a.from),d=c.value;!r.done&&!c.done;){if(ye(d.from,a.to)<=0&&0<=ye(d.to,a.from))return!0;ye(a.from,d.from)<0?a=(r=n.next(d.from)).value:d=(c=l.next(a.from)).value}return!1}function Hn(e){var t=Er(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&ye(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||ye(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function ko(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),a=1<r?"r":r<-1?"l":"";a&&(t=a=="r"?"l":"r",n=u({},e),r=e[a],e.from=r.from,e.to=r.to,e[a]=r[a],n[a]=r[t],(e[t]=n).d=Do(n)),e.d=Do(e)}function Do(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function Ln(e,t){return p(t).forEach(function(n){e[n]?pn(e[n],t[n]):e[n]=function r(a){var l,c,d={};for(l in a)K(a,l)&&(c=a[l],d[l]=!c||typeof c!="object"||Te.has(c.constructor)?c:r(c));return d}(t[n])}),e}function Or(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&xo(t[n],e[n])})}C(Xe.prototype,((ct={add:function(e){return pn(this,e),this},addKey:function(e){return vn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return vn(t,n,n)}),this},hasKey:function(e){var t=Hn(this).next(e).value;return t&&ye(t.from,e)<=0&&0<=ye(t.to,e)}})[Ue]=function(){return Hn(this)},ct));var Bt={},Cr={},Pr=!1;function zn(e){Ln(Cr,e),Pr||(Pr=!0,setTimeout(function(){Pr=!1,Ir(Cr,!(Cr={}))},0))}function Ir(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,a=Object.values(Bt);r<a.length;r++)So(c=a[r],e,n,t);else for(var l in e){var c,d=/^idb\:\/\/(.*)\/(.*)\//.exec(l);d&&(l=d[1],d=d[2],(c=Bt["idb://".concat(l,"/").concat(d)])&&So(c,e,n,t))}n.forEach(function(y){return y()})}function So(e,t,n,r){for(var a=[],l=0,c=Object.entries(e.queries.query);l<c.length;l++){for(var d=c[l],y=d[0],m=[],w=0,h=d[1];w<h.length;w++){var k=h[w];Or(t,k.obsSet)?k.subscribers.forEach(function(b){return n.add(b)}):r&&m.push(k)}r&&a.push([y,m])}if(r)for(var g=0,_=a;g<_.length;g++){var x=_[g],y=x[0],m=x[1];e.queries.query[y]=m}}function Fi(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Be(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,a=Math.round(10*e.verno),l=!1;function c(){if(t.openCanceller!==r)throw new oe.DatabaseClosed("db.open() was cancelled")}function d(){return new Z(function(k,g){if(c(),!n)throw new oe.MissingAPI;var _=e.name,x=t.autoSchema||!a?n.open(_):n.open(_,a);if(!x)throw new oe.MissingAPI;x.onerror=mt(g),x.onblocked=Me(e._fireOnBlocked),x.onupgradeneeded=Me(function(b){var S;w=x.transaction,t.autoSchema&&!e._options.allowEmptyDB?(x.onerror=cn,w.abort(),x.result.close(),(S=n.deleteDatabase(_)).onsuccess=S.onerror=Me(function(){g(new oe.NoSuchDatabase("Database ".concat(_," doesnt exist")))})):(w.onerror=mt(g),b=b.oldVersion>Math.pow(2,62)?0:b.oldVersion,h=b<1,e.idbdb=x.result,l&&Mi(e,w),Ai(e,b/10,w,g))},g),x.onsuccess=Me(function(){w=null;var b,S,T,E,I,L=e.idbdb=x.result,Q=j(L.objectStoreNames);if(0<Q.length)try{var z=L.transaction((E=Q).length===1?E[0]:E,"readonly");if(t.autoSchema)S=L,T=z,(b=e).verno=S.version/10,T=b._dbSchema=Rn(0,S,T),b._storeNames=j(S.objectStoreNames,0),Fn(b,[b._allTables],p(T),T);else if(Bn(e,e._dbSchema,z),((I=xr(Rn(0,(I=e).idbdb,z),I._dbSchema)).add.length||I.change.some(function(W){return W.add.length||W.change.length}))&&!l)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),L.close(),a=L.version+1,l=!0,k(d());Kn(e,z)}catch{}tn.push(e),L.onversionchange=Me(function(W){t.vcFired=!0,e.on("versionchange").fire(W)}),L.onclose=Me(function(W){e.on("close").fire(W)}),h&&(I=e._deps,z=_,L=I.indexedDB,I=I.IDBKeyRange,Sr(L)||z===Pn||Dr(L,I).put({name:z}).catch(xe)),k()},g)}).catch(function(k){switch(k==null?void 0:k.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d();break;case"VersionError":if(0<a)return a=0,d()}return Z.reject(k)})}var y,m=t.dbReadyResolve,w=null,h=!1;return Z.race([r,(typeof navigator>"u"?Z.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(k){function g(){return indexedDB.databases().finally(k)}y=setInterval(g,100),g()}).finally(function(){return clearInterval(y)}):Promise.resolve()).then(d)]).then(function(){return c(),t.onReadyBeingFired=[],Z.resolve(Tr(function(){return e.on.ready.fire(e.vip)})).then(function k(){if(0<t.onReadyBeingFired.length){var g=t.onReadyBeingFired.reduce(ie,xe);return t.onReadyBeingFired=[],Z.resolve(Tr(function(){return g(e.vip)})).then(k)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(k){t.dbOpenError=k;try{w&&w.abort()}catch{}return r===t.openCanceller&&e._close(),Be(k)}).finally(function(){t.openComplete=!0,m()}).then(function(){var k;return h&&(k={},e.tables.forEach(function(g){g.schema.indexes.forEach(function(_){_.name&&(k["idb://".concat(e.name,"/").concat(g.name,"/").concat(_.name)]=new Xe(-1/0,[[[]]]))}),k["idb://".concat(e.name,"/").concat(g.name,"/")]=k["idb://".concat(e.name,"/").concat(g.name,"/:dels")]=new Xe(-1/0,[[[]]])}),Pt(fn).fire(k),Ir(k,!0)),e})}function jr(e){function t(l){return e.next(l)}var n=a(t),r=a(function(l){return e.throw(l)});function a(l){return function(y){var d=l(y),y=d.value;return d.done?y:y&&typeof y.then=="function"?y.then(n,r):D(y)?Promise.all(y).then(n,r):n(y)}}return a(t)()}function Un(e,t,n){for(var r=D(e)?e.slice():[e],a=0;a<n;++a)r.push(t);return r}var qi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return u(u({},e),{table:function(t){var n=e.table(t),r=n.schema,a={},l=[];function c(h,k,g){var _=hn(h),x=a[_]=a[_]||[],b=h==null?0:typeof h=="string"?1:h.length,S=0<k,S=u(u({},g),{name:S?"".concat(_,"(virtual-from:").concat(g.name,")"):g.name,lowLevelIndex:g,isVirtual:S,keyTail:k,keyLength:b,extractKey:_r(h),unique:!S&&g.unique});return x.push(S),S.isPrimaryKey||l.push(S),1<b&&c(b===2?h[0]:h.slice(0,b-1),k+1,g),x.sort(function(T,E){return T.keyTail-E.keyTail}),S}t=c(r.primaryKey.keyPath,0,r.primaryKey),a[":id"]=[t];for(var d=0,y=r.indexes;d<y.length;d++){var m=y[d];c(m.keyPath,0,m)}function w(h){var k,g=h.query.index;return g.isVirtual?u(u({},h),{query:{index:g.lowLevelIndex,range:(k=h.query.range,g=g.keyTail,{type:k.type===1?2:k.type,lower:Un(k.lower,k.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:Un(k.upper,k.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0})}}):h}return u(u({},n),{schema:u(u({},r),{primaryKey:t,indexes:l,getIndexByKeyPath:function(h){return(h=a[hn(h)])&&h[0]}}),count:function(h){return n.count(w(h))},query:function(h){return n.query(w(h))},openCursor:function(h){var k=h.query.index,g=k.keyTail,_=k.isVirtual,x=k.keyLength;return _?n.openCursor(w(h)).then(function(S){return S&&b(S)}):n.openCursor(h);function b(S){return Object.create(S,{continue:{value:function(T){T!=null?S.continue(Un(T,h.reverse?e.MAX_KEY:e.MIN_KEY,g)):h.unique?S.continue(S.key.slice(0,x).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,g)):S.continue()}},continuePrimaryKey:{value:function(T,E){S.continuePrimaryKey(Un(T,e.MAX_KEY,g),E)}},primaryKey:{get:function(){return S.primaryKey}},key:{get:function(){var T=S.key;return x===1?T[0]:T.slice(0,x)}},value:{get:function(){return S.value}}})}}})}})}};function Ar(e,t,n,r){return n=n||{},r=r||"",p(e).forEach(function(a){var l,c,d;K(t,a)?(l=e[a],c=t[a],typeof l=="object"&&typeof c=="object"&&l&&c?(d=He(l))!==He(c)?n[r+a]=t[a]:d==="Object"?Ar(l,c,n,r+a+"."):l!==c&&(n[r+a]=t[a]):l!==c&&(n[r+a]=t[a])):n[r+a]=void 0}),p(t).forEach(function(a){K(e,a)||(n[r+a]=t[a])}),n}function Mr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Ri={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return u(u({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return u(u({},n),{mutate:function(a){var l=te.trans,c=l.table(t).hook,d=c.deleting,y=c.creating,m=c.updating;switch(a.type){case"add":if(y.fire===xe)break;return l._promise("readwrite",function(){return w(a)},!0);case"put":if(y.fire===xe&&m.fire===xe)break;return l._promise("readwrite",function(){return w(a)},!0);case"delete":if(d.fire===xe)break;return l._promise("readwrite",function(){return w(a)},!0);case"deleteRange":if(d.fire===xe)break;return l._promise("readwrite",function(){return function h(k,g,_){return n.query({trans:k,values:!1,query:{index:r,range:g},limit:_}).then(function(x){var b=x.result;return w({type:"delete",keys:b,trans:k}).then(function(S){return 0<S.numFailures?Promise.reject(S.failures[0]):b.length<_?{failures:[],numFailures:0,lastResult:void 0}:h(k,u(u({},g),{lower:b[b.length-1],lowerOpen:!0}),_)})})}(a.trans,a.range,1e4)},!0)}return n.mutate(a);function w(h){var k,g,_,x=te.trans,b=h.keys||Mr(r,h);if(!b)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?u(u({},h),{keys:b}):u({},h)).type!=="delete"&&(h.values=f([],h.values)),h.keys&&(h.keys=f([],h.keys)),k=n,_=b,((g=h).type==="add"?Promise.resolve([]):k.getMany({trans:g.trans,keys:_,cache:"immutable"})).then(function(S){var T=b.map(function(E,I){var L,Q,z,W=S[I],J={onerror:null,onsuccess:null};return h.type==="delete"?d.fire.call(J,E,W,x):h.type==="add"||W===void 0?(L=y.fire.call(J,E,h.values[I],x),E==null&&L!=null&&(h.keys[I]=E=L,r.outbound||G(h.values[I],r.keyPath,E))):(L=Ar(W,h.values[I]),(Q=m.fire.call(J,L,E,W,x))&&(z=h.values[I],Object.keys(Q).forEach(function(V){K(z,V)?z[V]=Q[V]:G(z,V,Q[V])}))),J});return n.mutate(h).then(function(E){for(var I=E.failures,L=E.results,Q=E.numFailures,E=E.lastResult,z=0;z<b.length;++z){var W=(L||b)[z],J=T[z];W==null?J.onerror&&J.onerror(I[z]):J.onsuccess&&J.onsuccess(h.type==="put"&&S[z]?h.values[z]:W)}return{failures:I,results:L,numFailures:Q,lastResult:E}}).catch(function(E){return T.forEach(function(I){return I.onerror&&I.onerror(E)}),Promise.reject(E)})})}}})}})}};function To(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],a=0,l=0;a<t.keys.length&&l<e.length;++a)ye(t.keys[a],e[l])===0&&(r.push(n?Ae(t.values[a]):t.values[a]),++l);return r.length===e.length?r:null}catch{return null}}var Bi={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return u(u({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var a=To(r.keys,r.trans._cache,r.cache==="clone");return a?Z.resolve(a):n.getMany(r).then(function(l){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Ae(l):l},l})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function Eo(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Oo(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ni={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new Xe(e.MIN_KEY,e.MAX_KEY);return u(u({},e),{transaction:function(r,a,l){if(te.subscr&&a!=="readonly")throw new oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(te.querier));return e.transaction(r,a,l)},table:function(r){var a=e.table(r),l=a.schema,c=l.primaryKey,h=l.indexes,d=c.extractKey,y=c.outbound,m=c.autoIncrement&&h.filter(function(g){return g.compound&&g.keyPath.includes(c.keyPath)}),w=u(u({},a),{mutate:function(g){function _(V){return V="idb://".concat(t,"/").concat(r,"/").concat(V),E[V]||(E[V]=new Xe)}var x,b,S,T=g.trans,E=g.mutatedParts||(g.mutatedParts={}),I=_(""),L=_(":dels"),Q=g.type,J=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[Mr(c,g).filter(function(V){return V}),g.values]:[],z=J[0],W=J[1],J=g.trans._cache;return D(z)?(I.addKeys(z),(J=Q==="delete"||z.length===W.length?To(z,J):null)||L.addKeys(z),(J||W)&&(x=_,b=J,S=W,l.indexes.forEach(function(V){var ne=x(V.name||"");function fe(pe){return pe!=null?V.extractKey(pe):null}function ve(pe){return V.multiEntry&&D(pe)?pe.forEach(function(ut){return ne.addKey(ut)}):ne.addKey(pe)}(b||S).forEach(function(pe,Je){var ce=b&&fe(b[Je]),Je=S&&fe(S[Je]);ye(ce,Je)!==0&&(ce!=null&&ve(ce),Je!=null&&ve(Je))})}))):z?(W={from:(W=z.lower)!==null&&W!==void 0?W:e.MIN_KEY,to:(W=z.upper)!==null&&W!==void 0?W:e.MAX_KEY},L.add(W),I.add(W)):(I.add(n),L.add(n),l.indexes.forEach(function(V){return _(V.name).add(n)})),a.mutate(g).then(function(V){return!z||g.type!=="add"&&g.type!=="put"||(I.addKeys(V.results),m&&m.forEach(function(ne){for(var fe=g.values.map(function(ce){return ne.extractKey(ce)}),ve=ne.keyPath.findIndex(function(ce){return ce===c.keyPath}),pe=0,ut=V.results.length;pe<ut;++pe)fe[pe][ve]=V.results[pe];_(ne.name).addKeys(fe)})),T.mutatedParts=Ln(T.mutatedParts||{},E),V})}}),h=function(_){var x=_.query,_=x.index,x=x.range;return[_,new Xe((_=x.lower)!==null&&_!==void 0?_:e.MIN_KEY,(x=x.upper)!==null&&x!==void 0?x:e.MAX_KEY)]},k={get:function(g){return[c,new Xe(g.key)]},getMany:function(g){return[c,new Xe().addKeys(g.keys)]},count:h,query:h,openCursor:h};return p(k).forEach(function(g){w[g]=function(_){var x=te.subscr,b=!!x,S=Eo(te,a)&&Oo(g,_)?_.obsSet={}:x;if(b){var T=function(W){return W="idb://".concat(t,"/").concat(r,"/").concat(W),S[W]||(S[W]=new Xe)},E=T(""),I=T(":dels"),x=k[g](_),b=x[0],x=x[1];if((g==="query"&&b.isPrimaryKey&&!_.values?I:T(b.name||"")).add(x),!b.isPrimaryKey){if(g!=="count"){var L=g==="query"&&y&&_.values&&a.query(u(u({},_),{values:!1}));return a[g].apply(this,arguments).then(function(W){if(g==="query"){if(y&&_.values)return L.then(function(fe){return fe=fe.result,E.addKeys(fe),W});var J=_.values?W.result.map(d):W.result;(_.values?E:I).addKeys(J)}else if(g==="openCursor"){var V=W,ne=_.values;return V&&Object.create(V,{key:{get:function(){return I.addKey(V.primaryKey),V.key}},primaryKey:{get:function(){var fe=V.primaryKey;return I.addKey(fe),fe}},value:{get:function(){return ne&&E.addKey(V.primaryKey),V.value}}})}return W})}I.add(n)}}return a[g].apply(this,arguments)}}),w}})}};function Co(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===r?null:(t=u({},t),D(t.keys)&&(t.keys=t.keys.filter(function(a,l){return!(l in n.failures)})),"values"in t&&D(t.values)&&(t.values=t.values.filter(function(a,l){return!(l in n.failures)})),t)}function Kr(e,t){return n=e,((r=t).lower===void 0||(r.lowerOpen?0<ye(n,r.lower):0<=ye(n,r.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?ye(e,t.upper)<0:ye(e,t.upper)<=0));var n,r}function Po(e,t,k,r,a,l){if(!k||k.length===0)return e;var c=t.query.index,d=c.multiEntry,y=t.query.range,m=r.schema.primaryKey.extractKey,w=c.extractKey,h=(c.lowLevelIndex||c).extractKey,k=k.reduce(function(g,_){var x=g,b=[];if(_.type==="add"||_.type==="put")for(var S=new Xe,T=_.values.length-1;0<=T;--T){var E,I=_.values[T],L=m(I);S.hasKey(L)||(E=w(I),(d&&D(E)?E.some(function(V){return Kr(V,y)}):Kr(E,y))&&(S.addKey(L),b.push(I)))}switch(_.type){case"add":var Q=new Xe().addKeys(t.values?g.map(function(ne){return m(ne)}):g),x=g.concat(t.values?b.filter(function(ne){return ne=m(ne),!Q.hasKey(ne)&&(Q.addKey(ne),!0)}):b.map(function(ne){return m(ne)}).filter(function(ne){return!Q.hasKey(ne)&&(Q.addKey(ne),!0)}));break;case"put":var z=new Xe().addKeys(_.values.map(function(ne){return m(ne)}));x=g.filter(function(ne){return!z.hasKey(t.values?m(ne):ne)}).concat(t.values?b:b.map(function(ne){return m(ne)}));break;case"delete":var W=new Xe().addKeys(_.keys);x=g.filter(function(ne){return!W.hasKey(t.values?m(ne):ne)});break;case"deleteRange":var J=_.range;x=g.filter(function(ne){return!Kr(m(ne),J)})}return x},e);return k===e?e:(k.sort(function(g,_){return ye(h(g),h(_))||ye(m(g),m(_))}),t.limit&&t.limit<1/0&&(k.length>t.limit?k.length=t.limit:e.length===t.limit&&k.length<t.limit&&(a.dirty=!0)),l?Object.freeze(k):k)}function Io(e,t){return ye(e.lower,t.lower)===0&&ye(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Hi(e,t){return function(n,r,a,l){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=ye(n,r))===0){if(a&&l)return 0;if(a)return 1;if(l)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,a,l){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=ye(n,r))===0){if(a&&l)return 0;if(a)return-1;if(l)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Li(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var a,l;e.subscribers.delete(n),e.subscribers.size===0&&(a=e,l=t,setTimeout(function(){a.subscribers.size===0&&de(l,a)},3e3))})}var zi={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return u(u({},e),{transaction:function(n,r,a){var l,c,d=e.transaction(n,r,a);return r==="readwrite"&&(c=(l=new AbortController).signal,a=function(y){return function(){if(l.abort(),r==="readwrite"){for(var m=new Set,w=0,h=n;w<h.length;w++){var k=h[w],g=Bt["idb://".concat(t,"/").concat(k)];if(g){var _=e.table(k),x=g.optimisticOps.filter(function(ne){return ne.trans===d});if(d._explicit&&y&&d.mutatedParts)for(var b=0,S=Object.values(g.queries.query);b<S.length;b++)for(var T=0,E=(Q=S[b]).slice();T<E.length;T++)Or((z=E[T]).obsSet,d.mutatedParts)&&(de(Q,z),z.subscribers.forEach(function(ne){return m.add(ne)}));else if(0<x.length){g.optimisticOps=g.optimisticOps.filter(function(ne){return ne.trans!==d});for(var I=0,L=Object.values(g.queries.query);I<L.length;I++)for(var Q,z,W,J=0,V=(Q=L[I]).slice();J<V.length;J++)(z=V[J]).res!=null&&d.mutatedParts&&(y&&!z.dirty?(W=Object.isFrozen(z.res),W=Po(z.res,z.req,x,_,z,W),z.dirty?(de(Q,z),z.subscribers.forEach(function(ne){return m.add(ne)})):W!==z.res&&(z.res=W,z.promise=Z.resolve({result:W}))):(z.dirty&&de(Q,z),z.subscribers.forEach(function(ne){return m.add(ne)})))}}}m.forEach(function(ne){return ne()})}}},d.addEventListener("abort",a(!1),{signal:c}),d.addEventListener("error",a(!1),{signal:c}),d.addEventListener("complete",a(!0),{signal:c})),d},table:function(n){var r=e.table(n),a=r.schema.primaryKey;return u(u({},r),{mutate:function(l){var c=te.trans;if(a.outbound||c.db._options.cache==="disabled"||c.explicit||c.idbtrans.mode!=="readwrite")return r.mutate(l);var d=Bt["idb://".concat(t,"/").concat(n)];return d?(c=r.mutate(l),l.type!=="add"&&l.type!=="put"||!(50<=l.values.length||Mr(a,l).some(function(y){return y==null}))?(d.optimisticOps.push(l),l.mutatedParts&&zn(l.mutatedParts),c.then(function(y){0<y.numFailures&&(de(d.optimisticOps,l),(y=Co(0,l,y))&&d.optimisticOps.push(y),l.mutatedParts&&zn(l.mutatedParts))}),c.catch(function(){de(d.optimisticOps,l),l.mutatedParts&&zn(l.mutatedParts)})):c.then(function(y){var m=Co(0,u(u({},l),{values:l.values.map(function(w,h){var k;return y.failures[h]?w:(w=(k=a.keyPath)!==null&&k!==void 0&&k.includes(".")?Ae(w):u({},w),G(w,a.keyPath,y.results[h]),w)})}),y);d.optimisticOps.push(m),queueMicrotask(function(){return l.mutatedParts&&zn(l.mutatedParts)})}),c):r.mutate(l)},query:function(l){if(!Eo(te,r)||!Oo("query",l))return r.query(l);var c=((m=te.trans)===null||m===void 0?void 0:m.db._options.cache)==="immutable",h=te,d=h.requery,y=h.signal,m=function(_,x,b,S){var T=Bt["idb://".concat(_,"/").concat(x)];if(!T)return[];if(!(x=T.queries[b]))return[null,!1,T,null];var E=x[(S.query?S.query.index.name:null)||""];if(!E)return[null,!1,T,null];switch(b){case"query":var I=E.find(function(L){return L.req.limit===S.limit&&L.req.values===S.values&&Io(L.req.query.range,S.query.range)});return I?[I,!0,T,E]:[E.find(function(L){return("limit"in L.req?L.req.limit:1/0)>=S.limit&&(!S.values||L.req.values)&&Hi(L.req.query.range,S.query.range)}),!1,T,E];case"count":return I=E.find(function(L){return Io(L.req.query.range,S.query.range)}),[I,!!I,T,E]}}(t,n,"query",l),w=m[0],h=m[1],k=m[2],g=m[3];return w&&h?w.obsSet=l.obsSet:(h=r.query(l).then(function(_){var x=_.result;if(w&&(w.res=x),c){for(var b=0,S=x.length;b<S;++b)Object.freeze(x[b]);Object.freeze(x)}else _.result=Ae(x);return _}).catch(function(_){return g&&w&&de(g,w),Promise.reject(_)}),w={obsSet:l.obsSet,promise:h,subscribers:new Set,type:"query",req:l,dirty:!1},g?g.push(w):(g=[w],(k=k||(Bt["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[l.query.index.name||""]=g)),Li(w,g,d,y),w.promise.then(function(_){return{result:Po(_.result,l,k==null?void 0:k.optimisticOps,r,w,c)}})}})}})}};function Yn(e,t){return new Proxy(e,{get:function(n,r,a){return r==="db"?t:Reflect.get(n,r,a)}})}var Dt=(Ne.prototype.version=function(e){if(isNaN(e)||e<.1)throw new oe.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(ji),n.stores({}),this._state.autoSchema=!1,n)},Ne.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||te.letThrough||this._vip)?e():new Z(function(n,r){if(t._state.openComplete)return r(new oe.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new oe.DatabaseClosed);t.open().catch(xe)}t._state.dbReadyPromise.then(n,r)}).then(e)},Ne.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,a=e.name;return a&&this.unuse({stack:t,name:a}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:r??10,name:a}),e.sort(function(l,c){return l.level-c.level}),this},Ne.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(a){return r?a.create!==r:!!n&&a.name!==n})),this},Ne.prototype.open=function(){var e=this;return Ft(vt,function(){return Fi(e)})},Ne.prototype._close=function(){var e=this._state,t=tn.indexOf(this);if(0<=t&&tn.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Z(function(n){e.dbReadyResolve=n}),e.openCanceller=new Z(function(n,r){e.cancelOpen=r}))},Ne.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new oe.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new oe.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Ne.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new Z(function(a,l){function c(){t.close(e);var d=t._deps.indexedDB.deleteDatabase(t.name);d.onsuccess=Me(function(){var y,m,w;y=t._deps,m=t.name,w=y.indexedDB,y=y.IDBKeyRange,Sr(w)||m===Pn||Dr(w,y).delete(m).catch(xe),a()}),d.onerror=mt(l),d.onblocked=t._fireOnBlocked}if(n)throw new oe.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(c):c()})},Ne.prototype.backendDB=function(){return this.idbdb},Ne.prototype.isOpen=function(){return this.idbdb!==null},Ne.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Ne.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ne.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ne.prototype,"tables",{get:function(){var e=this;return p(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Ne.prototype.transaction=function(){var e=(function(t,n,r){var a=arguments.length;if(a<2)throw new oe.InvalidArgument("Too few arguments");for(var l=new Array(a-1);--a;)l[a-1]=arguments[a];return r=l.pop(),[t,le(l),r]}).apply(this,arguments);return this._transaction.apply(this,e)},Ne.prototype._transaction=function(e,t,n){var r=this,a=te.trans;a&&a.db===this&&e.indexOf("!")===-1||(a=null);var l,c,d=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(c=t.map(function(m){if(m=m instanceof r.Table?m.name:m,typeof m!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return m}),e=="r"||e===dr)l=dr;else{if(e!="rw"&&e!=hr)throw new oe.InvalidArgument("Invalid transaction mode: "+e);l=hr}if(a){if(a.mode===dr&&l===hr){if(!d)throw new oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&c.forEach(function(m){if(a&&a.storeNames.indexOf(m)===-1){if(!d)throw new oe.SubTransaction("Table "+m+" not included in parent transaction.");a=null}}),d&&a&&!a.active&&(a=null)}}catch(m){return a?a._promise(null,function(w,h){h(m)}):Be(m)}var y=(function m(w,h,k,g,_){return Z.resolve().then(function(){var x=te.transless||te,b=w._createTransaction(h,k,w._dbSchema,g);if(b.explicit=!0,x={trans:b,transless:x},g)b.idbtrans=g.idbtrans;else try{b.create(),b.idbtrans._explicit=!0,w._state.PR1398_maxLoop=3}catch(E){return E.name===lt.InvalidState&&w.isOpen()&&0<--w._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),w.close({disableAutoOpen:!1}),w.open().then(function(){return m(w,h,k,null,_)})):Be(E)}var S,T=$e(_);return T&&en(),x=Z.follow(function(){var E;(S=_.call(b,b))&&(T?(E=Et.bind(null,null),S.then(E,E)):typeof S.next=="function"&&typeof S.throw=="function"&&(S=jr(S)))},x),(S&&typeof S.then=="function"?Z.resolve(S).then(function(E){return b.active?E:Be(new oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):x.then(function(){return S})).then(function(E){return g&&b._resolve(),b._completion.then(function(){return E})}).catch(function(E){return b._reject(E),Be(E)})})}).bind(null,this,l,c,a,n);return a?a._promise(l,y,"lock"):te.trans?Ft(te.transless,function(){return r._whenReady(y)}):this._whenReady(y)},Ne.prototype.table=function(e){if(!K(this._allTables,e))throw new oe.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Ne);function Ne(e,t){var n=this;this._middlewares={},this.verno=0;var r=Ne.dependencies;this._options=t=u({addons:Ne.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,l,c,d,y,m={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:xe,dbReadyPromise:null,cancelOpen:xe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};m.dbReadyPromise=new Z(function(h){m.dbReadyResolve=h}),m.openCanceller=new Z(function(h,k){m.cancelOpen=k}),this._state=m,this.name=e,this.on=sn(this,"populate","blocked","versionchange","close",{ready:[ie,xe]}),this.on.ready.subscribe=N(this.on.ready.subscribe,function(h){return function(k,g){Ne.vip(function(){var _,x=n._state;x.openComplete?(x.dbOpenError||Z.resolve().then(k),g&&h(k)):x.onReadyBeingFired?(x.onReadyBeingFired.push(k),g&&h(k)):(h(k),_=n,g||h(function b(){_.on.ready.unsubscribe(k),_.on.ready.unsubscribe(b)}))})}}),this.Collection=(a=this,un(Si.prototype,function(S,b){this.db=a;var g=so,_=null;if(b)try{g=b()}catch(T){_=T}var x=S._ctx,b=x.table,S=b.hook.reading.fire;this._ctx={table:b,index:x.index,isPrimKey:!x.index||b.schema.primKey.keyPath&&x.index===b.schema.primKey.name,range:g,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:_,or:x.or,valueMapper:S!==Mt?S:null}})),this.Table=(l=this,un(fo.prototype,function(h,k,g){this.db=l,this._tx=g,this.name=h,this.schema=k,this.hook=l._allTables[h]?l._allTables[h].hook:sn(null,{creating:[xn,xe],reading:[wn,Mt],updating:[Dn,xe],deleting:[kn,xe]})})),this.Transaction=(c=this,un(Oi.prototype,function(h,k,g,_,x){var b=this;this.db=c,this.mode=h,this.storeNames=k,this.schema=g,this.chromeTransactionDurability=_,this.idbtrans=null,this.on=sn(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Z(function(S,T){b._resolve=S,b._reject=T}),this._completion.then(function(){b.active=!1,b.on.complete.fire()},function(S){var T=b.active;return b.active=!1,b.on.error.fire(S),b.parent?b.parent._reject(S):T&&b.idbtrans&&b.idbtrans.abort(),Be(S)})})),this.Version=(d=this,un(Ki.prototype,function(h){this.db=d,this._cfg={version:h,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(y=this,un(go.prototype,function(h,k,g){if(this.db=y,this._ctx={table:h,index:k===":id"?null:k,or:g},this._cmp=this._ascending=ye,this._descending=function(_,x){return ye(x,_)},this._max=function(_,x){return 0<ye(_,x)?_:x},this._min=function(_,x){return ye(_,x)<0?_:x},this._IDBKeyRange=y._deps.IDBKeyRange,!this._IDBKeyRange)throw new oe.MissingAPI})),this.on("versionchange",function(h){0<h.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(h){!h.newVersion||h.newVersion<h.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(h.oldVersion/10))}),this._maxKey=dn(t.IDBKeyRange),this._createTransaction=function(h,k,g,_){return new n.Transaction(h,k,g,n._options.chromeTransactionDurability,_)},this._fireOnBlocked=function(h){n.on("blocked").fire(h),tn.filter(function(k){return k.name===n.name&&k!==n&&!k._state.vcFired}).map(function(k){return k.on("versionchange").fire(h)})},this.use(Bi),this.use(zi),this.use(Ni),this.use(qi),this.use(Ri);var w=new Proxy(this,{get:function(h,k,g){if(k==="_vip")return!0;if(k==="table")return function(x){return Yn(n.table(x),w)};var _=Reflect.get(h,k,g);return _ instanceof fo?Yn(_,w):k==="tables"?_.map(function(x){return Yn(x,w)}):k==="_createTransaction"?function(){return Yn(_.apply(this,arguments),w)}:_}});this.vip=w,r.forEach(function(h){return h(n)})}var Wn,ct=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ui=(Fr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Fr.prototype[ct]=function(){return this},Fr);function Fr(e){this._subscribe=e}try{Wn={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{Wn={indexedDB:null,IDBKeyRange:null}}function jo(e){var t,n=!1,r=new Ui(function(a){var l=$e(e),c,d=!1,y={},m={},w={get closed(){return d},unsubscribe:function(){d||(d=!0,c&&c.abort(),h&&Pt.storagemutated.unsubscribe(g))}};a.start&&a.start(w);var h=!1,k=function(){return fr(_)},g=function(x){Ln(y,x),Or(m,y)&&k()},_=function(){var x,b,S;!d&&Wn.indexedDB&&(y={},x={},c&&c.abort(),c=new AbortController,S=function(T){var E=Zt();try{l&&en();var I=Tt(e,T);return I=l?I.finally(Et):I}finally{E&&$t()}}(b={subscr:x,signal:c.signal,requery:k,querier:e,trans:null}),Promise.resolve(S).then(function(T){n=!0,t=T,d||b.signal.aborted||(y={},function(E){for(var I in E)if(K(E,I))return;return 1}(m=x)||h||(Pt(fn,g),h=!0),fr(function(){return!d&&a.next&&a.next(T)}))},function(T){n=!1,["DatabaseClosedError","AbortError"].includes(T==null?void 0:T.name)||d||fr(function(){d||a.error&&a.error(T)})}))};return setTimeout(k,0),w});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var Nt=Dt;function qr(e){var t=It;try{It=!0,Pt.storagemutated.fire(e),Ir(e,!0)}finally{It=t}}C(Nt,u(u({},yt),{delete:function(e){return new Nt(e,{addons:[]}).delete()},exists:function(e){return new Nt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=Nt.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Sr(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(a){return a.name}).filter(function(a){return a!==Pn})}):Dr(n,t).toCollection().primaryKeys()).then(e)}catch{return Be(new oe.MissingAPI)}var t,n},defineClass:function(){return function(e){O(this,e)}},ignoreTransaction:function(e){return te.trans?Ft(te.transless,e):e()},vip:Tr,async:function(e){return function(){try{var t=jr(e.apply(this,arguments));return t&&typeof t.then=="function"?t:Z.resolve(t)}catch(n){return Be(n)}}},spawn:function(e,t,n){try{var r=jr(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:Z.resolve(r)}catch(a){return Be(a)}},currentTransaction:{get:function(){return te.trans||null}},waitFor:function(e,t){return t=Z.resolve(typeof e=="function"?Nt.ignoreTransaction(e):e).timeout(t||6e4),te.trans?te.trans.waitFor(t):t},Promise:Z,debug:{get:function(){return se},set:function(e){me(e)}},derive:U,extend:O,props:C,override:N,Events:sn,on:Pt,liveQuery:jo,extendObservabilitySet:Ln,getByKeyPath:ee,setByKeyPath:G,delByKeyPath:function(e,t){typeof t=="string"?G(e,t,void 0):"length"in t&&[].map.call(t,function(n){G(e,n,void 0)})},shallowClone:ae,deepClone:Ae,getObjectDiff:Ar,cmp:ye,asap:$,minKey:-1/0,addons:[],connections:tn,errnames:lt,dependencies:Wn,cache:Bt,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),Nt.maxKey=dn(Nt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Pt(fn,function(e){It||(e=new CustomEvent(gr,{detail:e}),It=!0,dispatchEvent(e),It=!1)}),addEventListener(gr,function(e){e=e.detail,It||qr(e)}));var on,It=!1,Ao=function(){};return typeof BroadcastChannel<"u"&&((Ao=function(){(on=new BroadcastChannel(gr)).onmessage=function(e){return e.data&&qr(e.data)}})(),typeof on.unref=="function"&&on.unref(),Pt(fn,function(e){It||on.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Dt.disableBfCache&&e.persisted){se&&console.debug("Dexie: handling persisted pagehide"),on!=null&&on.close();for(var t=0,n=tn;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Dt.disableBfCache&&e.persisted&&(se&&console.debug("Dexie: handling persisted pageshow"),Ao(),qr({all:new Xe(-1/0,[[]])}))})),Z.rejectionMapper=function(e,t){return!e||e instanceof Ge||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Vt[e.name]?e:(t=new Vt[e.name](t||e.message,e),"stack"in e&&B(t,"stack",{get:function(){return this.inner.stack}}),t)},me(se),u(Dt,Object.freeze({__proto__:null,Dexie:Dt,liveQuery:jo,Entity:uo,cmp:ye,PropModification:ln,replacePrefix:function(e,t){return new ln({replacePrefix:[e,t]})},add:function(e){return new ln({add:e})},remove:function(e){return new ln({remove:e})},default:Dt,RangeSet:Xe,mergeRanges:pn,rangesOverlap:xo}),{default:Dt}),Dt})}($n)),$n.exports}var Oa=Ea();const Wr=Sa(Oa),Lo=Symbol.for("Dexie"),nr=globalThis[Lo]||(globalThis[Lo]=Wr);if(Wr.semVer!==nr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Wr.semVer} and ${nr.semVer}`);const{liveQuery:nl,mergeRanges:rl,rangesOverlap:ol,RangeSet:il,cmp:al,Entity:sl,PropModification:ul,replacePrefix:ll,add:cl,remove:fl}=nr;class Ca{constructor(){this._db=new nr("FastingHours"),this._db.version(20).stores({history:"id, started",hunger:"id, created",water:"id, created"})}browseHistory(){return this._db.history.toArray()}browseHistoryByEnd(){return this._db.history.toArray().then(o=>o.filter(u=>u.ended===null)[0])}readHistory(o){return this._db.history.get({id:o})}editHistory(o){const i=Hr(o);return i.updated=new Date,this._db.history.put(i).then(()=>this._db.history.get({id:o.id}))}addHistory(){const o={id:crypto.randomUUID(),type:"history",created:new Date,updated:new Date,started:new Date,ended:null,notes:null};return this._db.history.add(o).then(()=>this._db.history.get({id:o.id}))}deleteHistory(o){return this._db.history.delete(o)}browseHunger(o=!1){return this._db.hunger.toArray().then(i=>o?(i.sort((u,f)=>u.created.getTime()<f.created.getTime()?1:u.created.getTime()>f.created.getTime()?-1:0),i.length===0?null:i[0]):i)}readHunger(o){return this._db.hunger.get({id:o})}editHunger(o){const i=Hr(o);return i.updated=new Date,this._db.hunger.put(i).then(()=>this._db.hunger.get({id:o.id}))}addHunger(o=5){const i={id:crypto.randomUUID(),type:"hunger",created:new Date,updated:new Date,level:o};return this._db.hunger.add(i).then(()=>this._db.hunger.get({id:i.id}))}deleteHunger(o){return this._db.hunger.delete(o)}browseWater(o=!1){return this._db.water.toArray().then(i=>{if(o){const u=new Date;u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0);const f=new Date(u.getTime());return f.setDate(f.getDate()+1),i.filter(v=>v.created.getTime()>u.getTime()&&v.created.getTime()<f.getTime())}else return i})}readWater(o){return this._db.water.get({id:o})}editWater(o){const i=Hr(o);return i.updated=new Date,this._db.water.put(i).then(()=>this._db.water.get({id:o.id}))}addWater(o){const i={id:crypto.randomUUID(),type:"water",created:new Date,updated:new Date,volume:o};return crypto.randomUUID(),this._db.water.add(i).then(()=>this._db.water.get({id:i.id}))}deleteWater(o){return this._db.water.delete(o)}}var Pa=_e('<div class="hour svelte-1079twi"></div>'),Ia=_e('<div class="day svelte-1079twi"><!></div>'),ja=_e('<p class="day svelte-1079twi"> </p> <!>',1),Aa=_e('<div class="day svelte-1079twi"><div class="hour svelte-1079twi"></div></div>'),Ma=_e('<figure class="svelte-1079twi"><div class="labels svelte-1079twi"><p class="date svelte-1079twi">Date</p> <p class="hour svelte-1079twi">0</p> <p class="hour svelte-1079twi">12</p> <p class="hour svelte-1079twi">24</p></div> <div class="grid svelte-1079twi"><!></div> <div class="average grid svelte-1079twi"><p class="day svelte-1079twi">Avg</p> <!></div> <legend class="svelte-1079twi"><div class="svelte-1079twi"></div> <p class="svelte-1079twi">Fasting</p></legend></figure>');function ui(s,o){nt(o,!0);let i=Se(o,"average",19,()=>[]),u=Se(o,"daily",3,null);Se(o,"days",3,10);function f(C){return C=new Date(C+"T00:00:00"),new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(C)}function v(C,H){return C===0||H[C-1]===0?(1-H[C])*100+"%":0}var p=Ma(),D=re(R(p),2),O=R(D);{var M=C=>{var H=bn(),B=ft(H);Ut(B,17,()=>Object.keys(u()),zt,(U,X)=>{var Y=ja();const j=Qe(()=>u()[P(X)]);var N=ft(Y),F=R(N,!0);q(N);var $=re(N,2);Ut($,16,()=>({length:24}),zt,(ee,G,ae)=>{var ge=Ia(),le=R(ge);{var Te=Ee=>{var Ae=Pa();let Re;qe(He=>Re=Ro(Ae,"",Re,He),[()=>({"margin-left":v(ae,P(j)),width:100*P(j)[ae]+"%"})]),he(Ee,Ae)};it(le,Ee=>{P(j)[ae]!==0&&Ee(Te)})}q(ge),he(ee,ge)}),qe(ee=>be(F,ee),[()=>f(P(X))]),he(U,Y)}),he(C,H)};it(O,C=>{u()!==null&&C(M)})}q(D);var A=re(D,2),K=re(R(A),2);Ut(K,16,()=>({length:24}),zt,(C,H,B)=>{var U=Aa(),X=R(U);let Y;q(U),qe(j=>Y=Ro(X,"",Y,j),[()=>({opacity:i()[B],width:"100%"})]),he(C,U)}),q(A),Gn(2),q(p),he(s,p),rt()}const li=/^[a-z0-9]+(-[a-z0-9]+)*$/,or=(s,o,i,u="")=>{const f=s.split(":");if(s.slice(0,1)==="@"){if(f.length<2||f.length>3)return null;u=f.shift().slice(1)}if(f.length>3||!f.length)return null;if(f.length>1){const D=f.pop(),O=f.pop(),M={provider:f.length>0?f[0]:u,prefix:O,name:D};return o&&!er(M)?null:M}const v=f[0],p=v.split("-");if(p.length>1){const D={provider:u,prefix:p.shift(),name:p.join("-")};return o&&!er(D)?null:D}if(i&&u===""){const D={provider:u,prefix:"",name:v};return o&&!er(D,i)?null:D}return null},er=(s,o)=>s?!!((o&&s.prefix===""||s.prefix)&&s.name):!1,ci=Object.freeze({left:0,top:0,width:16,height:16}),rr=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),ir=Object.freeze({...ci,...rr}),Vr=Object.freeze({...ir,body:"",hidden:!1});function Ka(s,o){const i={};!s.hFlip!=!o.hFlip&&(i.hFlip=!0),!s.vFlip!=!o.vFlip&&(i.vFlip=!0);const u=((s.rotate||0)+(o.rotate||0))%4;return u&&(i.rotate=u),i}function zo(s,o){const i=Ka(s,o);for(const u in Vr)u in rr?u in s&&!(u in i)&&(i[u]=rr[u]):u in o?i[u]=o[u]:u in s&&(i[u]=s[u]);return i}function Fa(s,o){const i=s.icons,u=s.aliases||Object.create(null),f=Object.create(null);function v(p){if(i[p])return f[p]=[];if(!(p in f)){f[p]=null;const D=u[p]&&u[p].parent,O=D&&v(D);O&&(f[p]=[D].concat(O))}return f[p]}return Object.keys(i).concat(Object.keys(u)).forEach(v),f}function qa(s,o,i){const u=s.icons,f=s.aliases||Object.create(null);let v={};function p(D){v=zo(u[D]||f[D],v)}return p(o),i.forEach(p),zo(s,v)}function fi(s,o){const i=[];if(typeof s!="object"||typeof s.icons!="object")return i;s.not_found instanceof Array&&s.not_found.forEach(f=>{o(f,null),i.push(f)});const u=Fa(s);for(const f in u){const v=u[f];v&&(o(f,qa(s,f,v)),i.push(f))}return i}const Ra={provider:"",aliases:{},not_found:{},...ci};function Lr(s,o){for(const i in o)if(i in s&&typeof s[i]!=typeof o[i])return!1;return!0}function di(s){if(typeof s!="object"||s===null)return null;const o=s;if(typeof o.prefix!="string"||!s.icons||typeof s.icons!="object"||!Lr(s,Ra))return null;const i=o.icons;for(const f in i){const v=i[f];if(!f||typeof v.body!="string"||!Lr(v,Vr))return null}const u=o.aliases||Object.create(null);for(const f in u){const v=u[f],p=v.parent;if(!f||typeof p!="string"||!i[p]&&!u[p]||!Lr(v,Vr))return null}return o}const Uo=Object.create(null);function Ba(s,o){return{provider:s,prefix:o,icons:Object.create(null),missing:new Set}}function an(s,o){const i=Uo[s]||(Uo[s]=Object.create(null));return i[o]||(i[o]=Ba(s,o))}function hi(s,o){return di(o)?fi(o,(i,u)=>{u?s.icons[i]=u:s.missing.add(i)}):[]}function Na(s,o,i){try{if(typeof i.body=="string")return s.icons[o]={...i},!0}catch{}return!1}let _n=!1;function vi(s){return typeof s=="boolean"&&(_n=s),_n}function Ha(s){const o=typeof s=="string"?or(s,!0,_n):s;if(o){const i=an(o.provider,o.prefix),u=o.name;return i.icons[u]||(i.missing.has(u)?null:void 0)}}function La(s,o){const i=or(s,!0,_n);if(!i)return!1;const u=an(i.provider,i.prefix);return o?Na(u,i.name,o):(u.missing.add(i.name),!0)}function za(s,o){if(typeof s!="object")return!1;if(typeof o!="string"&&(o=s.provider||""),_n&&!o&&!s.prefix){let f=!1;return di(s)&&(s.prefix="",fi(s,(v,p)=>{La(v,p)&&(f=!0)})),f}const i=s.prefix;if(!er({prefix:i,name:"a"}))return!1;const u=an(o,i);return!!hi(u,s)}const pi=Object.freeze({width:null,height:null}),yi=Object.freeze({...pi,...rr}),Ua=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Ya=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Yo(s,o,i){if(o===1)return s;if(i=i||100,typeof s=="number")return Math.ceil(s*o*i)/i;if(typeof s!="string")return s;const u=s.split(Ua);if(u===null||!u.length)return s;const f=[];let v=u.shift(),p=Ya.test(v);for(;;){if(p){const D=parseFloat(v);isNaN(D)?f.push(v):f.push(Math.ceil(D*o*i)/i)}else f.push(v);if(v=u.shift(),v===void 0)return f.join("");p=!p}}function Wa(s,o="defs"){let i="";const u=s.indexOf("<"+o);for(;u>=0;){const f=s.indexOf(">",u),v=s.indexOf("</"+o);if(f===-1||v===-1)break;const p=s.indexOf(">",v);if(p===-1)break;i+=s.slice(f+1,v).trim(),s=s.slice(0,u).trim()+s.slice(p+1)}return{defs:i,content:s}}function Va(s,o){return s?"<defs>"+s+"</defs>"+o:o}function Qa(s,o,i){const u=Wa(s);return Va(u.defs,o+u.content+i)}const Ga=s=>s==="unset"||s==="undefined"||s==="none";function Xa(s,o){const i={...ir,...s},u={...yi,...o},f={left:i.left,top:i.top,width:i.width,height:i.height};let v=i.body;[i,u].forEach(U=>{const X=[],Y=U.hFlip,j=U.vFlip;let N=U.rotate;Y?j?N+=2:(X.push("translate("+(f.width+f.left).toString()+" "+(0-f.top).toString()+")"),X.push("scale(-1 1)"),f.top=f.left=0):j&&(X.push("translate("+(0-f.left).toString()+" "+(f.height+f.top).toString()+")"),X.push("scale(1 -1)"),f.top=f.left=0);let F;switch(N<0&&(N-=Math.floor(N/4)*4),N=N%4,N){case 1:F=f.height/2+f.top,X.unshift("rotate(90 "+F.toString()+" "+F.toString()+")");break;case 2:X.unshift("rotate(180 "+(f.width/2+f.left).toString()+" "+(f.height/2+f.top).toString()+")");break;case 3:F=f.width/2+f.left,X.unshift("rotate(-90 "+F.toString()+" "+F.toString()+")");break}N%2===1&&(f.left!==f.top&&(F=f.left,f.left=f.top,f.top=F),f.width!==f.height&&(F=f.width,f.width=f.height,f.height=F)),X.length&&(v=Qa(v,'<g transform="'+X.join(" ")+'">',"</g>"))});const p=u.width,D=u.height,O=f.width,M=f.height;let A,K;p===null?(K=D===null?"1em":D==="auto"?M:D,A=Yo(K,O/M)):(A=p==="auto"?O:p,K=D===null?Yo(A,M/O):D==="auto"?M:D);const C={},H=(U,X)=>{Ga(X)||(C[U]=X.toString())};H("width",A),H("height",K);const B=[f.left,f.top,O,M];return C.viewBox=B.join(" "),{attributes:C,viewBox:B,body:v}}const Ja=/\sid="(\S+)"/g,Za="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let $a=0;function es(s,o=Za){const i=[];let u;for(;u=Ja.exec(s);)i.push(u[1]);if(!i.length)return s;const f="suffix"+(Math.random()*16777216|Date.now()).toString(16);return i.forEach(v=>{const p=typeof o=="function"?o(v):o+($a++).toString(),D=v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");s=s.replace(new RegExp('([#;"])('+D+')([")]|\\.[a-z])',"g"),"$1"+p+f+"$3")}),s=s.replace(new RegExp(f,"g"),""),s}const Qr=Object.create(null);function ts(s,o){Qr[s]=o}function Gr(s){return Qr[s]||Qr[""]}function $r(s){let o;if(typeof s.resources=="string")o=[s.resources];else if(o=s.resources,!(o instanceof Array)||!o.length)return null;return{resources:o,path:s.path||"/",maxURL:s.maxURL||500,rotate:s.rotate||750,timeout:s.timeout||5e3,random:s.random===!0,index:s.index||0,dataAfterTimeout:s.dataAfterTimeout!==!1}}const eo=Object.create(null),yn=["https://api.simplesvg.com","https://api.unisvg.com"],tr=[];for(;yn.length>0;)yn.length===1||Math.random()>.5?tr.push(yn.shift()):tr.push(yn.pop());eo[""]=$r({resources:["https://api.iconify.design"].concat(tr)});function ns(s,o){const i=$r(o);return i===null?!1:(eo[s]=i,!0)}function to(s){return eo[s]}const rs=()=>{let s;try{if(s=fetch,typeof s=="function")return s}catch{}};let Wo=rs();function os(s,o){const i=to(s);if(!i)return 0;let u;if(!i.maxURL)u=0;else{let f=0;i.resources.forEach(p=>{f=Math.max(f,p.length)});const v=o+".json?icons=";u=i.maxURL-f-i.path.length-v.length}return u}function is(s){return s===404}const as=(s,o,i)=>{const u=[],f=os(s,o),v="icons";let p={type:v,provider:s,prefix:o,icons:[]},D=0;return i.forEach((O,M)=>{D+=O.length+1,D>=f&&M>0&&(u.push(p),p={type:v,provider:s,prefix:o,icons:[]},D=O.length),p.icons.push(O)}),u.push(p),u};function ss(s){if(typeof s=="string"){const o=to(s);if(o)return o.path}return"/"}const us=(s,o,i)=>{if(!Wo){i("abort",424);return}let u=ss(o.provider);switch(o.type){case"icons":{const v=o.prefix,D=o.icons.join(","),O=new URLSearchParams({icons:D});u+=v+".json?"+O.toString();break}case"custom":{const v=o.uri;u+=v.slice(0,1)==="/"?v.slice(1):v;break}default:i("abort",400);return}let f=503;Wo(s+u).then(v=>{const p=v.status;if(p!==200){setTimeout(()=>{i(is(p)?"abort":"next",p)});return}return f=501,v.json()}).then(v=>{if(typeof v!="object"||v===null){setTimeout(()=>{v===404?i("abort",v):i("next",f)});return}setTimeout(()=>{i("success",v)})}).catch(()=>{i("next",f)})},ls={prepare:as,send:us};function cs(s){const o={loaded:[],missing:[],pending:[]},i=Object.create(null);s.sort((f,v)=>f.provider!==v.provider?f.provider.localeCompare(v.provider):f.prefix!==v.prefix?f.prefix.localeCompare(v.prefix):f.name.localeCompare(v.name));let u={provider:"",prefix:"",name:""};return s.forEach(f=>{if(u.name===f.name&&u.prefix===f.prefix&&u.provider===f.provider)return;u=f;const v=f.provider,p=f.prefix,D=f.name,O=i[v]||(i[v]=Object.create(null)),M=O[p]||(O[p]=an(v,p));let A;D in M.icons?A=o.loaded:p===""||M.missing.has(D)?A=o.missing:A=o.pending;const K={provider:v,prefix:p,name:D};A.push(K)}),o}function gi(s,o){s.forEach(i=>{const u=i.loaderCallbacks;u&&(i.loaderCallbacks=u.filter(f=>f.id!==o))})}function fs(s){s.pendingCallbacksFlag||(s.pendingCallbacksFlag=!0,setTimeout(()=>{s.pendingCallbacksFlag=!1;const o=s.loaderCallbacks?s.loaderCallbacks.slice(0):[];if(!o.length)return;let i=!1;const u=s.provider,f=s.prefix;o.forEach(v=>{const p=v.icons,D=p.pending.length;p.pending=p.pending.filter(O=>{if(O.prefix!==f)return!0;const M=O.name;if(s.icons[M])p.loaded.push({provider:u,prefix:f,name:M});else if(s.missing.has(M))p.missing.push({provider:u,prefix:f,name:M});else return i=!0,!0;return!1}),p.pending.length!==D&&(i||gi([s],v.id),v.callback(p.loaded.slice(0),p.missing.slice(0),p.pending.slice(0),v.abort))})}))}let ds=0;function hs(s,o,i){const u=ds++,f=gi.bind(null,i,u);if(!o.pending.length)return f;const v={id:u,icons:o,callback:s,abort:f};return i.forEach(p=>{(p.loaderCallbacks||(p.loaderCallbacks=[])).push(v)}),f}function vs(s,o=!0,i=!1){const u=[];return s.forEach(f=>{const v=typeof f=="string"?or(f,o,i):f;v&&u.push(v)}),u}var ps={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function ys(s,o,i,u){const f=s.resources.length,v=s.random?Math.floor(Math.random()*f):s.index;let p;if(s.random){let ee=s.resources.slice(0);for(p=[];ee.length>1;){const G=Math.floor(Math.random()*ee.length);p.push(ee[G]),ee=ee.slice(0,G).concat(ee.slice(G+1))}p=p.concat(ee)}else p=s.resources.slice(v).concat(s.resources.slice(0,v));const D=Date.now();let O="pending",M=0,A,K=null,C=[],H=[];typeof u=="function"&&H.push(u);function B(){K&&(clearTimeout(K),K=null)}function U(){O==="pending"&&(O="aborted"),B(),C.forEach(ee=>{ee.status==="pending"&&(ee.status="aborted")}),C=[]}function X(ee,G){G&&(H=[]),typeof ee=="function"&&H.push(ee)}function Y(){return{startTime:D,payload:o,status:O,queriesSent:M,queriesPending:C.length,subscribe:X,abort:U}}function j(){O="failed",H.forEach(ee=>{ee(void 0,A)})}function N(){C.forEach(ee=>{ee.status==="pending"&&(ee.status="aborted")}),C=[]}function F(ee,G,ae){const ge=G!=="success";switch(C=C.filter(le=>le!==ee),O){case"pending":break;case"failed":if(ge||!s.dataAfterTimeout)return;break;default:return}if(G==="abort"){A=ae,j();return}if(ge){A=ae,C.length||(p.length?$():j());return}if(B(),N(),!s.random){const le=s.resources.indexOf(ee.resource);le!==-1&&le!==s.index&&(s.index=le)}O="completed",H.forEach(le=>{le(ae)})}function $(){if(O!=="pending")return;B();const ee=p.shift();if(ee===void 0){if(C.length){K=setTimeout(()=>{B(),O==="pending"&&(N(),j())},s.timeout);return}j();return}const G={status:"pending",resource:ee,callback:(ae,ge)=>{F(G,ae,ge)}};C.push(G),M++,K=setTimeout($,s.rotate),i(ee,o,G.callback)}return setTimeout($),Y}function mi(s){const o={...ps,...s};let i=[];function u(){i=i.filter(D=>D().status==="pending")}function f(D,O,M){const A=ys(o,D,O,(K,C)=>{u(),M&&M(K,C)});return i.push(A),A}function v(D){return i.find(O=>D(O))||null}return{query:f,find:v,setIndex:D=>{o.index=D},getIndex:()=>o.index,cleanup:u}}function Vo(){}const zr=Object.create(null);function gs(s){if(!zr[s]){const o=to(s);if(!o)return;const i=mi(o),u={config:o,redundancy:i};zr[s]=u}return zr[s]}function ms(s,o,i){let u,f;if(typeof s=="string"){const v=Gr(s);if(!v)return i(void 0,424),Vo;f=v.send;const p=gs(s);p&&(u=p.redundancy)}else{const v=$r(s);if(v){u=mi(v);const p=s.resources?s.resources[0]:"",D=Gr(p);D&&(f=D.send)}}return!u||!f?(i(void 0,424),Vo):u.query(o,f,i)().abort}function Qo(){}function bs(s){s.iconsLoaderFlag||(s.iconsLoaderFlag=!0,setTimeout(()=>{s.iconsLoaderFlag=!1,fs(s)}))}function _s(s){const o=[],i=[];return s.forEach(u=>{(u.match(li)?o:i).push(u)}),{valid:o,invalid:i}}function gn(s,o,i){function u(){const f=s.pendingIcons;o.forEach(v=>{f&&f.delete(v),s.icons[v]||s.missing.add(v)})}if(i&&typeof i=="object")try{if(!hi(s,i).length){u();return}}catch(f){console.error(f)}u(),bs(s)}function Go(s,o){s instanceof Promise?s.then(i=>{o(i)}).catch(()=>{o(null)}):o(s)}function ws(s,o){s.iconsToLoad?s.iconsToLoad=s.iconsToLoad.concat(o).sort():s.iconsToLoad=o,s.iconsQueueFlag||(s.iconsQueueFlag=!0,setTimeout(()=>{s.iconsQueueFlag=!1;const{provider:i,prefix:u}=s,f=s.iconsToLoad;if(delete s.iconsToLoad,!f||!f.length)return;const v=s.loadIcon;if(s.loadIcons&&(f.length>1||!v)){Go(s.loadIcons(f,u,i),A=>{gn(s,f,A)});return}if(v){f.forEach(A=>{const K=v(A,u,i);Go(K,C=>{const H=C?{prefix:u,icons:{[A]:C}}:null;gn(s,[A],H)})});return}const{valid:p,invalid:D}=_s(f);if(D.length&&gn(s,D,null),!p.length)return;const O=u.match(li)?Gr(i):null;if(!O){gn(s,p,null);return}O.prepare(i,u,p).forEach(A=>{ms(i,A,K=>{gn(s,A.icons,K)})})}))}const xs=(s,o)=>{const i=vs(s,!0,vi()),u=cs(i);if(!u.pending.length){let O=!0;return o&&setTimeout(()=>{O&&o(u.loaded,u.missing,u.pending,Qo)}),()=>{O=!1}}const f=Object.create(null),v=[];let p,D;return u.pending.forEach(O=>{const{provider:M,prefix:A}=O;if(A===D&&M===p)return;p=M,D=A,v.push(an(M,A));const K=f[M]||(f[M]=Object.create(null));K[A]||(K[A]=[])}),u.pending.forEach(O=>{const{provider:M,prefix:A,name:K}=O,C=an(M,A),H=C.pendingIcons||(C.pendingIcons=new Set);H.has(K)||(H.add(K),f[M][A].push(K))}),v.forEach(O=>{const M=f[O.provider][O.prefix];M.length&&ws(O,M)}),o?hs(o,u,v):Qo};function ks(s,o){const i={...s};for(const u in o){const f=o[u],v=typeof f;u in pi?(f===null||f&&(v==="string"||v==="number"))&&(i[u]=f):v===typeof i[u]&&(i[u]=u==="rotate"?f%4:f)}return i}const Ds=/[\s,]+/;function Ss(s,o){o.split(Ds).forEach(i=>{switch(i.trim()){case"horizontal":s.hFlip=!0;break;case"vertical":s.vFlip=!0;break}})}function Ts(s,o=0){const i=s.replace(/^-?[0-9.]*/,"");function u(f){for(;f<0;)f+=4;return f%4}if(i===""){const f=parseInt(s);return isNaN(f)?0:u(f)}else if(i!==s){let f=0;switch(i){case"%":f=25;break;case"deg":f=90}if(f){let v=parseFloat(s.slice(0,s.length-i.length));return isNaN(v)?0:(v=v/f,v%1===0?u(v):0)}}return o}function Es(s,o){let i=s.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const u in o)i+=" "+u+'="'+o[u]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+s+"</svg>"}function Os(s){return s.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Cs(s){return"data:image/svg+xml,"+Os(s)}function Ps(s){return'url("'+Cs(s)+'")'}const Xo={...yi,inline:!1},Is={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},js={display:"inline-block"},Xr={"background-color":"currentColor"},bi={"background-color":"transparent"},Jo={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Zo={"-webkit-mask":Xr,mask:Xr,background:bi};for(const s in Zo){const o=Zo[s];for(const i in Jo)o[s+"-"+i]=Jo[i]}function As(s){return s+(s.match(/^[-0-9.]+$/)?"px":"")}function Ms(s,o){const i=ks(Xo,o),u=o.mode||"svg",f=u==="svg"?{...Is}:{};s.body.indexOf("xlink:")===-1&&delete f["xmlns:xlink"];let v=typeof o.style=="string"?o.style:"";for(let Y in o){const j=o[Y];if(j!==void 0)switch(Y){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":i[Y]=j===!0||j==="true"||j===1;break;case"flip":typeof j=="string"&&Ss(i,j);break;case"color":v=v+(v.length>0&&v.trim().slice(-1)!==";"?";":"")+"color: "+j+"; ";break;case"rotate":typeof j=="string"?i[Y]=Ts(j):typeof j=="number"&&(i[Y]=j);break;case"ariaHidden":case"aria-hidden":j!==!0&&j!=="true"&&delete f["aria-hidden"];break;default:if(Y.slice(0,3)==="on:")break;Xo[Y]===void 0&&(f[Y]=j)}}const p=Xa(s,i),D=p.attributes;if(i.inline&&(v="vertical-align: -0.125em; "+v),u==="svg"){Object.assign(f,D),v!==""&&(f.style=v);let Y=0,j=o.id;return typeof j=="string"&&(j=j.replace(/-/g,"_")),{svg:!0,attributes:f,body:es(p.body,j?()=>j+"ID"+Y++:"iconifySvelte")}}const{body:O,width:M,height:A}=s,K=u==="mask"||(u==="bg"?!1:O.indexOf("currentColor")!==-1),C=Es(O,{...D,width:M+"",height:A+""}),B={"--svg":Ps(C)},U=Y=>{const j=D[Y];j&&(B[Y]=As(j))};U("width"),U("height"),Object.assign(B,js,K?Xr:bi);let X="";for(const Y in B)X+=Y+": "+B[Y]+";";return f.style=X+v,{svg:!1,attributes:f}}vi(!0);ts("",ls);if(typeof document<"u"&&typeof window<"u"){const s=window;if(s.IconifyPreload!==void 0){const o=s.IconifyPreload,i="Invalid IconifyPreload syntax.";typeof o=="object"&&o!==null&&(o instanceof Array?o:[o]).forEach(u=>{try{(typeof u!="object"||u===null||u instanceof Array||typeof u.icons!="object"||typeof u.prefix!="string"||!za(u))&&console.error(i)}catch{console.error(i)}})}if(s.IconifyProviders!==void 0){const o=s.IconifyProviders;if(typeof o=="object"&&o!==null)for(let i in o){const u="IconifyProviders["+i+"] is invalid.";try{const f=o[i];if(typeof f!="object"||!f||f.resources===void 0)continue;ns(i,f)||console.error(u)}catch{console.error(u)}}}}function Ks(s,o,i,u,f){function v(){o.loading&&(o.loading.abort(),o.loading=null)}if(typeof s=="object"&&s!==null&&typeof s.body=="string")return o.name="",v(),{data:{...ir,...s}};let p;if(typeof s!="string"||(p=or(s,!1,!0))===null)return v(),null;const D=Ha(p);if(!D)return i&&(!o.loading||o.loading.name!==s)&&(v(),o.name="",o.loading={name:s,abort:xs([p],u)}),null;v(),o.name!==s&&(o.name=s,f&&!o.destroyed&&f(s));const O=["iconify"];return p.prefix!==""&&O.push("iconify--"+p.prefix),p.provider!==""&&O.push("iconify--"+p.provider),{data:D,classes:O}}function Fs(s,o){return s?Ms({...ir,...s},o):null}var qs=pa("<svg><!></svg>"),Rs=_e("<span></span>");function dt(s,o){nt(o,!0);const i={name:"",loading:null,destroyed:!1},u=ma(o,["$$slots","$$events","$$legacy"]);let f=je(!1),v=je(0),p=je(null);ha(()=>{P(v);const K=!!o.ssr||P(f),C=Ks(o.icon,i,K,D,o.onload),H=C?Fs(C.data,u):null;H&&C.classes&&(H.attributes.class=(typeof u.class=="string"?u.class+" ":"")+C.classes.join(" ")),ue(p,H,!0)});function D(){va(v)}$o(()=>{ue(f,!0)}),Yi(()=>{i.destroyed=!0,i.loading&&(i.loading.abort(),i.loading=null)});var O=bn(),M=ft(O);{var A=K=>{var C=bn(),H=ft(C);{var B=X=>{var Y=qs();Bo(Y,()=>({...P(p).attributes}));var j=R(Y);ka(j,()=>P(p).body,!0),q(Y),he(X,Y)},U=X=>{var Y=Rs();Bo(Y,()=>({...P(p).attributes})),he(X,Y)};it(H,X=>{P(p).svg?X(B):X(U,!1)})}he(K,C)};it(M,K=>{P(p)&&K(A)})}he(s,O),rt()}var Bs=_e('<article class="svelte-10tx4k0"><p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">hrs</span></p> <p class="colon svelte-10tx4k0">:</p> <p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">min</span></p> <p class="colon svelte-10tx4k0">:</p> <p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">sec</span></p></article>');function Ns(s,o){nt(o,!0);let i=Se(o,"now",3,null),u=Se(o,"started",3,null),f=Qe(()=>{if(u()===null)return{hours:0,minutes:"00",seconds:"00"};const U=Math.floor((i()-u().getTime())/1e3);return{hours:Math.floor(U/3600).toString(10).padStart(2,"0"),minutes:Math.floor(U%3600/60).toString(10).padStart(2,"0"),seconds:(U%60).toString(10).padStart(2,"0")}});var v=Bs(),p=R(v),D=R(p),O=R(D,!0);q(D),Gn(2),q(p);var M=re(p,4),A=R(M),K=R(A,!0);q(A),Gn(2),q(M);var C=re(M,4),H=R(C),B=R(H,!0);q(H),Gn(2),q(C),q(v),qe(()=>{be(O,P(f).hours),be(K,P(f).minutes),be(B,P(f).seconds)}),he(s,v),rt()}function Hs(s,o,i){o()===null?i.onstart&&i.onstart():i.onend&&i.onend()}var Ls=_e('<p class="svelte-81vq7f">You are not fasting.</p>'),zs=_e('<p class="svelte-81vq7f">You are fasting.</p> <!> <p class="started svelte-81vq7f"> </p>',1),Us=_e('<section class="svelte-81vq7f"><header class="svelte-81vq7f"><h3 class="svelte-81vq7f">Fasting</h3> <button type="button" class="svelte-81vq7f"><!></button></header> <article class="svelte-81vq7f"><!> <button class="primary svelte-81vq7f" type="button"> </button></article> <article class="svelte-81vq7f"><!></article> <footer class="svelte-81vq7f"><button class="hunger secondary svelte-81vq7f" type="button"><!> <span> </span></button> <button class="water secondary svelte-81vq7f" type="button"><!> <span> </span></button></footer></section>');function Ys(s,o){nt(o,!0);let i=Se(o,"activity",3,null),u=Se(o,"hunger",3,5),f=Se(o,"levels",19,()=>[]),v=Se(o,"now",3,null),p=Se(o,"started",3,null),D=Se(o,"water",3,0);function O(we){return f().find(Le=>Le.value===we).label}function M(we){return we===null?null:new Intl.DateTimeFormat(navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(we)}var A=Us(),K=R(A),C=re(R(K),2);C.__click=function(...we){var de;(de=o.onsettings)==null||de.apply(this,we)};var H=R(C);dt(H,{height:"20",icon:"material-symbols:settings-outline",width:"20"}),q(C),q(K);var B=re(K,2),U=R(B);{var X=we=>{var de=Ls();he(we,de)},Y=we=>{var de=zs(),Le=re(ft(de),2);Ns(Le,{get now(){return v()},get started(){return p()}});var Ke=re(Le,2),$e=R(Ke);q(Ke),qe(et=>be($e,`Started ${et??""}`),[()=>M(p())]),he(we,de)};it(U,we=>{p()===null?we(X):we(Y,!1)})}var j=re(U,2);j.__click=[Hs,p,o];var N=R(j);q(j),q(B);var F=re(B,2),$=R(F);const ee=Qe(()=>i()===null?[]:i().average),G=Qe(()=>i()===null?null:i().daily);ui($,{get average(){return P(ee)},get daily(){return P(G)},days:7}),q(F);var ae=re(F,2),ge=R(ae);ge.__click=function(...we){var de;(de=o.onhunger)==null||de.apply(this,we)};var le=R(ge);dt(le,{height:"20",icon:"material-symbols:fork-spoon-rounded",width:"20"});var Te=re(le,2),Ee=R(Te,!0);q(Te),q(ge);var Ae=re(ge,2);Ae.__click=function(...we){var de;(de=o.onwater)==null||de.apply(this,we)};var Re=R(Ae);dt(Re,{height:"20",icon:"material-symbols:water-drop-outline-rounded",width:"20"});var He=re(Re,2),Ue=R(He);q(He),q(Ae),q(ae),q(A),qe(we=>{be(N,`${p()===null?"Start":"Stop"} fasting`),be(Ee,we),be(Ue,`${D()??""} oz`)},[()=>O(u())]),he(s,A),rt()}pt(["click"]);function Ws(s,o,i,u){const f=new Date(parseInt(s.currentTarget.getAttribute("data-year")),parseInt(s.currentTarget.getAttribute("data-month")),parseInt(s.currentTarget.getAttribute("data-date")));f.getMonth()!==o().getMonth()&&o(new Date(f.getTime())),i(new Date(f.getTime())),u.onchange&&u.onchange(i())}var Vs=_e('<button type="button"> </button>'),Qs=_e('<section><header class="svelte-1ll096s"><h3 class="svelte-1ll096s"> </h3> <button type="button" class="svelte-1ll096s"><!></button> <button type="button" class="svelte-1ll096s"><!></button></header> <article class="svelte-1ll096s"><p class="svelte-1ll096s">Sun</p> <p class="svelte-1ll096s">Mon</p> <p class="svelte-1ll096s">Tue</p> <p class="svelte-1ll096s">Wed</p> <p class="svelte-1ll096s">Thu</p> <p class="svelte-1ll096s">Fri</p> <p class="svelte-1ll096s">Sat</p></article> <article class="svelte-1ll096s"></article></section>');function Gs(s,o){nt(o,!0);let i=Se(o,"display",23,()=>new Date),u=Se(o,"value",23,()=>new Date),f=Qe(()=>new Intl.DateTimeFormat(navigator.language,{month:"long",year:"numeric"}).format(i())),v=Qe(()=>{const Y=[],j=new Date,N=new Date(i().getFullYear(),i().getMonth(),1);N.setDate(N.getDate()-N.getDay());for(let F=0;F<42;F++){const $={date:N.getDate(),month:N.getMonth(),year:N.getFullYear(),outside:!0,today:!1,selected:!1,after:!1};N.getFullYear()===i().getFullYear()&&N.getMonth()===i().getMonth()&&($.outside=!1),N.getTime()>Date.now()&&($.after=!0),N.getFullYear()===j.getFullYear()&&N.getMonth()===j.getMonth()&&N.getDate()===j.getDate()&&($.today=!0),N.getFullYear()===u().getFullYear()&&N.getMonth()===u().getMonth()&&N.getDate()===u().getDate()&&($.selected=!0),N.setDate(N.getDate()+1),Y.push($)}return Y});function p(){let Y=i().getMonth(),j=i().getFullYear();j=Y===0?j-1:j,Y=Y===0?11:Y-1,i(new Date(j,Y,i().getDate()))}function D(){let Y=i().getMonth(),j=i().getFullYear();j=Y===11?j+1:j,Y=(Y+1)%12,i(new Date(j,Y,i().getDate()))}var O=Qs(),M=R(O),A=R(M),K=R(A,!0);q(A);var C=re(A,2);C.__click=p;var H=R(C);dt(H,{height:"24",icon:"material-symbols:navigate-before",width:"24"}),q(C);var B=re(C,2);B.__click=D;var U=R(B);dt(U,{height:"24",icon:"material-symbols:navigate-next",width:"24"}),q(B),q(M);var X=re(M,4);Ut(X,21,()=>P(v),zt,(Y,j)=>{var N=Vs();N.__click=[Ws,i,u,o];let F;var $=R(N,!0);q(N),qe(ee=>{Jn(N,"data-year",P(j).year),Jn(N,"data-month",P(j).month),Jn(N,"data-date",P(j).date),N.disabled=P(j).after,F=Yt(N,1,"svelte-1ll096s",null,F,ee),be($,P(j).date)},[()=>({outside:P(j).outside,today:P(j).today,selected:P(j).selected})]),he(Y,N)}),q(X),q(O),qe(()=>be(K,P(f))),he(s,O),rt()}pt(["click"]);function Xs(s,o,i){const u=new Date(o().getTime());u.getHours()>=12?u.getHours()===12?u.setHours(23):u.setHours(u.getHours()-1):u.getHours()===0?u.setHours(11):u.setHours(u.getHours()-1),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function Js(s,o,i){const u=new Date(o().getTime());u.getHours()>=12?u.getHours()===23?u.setHours(12):u.setHours(u.getHours()+1):u.getHours()===11?u.setHours(0):u.setHours(u.getHours()+1),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function Zs(s,o,i){const u=new Date(o().getTime());u.getHours()>=12&&u.setHours(u.getHours()-12),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function $s(s,o,i){const u=new Date(o().getTime());u.getHours()<12&&u.setHours(u.getHours()+12),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function eu(s,o,i){const u=new Date(o().getTime());u.getMinutes()===0?u.setMinutes(59):u.setMinutes(u.getMinutes()-1),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function tu(s,o,i){const u=new Date(o().getTime());u.getMinutes()===59?u.setMinutes(0):u.setMinutes(u.getMinutes()+1),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}var nu=_e('<article class="svelte-1bevvpj"><div class="time svelte-1bevvpj"><div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div> <p class="svelte-1bevvpj">:</p> <div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div></div> <div class="meridian svelte-1bevvpj"><button type="button">AM</button> <button type="button">PM</button></div></article>');function ru(s,o){nt(o,!0);let i=Se(o,"value",23,()=>new Date),u=Qe(()=>i().getHours()%12||12),f=Qe(()=>i().getMinutes().toString(10).padStart(2,"0")),v=Qe(()=>i().getHours()>=12?"PM":"AM");var p=nu(),D=R(p),O=R(D),M=R(O);M.__click=[Js,i,o];var A=R(M);dt(A,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),q(M);var K=re(M,2),C=R(K,!0);q(K);var H=re(K,2);H.__click=[Xs,i,o];var B=R(H);dt(B,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),q(H),q(O);var U=re(O,4),X=R(U);X.__click=[tu,i,o];var Y=R(X);dt(Y,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),q(X);var j=re(X,2),N=R(j,!0);q(j);var F=re(j,2);F.__click=[eu,i,o];var $=R(F);dt($,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),q(F),q(U),q(D);var ee=re(D,2),G=R(ee);G.__click=[Zs,i,o];let ae;var ge=re(G,2);ge.__click=[$s,i,o];let le;q(ee),q(p),qe((Te,Ee)=>{be(C,P(u)),be(N,P(f)),ae=Yt(G,1,"svelte-1bevvpj",null,ae,Te),le=Yt(ge,1,"svelte-1bevvpj",null,le,Ee)},[()=>({selected:P(v)==="AM"}),()=>({selected:P(v)==="PM"})]),he(s,p),rt()}pt(["click"]);function ou(s,o){ue(o,"calendar")}function iu(s,o){ue(o,"clock")}var au=_e('<article class="svelte-8yzu2w"><header class="svelte-8yzu2w"><button type="button"><p class="svelte-8yzu2w"> </p> <p class="svelte-8yzu2w"> </p></button> <button type="button"><p class="svelte-8yzu2w"> </p></button></header> <!></article>');function su(s,o){nt(o,!0);let i=Se(o,"value",23,()=>new Date),u=je("calendar");function f(G){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(G)}function v(G){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(G)}function p(G){G.setHours(i().getHours()),G.setMinutes(i().getMinutes()),G.setSeconds(i().getSeconds()),i(new Date(G.getTime())),o.onchange&&o.onchange(i())}function D(G){G.setFullYear(i().getFullYear()),G.getMonth(i().getMonth()),G.getDate(i().getDate()),i(new Date(G.getTime())),o.onchange&&o.onchange(i())}var O=au(),M=R(O),A=R(M);A.__click=[ou,u];let K;var C=R(A),H=R(C,!0);q(C);var B=re(C,2),U=R(B,!0);q(B),q(A);var X=re(A,2);X.__click=[iu,u];let Y;var j=R(X),N=R(j,!0);q(j),q(X),q(M);var F=re(M,2);{var $=G=>{Gs(G,{onchange:p,get value(){return i()}})},ee=G=>{ru(G,{onchange:D,get value(){return i()}})};it(F,G=>{P(u)===null||P(u)==="calendar"?G($):G(ee,!1)})}q(O),qe((G,ae,ge,le)=>{K=Yt(A,1,"svelte-8yzu2w",null,K,G),be(H,o.label),be(U,ae),Y=Yt(X,1,"svelte-8yzu2w",null,Y,ge),be(N,le)},[()=>({selected:P(u)==="calendar"}),()=>f(i()),()=>({selected:P(u)==="clock"}),()=>v(i())]),he(s,O),rt()}pt(["click"]);function uu(s,o,i,u){o(),i(null),u.oncancel&&u.oncancel()}function lu(s,o,i){o.ondelete&&o.ondelete(i().id)}function cu(s,o){const i=s.currentTarget.value.trim().length===0?null:s.currentTarget.value;o({...o(),notes:i})}function fu(s,o,i){o.onsave&&o.onsave(i())}var du=_e('<dialog class="svelte-13glclx"><h3 class="svelte-13glclx"> </h3> <!> <textarea placeholder="Notes" class="svelte-13glclx"></textarea> <footer class="svelte-13glclx"><button class="delete svelte-13glclx" type="button">Delete</button> <button class="cancel svelte-13glclx" type="button">Cancel</button> <button type="button" class="svelte-13glclx">Save</button></footer></dialog>');function hu(s,o){nt(o,!0);let i=Se(o,"field",3,"started"),u=Se(o,"item",7,null),f=Se(o,"label",3,"Started"),v=Se(o,"title",3,"Edit Fast Start"),p=je(void 0);function D(F){const $={...u()};$[i()]=new Date(F.getTime()),u({...$})}function O(){P(p).close()}function M(){P(p).showModal()}var A=du(),K=R(A),C=R(K,!0);q(K);var H=re(K,2);const B=Qe(()=>u()&&u().id&&u().id!==null?u()[i()]:new Date);su(H,{get label(){return f()},onchange:D,get value(){return P(B)}});var U=re(H,2);ya(U),U.__input=[cu,u];var X=re(U,2),Y=R(X);Y.__click=[lu,o,u];var j=re(Y,2);j.__click=[uu,O,u,o];var N=re(j,2);return N.__click=[fu,o,u],q(X),q(A),At(A,F=>ue(p,F),()=>P(p)),qe(()=>{be(C,v()),ga(U,u()&&u().id&&u().id!==null?u().notes:"")}),he(s,A),rt({close:O,showModal:M})}pt(["input","click"]);var vu=_e('<article class="svelte-o2f930"><p class="svelte-o2f930">Your fasting history<br/>will be displayed here.</p></article>'),pu=_e('<li class="header svelte-o2f930"><p class="svelte-o2f930"> </p></li>'),yu=(s,o,i)=>o(P(i).type,P(i).id),gu=_e('<p class="svelte-o2f930">Started Fast</p> <p class="svelte-o2f930"></p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p>',1),mu=_e('<p class="svelte-o2f930">Water</p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p>',1),bu=_e('<p class="svelte-o2f930"> </p> <p class="svelte-o2f930"></p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p>',1),_u=_e('<p class="svelte-o2f930">Ended Fast</p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p>',1),wu=_e('<li class="svelte-o2f930"><button type="button" class="svelte-o2f930"><!></button></li>'),xu=_e('<ul class="svelte-o2f930"></ul>');function ku(s,o){nt(o,!0);let i=Se(o,"items",19,()=>[]);function u(C){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",year:"numeric"}).format(C)}function f(C,H){const B=H.getTime()-C.getTime(),U=Math.floor(B/1e3),X=Math.floor(U/3600),Y=Math.floor(U%3600/60);return new Intl.DurationFormat(navigator.language,{style:"short",units:["hour","minute"]}).format({hours:X,minutes:Y})}function v(C){return new Intl.DateTimeFormat(navigator.language,{weekday:"long",month:"short",day:"numeric"}).format(C)}function p(C){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(C)}function D(C,H){o.onchange&&o.onchange(C,H)}var O=bn(),M=ft(O);{var A=C=>{var H=vu();he(C,H)},K=C=>{var H=xu();Ut(H,21,i,zt,(B,U)=>{var X=bn(),Y=ft(X);{var j=F=>{var $=pu(),ee=R($),G=R(ee,!0);q(ee),q($),qe(ae=>be(G,ae),[()=>v(P(U).timed)]),he(F,$)},N=F=>{var $=wu(),ee=R($);ee.__click=[yu,D,U];var G=R(ee);{var ae=le=>{var Te=gu(),Ee=re(ft(Te),4),Ae=R(Ee,!0);q(Ee);var Re=re(Ee,2),He=R(Re,!0);q(Re),qe((Ue,we)=>{be(Ae,Ue),be(He,we)},[()=>u(P(U).timed),()=>p(P(U).timed)]),he(le,Te)},ge=(le,Te)=>{{var Ee=Re=>{var He=mu(),Ue=re(ft(He),2),we=R(Ue);q(Ue);var de=re(Ue,2),Le=R(de,!0);q(de);var Ke=re(de,2),$e=R(Ke,!0);q(Ke),qe((et,Ge)=>{be(we,`${P(U).volume??""} oz`),be(Le,et),be($e,Ge)},[()=>u(P(U).timed),()=>p(P(U).timed)]),he(Re,He)},Ae=(Re,He)=>{{var Ue=de=>{var Le=bu(),Ke=ft(Le),$e=R(Ke,!0);q(Ke);var et=re(Ke,4),Ge=R(et,!0);q(et);var _t=re(et,2),at=R(_t,!0);q(_t),qe((ot,lt)=>{be($e,P(U).level),be(Ge,ot),be(at,lt)},[()=>u(P(U).timed),()=>p(P(U).timed)]),he(de,Le)},we=(de,Le)=>{{var Ke=$e=>{var et=_u(),Ge=re(ft(et),2),_t=R(Ge,!0);q(Ge);var at=re(Ge,2),ot=R(at,!0);q(at);var lt=re(at,2),Wt=R(lt,!0);q(lt),qe((oe,Vt,yt)=>{be(_t,oe),be(ot,Vt),be(Wt,yt)},[()=>f(P(U).started,P(U).ended),()=>u(P(U).timed),()=>p(P(U).timed)]),he($e,et)};it(de,$e=>{P(U).type==="end"&&$e(Ke)},Le)}};it(Re,de=>{P(U).type==="hunger"?de(Ue):de(we,!1)},He)}};it(le,Re=>{P(U).type==="water"?Re(Ee):Re(Ae,!1)},Te)}};it(G,le=>{P(U).type==="start"?le(ae):le(ge,!1)})}q(ee),q($),he(F,$)};it(Y,F=>{P(U).type==="header"?F(j):F(N,!1)})}he(B,X)}),q(H),he(C,H)};it(M,C=>{i().length===0?C(A):C(K,!1)})}he(s,O),rt()}pt(["click"]);var Du=_e('<section class="svelte-jsa4zq"><header class="svelte-jsa4zq"><h3 class="svelte-jsa4zq">Hours</h3></header> <article class="svelte-jsa4zq"><!></article> <article class="svelte-jsa4zq"><!></article></section>');function Su(s,o){nt(o,!0);let i=Se(o,"activity",3,null),u=Se(o,"history",19,()=>[]);Se(o,"levels",19,()=>[]);var f=Du(),v=re(R(f),2),p=R(v);const D=Qe(()=>i()===null?[]:i().average),O=Qe(()=>i()===null?null:i().daily);ui(p,{get average(){return P(D)},get daily(){return P(O)},days:7}),q(v);var M=re(v,2),A=R(M);ku(A,{get items(){return u()},get onchange(){return o.onchange}}),q(M),q(f),he(s,f),rt()}function Tu(s,o,i,u){o(),i(null),u.oncancel&&u.oncancel()}function Eu(s,o,i){o.ondelete&&o.ondelete(i().id)}function Ou(s,o,i){o()===null&&o({...o(),level:5}),i.onsave&&i.onsave(o())}var Cu=(s,o,i)=>o(P(i).value),Pu=_e('<li class="svelte-1gyfgoj"><button type="button" class="svelte-1gyfgoj"><p class="svelte-1gyfgoj"> </p> <!></button></li>'),Iu=_e('<button class="delete svelte-1gyfgoj" type="button">Delete</button>'),ju=_e('<dialog class="svelte-1gyfgoj"><h3 class="svelte-1gyfgoj"> </h3> <ul class="svelte-1gyfgoj"></ul> <footer class="svelte-1gyfgoj"><!> <button class="cancel svelte-1gyfgoj" type="button">Cancel</button> <button type="button" class="svelte-1gyfgoj">Save</button></footer></dialog>');function Au(s,o){nt(o,!0);let i=Se(o,"item",7,null),u=Se(o,"levels",19,()=>[]);Se(o,"units",3,"oz");let f=je(void 0),v=Qe(()=>i()&&i().level&&i().level!==null?i().level:5);function p(j){const N=j;i({...i(),level:N})}function D(){P(f).close()}function O(){P(f).showModal()}var M=ju(),A=R(M),K=R(A);q(A);var C=re(A,2);Ut(C,21,u,zt,(j,N)=>{var F=Pu();const $=Qe(()=>P(N).value===P(v)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var ee=R(F);ee.__click=[Cu,p,N];var G=R(ee),ae=R(G,!0);q(G);var ge=re(G,2);const le=Qe(()=>P(N).value===P(v)?"#0284c7":"#161616");dt(ge,{get color(){return P(le)},height:"20",get icon(){return P($)},width:"20"}),q(ee),q(F),qe(()=>be(ae,P(N).label)),he(j,F)}),q(C);var H=re(C,2),B=R(H);{var U=j=>{var N=Iu();N.__click=[Eu,o,i],he(j,N)};it(B,j=>{i()&&i().id&&i().id!==null&&j(U)})}var X=re(B,2);X.__click=[Tu,D,i,o];var Y=re(X,2);return Y.__click=[Ou,i,o],q(H),q(M),At(M,j=>ue(f,j),()=>P(f)),qe(()=>be(K,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Hunger`)),he(s,M),rt({close:D,showModal:O})}pt(["click"]);function Mu(s,o,i){o()!==0&&(o(0),i.onchange&&i.onchange(o()))}function Ku(s,o,i){o()!==1&&(o(1),i.onchange&&i.onchange(o()))}var Fu=_e('<ul class="svelte-tu3q0a"><li><button type="button">Fasting</button></li> <li><button type="button">Hours</button></li></ul>');function qu(s,o){nt(o,!0);let i=Se(o,"selected",7,0);var u=Fu(),f=R(u),v=R(f);let p;v.__click=[Mu,i,o],q(f);var D=re(f,2),O=R(D);let M;O.__click=[Ku,i,o],q(D),q(u),qe((A,K)=>{p=Yt(v,1,"fasting svelte-tu3q0a",null,p,A),M=Yt(O,1,"hours svelte-tu3q0a",null,M,K)},[()=>({selected:i()===0}),()=>({selected:i()===1})]),he(s,u),rt()}pt(["click"]);function Ru(s,o){o()}var Bu=_e('<dialog class="svelte-msa23r"><h3 class="svelte-msa23r">Settings</h3> <article class="svelte-msa23r"><p class="svelte-msa23r">Settings.</p></article> <footer class="svelte-msa23r"><button type="button" class="svelte-msa23r">Done</button></footer></dialog>');function Nu(s,o){nt(o,!0);let i=je(void 0);function u(){P(i).close()}function f(){P(i).showModal()}var v=Bu(),p=re(R(v),4),D=R(p);return D.__click=[Ru,u],q(p),q(v),At(v,O=>ue(i,O),()=>P(i)),he(s,v),rt({close:u,showModal:f})}pt(["click"]);function Hu(s,o,i,u){o(),i(null),u.oncancel&&u.oncancel()}function Lu(s,o,i){o.ondelete&&o.ondelete(i().id)}function zu(s,o,i){o()===null&&o({...o(),volume:8}),i.onsave&&i.onsave(o())}var Uu=(s,o,i)=>o(P(i).value),Yu=_e('<li class="svelte-1sbih0z"><button type="button" class="svelte-1sbih0z"><p class="svelte-1sbih0z"> </p> <p class="svelte-1sbih0z"> </p> <!></button></li>'),Wu=_e('<button class="delete svelte-1sbih0z" type="button">Delete</button>'),Vu=_e('<dialog class="svelte-1sbih0z"><h3 class="svelte-1sbih0z"> </h3> <ul class="svelte-1sbih0z"></ul> <footer class="svelte-1sbih0z"><!> <button class="cancel svelte-1sbih0z" type="button">Cancel</button> <button type="button" class="svelte-1sbih0z">Save</button></footer></dialog>');function Qu(s,o){nt(o,!0);let i=Se(o,"item",7,null),u=Se(o,"units",3,"oz"),f=je(void 0),v=Xn([{value:8,label:"Cup"},{value:12,label:"Can"},{value:16,label:"Bottle"},{value:20,label:"Medium"},{value:30,label:"Gatorade"},{value:32,label:"Big Q"},{value:44,label:"QT Large"},{value:52,label:"Extra Large"}]),p=Qe(()=>i()&&i().volume&&i().volume!==null?i().volume:8);function D(N){const F=N;i({...i(),volume:F})}function O(){P(f).close()}function M(){P(f).showModal()}var A=Vu(),K=R(A),C=R(K);q(K);var H=re(K,2);Ut(H,21,()=>v,zt,(N,F)=>{var $=Yu();const ee=Qe(()=>P(F).value===P(p)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var G=R($);G.__click=[Uu,D,F];var ae=R(G),ge=R(ae,!0);q(ae);var le=re(ae,2),Te=R(le);q(le);var Ee=re(le,2);const Ae=Qe(()=>P(F).value===P(p)?"#0284c7":"#161616");dt(Ee,{get color(){return P(Ae)},height:"20",get icon(){return P(ee)},width:"20"}),q(G),q($),qe(()=>{be(ge,P(F).label),be(Te,`${P(F).value??""} ${u()??""}`)}),he(N,$)}),q(H);var B=re(H,2),U=R(B);{var X=N=>{var F=Wu();F.__click=[Lu,o,i],he(N,F)};it(U,N=>{i()&&i().id&&i().id!==null&&N(X)})}var Y=re(U,2);Y.__click=[Hu,O,i,o];var j=re(Y,2);return j.__click=[zu,i,o],q(B),q(A),At(A,N=>ue(f,N),()=>P(f)),qe(()=>be(C,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Water`)),he(s,A),rt({close:O,showModal:M})}pt(["click"]);var Gu=_e('<main class="svelte-1p6a8xw"><header class="svelte-1p6a8xw"><span></span> <!> <button type="button" class="svelte-1p6a8xw"><!></button></header> <section class="svelte-1p6a8xw"><article class="svelte-1p6a8xw"><!></article> <article class="svelte-1p6a8xw"><!></article></section></main> <!> <!> <!> <!>',1);function dl(s,o){nt(o,!0);const i=new Ca;let u=0,f=je(Xn([])),v=je(Xn([])),p=je(void 0),D=je("started"),O=je(null),M=je("Started"),A=je("Edit Fast Started"),K=je(void 0),C=je(null),H=je(5),B=Xn([{value:1,label:"Starving"},{value:2,label:"Very hungry"},{value:3,label:"Pretty hungry"},{value:4,label:"Snacky"},{value:5,label:"Satisfied"},{value:6,label:"Slightly full"},{value:7,label:"Uncomfortable"},{value:8,label:"Stuffed"},{value:9,label:"Stomach aches"},{value:10,label:"Sick"}]),U=je(null),X=je(0),Y=je(void 0),j=je(null),N=je(0),F=je(void 0),$=je(null);$o(()=>{let ie=window.localStorage.getItem("fh_screen");ue(X,ie===null?0:parseInt(ie),!0),setInterval(()=>{u===60?(G(),u=0):u=u+1,P(j)!==null&&ue(U,Date.now(),!0)},1e3),le(),G(),ge(),Te(),ae()});function ee(ie){const se=ie.getFullYear(),me=String(ie.getMonth()+1).padStart(2,"0"),Ye=String(ie.getDate()).padStart(2,"0");return`${se}-${me}-${Ye}`}function G(ie=7){i.browseHistory().then(se=>{const me={},Ye=new Date,Ce=new Date(Ye.getFullYear(),Ye.getMonth(),Ye.getDate()),Oe=new Date(Ce);if(Oe.setDate(Ce.getDate()-(ie-1)),!Array.isArray(se)||se.length===0){const Fe=new Date(Oe);for(;Fe<=Ce;){const ze=ee(Fe);me[ze]=Array(24).fill(0),Fe.setDate(Fe.getDate()+1)}}else{for(const ze of se){const ht=new Date(ze.started),Gt=ze.ended?new Date(ze.ended):new Date,Xt=new Date(ht.getTime());Xt.setSeconds(0,0);const vt=new Date(Gt.getTime());vt.setSeconds(0,0);let te=new Date(Xt);for(;te<vt;){const xt=ee(te),gt=new Date(te.getFullYear(),te.getMonth(),te.getDate());if(gt>=Oe&&gt<=Ce){const Jt=te.getHours();me[xt]||(me[xt]=Array(24).fill(0)),me[xt][Jt]+=1}te.setMinutes(te.getMinutes()+1)}}for(const ze in me)me[ze]=me[ze].map(ht=>+(Math.min(ht,60)/60).toFixed(6));const Fe=new Date(Oe);for(;Fe<=Ce;){const ze=ee(Fe);me[ze]||(me[ze]=Array(24).fill(0)),Fe.setDate(Fe.getDate()+1)}}const De=Object.keys(me).sort((Fe,ze)=>ze.localeCompare(Fe)),Pe={};for(const Fe of De)Pe[Fe]=me[Fe];const Qt=Array(24).fill(0);for(const Fe of Array(24).keys())for(const ze of De)Qt[Fe]+=Pe[ze][Fe];const Kt=Qt.map(Fe=>+(Fe/10).toFixed(6));ue(f,{daily:Pe,average:Kt},!0)})}function ae(){i.browseHistory().then(ie=>{let se=null,me=structuredClone(ie);me.forEach(Ce=>{Ce.type="start",Ce.timed=new Date(Ce.started.getTime())});let Ye=structuredClone(ie);Ye=Ye.filter(Ce=>Ce.ended!==null),Ye.forEach(Ce=>{Ce.type="end",Ce.timed=new Date(Ce.ended.getTime())}),me=me.concat(Ye),se=[...me],i.browseHunger().then(Ce=>(Ce=Ce.map(Oe=>{const De=B.find(Pe=>Pe.value===Oe.level);return Oe.level=De.label,Oe.timed=new Date(Oe.created.getTime()),Oe}),se=se.concat(Ce),i.browseWater())).then(Ce=>{Ce=Ce.map(De=>(De.timed=new Date(De.created.getTime()),De)),se=se.concat(Ce),se.sort((De,Pe)=>De.timed.getTime()<Pe.timed.getTime()?1:De.timed.getTime()>Pe.timed.getTime()?-1:0);const Oe=[];for(let De=0;De<se.length;De++){const Pe=new Date(se[De].timed.getTime());Pe.setHours(23),Pe.setMinutes(59),Pe.setSeconds(59),Pe.setMilliseconds(999),Oe.length===0?Oe.push({type:"header",timed:Pe}):(Oe[Oe.length-1].timed.getDate()!==se[De].timed.getDate()||Oe[Oe.length-1].timed.getMonth()!==se[De].timed.getMonth()||Oe[Oe.length-1].timed.getFullYear()!==se[De].timed.getFullYear())&&Oe.push({type:"header",timed:Pe})}se=se.concat(Oe),se.sort((De,Pe)=>De.timed.getTime()<Pe.timed.getTime()?1:De.timed.getTime()>Pe.timed.getTime()?-1:0),ue(v,[...se],!0)})})}function ge(){i.browseHunger(!0).then(ie=>{ie===null?ue(H,5):ue(H,ie.level,!0)})}function le(){i.browseHistory().then(ie=>{ie.length===0&&(ue(j,null),ue(U,null)),ie.sort((se,me)=>se.started.getTime()>me.started.getTime()?-1:se.started.getTime()<me.started.getTime()?1:0),ie[0].ended===null&&(ue(j,new Date(ie[0].started.getTime()),!0),ue(U,Date.now(),!0))})}function Te(){i.browseWater(!0).then(ie=>{const se=ie.reduce((me,Ye)=>me+Ye.volume,0);ue(N,se,!0)})}function Ee(){ue(j,null),ue(U,null),i.browseHistoryByEnd().then(ie=>(ie.ended=new Date,i.editHistory(ie))).then(()=>{le(),G(),ae()})}function Ae(){P(K).showModal()}function Re(){i.addHistory().then(()=>{le(),G(),ae()})}function He(){P(F).showModal()}function Ue(ie){P(O).started.getTime()===P(j).getTime()&&(ue(j,null),ue(U,null)),i.deleteHistory(ie).then(()=>{P(p).close(),ue(O,null),le(),G(),ae()})}function we(ie){i.editHistory(ie).then(()=>{P(p).close(),ue(O,null),le(),G(),ae()})}function de(ie,se){ie==="start"?(ue(D,"started"),ue(M,"Started"),ue(A,"Edit Fast Started"),i.readHistory(se).then(me=>{ue(O,{...me},!0),P(p).showModal()})):ie==="end"?(ue(D,"ended"),ue(M,"Ended"),ue(A,"Edit Fast Ended"),i.readHistory(se).then(me=>{ue(O,{...me},!0),P(p).showModal()})):ie==="water"?i.readWater(se).then(me=>{ue($,{...me},!0),P(F).showModal()}):ie==="hunger"&&i.readHunger(se).then(me=>{ue(C,{...me},!0),P(K).showModal()})}function Le(ie){i.deleteHunger(ie).then(()=>{P(K).close(),ue(C,null),ge(),ae()})}function Ke(ie){P(C)===null?i.addHunger(ie.level).then(se=>{P(K).close(),ge(),ae()}):i.editHunger(ie).then(se=>{P(K).close(),ue(C,null),ge(),ae()})}function $e(ie){P(X)!==ie&&(window.localStorage.setItem("fh_screen",ie),ue(X,ie,!0))}function et(){P(Y).showModal()}function Ge(ie){i.deleteWater(ie).then(()=>{P(F).close(),ue($,null),Te(),ae()})}function _t(ie){P($)===null?i.addWater(ie.volume).then(se=>{P(F).close(),Te(),ae()}):i.editWater(ie).then(se=>{P(F).close(),ue($,null),Te(),ae()})}var at=Gu(),ot=ft(at),lt=R(ot),Wt=re(R(lt),2);qu(Wt,{onchange:$e,get selected(){return P(X)}});var oe=re(Wt,2);oe.__click=et;var Vt=R(oe);dt(Vt,{height:"20",icon:"material-symbols:settings-outline",width:"20"}),q(oe),q(lt);var yt=re(lt,2),xe=R(yt),Mt=R(xe);Ys(Mt,{get activity(){return P(f)},get hunger(){return P(H)},get levels(){return B},get now(){return P(U)},onend:Ee,onhunger:Ae,onsettings:et,onstart:Re,onwater:He,get started(){return P(j)},get water(){return P(N)}}),q(xe);var wn=re(xe,2),wt=R(wn);Su(wt,{get activity(){return P(f)},get history(){return P(v)},get levels(){return B},onchange:de}),q(wn),q(yt),q(ot);var xn=re(ot,2);At(hu(xn,{get field(){return P(D)},get item(){return P(O)},get label(){return P(M)},ondelete:Ue,onsave:we,get title(){return P(A)}}),ie=>ue(p,ie,!0),()=>P(p));var kn=re(xn,2);At(Au(kn,{get item(){return P(C)},get levels(){return B},ondelete:Le,onsave:Ke}),ie=>ue(K,ie,!0),()=>P(K));var Dn=re(kn,2);At(Qu(Dn,{get item(){return P($)},ondelete:Ge,onsave:_t}),ie=>ue(F,ie,!0),()=>P(F));var ar=re(Dn,2);At(Nu(ar,{}),ie=>ue(Y,ie,!0),()=>P(Y)),qe(()=>Jn(yt,"data-screen",P(X)===0?"fasting":"hours")),he(s,at),rt()}pt(["click"]);export{dl as component};
