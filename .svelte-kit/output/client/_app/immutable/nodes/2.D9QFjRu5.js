import"../chunks/CWj6FrbW.js";import{i as va,c as pa,d as xt,n as ga,a as ma,o as co,b as ya,s as Te}from"../chunks/Erbj99cd.js";import{a3 as fo,av as yi,aw as ba,h as mt,a5 as pn,ac as bi,q as _i,af as _a,b as ho,i as ar,d as to,w as S,A as wa,r as ka,e as xa,g as Qo,j as jn,m as on,a6 as wi,a9 as Da,k as ki,l as vr,p as Sa,ax as Wr,ad as xi,a1 as no,ay as Jo,ar as Ta,az as Xo,aA as vo,aB as Ea,aC as Oa,aD as fr,aE as po,aF as Ca,a7 as Di,aG as Si,aH as Ia,V as ze,aI as Pa,aa as Aa,a8 as Ma,ag as Zo,aJ as ja,n as Ti,aK as Ka,aL as Fa,aM as qa,aN as Ra,aO as Na,aP as Ba,z as Ha,aQ as za,R as ut,K as La,c as an,f as kt,a as he,W as lt,as as Be,y as de,aR as Ua,aS as Ya,X as Y,Y as N,T as ge,Z as X,at as Qe,aT as Gr,x as ro}from"../chunks/J1024-jQ.js";import{i as tt,r as Va,p as _e,b as Ft}from"../chunks/LcVB3aLj.js";const Wa=[];function Qr(o,r=!1){return sr(o,new Map,"",Wa)}function sr(o,r,i,s,l=null){if(typeof o=="object"&&o!==null){var d=r.get(o);if(d!==void 0)return d;if(o instanceof Map)return new Map(o);if(o instanceof Set)return new Set(o);if(fo(o)){var h=Array(o.length);r.set(o,h),l!==null&&r.set(l,h);for(var g=0;g<o.length;g+=1){var D=o[g];g in o&&(h[g]=sr(D,r,i,s))}return h}if(yi(o)===ba){h={},r.set(o,h),l!==null&&r.set(l,h);for(var C in o)h[C]=sr(o[C],r,i,s);return h}if(o instanceof Date)return structuredClone(o);if(typeof o.toJSON=="function")return sr(o.toJSON(),r,i,s,o)}if(o instanceof EventTarget)return o;try{return structuredClone(o)}catch{return o}}function Ga(o,r){if(r){const i=document.body;o.autofocus=!0,_i(()=>{document.activeElement===i&&o.focus()})}}function Qa(o){mt&&pn(o)!==null&&bi(o)}function Ot(o,r){return r}function Ja(o,r,i,s){for(var l=[],d=r.length,h=0;h<d;h++)Ea(r[h].e,l,!0);var g=d>0&&l.length===0&&i!==null;if(g){var D=i.parentNode;bi(D),D.append(i),s.clear(),Wt(o,r[0].prev,r[d-1].next)}Oa(l,()=>{for(var C=0;C<d;C++){var K=r[C];g||(s.delete(K.k),Wt(o,K.prev,K.next)),fr(K.e,!g)}})}function Ct(o,r,i,s,l,d=null){var h=o,g={flags:r,items:new Map,first:null},D=(r&Si)!==0;if(D){var C=o;h=mt?ar(pn(C)):C.appendChild(_a())}mt&&to();var K=null,F=!1,O=wa(()=>{var q=i();return fo(q)?q:q==null?[]:xi(q)});ho(()=>{var q=S(O),L=q.length;if(F&&L===0)return;F=L===0;let B=!1;if(mt){var W=ka(h)===xa;W!==(L===0)&&(h=Qo(),ar(h),jn(!1),B=!0)}if(mt){for(var H=null,P,M=0;M<L;M++){if(on.nodeType===wi&&on.data===Da){h=on,B=!0,jn(!1);break}var w=q[M],R=s(w,M);P=Ei(on,g,H,null,w,R,M,l,r,i),g.items.set(R,P),H=P}L>0&&ar(Qo())}mt||Xa(q,g,h,l,r,s,i),d!==null&&(L===0?K?ki(K):K=vr(()=>d(h)):K!==null&&Sa(K,()=>{K=null})),B&&jn(!0),S(O)}),mt&&(h=on)}function Xa(o,r,i,s,l,d,h){var Ce,Ye,Je,ct;var g=(l&Ia)!==0,D=(l&(po|vo))!==0,C=o.length,K=r.items,F=r.first,O=F,q,L=null,B,W=[],H=[],P,M,w,R;if(g)for(R=0;R<C;R+=1)P=o[R],M=d(P,R),w=K.get(M),w!==void 0&&((Ce=w.a)==null||Ce.measure(),(B??(B=new Set)).add(w));for(R=0;R<C;R+=1){if(P=o[R],M=d(P,R),w=K.get(M),w===void 0){var V=O?O.e.nodes_start:i;L=Ei(V,r,L,L===null?r.first:L.next,P,M,R,s,l,h),K.set(M,L),W=[],H=[],O=L.next;continue}if(D&&Za(w,P,R,l),(w.e.f&Wr)!==0&&(ki(w.e),g&&((Ye=w.a)==null||Ye.unfix(),(B??(B=new Set)).delete(w))),w!==O){if(q!==void 0&&q.has(w)){if(W.length<H.length){var U=H[0],ie;L=U.prev;var pe=W[0],ue=W[W.length-1];for(ie=0;ie<W.length;ie+=1)$o(W[ie],U,i);for(ie=0;ie<H.length;ie+=1)q.delete(H[ie]);Wt(r,pe.prev,ue.next),Wt(r,L,pe),Wt(r,ue,U),O=U,L=ue,R-=1,W=[],H=[]}else q.delete(w),$o(w,O,i),Wt(r,w.prev,w.next),Wt(r,w,L===null?r.first:L.next),Wt(r,L,w),L=w;continue}for(W=[],H=[];O!==null&&O.k!==M;)(O.e.f&Wr)===0&&(q??(q=new Set)).add(O),H.push(O),O=O.next;if(O===null)continue;w=O}W.push(w),L=w,O=w.next}if(O!==null||q!==void 0){for(var ke=q===void 0?[]:xi(q);O!==null;)(O.e.f&Wr)===0&&ke.push(O),O=O.next;var me=ke.length;if(me>0){var He=(l&Si)!==0&&C===0?i:null;if(g){for(R=0;R<me;R+=1)(Je=ke[R].a)==null||Je.measure();for(R=0;R<me;R+=1)(ct=ke[R].a)==null||ct.fix()}Ja(r,ke,He,K)}}g&&_i(()=>{var ye;if(B!==void 0)for(w of B)(ye=w.a)==null||ye.apply()}),no.first=r.first&&r.first.e,no.last=L&&L.e}function Za(o,r,i,s){(s&po)!==0&&Jo(o.v,r),(s&vo)!==0?Jo(o.i,i):o.i=i}function Ei(o,r,i,s,l,d,h,g,D,C){var K=(D&po)!==0,F=(D&Ca)===0,O=K?F?Ta(l,!1,!1):Xo(l):l,q=(D&vo)===0?h:Xo(h),L={i:q,v:O,k:d,a:null,e:null,prev:i,next:s};try{return L.e=vr(()=>g(o,O,q,C),mt),L.e.prev=i&&i.e,L.e.next=s&&s.e,i===null?r.first=L:(i.next=L,i.e.next=L.e),s!==null&&(s.prev=L,s.e.prev=L.e),L}finally{}}function $o(o,r,i){for(var s=o.next?o.next.e.nodes_start:i,l=r?r.e.nodes_start:i,d=o.e.nodes_start;d!==s;){var h=Di(d);l.before(d),d=h}}function Wt(o,r,i){r===null?o.first=i:(r.next=i,r.e.next=i&&i.e),i!==null&&(i.prev=r,i.e.prev=r&&r.e)}function $a(o,r,i=!1,s=!1,l=!1){var d=o,h="";ze(()=>{var g=no;if(h===(h=r()??"")){mt&&to();return}if(g.nodes_start!==null&&(Pa(g.nodes_start,g.nodes_end),g.nodes_start=g.nodes_end=null),h!==""){if(mt){on.data;for(var D=to(),C=D;D!==null&&(D.nodeType!==wi||D.data!=="");)C=D,D=Di(D);if(D===null)throw Aa(),Ma;Zo(on,C),d=ar(D);return}var K=h+"";i?K=`<svg>${K}</svg>`:s&&(K=`<math>${K}</math>`);var F=ja(K);if((i||s)&&(F=pn(F)),Zo(pn(F),F.lastChild),i||s)for(;pn(F);)d.before(pn(F));else d.before(F)}})}function es(o,r){var i=void 0,s;ho(()=>{i!==(i=r())&&(s&&(fr(s),s=null),i&&(s=vr(()=>{Ti(()=>i(o))})))})}function Oi(o){var r,i,s="";if(typeof o=="string"||typeof o=="number")s+=o;else if(typeof o=="object")if(Array.isArray(o)){var l=o.length;for(r=0;r<l;r++)o[r]&&(i=Oi(o[r]))&&(s&&(s+=" "),s+=i)}else for(i in o)o[i]&&(s&&(s+=" "),s+=i);return s}function ts(){for(var o,r,i=0,s="",l=arguments.length;i<l;i++)(o=arguments[i])&&(r=Oi(o))&&(s&&(s+=" "),s+=r);return s}function ns(o){return typeof o=="object"?ts(o):o??""}const ei=[...` 	
\r\fÂ \v\uFEFF`];function rs(o,r,i){var s=o==null?"":""+o;if(r&&(s=s?s+" "+r:r),i){for(var l in i)if(i[l])s=s?s+" "+l:l;else if(s.length)for(var d=l.length,h=0;(h=s.indexOf(l,h))>=0;){var g=h+d;(h===0||ei.includes(s[h-1]))&&(g===s.length||ei.includes(s[g]))?s=(h===0?"":s.substring(0,h))+s.substring(g+1):h=g}}return s===""?null:s}function ti(o,r=!1){var i=r?" !important;":";",s="";for(var l in o){var d=o[l];d!=null&&d!==""&&(s+=" "+l+": "+d+i)}return s}function Jr(o){return o[0]!=="-"||o[1]!=="-"?o.toLowerCase():o}function os(o,r){if(r){var i="",s,l;if(Array.isArray(r)?(s=r[0],l=r[1]):s=r,o){o=String(o).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var d=!1,h=0,g=!1,D=[];s&&D.push(...Object.keys(s).map(Jr)),l&&D.push(...Object.keys(l).map(Jr));var C=0,K=-1;const B=o.length;for(var F=0;F<B;F++){var O=o[F];if(g?O==="/"&&o[F-1]==="*"&&(g=!1):d?d===O&&(d=!1):O==="/"&&o[F+1]==="*"?g=!0:O==='"'||O==="'"?d=O:O==="("?h++:O===")"&&h--,!g&&d===!1&&h===0){if(O===":"&&K===-1)K=F;else if(O===";"||F===B-1){if(K!==-1){var q=Jr(o.substring(C,K).trim());if(!D.includes(q)){O!==";"&&F++;var L=o.substring(C,F).trim();i+=" "+L+";"}}C=F+1,K=-1}}}}return s&&(i+=ti(s)),l&&(i+=ti(l,!0)),i=i.trim(),i===""?null:i}return o==null?null:String(o)}function yt(o,r,i,s,l,d){var h=o.__className;if(mt||h!==i||h===void 0){var g=rs(i,s,d);(!mt||g!==o.getAttribute("class"))&&(g==null?o.removeAttribute("class"):r?o.className=g:o.setAttribute("class",g)),o.__className=i}else if(d&&l!==d)for(var D in d){var C=!!d[D];(l==null||C!==!!l[D])&&o.classList.toggle(D,C)}return d}function Xr(o,r={},i,s){for(var l in i){var d=i[l];r[l]!==d&&(i[l]==null?o.style.removeProperty(l):o.style.setProperty(l,d,s))}}function gn(o,r,i,s){var l=o.__style;if(mt||l!==r){var d=os(r,s);(!mt||d!==o.getAttribute("style"))&&(d==null?o.removeAttribute("style"):o.style.cssText=d),o.__style=r}else s&&(Array.isArray(s)?(Xr(o,i==null?void 0:i[0],s[0]),Xr(o,i==null?void 0:i[1],s[1],"important")):Xr(o,i,s));return s}function oo(o,r,i){if(o.multiple){if(r==null)return;if(!fo(r))return Ka();for(var s of o.options)s.selected=r.includes(ni(s));return}for(s of o.options){var l=ni(s);if(Fa(l,r)){s.selected=!0;return}}(!i||r!==void 0)&&(o.selectedIndex=-1)}function is(o){var r=new MutationObserver(()=>{oo(o,o.__value)});r.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),qa(()=>{r.disconnect()})}function ni(o){return"__value"in o?o.__value:o.value}const In=Symbol("class"),Pn=Symbol("style"),Ci=Symbol("is custom element"),Ii=Symbol("is html");function as(o,r){var i=go(o);i.value===(i.value=r??void 0)||o.value===r&&(r!==0||o.nodeName!=="PROGRESS")||(o.value=r??"")}function ss(o,r){r?o.hasAttribute("selected")||o.setAttribute("selected",""):o.removeAttribute("selected")}function Gt(o,r,i,s){var l=go(o);mt&&(l[r]=o.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&o.nodeName==="LINK")||l[r]!==(l[r]=i)&&(r==="loading"&&(o[Ba]=i),i==null?o.removeAttribute(r):typeof i!="string"&&Pi(o).includes(r)?o[r]=i:o.setAttribute(r,i))}function us(o,r,i,s,l=!1){var d=go(o),h=d[Ci],g=!d[Ii];let D=mt&&h;D&&jn(!1);var C=r||{},K=o.tagName==="OPTION";for(var F in r)F in i||(i[F]=null);i.class?i.class=ns(i.class):i[In]&&(i.class=null),i[Pn]&&(i.style??(i.style=null));var O=Pi(o);for(const M in i){let w=i[M];if(K&&M==="value"&&w==null){o.value=o.__value="",C[M]=w;continue}if(M==="class"){var q=o.namespaceURI==="http://www.w3.org/1999/xhtml";yt(o,q,w,s,r==null?void 0:r[In],i[In]),C[M]=w,C[In]=i[In];continue}if(M==="style"){gn(o,w,r==null?void 0:r[Pn],i[Pn]),C[M]=w,C[Pn]=i[Pn];continue}var L=C[M];if(!(w===L&&!(w===void 0&&o.hasAttribute(M)))){C[M]=w;var B=M[0]+M[1];if(B!=="$$")if(B==="on"){const R={},V="$$"+M;let U=M.slice(2);var W=ma(U);if(va(U)&&(U=U.slice(0,-7),R.capture=!0),!W&&L){if(w!=null)continue;o.removeEventListener(U,C[V],R),C[V]=null}if(w!=null)if(W)o[`__${U}`]=w,xt([U]);else{let ie=function(pe){C[M].call(this,pe)};C[V]=pa(U,o,ie,R)}else W&&(o[`__${U}`]=void 0)}else if(M==="style")Gt(o,M,w);else if(M==="autofocus")Ga(o,!!w);else if(!h&&(M==="__value"||M==="value"&&w!=null))o.value=o.__value=w;else if(M==="selected"&&K)ss(o,w);else{var H=M;g||(H=ga(H));var P=H==="defaultValue"||H==="defaultChecked";if(w==null&&!h&&!P)if(d[M]=null,H==="value"||H==="checked"){let R=o;const V=r===void 0;if(H==="value"){let U=R.defaultValue;R.removeAttribute(H),R.defaultValue=U,R.value=R.__value=V?U:null}else{let U=R.defaultChecked;R.removeAttribute(H),R.defaultChecked=U,R.checked=V?U:!1}}else o.removeAttribute(M);else P||O.includes(H)&&(h||typeof w!="string")?o[H]=w:typeof w!="function"&&Gt(o,H,w)}}}return D&&jn(!0),C}function ri(o,r,i=[],s,l=!1,d=Ha){const h=i.map(d);var g=void 0,D={},C=o.nodeName==="SELECT",K=!1;if(ho(()=>{var O=r(...h.map(S)),q=us(o,g,O,s,l);K&&C&&"value"in O&&oo(o,O.value,!1);for(let B of Object.getOwnPropertySymbols(D))O[B]||fr(D[B]);for(let B of Object.getOwnPropertySymbols(O)){var L=O[B];B.description===za&&(!g||L!==g[B])&&(D[B]&&fr(D[B]),D[B]=vr(()=>es(o,()=>L))),q[B]=L}g=q}),C){var F=o;Ti(()=>{oo(F,g.value),is(F)})}K=!0}function go(o){return o.__attributes??(o.__attributes={[Ci]:o.nodeName.includes("-"),[Ii]:o.namespaceURI===Ra})}var oi=new Map;function Pi(o){var r=oi.get(o.nodeName);if(r)return r;oi.set(o.nodeName,r=[]);for(var i,s=o,l=Element.prototype;l!==s;){i=Na(s);for(var d in i)i[d].set&&r.push(d);s=yi(s)}return r}var ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ai(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ur={exports:{}},cs=ur.exports,ii;function fs(){return ii||(ii=1,function(o,r){(function(i,s){o.exports=s()})(cs,function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)};function l(e,t,n){for(var a,u=0,c=t.length;u<c;u++)!a&&u in t||((a=a||Array.prototype.slice.call(t,0,u))[u]=t[u]);return e.concat(a||Array.prototype.slice.call(t))}var d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ls,h=Object.keys,g=Array.isArray;function D(e,t){return typeof t!="object"||h(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||d.Promise||(d.Promise=Promise);var C=Object.getPrototypeOf,K={}.hasOwnProperty;function F(e,t){return K.call(e,t)}function O(e,t){typeof t=="function"&&(t=t(C(e))),(typeof Reflect>"u"?h:Reflect.ownKeys)(t).forEach(function(n){L(e,n,t[n])})}var q=Object.defineProperty;function L(e,t,n,a){q(e,t,D(n&&F(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},a))}function B(e){return{from:function(t){return e.prototype=Object.create(t.prototype),L(e.prototype,"constructor",e),{extend:O.bind(null,e.prototype)}}}}var W=Object.getOwnPropertyDescriptor,H=[].slice;function P(e,t,n){return H.call(e,t,n)}function M(e,t){return t(e)}function w(e){if(!e)throw new Error("Assertion Failed")}function R(e){d.setImmediate?setImmediate(e):setTimeout(e,0)}function V(e,t){if(typeof t=="string"&&F(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],a=0,u=t.length;a<u;++a){var c=V(e,t[a]);n.push(c)}return n}var f=t.indexOf(".");if(f!==-1){var v=e[t.substr(0,f)];return v==null?void 0:V(v,t.substr(f+1))}}function U(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){w(typeof n!="string"&&"length"in n);for(var a=0,u=t.length;a<u;++a)U(e,t[a],n[a])}else{var c,f,v=t.indexOf(".");v!==-1?(c=t.substr(0,v),(f=t.substr(v+1))===""?n===void 0?g(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=n:U(v=!(v=e[c])||!F(e,c)?e[c]={}:v,f,n)):n===void 0?g(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ie(e){var t,n={};for(t in e)F(e,t)&&(n[t]=e[t]);return n}var pe=[].concat;function ue(e){return pe.apply([],e)}var Mt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ue([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return d[e]}),ke=new Set(Mt.map(function(e){return d[e]})),me=null;function He(e){return me=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var a=me.get(n);if(a)return a;if(g(n)){a=[],me.set(n,a);for(var u=0,c=n.length;u<c;++u)a.push(t(n[u]))}else if(ke.has(n.constructor))a=n;else{var f,v=C(n);for(f in a=v===Object.prototype?{}:Object.create(v),me.set(n,a),n)F(n,f)&&(a[f]=t(n[f]))}return a}(e),me=null,e}var Ce={}.toString;function Ye(e){return Ce.call(e).slice(8,-1)}var Je=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ct=typeof Je=="symbol"?function(e){var t;return e!=null&&(t=e[Je])&&t.apply(e)}:function(){return null};function ye(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var je={};function Le(e){var t,n,a,u;if(arguments.length===1){if(g(e))return e.slice();if(this===je&&typeof e=="string")return[e];if(u=ct(e)){for(n=[];!(a=u.next()).done;)n.push(a.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var ee=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Bt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Et=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Bt),le={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ce(e,t){this.name=e,this.message=t}function Ke(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,a,u){return u.indexOf(n)===a}).join(`
`)}function Se(e,t,n,a){this.failures=t,this.failedKeys=a,this.successCount=n,this.message=Ke(e,t)}function qe(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Ke(e,this.failures)}B(ce).from(Error).extend({toString:function(){return this.name+": "+this.message}}),B(Se).from(ce),B(qe).from(ce);var Pe=Et.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ve=ce,re=Et.reduce(function(e,t){var n=t+"Error";function a(u,c){this.name=n,u?typeof u=="string"?(this.message="".concat(u).concat(c?`
 `+c:""),this.inner=c||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=le[t]||n,this.inner=null)}return B(a).from(Ve),e[t]=a,e},{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var rt=Bt.reduce(function(e,t){return e[t+"Error"]=re[t],e},{}),ot=Et.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=re[t]),e},{});function xe(){}function ft(e){return e}function dt(e,t){return e==null||e===ft?t:function(n){return t(e(n))}}function Ze(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function It(e,t){return e===xe?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var a=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?Ze(a,this.onsuccess):a),u&&(this.onerror=this.onerror?Ze(u,this.onerror):u),c!==void 0?c:n}}function ht(e,t){return e===xe?t:function(){e.apply(this,arguments);var n=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ze(n,this.onsuccess):n),a&&(this.onerror=this.onerror?Ze(a,this.onerror):a)}}function bt(e,t){return e===xe?t:function(n){var a=e.apply(this,arguments);D(n,a);var u=this.onsuccess,c=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Ze(u,this.onsuccess):u),c&&(this.onerror=this.onerror?Ze(c,this.onerror):c),a===void 0?n===void 0?void 0:n:D(a,n)}}function _t(e,t){return e===xe?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Dt(e,t){return e===xe?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var a=this,u=arguments.length,c=new Array(u);u--;)c[u]=arguments[u];return n.then(function(){return t.apply(a,c)})}return t.apply(this,arguments)}}ot.ModifyError=Se,ot.DexieError=ce,ot.BulkError=qe;var We=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function At(e){We=e}var Qt={},yn=100,Mt=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,C(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,C(t),e]}(),Bt=Mt[0],Et=Mt[1],Mt=Mt[2],Et=Et&&Et.then,qt=Bt&&Bt.constructor,oe=!!Mt,fe=function(e,t){Jt.push([e,t]),Re&&(queueMicrotask(mr),Re=!1)},ve=!0,Re=!0,De=[],Fe=[],Ie=ft,Ae={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:xe,pgp:!1,env:{},finalize:xe},se=Ae,Jt=[],Ue=0,nt=[];function te(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=se;if(typeof e!="function"){if(e!==Qt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&sn(this,this._value))}this._state=null,this._value=null,++t.ref,function n(a,u){try{u(function(c){if(a._state===null){if(c===a)throw new TypeError("A promise cannot be resolved with itself.");var f=a._lib&&un();c&&typeof c.then=="function"?n(a,function(v,m){c instanceof te?c._then(v,m):c.then(v,m)}):(a._state=!0,a._value=c,Pt(a)),f&&ln()}},sn.bind(null,a))}catch(c){sn(a,c)}}(this,e)}var bn={get:function(){var e=se,t=Bn;function n(a,u){var c=this,f=!e.global&&(e!==se||t!==Bn),v=f&&!zt(),m=new te(function(b,x){Xt(c,new _n(wo(a,e,f,v),wo(u,e,f,v),b,x,e))});return this._consoleTask&&(m._consoleTask=this._consoleTask),m}return n.prototype=Qt,n},set:function(e){L(this,"then",e&&e.prototype===Qt?bn:{get:function(){return e},set:bn.set})}};function _n(e,t,n,a,u){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=a,this.psd=u}function sn(e,t){var n,a;Fe.push(t),e._state===null&&(n=e._lib&&un(),t=Ie(t),e._state=!1,e._value=t,a=e,De.some(function(u){return u._value===a._value})||De.push(a),Pt(e),n&&ln())}function Pt(e){var t=e._listeners;e._listeners=[];for(var n=0,a=t.length;n<a;++n)Xt(e,t[n]);var u=e._PSD;--u.ref||u.finalize(),Ue===0&&(++Ue,fe(function(){--Ue==0&&yr()},[]))}function Xt(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ue,fe(Fn,[n,e,t])}else e._listeners.push(t)}function Fn(e,t,n){try{var a,u=t._value;!t._state&&Fe.length&&(Fe=[]),a=We&&t._consoleTask?t._consoleTask.run(function(){return e(u)}):e(u),t._state||Fe.indexOf(u)!==-1||function(c){for(var f=De.length;f;)if(De[--f]._value===c._value)return De.splice(f,1)}(t),n.resolve(a)}catch(c){n.reject(c)}finally{--Ue==0&&yr(),--n.psd.ref||n.psd.finalize()}}function mr(){Zt(Ae,function(){un()&&ln()})}function un(){var e=ve;return Re=ve=!1,e}function ln(){var e,t,n;do for(;0<Jt.length;)for(e=Jt,Jt=[],n=e.length,t=0;t<n;++t){var a=e[t];a[0].apply(null,a[1])}while(0<Jt.length);Re=ve=!0}function yr(){var e=De;De=[],e.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var t=nt.slice(0),n=t.length;n;)t[--n]()}function qn(e){return new te(Qt,!1,e)}function Xe(e,t){var n=se;return function(){var a=un(),u=se;try{return Lt(n,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{Lt(u,!1),a&&ln()}}}O(te.prototype,{then:bn,_then:function(e,t){Xt(this,new _n(null,null,e,t,se))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(a){return(a instanceof t?n:qn)(a)}):this.then(null,function(a){return(a&&a.name===t?n:qn)(a)})},finally:function(e){return this.then(function(t){return te.resolve(e()).then(function(){return t})},function(t){return te.resolve(e()).then(function(){return qn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new te(function(a,u){var c=setTimeout(function(){return u(new re.Timeout(t))},e);n.then(a,u).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(te.prototype,Symbol.toStringTag,"Dexie.Promise"),Ae.env=_o(),O(te,{all:function(){var e=Le.apply(null,arguments).map(Hn);return new te(function(t,n){e.length===0&&t([]);var a=e.length;e.forEach(function(u,c){return te.resolve(u).then(function(f){e[c]=f,--a||t(e)},n)})})},resolve:function(e){return e instanceof te?e:e&&typeof e.then=="function"?new te(function(t,n){e.then(t,n)}):new te(Qt,!0,e)},reject:qn,race:function(){var e=Le.apply(null,arguments).map(Hn);return new te(function(t,n){e.map(function(a){return te.resolve(a).then(t,n)})})},PSD:{get:function(){return se},set:function(e){return se=e}},totalEchoes:{get:function(){return Bn}},newPSD:Ht,usePSD:Zt,scheduler:{get:function(){return fe},set:function(e){fe=e}},rejectionMapper:{get:function(){return Ie},set:function(e){Ie=e}},follow:function(e,t){return new te(function(n,a){return Ht(function(u,c){var f=se;f.unhandleds=[],f.onunhandled=c,f.finalize=Ze(function(){var v,m=this;v=function(){m.unhandleds.length===0?u():c(m.unhandleds[0])},nt.push(function b(){v(),nt.splice(nt.indexOf(b),1)}),++Ue,fe(function(){--Ue==0&&yr()},[])},f.finalize),e()},t,n,a)})}}),qt&&(qt.allSettled&&L(te,"allSettled",function(){var e=Le.apply(null,arguments).map(Hn);return new te(function(t){e.length===0&&t([]);var n=e.length,a=new Array(n);e.forEach(function(u,c){return te.resolve(u).then(function(f){return a[c]={status:"fulfilled",value:f}},function(f){return a[c]={status:"rejected",reason:f}}).then(function(){return--n||t(a)})})})}),qt.any&&typeof AggregateError<"u"&&L(te,"any",function(){var e=Le.apply(null,arguments).map(Hn);return new te(function(t,n){e.length===0&&n(new AggregateError([]));var a=e.length,u=new Array(a);e.forEach(function(c,f){return te.resolve(c).then(function(v){return t(v)},function(v){u[f]=v,--a||n(new AggregateError(u))})})})}),qt.withResolvers&&(te.withResolvers=qt.withResolvers));var it={awaits:0,echoes:0,id:0},Yi=0,Rn=[],Nn=0,Bn=0,Vi=0;function Ht(e,t,n,a){var u=se,c=Object.create(u);return c.parent=u,c.ref=0,c.global=!1,c.id=++Vi,Ae.env,c.env=oe?{Promise:te,PromiseProp:{value:te,configurable:!0,writable:!0},all:te.all,race:te.race,allSettled:te.allSettled,any:te.any,resolve:te.resolve,reject:te.reject}:{},t&&D(c,t),++u.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},a=Zt(c,e,n,a),c.ref===0&&c.finalize(),a}function cn(){return it.id||(it.id=++Yi),++it.awaits,it.echoes+=yn,it.id}function zt(){return!!it.awaits&&(--it.awaits==0&&(it.id=0),it.echoes=it.awaits*yn,!0)}function Hn(e){return it.echoes&&e&&e.constructor===qt?(cn(),e.then(function(t){return zt(),t},function(t){return zt(),$e(t)})):e}function Wi(){var e=Rn[Rn.length-1];Rn.pop(),Lt(e,!1)}function Lt(e,t){var n,a=se;(t?!it.echoes||Nn++&&e===se:!Nn||--Nn&&e===se)||queueMicrotask(t?(function(u){++Bn,it.echoes&&--it.echoes!=0||(it.echoes=it.awaits=it.id=0),Rn.push(se),Lt(u,!0)}).bind(null,e):Wi),e!==se&&(se=e,a===Ae&&(Ae.env=_o()),oe&&(n=Ae.env.Promise,t=e.env,(a.global||e.global)&&(Object.defineProperty(d,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function _o(){var e=d.Promise;return oe?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Zt(e,t,n,a,u){var c=se;try{return Lt(e,!0),t(n,a,u)}finally{Lt(c,!1)}}function wo(e,t,n,a){return typeof e!="function"?e:function(){var u=se;n&&cn(),Lt(t,!0);try{return e.apply(this,arguments)}finally{Lt(u,!1),a&&queueMicrotask(zt)}}}function br(e){Promise===qt&&it.echoes===0?Nn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Et).indexOf("[native code]")===-1&&(cn=zt=xe);var $e=te.reject,$t="ï¿¿",Rt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ko="String expected.",fn=[],zn="__dbnames",_r="readonly",wr="readwrite";function en(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var xo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ln(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=He(t))[e],t}}function Do(){throw re.Type()}function Me(e,t){try{var n=So(e),a=So(t);if(n!==a)return n==="Array"?1:a==="Array"?-1:n==="binary"?1:a==="binary"?-1:n==="string"?1:a==="string"?-1:n==="Date"?1:a!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(u,c){for(var f=u.length,v=c.length,m=f<v?f:v,b=0;b<m;++b)if(u[b]!==c[b])return u[b]<c[b]?-1:1;return f===v?0:f<v?-1:1}(To(e),To(t));case"Array":return function(u,c){for(var f=u.length,v=c.length,m=f<v?f:v,b=0;b<m;++b){var x=Me(u[b],c[b]);if(x!==0)return x}return f===v?0:f<v?-1:1}(e,t)}}catch{}return NaN}function So(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Ye(e),e==="ArrayBuffer"?"binary":e)}function To(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Eo=(Ge.prototype._trans=function(e,t,n){var a=this._tx||se.trans,u=this.name,c=We&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function f(b,x,p){if(!p.schema[u])throw new re.NotFound("Table "+u+" not part of transaction");return t(p.idbtrans,p)}var v=un();try{var m=a&&a.db._novip===this.db._novip?a===se.trans?a._promise(e,f,n):Ht(function(){return a._promise(e,f,n)},{trans:a,transless:se.transless||se}):function b(x,p,E,y){if(x.idbdb&&(x._state.openComplete||se.letThrough||x._vip)){var k=x._createTransaction(p,E,x._dbSchema);try{k.create(),x._state.PR1398_maxLoop=3}catch(T){return T.name===Pe.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return b(x,p,E,y)})):$e(T)}return k._promise(p,function(T,_){return Ht(function(){return se.trans=k,y(T,_,k)})}).then(function(T){if(p==="readwrite")try{k.idbtrans.commit()}catch{}return p==="readonly"?T:k._completion.then(function(){return T})})}if(x._state.openComplete)return $e(new re.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return $e(new re.DatabaseClosed);x.open().catch(xe)}return x._state.dbReadyPromise.then(function(){return b(x,p,E,y)})}(this.db,e,[this.name],f);return c&&(m._consoleTask=c,m=m.catch(function(b){return console.trace(b),$e(b)})),m}finally{v&&ln()}},Ge.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?$e(new re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return n.core.get({trans:a,key:e}).then(function(u){return n.hook.reading.fire(u)})}).then(t)},Ge.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(g(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=h(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&t.every(function(b){return 0<=v.keyPath.indexOf(b)})){for(var m=0;m<t.length;++m)if(t.indexOf(v.keyPath[m])===-1)return!1;return!0}return!1}).sort(function(v,m){return v.keyPath.length-m.keyPath.length})[0];if(n&&this.db._maxKey!==$t){var c=n.keyPath.slice(0,t.length);return this.where(c).equals(c.map(function(m){return e[m]}))}!n&&We&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var a=this.schema.idxByName;function u(v,m){return Me(v,m)===0}var f=t.reduce(function(p,m){var b=p[0],x=p[1],p=a[m],E=e[m];return[b||p,b||!p?en(x,p&&p.multi?function(y){return y=V(y,m),g(y)&&y.some(function(k){return u(E,k)})}:function(y){return u(E,V(y,m))}):x]},[null,null]),c=f[0],f=f[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(f):n?this.filter(f):this.where(t).equals("")},Ge.prototype.filter=function(e){return this.toCollection().and(e)},Ge.prototype.count=function(e){return this.toCollection().count(e)},Ge.prototype.offset=function(e){return this.toCollection().offset(e)},Ge.prototype.limit=function(e){return this.toCollection().limit(e)},Ge.prototype.each=function(e){return this.toCollection().each(e)},Ge.prototype.toArray=function(e){return this.toCollection().toArray(e)},Ge.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ge.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,g(e)?"[".concat(e.join("+"),"]"):e))},Ge.prototype.reverse=function(){return this.toCollection().reverse()},Ge.prototype.mapToClass=function(e){var t,n=this.db,a=this.name;function u(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Do&&(function(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function x(){this.constructor=m}i(m,b),m.prototype=b===null?Object.create(b):(x.prototype=b.prototype,new x)}(u,t=e),Object.defineProperty(u.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),u.prototype.table=function(){return a},e=u);for(var c=new Set,f=e.prototype;f;f=C(f))Object.getOwnPropertyNames(f).forEach(function(m){return c.add(m)});function v(m){if(!m)return m;var b,x=Object.create(e.prototype);for(b in m)if(!c.has(b))try{x[b]=m[b]}catch{}return x}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),e},Ge.prototype.defineClass=function(){return this.mapToClass(function(e){D(this,e)})},Ge.prototype.add=function(e,t){var n=this,a=this.schema.primKey,u=a.auto,c=a.keyPath,f=e;return c&&u&&(f=Ln(c)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"add",keys:t!=null?[t]:null,values:[f]})}).then(function(v){return v.numFailures?te.reject(v.failures[0]):v.lastResult}).then(function(v){if(c)try{U(e,c,v)}catch{}return v})},Ge.prototype.update=function(e,t){return typeof e!="object"||g(e)?this.where(":id").equals(e).modify(t):(e=V(e,this.schema.primKey.keyPath),e===void 0?$e(new re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},Ge.prototype.put=function(e,t){var n=this,a=this.schema.primKey,u=a.auto,c=a.keyPath,f=e;return c&&u&&(f=Ln(c)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"put",values:[f],keys:t!=null?[t]:null})}).then(function(v){return v.numFailures?te.reject(v.failures[0]):v.lastResult}).then(function(v){if(c)try{U(e,c,v)}catch{}return v})},Ge.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?te.reject(n.failures[0]):void 0})},Ge.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:xo})}).then(function(t){return t.numFailures?te.reject(t.failures[0]):void 0})},Ge.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(a){return a.map(function(u){return t.hook.reading.fire(u)})})})},Ge.prototype.bulkAdd=function(e,t,n){var a=this,u=Array.isArray(t)?t:void 0,c=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(f){var b=a.schema.primKey,v=b.auto,b=b.keyPath;if(b&&u)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,b=b&&v?e.map(Ln(b)):e;return a.core.mutate({trans:f,type:"add",keys:u,values:b,wantResults:c}).then(function(k){var p=k.numFailures,E=k.results,y=k.lastResult,k=k.failures;if(p===0)return c?E:y;throw new qe("".concat(a.name,".bulkAdd(): ").concat(p," of ").concat(m," operations failed"),k)})})},Ge.prototype.bulkPut=function(e,t,n){var a=this,u=Array.isArray(t)?t:void 0,c=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(f){var b=a.schema.primKey,v=b.auto,b=b.keyPath;if(b&&u)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,b=b&&v?e.map(Ln(b)):e;return a.core.mutate({trans:f,type:"put",keys:u,values:b,wantResults:c}).then(function(k){var p=k.numFailures,E=k.results,y=k.lastResult,k=k.failures;if(p===0)return c?E:y;throw new qe("".concat(a.name,".bulkPut(): ").concat(p," of ").concat(m," operations failed"),k)})})},Ge.prototype.bulkUpdate=function(e){var t=this,n=this.core,a=e.map(function(f){return f.key}),u=e.map(function(f){return f.changes}),c=[];return this._trans("readwrite",function(f){return n.getMany({trans:f,keys:a,cache:"clone"}).then(function(v){var m=[],b=[];e.forEach(function(p,E){var y=p.key,k=p.changes,T=v[E];if(T){for(var _=0,I=Object.keys(k);_<I.length;_++){var A=I[_],j=k[A];if(A===t.schema.primKey.keyPath){if(Me(j,y)!==0)throw new re.Constraint("Cannot update primary key in bulkUpdate()")}else U(T,A,j)}c.push(E),m.push(y),b.push(T)}});var x=m.length;return n.mutate({trans:f,type:"put",keys:m,values:b,updates:{keys:a,changeSpecs:u}}).then(function(p){var E=p.numFailures,y=p.failures;if(E===0)return x;for(var k=0,T=Object.keys(y);k<T.length;k++){var _,I=T[k],A=c[Number(I)];A!=null&&(_=y[I],delete y[I],y[A]=_)}throw new qe("".concat(t.name,".bulkUpdate(): ").concat(E," of ").concat(x," operations failed"),y)})})})},Ge.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"delete",keys:e})}).then(function(f){var u=f.numFailures,c=f.lastResult,f=f.failures;if(u===0)return c;throw new qe("".concat(t.name,".bulkDelete(): ").concat(u," of ").concat(n," operations failed"),f)})},Ge);function Ge(){}function wn(e){function t(f,v){if(v){for(var m=arguments.length,b=new Array(m-1);--m;)b[m-1]=arguments[m];return n[f].subscribe.apply(null,b),e}if(typeof f=="string")return n[f]}var n={};t.addEventType=c;for(var a=1,u=arguments.length;a<u;++a)c(arguments[a]);return t;function c(f,v,m){if(typeof f!="object"){var b;v=v||_t;var x={subscribers:[],fire:m=m||xe,subscribe:function(p){x.subscribers.indexOf(p)===-1&&(x.subscribers.push(p),x.fire=v(x.fire,p))},unsubscribe:function(p){x.subscribers=x.subscribers.filter(function(E){return E!==p}),x.fire=x.subscribers.reduce(v,m)}};return n[f]=t[f]=x}h(b=f).forEach(function(p){var E=b[p];if(g(E))c(p,b[p][0],b[p][1]);else{if(E!=="asap")throw new re.InvalidArgument("Invalid event config");var y=c(p,ft,function(){for(var k=arguments.length,T=new Array(k);k--;)T[k]=arguments[k];y.subscribers.forEach(function(_){R(function(){_.apply(null,T)})})})}})}}function kn(e,t){return B(t).from({prototype:e}),t}function dn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function kr(e,t){e.filter=en(e.filter,t)}function xr(e,t,n){var a=e.replayFilter;e.replayFilter=a?function(){return en(a(),t())}:t,e.justLimit=n&&!a}function Un(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new re.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Oo(e,t,n){var a=Un(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:a,range:e.range}})}function Yn(e,t,n,a){var u=e.replayFilter?en(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},f=function(v,m,b){var x,p;u&&!u(m,b,function(E){return m.stop(E)},function(E){return m.fail(E)})||((p=""+(x=m.primaryKey))=="[object ArrayBuffer]"&&(p=""+new Uint8Array(x)),F(c,p)||(c[p]=!0,t(v,m,b)))};return Promise.all([e.or._iterate(f,n),Co(Oo(e,a,n),e.algorithm,f,!e.keysOnly&&e.valueMapper)])}return Co(Oo(e,a,n),en(e.algorithm,u),t,!e.keysOnly&&e.valueMapper)}function Co(e,t,n,a){var u=Xe(a?function(c,f,v){return n(a(c),f,v)}:n);return e.then(function(c){if(c)return c.start(function(){var f=function(){return c.continue()};t&&!t(c,function(v){return f=v},function(v){c.stop(v),f=xe},function(v){c.fail(v),f=xe})||u(c.value,c,function(v){return f=v}),f()})})}var xn=(Io.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(g(n))return l(l([],g(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var a=t.remove;if(g(a))return g(e)?e.filter(function(u){return!a.includes(u)}).sort():[];if(typeof a=="number")return Number(e)-a;if(typeof a=="bigint")try{return BigInt(e)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Io);function Io(e){this["@@propmod"]=e}var Gi=(Ne.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,$e.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Ne.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,$e.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Ne.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=en(t.algorithm,e)},Ne.prototype._iterate=function(e,t){return Yn(this._ctx,e,t,this._ctx.table.core)},Ne.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&D(n,e),t._ctx=n,t},Ne.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ne.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Yn(t,e,n,t.table.core)})},Ne.prototype.count=function(e){var t=this;return this._read(function(n){var a=t._ctx,u=a.table.core;if(dn(a,!0))return u.count({trans:n,query:{index:Un(a,u.schema),range:a.range}}).then(function(f){return Math.min(f,a.limit)});var c=0;return Yn(a,function(){return++c,!1},n,u).then(function(){return c})}).then(e)},Ne.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),a=n[0],u=n.length-1;function c(m,b){return b?c(m[n[b]],b-1):m[a]}var f=this._ctx.dir==="next"?1:-1;function v(m,b){return Me(c(m,u),c(b,u))*f}return this.toArray(function(m){return m.sort(v)}).then(t)},Ne.prototype.toArray=function(e){var t=this;return this._read(function(n){var a=t._ctx;if(a.dir==="next"&&dn(a,!0)&&0<a.limit){var u=a.valueMapper,c=Un(a,a.table.core.schema);return a.table.core.query({trans:n,limit:a.limit,values:!0,query:{index:c,range:a.range}}).then(function(v){return v=v.result,u?v.map(u):v})}var f=[];return Yn(a,function(v){return f.push(v)},n,a.table.core).then(function(){return f})},e)},Ne.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,dn(t)?xr(t,function(){var n=e;return function(a,u){return n===0||(n===1?--n:u(function(){a.advance(n),n=0}),!1)}}):xr(t,function(){var n=e;return function(){return--n<0}})),this},Ne.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),xr(this._ctx,function(){var t=e;return function(n,a,u){return--t<=0&&a(u),0<=t}},!0),this},Ne.prototype.until=function(e,t){return kr(this._ctx,function(n,a,u){return!e(n.value)||(a(u),t)}),this},Ne.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},Ne.prototype.last=function(e){return this.reverse().first(e)},Ne.prototype.filter=function(e){var t;return kr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=en(t.isMatch,e),this},Ne.prototype.and=function(e){return this.filter(e)},Ne.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Ne.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ne.prototype.desc=function(){return this.reverse()},Ne.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,a){e(a.key,a)})},Ne.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Ne.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,a){e(a.primaryKey,a)})},Ne.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(a,u){n.push(u.key)}).then(function(){return n}).then(e)},Ne.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&dn(t,!0)&&0<t.limit)return this._read(function(a){var u=Un(t,t.table.core.schema);return t.table.core.query({trans:a,values:!1,limit:t.limit,query:{index:u,range:t.range}})}).then(function(a){return a.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(a,u){n.push(u.primaryKey)}).then(function(){return n}).then(e)},Ne.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Ne.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},Ne.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Ne.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return kr(this._ctx,function(u){var a=u.primaryKey.toString(),u=F(t,a);return t[a]=!0,!u}),this},Ne.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(a){var u,c,f;f=typeof e=="function"?e:(u=h(e),c=u.length,function(_){for(var I=!1,A=0;A<c;++A){var j=u[A],z=e[j],G=V(_,j);z instanceof xn?(U(_,j,z.execute(G)),I=!0):G!==z&&(U(_,j,z),I=!0)}return I});var v=n.table.core,p=v.schema.primaryKey,m=p.outbound,b=p.extractKey,x=200,p=t.db._options.modifyChunkSize;p&&(x=typeof p=="object"?p[v.name]||p["*"]||200:p);function E(_,j){var A=j.failures,j=j.numFailures;k+=_-j;for(var z=0,G=h(A);z<G.length;z++){var $=G[z];y.push(A[$])}}var y=[],k=0,T=[];return t.clone().primaryKeys().then(function(_){function I(j){var z=Math.min(x,_.length-j);return v.getMany({trans:a,keys:_.slice(j,j+z),cache:"immutable"}).then(function(G){for(var $=[],Q=[],J=m?[]:null,ne=[],Z=0;Z<z;++Z){var ae=G[Z],we={value:He(ae),primKey:_[j+Z]};f.call(we,we.value,we)!==!1&&(we.value==null?ne.push(_[j+Z]):m||Me(b(ae),b(we.value))===0?(Q.push(we.value),m&&J.push(_[j+Z])):(ne.push(_[j+Z]),$.push(we.value)))}return Promise.resolve(0<$.length&&v.mutate({trans:a,type:"add",values:$}).then(function(Ee){for(var Oe in Ee.failures)ne.splice(parseInt(Oe),1);E($.length,Ee)})).then(function(){return(0<Q.length||A&&typeof e=="object")&&v.mutate({trans:a,type:"put",keys:J,values:Q,criteria:A,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<j}).then(function(Ee){return E(Q.length,Ee)})}).then(function(){return(0<ne.length||A&&e===Dr)&&v.mutate({trans:a,type:"delete",keys:ne,criteria:A,isAdditionalChunk:0<j}).then(function(Ee){return E(ne.length,Ee)})}).then(function(){return _.length>j+z&&I(j+x)})})}var A=dn(n)&&n.limit===1/0&&(typeof e!="function"||e===Dr)&&{index:n.index,range:n.range};return I(0).then(function(){if(0<y.length)throw new Se("Error modifying one or more objects",y,k,T);return _.length})})})},Ne.prototype.delete=function(){var e=this._ctx,t=e.range;return dn(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var a=e.table.core.schema.primaryKey,u=t;return e.table.core.count({trans:n,query:{index:a,range:u}}).then(function(c){return e.table.core.mutate({trans:n,type:"deleteRange",range:u}).then(function(f){var v=f.failures;if(f.lastResult,f.results,f=f.numFailures,f)throw new Se("Could not delete some values",Object.keys(v).map(function(m){return v[m]}),c-f);return c-f})})}):this.modify(Dr)},Ne);function Ne(){}var Dr=function(e,t){return t.value=null};function Qi(e,t){return e<t?-1:e===t?0:1}function Ji(e,t){return t<e?-1:e===t?0:1}function St(e,t,n){return e=e instanceof Ao?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function hn(e){return new e.Collection(e,function(){return Po("")}).limit(0)}function Vn(e,t,n,a){var u,c,f,v,m,b,x,p=n.length;if(!n.every(function(k){return typeof k=="string"}))return St(e,ko);function E(k){u=k==="next"?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()},c=k==="next"?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()},f=k==="next"?Qi:Ji;var T=n.map(function(_){return{lower:c(_),upper:u(_)}}).sort(function(_,I){return f(_.lower,I.lower)});v=T.map(function(_){return _.upper}),m=T.map(function(_){return _.lower}),x=(b=k)==="next"?"":a}E("next"),e=new e.Collection(e,function(){return Ut(v[0],m[p-1]+a)}),e._ondirectionchange=function(k){E(k)};var y=0;return e._addAlgorithm(function(k,T,_){var I=k.key;if(typeof I!="string")return!1;var A=c(I);if(t(A,m,y))return!0;for(var j=null,z=y;z<p;++z){var G=function($,Q,J,ne,Z,ae){for(var we=Math.min($.length,ne.length),Ee=-1,Oe=0;Oe<we;++Oe){var Tt=Q[Oe];if(Tt!==ne[Oe])return Z($[Oe],J[Oe])<0?$.substr(0,Oe)+J[Oe]+J.substr(Oe+1):Z($[Oe],ne[Oe])<0?$.substr(0,Oe)+ne[Oe]+J.substr(Oe+1):0<=Ee?$.substr(0,Ee)+Q[Ee]+J.substr(Ee+1):null;Z($[Oe],Tt)<0&&(Ee=Oe)}return we<ne.length&&ae==="next"?$+J.substr($.length):we<$.length&&ae==="prev"?$.substr(0,J.length):Ee<0?null:$.substr(0,Ee)+ne[Ee]+J.substr(Ee+1)}(I,A,v[z],m[z],f,b);G===null&&j===null?y=z+1:(j===null||0<f(j,G))&&(j=G)}return T(j!==null?function(){k.continue(j+x)}:_),!1}),e}function Ut(e,t,n,a){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:a}}function Po(e){return{type:1,lower:e,upper:e}}var Ao=(Object.defineProperty(at.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),at.prototype.between=function(e,t,n,a){n=n!==!1,a=a===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||a)&&(!n||!a)?hn(this):new this.Collection(this,function(){return Ut(e,t,!n,!a)})}catch{return St(this,Rt)}},at.prototype.equals=function(e){return e==null?St(this,Rt):new this.Collection(this,function(){return Po(e)})},at.prototype.above=function(e){return e==null?St(this,Rt):new this.Collection(this,function(){return Ut(e,void 0,!0)})},at.prototype.aboveOrEqual=function(e){return e==null?St(this,Rt):new this.Collection(this,function(){return Ut(e,void 0,!1)})},at.prototype.below=function(e){return e==null?St(this,Rt):new this.Collection(this,function(){return Ut(void 0,e,!1,!0)})},at.prototype.belowOrEqual=function(e){return e==null?St(this,Rt):new this.Collection(this,function(){return Ut(void 0,e)})},at.prototype.startsWith=function(e){return typeof e!="string"?St(this,ko):this.between(e,e+$t,!0,!0)},at.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Vn(this,function(t,n){return t.indexOf(n[0])===0},[e],$t)},at.prototype.equalsIgnoreCase=function(e){return Vn(this,function(t,n){return t===n[0]},[e],"")},at.prototype.anyOfIgnoreCase=function(){var e=Le.apply(je,arguments);return e.length===0?hn(this):Vn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},at.prototype.startsWithAnyOfIgnoreCase=function(){var e=Le.apply(je,arguments);return e.length===0?hn(this):Vn(this,function(t,n){return n.some(function(a){return t.indexOf(a)===0})},e,$t)},at.prototype.anyOf=function(){var e=this,t=Le.apply(je,arguments),n=this._cmp;try{t.sort(n)}catch{return St(this,Rt)}if(t.length===0)return hn(this);var a=new this.Collection(this,function(){return Ut(t[0],t[t.length-1])});a._ondirectionchange=function(c){n=c==="next"?e._ascending:e._descending,t.sort(n)};var u=0;return a._addAlgorithm(function(c,f,v){for(var m=c.key;0<n(m,t[u]);)if(++u===t.length)return f(v),!1;return n(m,t[u])===0||(f(function(){c.continue(t[u])}),!1)}),a},at.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},at.prototype.noneOf=function(){var e=Le.apply(je,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return St(this,Rt)}var t=e.reduce(function(n,a){return n?n.concat([[n[n.length-1][1],a]]):[[-1/0,a]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},at.prototype.inAnyRange=function(I,t){var n=this,a=this._cmp,u=this._ascending,c=this._descending,f=this._min,v=this._max;if(I.length===0)return hn(this);if(!I.every(function(A){return A[0]!==void 0&&A[1]!==void 0&&u(A[0],A[1])<=0}))return St(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var m=!t||t.includeLowers!==!1,b=t&&t.includeUppers===!0,x,p=u;function E(A,j){return p(A[0],j[0])}try{(x=I.reduce(function(A,j){for(var z=0,G=A.length;z<G;++z){var $=A[z];if(a(j[0],$[1])<0&&0<a(j[1],$[0])){$[0]=f($[0],j[0]),$[1]=v($[1],j[1]);break}}return z===G&&A.push(j),A},[])).sort(E)}catch{return St(this,Rt)}var y=0,k=b?function(A){return 0<u(A,x[y][1])}:function(A){return 0<=u(A,x[y][1])},T=m?function(A){return 0<c(A,x[y][0])}:function(A){return 0<=c(A,x[y][0])},_=k,I=new this.Collection(this,function(){return Ut(x[0][0],x[x.length-1][1],!m,!b)});return I._ondirectionchange=function(A){p=A==="next"?(_=k,u):(_=T,c),x.sort(E)},I._addAlgorithm(function(A,j,z){for(var G,$=A.key;_($);)if(++y===x.length)return j(z),!1;return!k(G=$)&&!T(G)||(n._cmp($,x[y][1])===0||n._cmp($,x[y][0])===0||j(function(){p===u?A.continue(x[y][0]):A.continue(x[y][1])}),!1)}),I},at.prototype.startsWithAnyOf=function(){var e=Le.apply(je,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?hn(this):this.inAnyRange(e.map(function(t){return[t,t+$t]})):St(this,"startsWithAnyOf() only works with strings")},at);function at(){}function jt(e){return Xe(function(t){return Dn(t),e(t.target.error),!1})}function Dn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Sn="storagemutated",Sr="x-storagemutated-1",Yt=wn(null,Sn),Xi=(Kt.prototype._lock=function(){return w(!se.global),++this._reculock,this._reculock!==1||se.global||(se.lockOwnerFor=this),this},Kt.prototype._unlock=function(){if(w(!se.global),--this._reculock==0)for(se.global||(se.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Zt(e[1],e[0])}catch{}}return this},Kt.prototype._locked=function(){return this._reculock&&se.lockOwnerFor!==this},Kt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,a=this.db._state.dbOpenError;if(w(!this.idbtrans),!e&&!n)switch(a&&a.name){case"DatabaseClosedError":throw new re.DatabaseClosed(a);case"MissingAPIError":throw new re.MissingAPI(a.message,a);default:throw new re.OpenFailed(a)}if(!this.active)throw new re.TransactionInactive;return w(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Xe(function(u){Dn(u),t._reject(e.error)}),e.onabort=Xe(function(u){Dn(u),t.active&&t._reject(new re.Abort(e.error)),t.active=!1,t.on("abort").fire(u)}),e.oncomplete=Xe(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Yt.storagemutated.fire(e.mutatedParts)}),this},Kt.prototype._promise=function(e,t,n){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return $e(new re.ReadOnly("Transaction is readonly"));if(!this.active)return $e(new re.TransactionInactive);if(this._locked())return new te(function(c,f){a._blockedFuncs.push([function(){a._promise(e,t,n).then(c,f)},se])});if(n)return Ht(function(){var c=new te(function(f,v){a._lock();var m=t(f,v,a);m&&m.then&&m.then(f,v)});return c.finally(function(){return a._unlock()}),c._lib=!0,c});var u=new te(function(c,f){var v=t(c,f,a);v&&v.then&&v.then(c,f)});return u._lib=!0,u},Kt.prototype._root=function(){return this.parent?this.parent._root():this},Kt.prototype.waitFor=function(e){var t,n=this._root(),a=te.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return a}):(n._waitingFor=a,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function c(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=c)}());var u=n._waitingFor;return new te(function(c,f){a.then(function(v){return n._waitingQueue.push(Xe(c.bind(null,v)))},function(v){return n._waitingQueue.push(Xe(f.bind(null,v)))}).finally(function(){n._waitingFor===u&&(n._waitingFor=null)})})},Kt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))},Kt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(F(t,e))return t[e];var n=this.schema[e];if(!n)throw new re.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},Kt);function Kt(){}function Tr(e,t,n,a,u,c,f){return{name:e,keyPath:t,unique:n,multi:a,auto:u,compound:c,src:(n&&!f?"&":"")+(a?"*":"")+(u?"++":"")+Mo(t)}}function Mo(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Er(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(a=function(u){return[u.name,u]},n.reduce(function(u,c,f){return f=a(c,f),f&&(u[f[0]]=f[1]),u},{}))};var a}var Tn=function(e){try{return e.only([[]]),Tn=function(){return[[]]},[[]]}catch{return Tn=function(){return $t},$t}};function Or(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return V(n,t)}:function(n){return V(n,e)};var t}function jo(e){return[].slice.call(e)}var Zi=0;function En(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function $i(e,t,m){function a(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var y=_.lower,k=_.upper,T=_.lowerOpen,_=_.upperOpen;return y===void 0?k===void 0?null:t.upperBound(k,!!_):k===void 0?t.lowerBound(y,!!T):t.bound(y,k,!!T,!!_)}function u(E){var y,k=E.name;return{name:k,schema:E,mutate:function(T){var _=T.trans,I=T.type,A=T.keys,j=T.values,z=T.range;return new Promise(function(G,$){G=Xe(G);var Q=_.objectStore(k),J=Q.keyPath==null,ne=I==="put"||I==="add";if(!ne&&I!=="delete"&&I!=="deleteRange")throw new Error("Invalid operation type: "+I);var Z,ae=(A||j||{length:1}).length;if(A&&j&&A.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(ae===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function we(wt){++Tt,Dn(wt)}var Ee=[],Oe=[],Tt=0;if(I==="deleteRange"){if(z.type===4)return G({numFailures:Tt,failures:Oe,results:[],lastResult:void 0});z.type===3?Ee.push(Z=Q.clear()):Ee.push(Z=Q.delete(a(z)))}else{var J=ne?J?[j,A]:[j,null]:[A,null],be=J[0],pt=J[1];if(ne)for(var gt=0;gt<ae;++gt)Ee.push(Z=pt&&pt[gt]!==void 0?Q[I](be[gt],pt[gt]):Q[I](be[gt])),Z.onerror=we;else for(gt=0;gt<ae;++gt)Ee.push(Z=Q[I](be[gt])),Z.onerror=we}function ir(wt){wt=wt.target.result,Ee.forEach(function(rn,Vr){return rn.error!=null&&(Oe[Vr]=rn.error)}),G({numFailures:Tt,failures:Oe,results:I==="delete"?A:Ee.map(function(rn){return rn.result}),lastResult:wt})}Z.onerror=function(wt){we(wt),ir(wt)},Z.onsuccess=ir})},getMany:function(T){var _=T.trans,I=T.keys;return new Promise(function(A,j){A=Xe(A);for(var z,G=_.objectStore(k),$=I.length,Q=new Array($),J=0,ne=0,Z=function(Ee){Ee=Ee.target,Q[Ee._pos]=Ee.result,++ne===J&&A(Q)},ae=jt(j),we=0;we<$;++we)I[we]!=null&&((z=G.get(I[we]))._pos=we,z.onsuccess=Z,z.onerror=ae,++J);J===0&&A(Q)})},get:function(T){var _=T.trans,I=T.key;return new Promise(function(A,j){A=Xe(A);var z=_.objectStore(k).get(I);z.onsuccess=function(G){return A(G.target.result)},z.onerror=jt(j)})},query:(y=b,function(T){return new Promise(function(_,I){_=Xe(_);var A,j,z,J=T.trans,G=T.values,$=T.limit,Z=T.query,Q=$===1/0?void 0:$,ne=Z.index,Z=Z.range,J=J.objectStore(k),ne=ne.isPrimaryKey?J:J.index(ne.name),Z=a(Z);if($===0)return _({result:[]});y?((Q=G?ne.getAll(Z,Q):ne.getAllKeys(Z,Q)).onsuccess=function(ae){return _({result:ae.target.result})},Q.onerror=jt(I)):(A=0,j=!G&&"openKeyCursor"in ne?ne.openKeyCursor(Z):ne.openCursor(Z),z=[],j.onsuccess=function(ae){var we=j.result;return we?(z.push(G?we.value:we.primaryKey),++A===$?_({result:z}):void we.continue()):_({result:z})},j.onerror=jt(I))})}),openCursor:function(T){var _=T.trans,I=T.values,A=T.query,j=T.reverse,z=T.unique;return new Promise(function(G,$){G=Xe(G);var ne=A.index,Q=A.range,J=_.objectStore(k),J=ne.isPrimaryKey?J:J.index(ne.name),ne=j?z?"prevunique":"prev":z?"nextunique":"next",Z=!I&&"openKeyCursor"in J?J.openKeyCursor(a(Q),ne):J.openCursor(a(Q),ne);Z.onerror=jt($),Z.onsuccess=Xe(function(ae){var we,Ee,Oe,Tt,be=Z.result;be?(be.___id=++Zi,be.done=!1,we=be.continue.bind(be),Ee=(Ee=be.continuePrimaryKey)&&Ee.bind(be),Oe=be.advance.bind(be),Tt=function(){throw new Error("Cursor not stopped")},be.trans=_,be.stop=be.continue=be.continuePrimaryKey=be.advance=function(){throw new Error("Cursor not started")},be.fail=Xe($),be.next=function(){var pt=this,gt=1;return this.start(function(){return gt--?pt.continue():pt.stop()}).then(function(){return pt})},be.start=function(pt){function gt(){if(Z.result)try{pt()}catch(wt){be.fail(wt)}else be.done=!0,be.start=function(){throw new Error("Cursor behind last entry")},be.stop()}var ir=new Promise(function(wt,rn){wt=Xe(wt),Z.onerror=jt(rn),be.fail=rn,be.stop=function(Vr){be.stop=be.continue=be.continuePrimaryKey=be.advance=Tt,wt(Vr)}});return Z.onsuccess=Xe(function(wt){Z.onsuccess=gt,gt()}),be.continue=we,be.continuePrimaryKey=Ee,be.advance=Oe,gt(),ir},G(be)):G(null)},$)})},count:function(T){var _=T.query,I=T.trans,A=_.index,j=_.range;return new Promise(function(z,G){var $=I.objectStore(k),Q=A.isPrimaryKey?$:$.index(A.name),$=a(j),Q=$?Q.count($):Q.count();Q.onsuccess=Xe(function(J){return z(J.target.result)}),Q.onerror=jt(G)})}}}var c,f,v,x=(f=m,v=jo((c=e).objectStoreNames),{schema:{name:c.name,tables:v.map(function(E){return f.objectStore(E)}).map(function(E){var y=E.keyPath,_=E.autoIncrement,k=g(y),T={},_={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y==null,compound:k,keyPath:y,autoIncrement:_,unique:!0,extractKey:Or(y)},indexes:jo(E.indexNames).map(function(I){return E.index(I)}).map(function(z){var A=z.name,j=z.unique,G=z.multiEntry,z=z.keyPath,G={name:A,compound:g(z),keyPath:z,unique:j,multiEntry:G,extractKey:Or(z)};return T[En(z)]=G}),getIndexByKeyPath:function(I){return T[En(I)]}};return T[":id"]=_.primaryKey,y!=null&&(T[En(y)]=_.primaryKey),_})},hasGetAll:0<v.length&&"getAll"in f.objectStore(v[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),m=x.schema,b=x.hasGetAll,x=m.tables.map(u),p={};return x.forEach(function(E){return p[E.name]=E}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(E){if(!p[E])throw new Error("Table '".concat(E,"' not found"));return p[E]},MIN_KEY:-1/0,MAX_KEY:Tn(t),schema:m}}function ea(e,t,n,a){var u=n.IDBKeyRange;return n.indexedDB,{dbcore:(a=$i(t,u,a),e.dbcore.reduce(function(c,f){return f=f.create,s(s({},c),f(c))},a))}}function Wn(e,a){var n=a.db,a=ea(e._middlewares,n,e._deps,a);e.core=a.dbcore,e.tables.forEach(function(u){var c=u.name;e.core.schema.tables.some(function(f){return f.name===c})&&(u.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=u.core))})}function Gn(e,t,n,a){n.forEach(function(u){var c=a[u];t.forEach(function(f){var v=function m(b,x){return W(b,x)||(b=C(b))&&m(b,x)}(f,u);(!v||"value"in v&&v.value===void 0)&&(f===e.Transaction.prototype||f instanceof e.Transaction?L(f,u,{get:function(){return this.table(u)},set:function(m){q(this,u,{value:m,writable:!0,configurable:!0,enumerable:!0})}}):f[u]=new e.Table(u,c))})})}function Cr(e,t){t.forEach(function(n){for(var a in n)n[a]instanceof e.Table&&delete n[a]})}function ta(e,t){return e._cfg.version-t._cfg.version}function na(e,t,n,a){var u=e._dbSchema;n.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=Er("$meta",Fo("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,u);c.create(n),c._completion.catch(a);var f=c._reject.bind(c),v=se.transless||se;Ht(function(){return se.trans=c,se.transless=v,t!==0?(Wn(e,n),b=t,((m=c).storeNames.includes("$meta")?m.table("$meta").get("version").then(function(x){return x??b}):te.resolve(b)).then(function(x){return E=x,y=c,k=n,T=[],x=(p=e)._versions,_=p._dbSchema=Jn(0,p.idbdb,k),(x=x.filter(function(I){return I._cfg.version>=E})).length!==0?(x.forEach(function(I){T.push(function(){var A=_,j=I._cfg.dbschema;Xn(p,A,k),Xn(p,j,k),_=p._dbSchema=j;var z=Ir(A,j);z.add.forEach(function(ne){Pr(k,ne[0],ne[1].primKey,ne[1].indexes)}),z.change.forEach(function(ne){if(ne.recreate)throw new re.Upgrade("Not yet support for changing primary key");var Z=k.objectStore(ne.name);ne.add.forEach(function(ae){return Qn(Z,ae)}),ne.change.forEach(function(ae){Z.deleteIndex(ae.name),Qn(Z,ae)}),ne.del.forEach(function(ae){return Z.deleteIndex(ae)})});var G=I._cfg.contentUpgrade;if(G&&I._cfg.version>E){Wn(p,k),y._memoizedTables={};var $=ie(j);z.del.forEach(function(ne){$[ne]=A[ne]}),Cr(p,[p.Transaction.prototype]),Gn(p,[p.Transaction.prototype],h($),$),y.schema=$;var Q,J=ee(G);return J&&cn(),z=te.follow(function(){var ne;(Q=G(y))&&J&&(ne=zt.bind(null,null),Q.then(ne,ne))}),Q&&typeof Q.then=="function"?te.resolve(Q):z.then(function(){return Q})}}),T.push(function(A){var j,z,G=I._cfg.dbschema;j=G,z=A,[].slice.call(z.db.objectStoreNames).forEach(function($){return j[$]==null&&z.db.deleteObjectStore($)}),Cr(p,[p.Transaction.prototype]),Gn(p,[p.Transaction.prototype],p._storeNames,p._dbSchema),y.schema=p._dbSchema}),T.push(function(A){p.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(p.idbdb.version/10)===I._cfg.version?(p.idbdb.deleteObjectStore("$meta"),delete p._dbSchema.$meta,p._storeNames=p._storeNames.filter(function(j){return j!=="$meta"})):A.objectStore("$meta").put(I._cfg.version,"version"))})}),function I(){return T.length?te.resolve(T.shift()(y.idbtrans)).then(I):te.resolve()}().then(function(){Ko(_,k)})):te.resolve();var p,E,y,k,T,_}).catch(f)):(h(u).forEach(function(x){Pr(n,x,u[x].primKey,u[x].indexes)}),Wn(e,n),void te.follow(function(){return e.on.populate.fire(c)}).catch(f));var m,b})}function ra(e,t){Ko(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Jn(0,e.idbdb,t);Xn(e,e._dbSchema,t);for(var a=0,u=Ir(n,e._dbSchema).change;a<u.length;a++){var c=function(f){if(f.change.length||f.recreate)return console.warn("Unable to patch indexes of table ".concat(f.name," because it has changes on the type of index or primary key.")),{value:void 0};var v=t.objectStore(f.name);f.add.forEach(function(m){We&&console.debug("Dexie upgrade patch: Creating missing index ".concat(f.name,".").concat(m.src)),Qn(v,m)})}(u[a]);if(typeof c=="object")return c.value}}function Ir(e,t){var n,a={del:[],add:[],change:[]};for(n in e)t[n]||a.del.push(n);for(n in t){var u=e[n],c=t[n];if(u){var f={name:n,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||u.primKey.auto!==c.primKey.auto)f.recreate=!0,a.change.push(f);else{var v=u.idxByName,m=c.idxByName,b=void 0;for(b in v)m[b]||f.del.push(b);for(b in m){var x=v[b],p=m[b];x?x.src!==p.src&&f.change.push(p):f.add.push(p)}(0<f.del.length||0<f.add.length||0<f.change.length)&&a.change.push(f)}}else a.add.push([n,c])}return a}function Pr(e,t,n,a){var u=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return a.forEach(function(c){return Qn(u,c)}),u}function Ko(e,t){h(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(We&&console.debug("Dexie: Creating missing table",n),Pr(t,n,e[n].primKey,e[n].indexes))})}function Qn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Jn(e,t,n){var a={};return P(t.objectStoreNames,0).forEach(function(u){for(var c=n.objectStore(u),f=Tr(Mo(b=c.keyPath),b||"",!0,!1,!!c.autoIncrement,b&&typeof b!="string",!0),v=[],m=0;m<c.indexNames.length;++m){var x=c.index(c.indexNames[m]),b=x.keyPath,x=Tr(x.name,b,!!x.unique,!!x.multiEntry,!1,b&&typeof b!="string",!1);v.push(x)}a[u]=Er(u,f,v)}),a}function Xn(e,t,n){for(var a=n.db.objectStoreNames,u=0;u<a.length;++u){var c=a[u],f=n.objectStore(c);e._hasGetAll="getAll"in f;for(var v=0;v<f.indexNames.length;++v){var m=f.indexNames[v],b=f.index(m).keyPath,x=typeof b=="string"?b:"["+P(b).join("+")+"]";!t[c]||(b=t[c].idxByName[x])&&(b.name=m,delete t[c].idxByName[x],t[c].idxByName[m]=b)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Fo(e){return e.split(",").map(function(t,n){var a=(t=t.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return Tr(a,u||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),g(u),n===0)})}var oa=(Zn.prototype._parseStoresSpec=function(e,t){h(e).forEach(function(n){if(e[n]!==null){var a=Fo(e[n]),u=a.shift();if(u.unique=!0,u.multi)throw new re.Schema("Primary key cannot be multi-valued");a.forEach(function(c){if(c.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}),t[n]=Er(n,u,a)}})},Zn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?D(this._cfg.storesSource,n):n;var n=t._versions,a={},u={};return n.forEach(function(c){D(a,c._cfg.storesSource),u=c._cfg.dbschema={},c._parseStoresSpec(a,u)}),t._dbSchema=u,Cr(t,[t._allTables,t,t.Transaction.prototype]),Gn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],h(u),u),t._storeNames=h(u),this},Zn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Dt(this._cfg.contentUpgrade||xe,e),this},Zn);function Zn(){}function Ar(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Nt(zn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Mr(e){return e&&typeof e.databases=="function"}function jr(e){return Ht(function(){return se.letThrough=!0,e()})}function Kr(e){return!("from"in e)}var vt=function(e,t){if(!this){var n=new vt;return e&&"d"in e&&D(n,e),n}D(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function On(e,t,n){var a=Me(t,n);if(!isNaN(a)){if(0<a)throw RangeError();if(Kr(e))return D(e,{from:t,to:n,d:1});var u=e.l,a=e.r;if(Me(n,e.from)<0)return u?On(u,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ro(e);if(0<Me(t,e.to))return a?On(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ro(e);Me(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),0<Me(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,u&&!e.l&&Cn(e,u),a&&n&&Cn(e,a)}}function Cn(e,t){Kr(t)||function n(a,m){var c=m.from,f=m.to,v=m.l,m=m.r;On(a,c,f),v&&n(a,v),m&&n(a,m)}(e,t)}function qo(e,t){var n=$n(t),a=n.next();if(a.done)return!1;for(var u=a.value,c=$n(e),f=c.next(u.from),v=f.value;!a.done&&!f.done;){if(Me(v.from,u.to)<=0&&0<=Me(v.to,u.from))return!0;Me(u.from,v.from)<0?u=(a=n.next(v.from)).value:v=(f=c.next(u.from)).value}return!1}function $n(e){var t=Kr(e)?null:{s:0,n:e};return{next:function(n){for(var a=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,a)for(;t.n.l&&Me(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!a||Me(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ro(e){var t,n,a=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),u=1<a?"r":a<-1?"l":"";u&&(t=u=="r"?"l":"r",n=s({},e),a=e[u],e.from=a.from,e.to=a.to,e[u]=a[u],n[u]=a[t],(e[t]=n).d=No(n)),e.d=No(e)}function No(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function er(e,t){return h(t).forEach(function(n){e[n]?Cn(e[n],t[n]):e[n]=function a(u){var c,f,v={};for(c in u)F(u,c)&&(f=u[c],v[c]=!f||typeof f!="object"||ke.has(f.constructor)?f:a(f));return v}(t[n])}),e}function Fr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&qo(t[n],e[n])})}O(vt.prototype,((Et={add:function(e){return Cn(this,e),this},addKey:function(e){return On(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return On(t,n,n)}),this},hasKey:function(e){var t=$n(this).next(e).value;return t&&Me(t.from,e)<=0&&0<=Me(t.to,e)}})[Je]=function(){return $n(this)},Et));var tn={},qr={},Rr=!1;function tr(e){er(qr,e),Rr||(Rr=!0,setTimeout(function(){Rr=!1,Nr(qr,!(qr={}))},0))}function Nr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var a=0,u=Object.values(tn);a<u.length;a++)Bo(f=u[a],e,n,t);else for(var c in e){var f,v=/^idb\:\/\/(.*)\/(.*)\//.exec(c);v&&(c=v[1],v=v[2],(f=tn["idb://".concat(c,"/").concat(v)])&&Bo(f,e,n,t))}n.forEach(function(m){return m()})}function Bo(e,t,n,a){for(var u=[],c=0,f=Object.entries(e.queries.query);c<f.length;c++){for(var v=f[c],m=v[0],b=[],x=0,p=v[1];x<p.length;x++){var E=p[x];Fr(t,E.obsSet)?E.subscribers.forEach(function(_){return n.add(_)}):a&&b.push(E)}a&&u.push([m,b])}if(a)for(var y=0,k=u;y<k.length;y++){var T=k[y],m=T[0],b=T[1];e.queries.query[m]=b}}function ia(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?$e(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var a=t.openCanceller,u=Math.round(10*e.verno),c=!1;function f(){if(t.openCanceller!==a)throw new re.DatabaseClosed("db.open() was cancelled")}function v(){return new te(function(E,y){if(f(),!n)throw new re.MissingAPI;var k=e.name,T=t.autoSchema||!u?n.open(k):n.open(k,u);if(!T)throw new re.MissingAPI;T.onerror=jt(y),T.onblocked=Xe(e._fireOnBlocked),T.onupgradeneeded=Xe(function(_){var I;x=T.transaction,t.autoSchema&&!e._options.allowEmptyDB?(T.onerror=Dn,x.abort(),T.result.close(),(I=n.deleteDatabase(k)).onsuccess=I.onerror=Xe(function(){y(new re.NoSuchDatabase("Database ".concat(k," doesnt exist")))})):(x.onerror=jt(y),_=_.oldVersion>Math.pow(2,62)?0:_.oldVersion,p=_<1,e.idbdb=T.result,c&&ra(e,x),na(e,_/10,x,y))},y),T.onsuccess=Xe(function(){x=null;var _,I,A,j,z,G=e.idbdb=T.result,$=P(G.objectStoreNames);if(0<$.length)try{var Q=G.transaction((j=$).length===1?j[0]:j,"readonly");if(t.autoSchema)I=G,A=Q,(_=e).verno=I.version/10,A=_._dbSchema=Jn(0,I,A),_._storeNames=P(I.objectStoreNames,0),Gn(_,[_._allTables],h(A),A);else if(Xn(e,e._dbSchema,Q),((z=Ir(Jn(0,(z=e).idbdb,Q),z._dbSchema)).add.length||z.change.some(function(J){return J.add.length||J.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),u=G.version+1,c=!0,E(v());Wn(e,Q)}catch{}fn.push(e),G.onversionchange=Xe(function(J){t.vcFired=!0,e.on("versionchange").fire(J)}),G.onclose=Xe(function(J){e.on("close").fire(J)}),p&&(z=e._deps,Q=k,G=z.indexedDB,z=z.IDBKeyRange,Mr(G)||Q===zn||Ar(G,z).put({name:Q}).catch(xe)),E()},y)}).catch(function(E){switch(E==null?void 0:E.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),v();break;case"VersionError":if(0<u)return u=0,v()}return te.reject(E)})}var m,b=t.dbReadyResolve,x=null,p=!1;return te.race([a,(typeof navigator>"u"?te.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(E){function y(){return indexedDB.databases().finally(E)}m=setInterval(y,100),y()}).finally(function(){return clearInterval(m)}):Promise.resolve()).then(v)]).then(function(){return f(),t.onReadyBeingFired=[],te.resolve(jr(function(){return e.on.ready.fire(e.vip)})).then(function E(){if(0<t.onReadyBeingFired.length){var y=t.onReadyBeingFired.reduce(Dt,xe);return t.onReadyBeingFired=[],te.resolve(jr(function(){return y(e.vip)})).then(E)}})}).finally(function(){t.openCanceller===a&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(E){t.dbOpenError=E;try{x&&x.abort()}catch{}return a===t.openCanceller&&e._close(),$e(E)}).finally(function(){t.openComplete=!0,b()}).then(function(){var E;return p&&(E={},e.tables.forEach(function(y){y.schema.indexes.forEach(function(k){k.name&&(E["idb://".concat(e.name,"/").concat(y.name,"/").concat(k.name)]=new vt(-1/0,[[[]]]))}),E["idb://".concat(e.name,"/").concat(y.name,"/")]=E["idb://".concat(e.name,"/").concat(y.name,"/:dels")]=new vt(-1/0,[[[]]])}),Yt(Sn).fire(E),Nr(E,!0)),e})}function Br(e){function t(c){return e.next(c)}var n=u(t),a=u(function(c){return e.throw(c)});function u(c){return function(m){var v=c(m),m=v.value;return v.done?m:m&&typeof m.then=="function"?m.then(n,a):g(m)?Promise.all(m).then(n,a):n(m)}}return u(t)()}function nr(e,t,n){for(var a=g(e)?e.slice():[e],u=0;u<n;++u)a.push(t);return a}var aa={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),a=n.schema,u={},c=[];function f(p,E,y){var k=En(p),T=u[k]=u[k]||[],_=p==null?0:typeof p=="string"?1:p.length,I=0<E,I=s(s({},y),{name:I?"".concat(k,"(virtual-from:").concat(y.name,")"):y.name,lowLevelIndex:y,isVirtual:I,keyTail:E,keyLength:_,extractKey:Or(p),unique:!I&&y.unique});return T.push(I),I.isPrimaryKey||c.push(I),1<_&&f(_===2?p[0]:p.slice(0,_-1),E+1,y),T.sort(function(A,j){return A.keyTail-j.keyTail}),I}t=f(a.primaryKey.keyPath,0,a.primaryKey),u[":id"]=[t];for(var v=0,m=a.indexes;v<m.length;v++){var b=m[v];f(b.keyPath,0,b)}function x(p){var E,y=p.query.index;return y.isVirtual?s(s({},p),{query:{index:y.lowLevelIndex,range:(E=p.query.range,y=y.keyTail,{type:E.type===1?2:E.type,lower:nr(E.lower,E.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:nr(E.upper,E.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}):p}return s(s({},n),{schema:s(s({},a),{primaryKey:t,indexes:c,getIndexByKeyPath:function(p){return(p=u[En(p)])&&p[0]}}),count:function(p){return n.count(x(p))},query:function(p){return n.query(x(p))},openCursor:function(p){var E=p.query.index,y=E.keyTail,k=E.isVirtual,T=E.keyLength;return k?n.openCursor(x(p)).then(function(I){return I&&_(I)}):n.openCursor(p);function _(I){return Object.create(I,{continue:{value:function(A){A!=null?I.continue(nr(A,p.reverse?e.MAX_KEY:e.MIN_KEY,y)):p.unique?I.continue(I.key.slice(0,T).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,y)):I.continue()}},continuePrimaryKey:{value:function(A,j){I.continuePrimaryKey(nr(A,e.MAX_KEY,y),j)}},primaryKey:{get:function(){return I.primaryKey}},key:{get:function(){var A=I.key;return T===1?A[0]:A.slice(0,T)}},value:{get:function(){return I.value}}})}}})}})}};function Hr(e,t,n,a){return n=n||{},a=a||"",h(e).forEach(function(u){var c,f,v;F(t,u)?(c=e[u],f=t[u],typeof c=="object"&&typeof f=="object"&&c&&f?(v=Ye(c))!==Ye(f)?n[a+u]=t[u]:v==="Object"?Hr(c,f,n,a+u+"."):c!==f&&(n[a+u]=t[u]):c!==f&&(n[a+u]=t[u])):n[a+u]=void 0}),h(t).forEach(function(u){F(e,u)||(n[a+u]=t[u])}),n}function zr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var sa={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),a=n.schema.primaryKey;return s(s({},n),{mutate:function(u){var c=se.trans,f=c.table(t).hook,v=f.deleting,m=f.creating,b=f.updating;switch(u.type){case"add":if(m.fire===xe)break;return c._promise("readwrite",function(){return x(u)},!0);case"put":if(m.fire===xe&&b.fire===xe)break;return c._promise("readwrite",function(){return x(u)},!0);case"delete":if(v.fire===xe)break;return c._promise("readwrite",function(){return x(u)},!0);case"deleteRange":if(v.fire===xe)break;return c._promise("readwrite",function(){return function p(E,y,k){return n.query({trans:E,values:!1,query:{index:a,range:y},limit:k}).then(function(T){var _=T.result;return x({type:"delete",keys:_,trans:E}).then(function(I){return 0<I.numFailures?Promise.reject(I.failures[0]):_.length<k?{failures:[],numFailures:0,lastResult:void 0}:p(E,s(s({},y),{lower:_[_.length-1],lowerOpen:!0}),k)})})}(u.trans,u.range,1e4)},!0)}return n.mutate(u);function x(p){var E,y,k,T=se.trans,_=p.keys||zr(a,p);if(!_)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?s(s({},p),{keys:_}):s({},p)).type!=="delete"&&(p.values=l([],p.values)),p.keys&&(p.keys=l([],p.keys)),E=n,k=_,((y=p).type==="add"?Promise.resolve([]):E.getMany({trans:y.trans,keys:k,cache:"immutable"})).then(function(I){var A=_.map(function(j,z){var G,$,Q,J=I[z],ne={onerror:null,onsuccess:null};return p.type==="delete"?v.fire.call(ne,j,J,T):p.type==="add"||J===void 0?(G=m.fire.call(ne,j,p.values[z],T),j==null&&G!=null&&(p.keys[z]=j=G,a.outbound||U(p.values[z],a.keyPath,j))):(G=Hr(J,p.values[z]),($=b.fire.call(ne,G,j,J,T))&&(Q=p.values[z],Object.keys($).forEach(function(Z){F(Q,Z)?Q[Z]=$[Z]:U(Q,Z,$[Z])}))),ne});return n.mutate(p).then(function(j){for(var z=j.failures,G=j.results,$=j.numFailures,j=j.lastResult,Q=0;Q<_.length;++Q){var J=(G||_)[Q],ne=A[Q];J==null?ne.onerror&&ne.onerror(z[Q]):ne.onsuccess&&ne.onsuccess(p.type==="put"&&I[Q]?p.values[Q]:J)}return{failures:z,results:G,numFailures:$,lastResult:j}}).catch(function(j){return A.forEach(function(z){return z.onerror&&z.onerror(j)}),Promise.reject(j)})})}}})}})}};function Ho(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var a=[],u=0,c=0;u<t.keys.length&&c<e.length;++u)Me(t.keys[u],e[c])===0&&(a.push(n?He(t.values[u]):t.values[u]),++c);return a.length===e.length?a:null}catch{return null}}var ua={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return s(s({},n),{getMany:function(a){if(!a.cache)return n.getMany(a);var u=Ho(a.keys,a.trans._cache,a.cache==="clone");return u?te.resolve(u):n.getMany(a).then(function(c){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?He(c):c},c})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),n.mutate(a)}})}}}};function zo(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Lo(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var la={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new vt(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(a,u,c){if(se.subscr&&u!=="readonly")throw new re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(se.querier));return e.transaction(a,u,c)},table:function(a){var u=e.table(a),c=u.schema,f=c.primaryKey,p=c.indexes,v=f.extractKey,m=f.outbound,b=f.autoIncrement&&p.filter(function(y){return y.compound&&y.keyPath.includes(f.keyPath)}),x=s(s({},u),{mutate:function(y){function k(Z){return Z="idb://".concat(t,"/").concat(a,"/").concat(Z),j[Z]||(j[Z]=new vt)}var T,_,I,A=y.trans,j=y.mutatedParts||(y.mutatedParts={}),z=k(""),G=k(":dels"),$=y.type,ne=y.type==="deleteRange"?[y.range]:y.type==="delete"?[y.keys]:y.values.length<50?[zr(f,y).filter(function(Z){return Z}),y.values]:[],Q=ne[0],J=ne[1],ne=y.trans._cache;return g(Q)?(z.addKeys(Q),(ne=$==="delete"||Q.length===J.length?Ho(Q,ne):null)||G.addKeys(Q),(ne||J)&&(T=k,_=ne,I=J,c.indexes.forEach(function(Z){var ae=T(Z.name||"");function we(Oe){return Oe!=null?Z.extractKey(Oe):null}function Ee(Oe){return Z.multiEntry&&g(Oe)?Oe.forEach(function(Tt){return ae.addKey(Tt)}):ae.addKey(Oe)}(_||I).forEach(function(Oe,pt){var be=_&&we(_[pt]),pt=I&&we(I[pt]);Me(be,pt)!==0&&(be!=null&&Ee(be),pt!=null&&Ee(pt))})}))):Q?(J={from:(J=Q.lower)!==null&&J!==void 0?J:e.MIN_KEY,to:(J=Q.upper)!==null&&J!==void 0?J:e.MAX_KEY},G.add(J),z.add(J)):(z.add(n),G.add(n),c.indexes.forEach(function(Z){return k(Z.name).add(n)})),u.mutate(y).then(function(Z){return!Q||y.type!=="add"&&y.type!=="put"||(z.addKeys(Z.results),b&&b.forEach(function(ae){for(var we=y.values.map(function(be){return ae.extractKey(be)}),Ee=ae.keyPath.findIndex(function(be){return be===f.keyPath}),Oe=0,Tt=Z.results.length;Oe<Tt;++Oe)we[Oe][Ee]=Z.results[Oe];k(ae.name).addKeys(we)})),A.mutatedParts=er(A.mutatedParts||{},j),Z})}}),p=function(k){var T=k.query,k=T.index,T=T.range;return[k,new vt((k=T.lower)!==null&&k!==void 0?k:e.MIN_KEY,(T=T.upper)!==null&&T!==void 0?T:e.MAX_KEY)]},E={get:function(y){return[f,new vt(y.key)]},getMany:function(y){return[f,new vt().addKeys(y.keys)]},count:p,query:p,openCursor:p};return h(E).forEach(function(y){x[y]=function(k){var T=se.subscr,_=!!T,I=zo(se,u)&&Lo(y,k)?k.obsSet={}:T;if(_){var A=function(J){return J="idb://".concat(t,"/").concat(a,"/").concat(J),I[J]||(I[J]=new vt)},j=A(""),z=A(":dels"),T=E[y](k),_=T[0],T=T[1];if((y==="query"&&_.isPrimaryKey&&!k.values?z:A(_.name||"")).add(T),!_.isPrimaryKey){if(y!=="count"){var G=y==="query"&&m&&k.values&&u.query(s(s({},k),{values:!1}));return u[y].apply(this,arguments).then(function(J){if(y==="query"){if(m&&k.values)return G.then(function(we){return we=we.result,j.addKeys(we),J});var ne=k.values?J.result.map(v):J.result;(k.values?j:z).addKeys(ne)}else if(y==="openCursor"){var Z=J,ae=k.values;return Z&&Object.create(Z,{key:{get:function(){return z.addKey(Z.primaryKey),Z.key}},primaryKey:{get:function(){var we=Z.primaryKey;return z.addKey(we),we}},value:{get:function(){return ae&&j.addKey(Z.primaryKey),Z.value}}})}return J})}z.add(n)}}return u[y].apply(this,arguments)}}),x}})}};function Uo(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var a=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===a?null:(t=s({},t),g(t.keys)&&(t.keys=t.keys.filter(function(u,c){return!(c in n.failures)})),"values"in t&&g(t.values)&&(t.values=t.values.filter(function(u,c){return!(c in n.failures)})),t)}function Lr(e,t){return n=e,((a=t).lower===void 0||(a.lowerOpen?0<Me(n,a.lower):0<=Me(n,a.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?Me(e,t.upper)<0:Me(e,t.upper)<=0));var n,a}function Yo(e,t,E,a,u,c){if(!E||E.length===0)return e;var f=t.query.index,v=f.multiEntry,m=t.query.range,b=a.schema.primaryKey.extractKey,x=f.extractKey,p=(f.lowLevelIndex||f).extractKey,E=E.reduce(function(y,k){var T=y,_=[];if(k.type==="add"||k.type==="put")for(var I=new vt,A=k.values.length-1;0<=A;--A){var j,z=k.values[A],G=b(z);I.hasKey(G)||(j=x(z),(v&&g(j)?j.some(function(Z){return Lr(Z,m)}):Lr(j,m))&&(I.addKey(G),_.push(z)))}switch(k.type){case"add":var $=new vt().addKeys(t.values?y.map(function(ae){return b(ae)}):y),T=y.concat(t.values?_.filter(function(ae){return ae=b(ae),!$.hasKey(ae)&&($.addKey(ae),!0)}):_.map(function(ae){return b(ae)}).filter(function(ae){return!$.hasKey(ae)&&($.addKey(ae),!0)}));break;case"put":var Q=new vt().addKeys(k.values.map(function(ae){return b(ae)}));T=y.filter(function(ae){return!Q.hasKey(t.values?b(ae):ae)}).concat(t.values?_:_.map(function(ae){return b(ae)}));break;case"delete":var J=new vt().addKeys(k.keys);T=y.filter(function(ae){return!J.hasKey(t.values?b(ae):ae)});break;case"deleteRange":var ne=k.range;T=y.filter(function(ae){return!Lr(b(ae),ne)})}return T},e);return E===e?e:(E.sort(function(y,k){return Me(p(y),p(k))||Me(b(y),b(k))}),t.limit&&t.limit<1/0&&(E.length>t.limit?E.length=t.limit:e.length===t.limit&&E.length<t.limit&&(u.dirty=!0)),c?Object.freeze(E):E)}function Vo(e,t){return Me(e.lower,t.lower)===0&&Me(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function ca(e,t){return function(n,a,u,c){if(n===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=Me(n,a))===0){if(u&&c)return 0;if(u)return 1;if(c)return-1}return a}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,a,u,c){if(n===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=Me(n,a))===0){if(u&&c)return 0;if(u)return-1;if(c)return 1}return a}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function fa(e,t,n,a){e.subscribers.add(n),a.addEventListener("abort",function(){var u,c;e.subscribers.delete(n),e.subscribers.size===0&&(u=e,c=t,setTimeout(function(){u.subscribers.size===0&&ye(c,u)},3e3))})}var da={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(n,a,u){var c,f,v=e.transaction(n,a,u);return a==="readwrite"&&(f=(c=new AbortController).signal,u=function(m){return function(){if(c.abort(),a==="readwrite"){for(var b=new Set,x=0,p=n;x<p.length;x++){var E=p[x],y=tn["idb://".concat(t,"/").concat(E)];if(y){var k=e.table(E),T=y.optimisticOps.filter(function(ae){return ae.trans===v});if(v._explicit&&m&&v.mutatedParts)for(var _=0,I=Object.values(y.queries.query);_<I.length;_++)for(var A=0,j=($=I[_]).slice();A<j.length;A++)Fr((Q=j[A]).obsSet,v.mutatedParts)&&(ye($,Q),Q.subscribers.forEach(function(ae){return b.add(ae)}));else if(0<T.length){y.optimisticOps=y.optimisticOps.filter(function(ae){return ae.trans!==v});for(var z=0,G=Object.values(y.queries.query);z<G.length;z++)for(var $,Q,J,ne=0,Z=($=G[z]).slice();ne<Z.length;ne++)(Q=Z[ne]).res!=null&&v.mutatedParts&&(m&&!Q.dirty?(J=Object.isFrozen(Q.res),J=Yo(Q.res,Q.req,T,k,Q,J),Q.dirty?(ye($,Q),Q.subscribers.forEach(function(ae){return b.add(ae)})):J!==Q.res&&(Q.res=J,Q.promise=te.resolve({result:J}))):(Q.dirty&&ye($,Q),Q.subscribers.forEach(function(ae){return b.add(ae)})))}}}b.forEach(function(ae){return ae()})}}},v.addEventListener("abort",u(!1),{signal:f}),v.addEventListener("error",u(!1),{signal:f}),v.addEventListener("complete",u(!0),{signal:f})),v},table:function(n){var a=e.table(n),u=a.schema.primaryKey;return s(s({},a),{mutate:function(c){var f=se.trans;if(u.outbound||f.db._options.cache==="disabled"||f.explicit||f.idbtrans.mode!=="readwrite")return a.mutate(c);var v=tn["idb://".concat(t,"/").concat(n)];return v?(f=a.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||zr(u,c).some(function(m){return m==null}))?(v.optimisticOps.push(c),c.mutatedParts&&tr(c.mutatedParts),f.then(function(m){0<m.numFailures&&(ye(v.optimisticOps,c),(m=Uo(0,c,m))&&v.optimisticOps.push(m),c.mutatedParts&&tr(c.mutatedParts))}),f.catch(function(){ye(v.optimisticOps,c),c.mutatedParts&&tr(c.mutatedParts)})):f.then(function(m){var b=Uo(0,s(s({},c),{values:c.values.map(function(x,p){var E;return m.failures[p]?x:(x=(E=u.keyPath)!==null&&E!==void 0&&E.includes(".")?He(x):s({},x),U(x,u.keyPath,m.results[p]),x)})}),m);v.optimisticOps.push(b),queueMicrotask(function(){return c.mutatedParts&&tr(c.mutatedParts)})}),f):a.mutate(c)},query:function(c){if(!zo(se,a)||!Lo("query",c))return a.query(c);var f=((b=se.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",p=se,v=p.requery,m=p.signal,b=function(k,T,_,I){var A=tn["idb://".concat(k,"/").concat(T)];if(!A)return[];if(!(T=A.queries[_]))return[null,!1,A,null];var j=T[(I.query?I.query.index.name:null)||""];if(!j)return[null,!1,A,null];switch(_){case"query":var z=j.find(function(G){return G.req.limit===I.limit&&G.req.values===I.values&&Vo(G.req.query.range,I.query.range)});return z?[z,!0,A,j]:[j.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=I.limit&&(!I.values||G.req.values)&&ca(G.req.query.range,I.query.range)}),!1,A,j];case"count":return z=j.find(function(G){return Vo(G.req.query.range,I.query.range)}),[z,!!z,A,j]}}(t,n,"query",c),x=b[0],p=b[1],E=b[2],y=b[3];return x&&p?x.obsSet=c.obsSet:(p=a.query(c).then(function(k){var T=k.result;if(x&&(x.res=T),f){for(var _=0,I=T.length;_<I;++_)Object.freeze(T[_]);Object.freeze(T)}else k.result=He(T);return k}).catch(function(k){return y&&x&&ye(y,x),Promise.reject(k)}),x={obsSet:c.obsSet,promise:p,subscribers:new Set,type:"query",req:c,dirty:!1},y?y.push(x):(y=[x],(E=E||(tn["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=y)),fa(x,y,v,m),x.promise.then(function(k){return{result:Yo(k.result,c,E==null?void 0:E.optimisticOps,a,x,f)}})}})}})}};function rr(e,t){return new Proxy(e,{get:function(n,a,u){return a==="db"?t:Reflect.get(n,a,u)}})}var Nt=(et.prototype.version=function(e){if(isNaN(e)||e<.1)throw new re.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(a){return a._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(ta),n.stores({}),this._state.autoSchema=!1,n)},et.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||se.letThrough||this._vip)?e():new te(function(n,a){if(t._state.openComplete)return a(new re.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void a(new re.DatabaseClosed);t.open().catch(xe)}t._state.dbReadyPromise.then(n,a)}).then(e)},et.prototype.use=function(e){var t=e.stack,n=e.create,a=e.level,u=e.name;return u&&this.unuse({stack:t,name:u}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:a??10,name:u}),e.sort(function(c,f){return c.level-f.level}),this},et.prototype.unuse=function(e){var t=e.stack,n=e.name,a=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(u){return a?u.create!==a:!!n&&u.name!==n})),this},et.prototype.open=function(){var e=this;return Zt(Ae,function(){return ia(e)})},et.prototype._close=function(){var e=this._state,t=fn.indexOf(this);if(0<=t&&fn.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new te(function(n){e.dbReadyResolve=n}),e.openCanceller=new te(function(n,a){e.cancelOpen=a}))},et.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new re.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new re.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},et.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new te(function(u,c){function f(){t.close(e);var v=t._deps.indexedDB.deleteDatabase(t.name);v.onsuccess=Xe(function(){var m,b,x;m=t._deps,b=t.name,x=m.indexedDB,m=m.IDBKeyRange,Mr(x)||b===zn||Ar(x,m).delete(b).catch(xe),u()}),v.onerror=jt(c),v.onblocked=t._fireOnBlocked}if(n)throw new re.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(f):f()})},et.prototype.backendDB=function(){return this.idbdb},et.prototype.isOpen=function(){return this.idbdb!==null},et.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},et.prototype.hasFailed=function(){return this._state.dbOpenError!==null},et.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(et.prototype,"tables",{get:function(){var e=this;return h(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),et.prototype.transaction=function(){var e=(function(t,n,a){var u=arguments.length;if(u<2)throw new re.InvalidArgument("Too few arguments");for(var c=new Array(u-1);--u;)c[u-1]=arguments[u];return a=c.pop(),[t,ue(c),a]}).apply(this,arguments);return this._transaction.apply(this,e)},et.prototype._transaction=function(e,t,n){var a=this,u=se.trans;u&&u.db===this&&e.indexOf("!")===-1||(u=null);var c,f,v=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(f=t.map(function(b){if(b=b instanceof a.Table?b.name:b,typeof b!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return b}),e=="r"||e===_r)c=_r;else{if(e!="rw"&&e!=wr)throw new re.InvalidArgument("Invalid transaction mode: "+e);c=wr}if(u){if(u.mode===_r&&c===wr){if(!v)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&f.forEach(function(b){if(u&&u.storeNames.indexOf(b)===-1){if(!v)throw new re.SubTransaction("Table "+b+" not included in parent transaction.");u=null}}),v&&u&&!u.active&&(u=null)}}catch(b){return u?u._promise(null,function(x,p){p(b)}):$e(b)}var m=(function b(x,p,E,y,k){return te.resolve().then(function(){var T=se.transless||se,_=x._createTransaction(p,E,x._dbSchema,y);if(_.explicit=!0,T={trans:_,transless:T},y)_.idbtrans=y.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,x._state.PR1398_maxLoop=3}catch(j){return j.name===Pe.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return b(x,p,E,null,k)})):$e(j)}var I,A=ee(k);return A&&cn(),T=te.follow(function(){var j;(I=k.call(_,_))&&(A?(j=zt.bind(null,null),I.then(j,j)):typeof I.next=="function"&&typeof I.throw=="function"&&(I=Br(I)))},T),(I&&typeof I.then=="function"?te.resolve(I).then(function(j){return _.active?j:$e(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):T.then(function(){return I})).then(function(j){return y&&_._resolve(),_._completion.then(function(){return j})}).catch(function(j){return _._reject(j),$e(j)})})}).bind(null,this,c,f,u,n);return u?u._promise(c,m,"lock"):se.trans?Zt(se.transless,function(){return a._whenReady(m)}):this._whenReady(m)},et.prototype.table=function(e){if(!F(this._allTables,e))throw new re.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},et);function et(e,t){var n=this;this._middlewares={},this.verno=0;var a=et.dependencies;this._options=t=s({addons:et.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},a=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u,c,f,v,m,b={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:xe,dbReadyPromise:null,cancelOpen:xe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};b.dbReadyPromise=new te(function(p){b.dbReadyResolve=p}),b.openCanceller=new te(function(p,E){b.cancelOpen=E}),this._state=b,this.name=e,this.on=wn(this,"populate","blocked","versionchange","close",{ready:[Dt,xe]}),this.on.ready.subscribe=M(this.on.ready.subscribe,function(p){return function(E,y){et.vip(function(){var k,T=n._state;T.openComplete?(T.dbOpenError||te.resolve().then(E),y&&p(E)):T.onReadyBeingFired?(T.onReadyBeingFired.push(E),y&&p(E)):(p(E),k=n,y||p(function _(){k.on.ready.unsubscribe(E),k.on.ready.unsubscribe(_)}))})}}),this.Collection=(u=this,kn(Gi.prototype,function(I,_){this.db=u;var y=xo,k=null;if(_)try{y=_()}catch(A){k=A}var T=I._ctx,_=T.table,I=_.hook.reading.fire;this._ctx={table:_,index:T.index,isPrimKey:!T.index||_.schema.primKey.keyPath&&T.index===_.schema.primKey.name,range:y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:k,or:T.or,valueMapper:I!==ft?I:null}})),this.Table=(c=this,kn(Eo.prototype,function(p,E,y){this.db=c,this._tx=y,this.name=p,this.schema=E,this.hook=c._allTables[p]?c._allTables[p].hook:wn(null,{creating:[It,xe],reading:[dt,ft],updating:[bt,xe],deleting:[ht,xe]})})),this.Transaction=(f=this,kn(Xi.prototype,function(p,E,y,k,T){var _=this;this.db=f,this.mode=p,this.storeNames=E,this.schema=y,this.chromeTransactionDurability=k,this.idbtrans=null,this.on=wn(this,"complete","error","abort"),this.parent=T||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new te(function(I,A){_._resolve=I,_._reject=A}),this._completion.then(function(){_.active=!1,_.on.complete.fire()},function(I){var A=_.active;return _.active=!1,_.on.error.fire(I),_.parent?_.parent._reject(I):A&&_.idbtrans&&_.idbtrans.abort(),$e(I)})})),this.Version=(v=this,kn(oa.prototype,function(p){this.db=v,this._cfg={version:p,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(m=this,kn(Ao.prototype,function(p,E,y){if(this.db=m,this._ctx={table:p,index:E===":id"?null:E,or:y},this._cmp=this._ascending=Me,this._descending=function(k,T){return Me(T,k)},this._max=function(k,T){return 0<Me(k,T)?k:T},this._min=function(k,T){return Me(k,T)<0?k:T},this._IDBKeyRange=m._deps.IDBKeyRange,!this._IDBKeyRange)throw new re.MissingAPI})),this.on("versionchange",function(p){0<p.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=Tn(t.IDBKeyRange),this._createTransaction=function(p,E,y,k){return new n.Transaction(p,E,y,n._options.chromeTransactionDurability,k)},this._fireOnBlocked=function(p){n.on("blocked").fire(p),fn.filter(function(E){return E.name===n.name&&E!==n&&!E._state.vcFired}).map(function(E){return E.on("versionchange").fire(p)})},this.use(ua),this.use(da),this.use(la),this.use(aa),this.use(sa);var x=new Proxy(this,{get:function(p,E,y){if(E==="_vip")return!0;if(E==="table")return function(T){return rr(n.table(T),x)};var k=Reflect.get(p,E,y);return k instanceof Eo?rr(k,x):E==="tables"?k.map(function(T){return rr(T,x)}):E==="_createTransaction"?function(){return rr(k.apply(this,arguments),x)}:k}});this.vip=x,a.forEach(function(p){return p(n)})}var or,Et=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ha=(Ur.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Ur.prototype[Et]=function(){return this},Ur);function Ur(e){this._subscribe=e}try{or={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch{or={indexedDB:null,IDBKeyRange:null}}function Wo(e){var t,n=!1,a=new ha(function(u){var c=ee(e),f,v=!1,m={},b={},x={get closed(){return v},unsubscribe:function(){v||(v=!0,f&&f.abort(),p&&Yt.storagemutated.unsubscribe(y))}};u.start&&u.start(x);var p=!1,E=function(){return br(k)},y=function(T){er(m,T),Fr(b,m)&&E()},k=function(){var T,_,I;!v&&or.indexedDB&&(m={},T={},f&&f.abort(),f=new AbortController,I=function(A){var j=un();try{c&&cn();var z=Ht(e,A);return z=c?z.finally(zt):z}finally{j&&ln()}}(_={subscr:T,signal:f.signal,requery:E,querier:e,trans:null}),Promise.resolve(I).then(function(A){n=!0,t=A,v||_.signal.aborted||(m={},function(j){for(var z in j)if(F(j,z))return;return 1}(b=T)||p||(Yt(Sn,y),p=!0),br(function(){return!v&&u.next&&u.next(A)}))},function(A){n=!1,["DatabaseClosedError","AbortError"].includes(A==null?void 0:A.name)||v||br(function(){v||u.error&&u.error(A)})}))};return setTimeout(E,0),x});return a.hasValue=function(){return n},a.getValue=function(){return t},a}var nn=Nt;function Yr(e){var t=Vt;try{Vt=!0,Yt.storagemutated.fire(e),Nr(e,!0)}finally{Vt=t}}O(nn,s(s({},ot),{delete:function(e){return new nn(e,{addons:[]}).delete()},exists:function(e){return new nn(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=nn.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Mr(n)?Promise.resolve(n.databases()).then(function(a){return a.map(function(u){return u.name}).filter(function(u){return u!==zn})}):Ar(n,t).toCollection().primaryKeys()).then(e)}catch{return $e(new re.MissingAPI)}var t,n},defineClass:function(){return function(e){D(this,e)}},ignoreTransaction:function(e){return se.trans?Zt(se.transless,e):e()},vip:jr,async:function(e){return function(){try{var t=Br(e.apply(this,arguments));return t&&typeof t.then=="function"?t:te.resolve(t)}catch(n){return $e(n)}}},spawn:function(e,t,n){try{var a=Br(e.apply(n,t||[]));return a&&typeof a.then=="function"?a:te.resolve(a)}catch(u){return $e(u)}},currentTransaction:{get:function(){return se.trans||null}},waitFor:function(e,t){return t=te.resolve(typeof e=="function"?nn.ignoreTransaction(e):e).timeout(t||6e4),se.trans?se.trans.waitFor(t):t},Promise:te,debug:{get:function(){return We},set:function(e){At(e)}},derive:B,extend:D,props:O,override:M,Events:wn,on:Yt,liveQuery:Wo,extendObservabilitySet:er,getByKeyPath:V,setByKeyPath:U,delByKeyPath:function(e,t){typeof t=="string"?U(e,t,void 0):"length"in t&&[].map.call(t,function(n){U(e,n,void 0)})},shallowClone:ie,deepClone:He,getObjectDiff:Hr,cmp:Me,asap:R,minKey:-1/0,addons:[],connections:fn,errnames:Pe,dependencies:or,cache:tn,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),nn.maxKey=Tn(nn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Yt(Sn,function(e){Vt||(e=new CustomEvent(Sr,{detail:e}),Vt=!0,dispatchEvent(e),Vt=!1)}),addEventListener(Sr,function(e){e=e.detail,Vt||Yr(e)}));var vn,Vt=!1,Go=function(){};return typeof BroadcastChannel<"u"&&((Go=function(){(vn=new BroadcastChannel(Sr)).onmessage=function(e){return e.data&&Yr(e.data)}})(),typeof vn.unref=="function"&&vn.unref(),Yt(Sn,function(e){Vt||vn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Nt.disableBfCache&&e.persisted){We&&console.debug("Dexie: handling persisted pagehide"),vn!=null&&vn.close();for(var t=0,n=fn;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Nt.disableBfCache&&e.persisted&&(We&&console.debug("Dexie: handling persisted pageshow"),Go(),Yr({all:new vt(-1/0,[[]])}))})),te.rejectionMapper=function(e,t){return!e||e instanceof ce||e instanceof TypeError||e instanceof SyntaxError||!e.name||!rt[e.name]?e:(t=new rt[e.name](t||e.message,e),"stack"in e&&L(t,"stack",{get:function(){return this.inner.stack}}),t)},At(We),s(Nt,Object.freeze({__proto__:null,Dexie:Nt,liveQuery:Wo,Entity:Do,cmp:Me,PropModification:xn,replacePrefix:function(e,t){return new xn({replacePrefix:[e,t]})},add:function(e){return new xn({add:e})},remove:function(e){return new xn({remove:e})},default:Nt,RangeSet:vt,mergeRanges:Cn,rangesOverlap:qo}),{default:Nt}),Nt})}(ur)),ur.exports}var ds=fs();const io=Ai(ds),ai=Symbol.for("Dexie"),dr=globalThis[ai]||(globalThis[ai]=io);if(io.semVer!==dr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${io.semVer} and ${dr.semVer}`);const{liveQuery:fc,mergeRanges:dc,rangesOverlap:hc,RangeSet:vc,cmp:pc,Entity:gc,PropModification:mc,replacePrefix:yc,add:bc,remove:_c}=dr;class hs{constructor(){this._db=new dr("FastingHours"),this._db.version(20).stores({history:"id, started",hunger:"id, created",water:"id, created"})}browseHistory(){return this._db.history.toArray()}browseHistoryByEnd(){return this._db.history.toArray().then(r=>r.filter(s=>s.ended===null)[0])}readHistory(r){return this._db.history.get({id:r})}editHistory(r){const i=Qr(r);return i.updated=new Date,this._db.history.put(i).then(()=>this._db.history.get({id:r.id}))}addHistory(){const r={id:crypto.randomUUID(),type:"history",created:new Date,updated:new Date,started:new Date,ended:null,notes:null};return this._db.history.add(r).then(()=>this._db.history.get({id:r.id}))}deleteHistory(r){return this._db.history.delete(r)}browseHunger(r=!1){return this._db.hunger.toArray().then(i=>r?(i.sort((s,l)=>s.created.getTime()<l.created.getTime()?1:s.created.getTime()>l.created.getTime()?-1:0),i.length===0?null:i[0]):i)}readHunger(r){return this._db.hunger.get({id:r})}editHunger(r){const i=Qr(r);return i.updated=new Date,this._db.hunger.put(i).then(()=>this._db.hunger.get({id:r.id}))}addHunger(r=5){const i={id:crypto.randomUUID(),type:"hunger",created:new Date,updated:new Date,level:r};return this._db.hunger.add(i).then(()=>this._db.hunger.get({id:i.id}))}deleteHunger(r){return this._db.hunger.delete(r)}browseWater(r=!1){return this._db.water.toArray().then(i=>{if(r){const s=new Date;s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);const l=new Date(s.getTime());return l.setDate(l.getDate()+1),i.filter(d=>d.created.getTime()>s.getTime()&&d.created.getTime()<l.getTime())}else return i})}readWater(r){return this._db.water.get({id:r})}editWater(r){const i=Qr(r);return i.updated=new Date,this._db.water.put(i).then(()=>this._db.water.get({id:r.id}))}addWater(r){const i={id:crypto.randomUUID(),type:"water",created:new Date,updated:new Date,volume:r};return crypto.randomUUID(),this._db.water.add(i).then(()=>this._db.water.get({id:i.id}))}deleteWater(r){return this._db.water.delete(r)}}var Zr={exports:{}},si;function vs(){return si||(si=1,function(o,r){(function(){var i=Math.PI,s=Math.sin,l=Math.cos,d=Math.tan,h=Math.asin,g=Math.atan2,D=Math.acos,C=i/180,K=1e3*60*60*24,F=2440588,O=2451545;function q(ee){return ee.valueOf()/K-.5+F}function L(ee){return new Date((ee+.5-F)*K)}function B(ee){return q(ee)-O}var W=C*23.4397;function H(ee,le){return g(s(ee)*l(W)-d(le)*s(W),l(ee))}function P(ee,le){return h(s(le)*l(W)+l(le)*s(W)*s(ee))}function M(ee,le,ce){return g(s(ee),l(ee)*s(le)-d(ce)*l(le))}function w(ee,le,ce){return h(s(le)*s(ce)+l(le)*l(ce)*l(ee))}function R(ee,le){return C*(280.16+360.9856235*ee)-le}function V(ee){return ee<0&&(ee=0),2967e-7/Math.tan(ee+.00312536/(ee+.08901179))}function U(ee){return C*(357.5291+.98560028*ee)}function ie(ee){var le=C*(1.9148*s(ee)+.02*s(2*ee)+3e-4*s(3*ee)),ce=C*102.9372;return ee+le+ce+i}function pe(ee){var le=U(ee),ce=ie(le);return{dec:P(ce,0),ra:H(ce,0)}}var ue={};ue.getPosition=function(ee,le,ce){var Ke=C*-ce,Se=C*le,qe=B(ee),Pe=pe(qe),Ve=R(qe,Ke)-Pe.ra;return{azimuth:M(Ve,Se,Pe.dec),altitude:w(Ve,Se,Pe.dec)}};var ke=ue.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];ue.addTime=function(ee,le,ce){ke.push([ee,le,ce])};var me=9e-4;function He(ee,le){return Math.round(ee-me-le/(2*i))}function Ce(ee,le,ce){return me+(ee+le)/(2*i)+ce}function Ye(ee,le,ce){return O+ee+.0053*s(le)-.0069*s(2*ce)}function Je(ee,le,ce){return D((s(ee)-s(le)*s(ce))/(l(le)*l(ce)))}function ct(ee){return-2.076*Math.sqrt(ee)/60}function ye(ee,le,ce,Ke,Se,qe,Pe){var Ve=Je(ee,ce,Ke),re=Ce(Ve,le,Se);return Ye(re,qe,Pe)}ue.getTimes=function(ee,le,ce,Ke){Ke=Ke||0;var Se=C*-ce,qe=C*le,Pe=ct(Ke),Ve=B(ee),re=He(Ve,Se),rt=Ce(0,Se,re),ot=U(rt),xe=ie(ot),ft=P(xe,0),dt=Ye(rt,ot,xe),Ze,It,ht,bt,_t,Dt,We={solarNoon:L(dt),nadir:L(dt-.5)};for(Ze=0,It=ke.length;Ze<It;Ze+=1)ht=ke[Ze],bt=(ht[0]+Pe)*C,_t=ye(bt,Se,qe,ft,re,ot,xe),Dt=dt-(_t-dt),We[ht[1]]=L(Dt),We[ht[2]]=L(_t);return We};function je(ee){var le=C*(218.316+13.176396*ee),ce=C*(134.963+13.064993*ee),Ke=C*(93.272+13.22935*ee),Se=le+C*6.289*s(ce),qe=C*5.128*s(Ke),Pe=385001-20905*l(ce);return{ra:H(Se,qe),dec:P(Se,qe),dist:Pe}}ue.getMoonPosition=function(ee,le,ce){var Ke=C*-ce,Se=C*le,qe=B(ee),Pe=je(qe),Ve=R(qe,Ke)-Pe.ra,re=w(Ve,Se,Pe.dec),rt=g(s(Ve),d(Se)*l(Pe.dec)-s(Pe.dec)*l(Ve));return re=re+V(re),{azimuth:M(Ve,Se,Pe.dec),altitude:re,distance:Pe.dist,parallacticAngle:rt}},ue.getMoonIllumination=function(ee){var le=B(ee||new Date),ce=pe(le),Ke=je(le),Se=149598e3,qe=D(s(ce.dec)*s(Ke.dec)+l(ce.dec)*l(Ke.dec)*l(ce.ra-Ke.ra)),Pe=g(Se*s(qe),Ke.dist-Se*l(qe)),Ve=g(l(ce.dec)*s(ce.ra-Ke.ra),s(ce.dec)*l(Ke.dec)-l(ce.dec)*s(Ke.dec)*l(ce.ra-Ke.ra));return{fraction:(1+l(Pe))/2,phase:.5+.5*Pe*(Ve<0?-1:1)/Math.PI,angle:Ve}};function Le(ee,le){return new Date(ee.valueOf()+le*K/24)}ue.getMoonTimes=function(ee,le,ce,Ke){var Se=new Date(ee);Ke?Se.setUTCHours(0,0,0,0):Se.setHours(0,0,0,0);for(var qe=.133*C,Pe=ue.getMoonPosition(Se,le,ce).altitude-qe,Ve,re,rt,ot,xe,ft,dt,Ze,It,ht,bt,_t,Dt,We=1;We<=24&&(Ve=ue.getMoonPosition(Le(Se,We),le,ce).altitude-qe,re=ue.getMoonPosition(Le(Se,We+1),le,ce).altitude-qe,xe=(Pe+re)/2-Ve,ft=(re-Pe)/2,dt=-ft/(2*xe),Ze=(xe*dt+ft)*dt+Ve,It=ft*ft-4*xe*Ve,ht=0,It>=0&&(Dt=Math.sqrt(It)/(Math.abs(xe)*2),bt=dt-Dt,_t=dt+Dt,Math.abs(bt)<=1&&ht++,Math.abs(_t)<=1&&ht++,bt<-1&&(bt=_t)),ht===1?Pe<0?rt=We+bt:ot=We+bt:ht===2&&(rt=We+(Ze<0?_t:bt),ot=We+(Ze<0?bt:_t)),!(rt&&ot));We+=2)Pe=re;var At={};return rt&&(At.rise=Le(Se,rt)),ot&&(At.set=Le(Se,ot)),!rt&&!ot&&(At[Ze>0?"alwaysUp":"alwaysDown"]=!0),At},o.exports=ue})()}(Zr)),Zr.exports}var ps=vs();const gs=Ai(ps),Mi=/^[a-z0-9]+(-[a-z0-9]+)*$/,pr=(o,r,i,s="")=>{const l=o.split(":");if(o.slice(0,1)==="@"){if(l.length<2||l.length>3)return null;s=l.shift().slice(1)}if(l.length>3||!l.length)return null;if(l.length>1){const g=l.pop(),D=l.pop(),C={provider:l.length>0?l[0]:s,prefix:D,name:g};return r&&!lr(C)?null:C}const d=l[0],h=d.split("-");if(h.length>1){const g={provider:s,prefix:h.shift(),name:h.join("-")};return r&&!lr(g)?null:g}if(i&&s===""){const g={provider:s,prefix:"",name:d};return r&&!lr(g,i)?null:g}return null},lr=(o,r)=>o?!!((r&&o.prefix===""||o.prefix)&&o.name):!1,ji=Object.freeze({left:0,top:0,width:16,height:16}),hr=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),gr=Object.freeze({...ji,...hr}),ao=Object.freeze({...gr,body:"",hidden:!1});function ms(o,r){const i={};!o.hFlip!=!r.hFlip&&(i.hFlip=!0),!o.vFlip!=!r.vFlip&&(i.vFlip=!0);const s=((o.rotate||0)+(r.rotate||0))%4;return s&&(i.rotate=s),i}function ui(o,r){const i=ms(o,r);for(const s in ao)s in hr?s in o&&!(s in i)&&(i[s]=hr[s]):s in r?i[s]=r[s]:s in o&&(i[s]=o[s]);return i}function ys(o,r){const i=o.icons,s=o.aliases||Object.create(null),l=Object.create(null);function d(h){if(i[h])return l[h]=[];if(!(h in l)){l[h]=null;const g=s[h]&&s[h].parent,D=g&&d(g);D&&(l[h]=[g].concat(D))}return l[h]}return Object.keys(i).concat(Object.keys(s)).forEach(d),l}function bs(o,r,i){const s=o.icons,l=o.aliases||Object.create(null);let d={};function h(g){d=ui(s[g]||l[g],d)}return h(r),i.forEach(h),ui(o,d)}function Ki(o,r){const i=[];if(typeof o!="object"||typeof o.icons!="object")return i;o.not_found instanceof Array&&o.not_found.forEach(l=>{r(l,null),i.push(l)});const s=ys(o);for(const l in s){const d=s[l];d&&(r(l,bs(o,l,d)),i.push(l))}return i}const _s={provider:"",aliases:{},not_found:{},...ji};function $r(o,r){for(const i in r)if(i in o&&typeof o[i]!=typeof r[i])return!1;return!0}function Fi(o){if(typeof o!="object"||o===null)return null;const r=o;if(typeof r.prefix!="string"||!o.icons||typeof o.icons!="object"||!$r(o,_s))return null;const i=r.icons;for(const l in i){const d=i[l];if(!l||typeof d.body!="string"||!$r(d,ao))return null}const s=r.aliases||Object.create(null);for(const l in s){const d=s[l],h=d.parent;if(!l||typeof h!="string"||!i[h]&&!s[h]||!$r(d,ao))return null}return r}const li=Object.create(null);function ws(o,r){return{provider:o,prefix:r,icons:Object.create(null),missing:new Set}}function mn(o,r){const i=li[o]||(li[o]=Object.create(null));return i[r]||(i[r]=ws(o,r))}function qi(o,r){return Fi(r)?Ki(r,(i,s)=>{s?o.icons[i]=s:o.missing.add(i)}):[]}function ks(o,r,i){try{if(typeof i.body=="string")return o.icons[r]={...i},!0}catch{}return!1}let Kn=!1;function Ri(o){return typeof o=="boolean"&&(Kn=o),Kn}function xs(o){const r=typeof o=="string"?pr(o,!0,Kn):o;if(r){const i=mn(r.provider,r.prefix),s=r.name;return i.icons[s]||(i.missing.has(s)?null:void 0)}}function Ds(o,r){const i=pr(o,!0,Kn);if(!i)return!1;const s=mn(i.provider,i.prefix);return r?ks(s,i.name,r):(s.missing.add(i.name),!0)}function Ss(o,r){if(typeof o!="object")return!1;if(typeof r!="string"&&(r=o.provider||""),Kn&&!r&&!o.prefix){let l=!1;return Fi(o)&&(o.prefix="",Ki(o,(d,h)=>{Ds(d,h)&&(l=!0)})),l}const i=o.prefix;if(!lr({prefix:i,name:"a"}))return!1;const s=mn(r,i);return!!qi(s,o)}const Ni=Object.freeze({width:null,height:null}),Bi=Object.freeze({...Ni,...hr}),Ts=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Es=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function ci(o,r,i){if(r===1)return o;if(i=i||100,typeof o=="number")return Math.ceil(o*r*i)/i;if(typeof o!="string")return o;const s=o.split(Ts);if(s===null||!s.length)return o;const l=[];let d=s.shift(),h=Es.test(d);for(;;){if(h){const g=parseFloat(d);isNaN(g)?l.push(d):l.push(Math.ceil(g*r*i)/i)}else l.push(d);if(d=s.shift(),d===void 0)return l.join("");h=!h}}function Os(o,r="defs"){let i="";const s=o.indexOf("<"+r);for(;s>=0;){const l=o.indexOf(">",s),d=o.indexOf("</"+r);if(l===-1||d===-1)break;const h=o.indexOf(">",d);if(h===-1)break;i+=o.slice(l+1,d).trim(),o=o.slice(0,s).trim()+o.slice(h+1)}return{defs:i,content:o}}function Cs(o,r){return o?"<defs>"+o+"</defs>"+r:r}function Is(o,r,i){const s=Os(o);return Cs(s.defs,r+s.content+i)}const Ps=o=>o==="unset"||o==="undefined"||o==="none";function As(o,r){const i={...gr,...o},s={...Bi,...r},l={left:i.left,top:i.top,width:i.width,height:i.height};let d=i.body;[i,s].forEach(B=>{const W=[],H=B.hFlip,P=B.vFlip;let M=B.rotate;H?P?M+=2:(W.push("translate("+(l.width+l.left).toString()+" "+(0-l.top).toString()+")"),W.push("scale(-1 1)"),l.top=l.left=0):P&&(W.push("translate("+(0-l.left).toString()+" "+(l.height+l.top).toString()+")"),W.push("scale(1 -1)"),l.top=l.left=0);let w;switch(M<0&&(M-=Math.floor(M/4)*4),M=M%4,M){case 1:w=l.height/2+l.top,W.unshift("rotate(90 "+w.toString()+" "+w.toString()+")");break;case 2:W.unshift("rotate(180 "+(l.width/2+l.left).toString()+" "+(l.height/2+l.top).toString()+")");break;case 3:w=l.width/2+l.left,W.unshift("rotate(-90 "+w.toString()+" "+w.toString()+")");break}M%2===1&&(l.left!==l.top&&(w=l.left,l.left=l.top,l.top=w),l.width!==l.height&&(w=l.width,l.width=l.height,l.height=w)),W.length&&(d=Is(d,'<g transform="'+W.join(" ")+'">',"</g>"))});const h=s.width,g=s.height,D=l.width,C=l.height;let K,F;h===null?(F=g===null?"1em":g==="auto"?C:g,K=ci(F,D/C)):(K=h==="auto"?D:h,F=g===null?ci(K,C/D):g==="auto"?C:g);const O={},q=(B,W)=>{Ps(W)||(O[B]=W.toString())};q("width",K),q("height",F);const L=[l.left,l.top,D,C];return O.viewBox=L.join(" "),{attributes:O,viewBox:L,body:d}}const Ms=/\sid="(\S+)"/g,js="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Ks=0;function Fs(o,r=js){const i=[];let s;for(;s=Ms.exec(o);)i.push(s[1]);if(!i.length)return o;const l="suffix"+(Math.random()*16777216|Date.now()).toString(16);return i.forEach(d=>{const h=typeof r=="function"?r(d):r+(Ks++).toString(),g=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o=o.replace(new RegExp('([#;"])('+g+')([")]|\\.[a-z])',"g"),"$1"+h+l+"$3")}),o=o.replace(new RegExp(l,"g"),""),o}const so=Object.create(null);function qs(o,r){so[o]=r}function uo(o){return so[o]||so[""]}function mo(o){let r;if(typeof o.resources=="string")r=[o.resources];else if(r=o.resources,!(r instanceof Array)||!r.length)return null;return{resources:r,path:o.path||"/",maxURL:o.maxURL||500,rotate:o.rotate||750,timeout:o.timeout||5e3,random:o.random===!0,index:o.index||0,dataAfterTimeout:o.dataAfterTimeout!==!1}}const yo=Object.create(null),An=["https://api.simplesvg.com","https://api.unisvg.com"],cr=[];for(;An.length>0;)An.length===1||Math.random()>.5?cr.push(An.shift()):cr.push(An.pop());yo[""]=mo({resources:["https://api.iconify.design"].concat(cr)});function Rs(o,r){const i=mo(r);return i===null?!1:(yo[o]=i,!0)}function bo(o){return yo[o]}const Ns=()=>{let o;try{if(o=fetch,typeof o=="function")return o}catch{}};let fi=Ns();function Bs(o,r){const i=bo(o);if(!i)return 0;let s;if(!i.maxURL)s=0;else{let l=0;i.resources.forEach(h=>{l=Math.max(l,h.length)});const d=r+".json?icons=";s=i.maxURL-l-i.path.length-d.length}return s}function Hs(o){return o===404}const zs=(o,r,i)=>{const s=[],l=Bs(o,r),d="icons";let h={type:d,provider:o,prefix:r,icons:[]},g=0;return i.forEach((D,C)=>{g+=D.length+1,g>=l&&C>0&&(s.push(h),h={type:d,provider:o,prefix:r,icons:[]},g=D.length),h.icons.push(D)}),s.push(h),s};function Ls(o){if(typeof o=="string"){const r=bo(o);if(r)return r.path}return"/"}const Us=(o,r,i)=>{if(!fi){i("abort",424);return}let s=Ls(r.provider);switch(r.type){case"icons":{const d=r.prefix,g=r.icons.join(","),D=new URLSearchParams({icons:g});s+=d+".json?"+D.toString();break}case"custom":{const d=r.uri;s+=d.slice(0,1)==="/"?d.slice(1):d;break}default:i("abort",400);return}let l=503;fi(o+s).then(d=>{const h=d.status;if(h!==200){setTimeout(()=>{i(Hs(h)?"abort":"next",h)});return}return l=501,d.json()}).then(d=>{if(typeof d!="object"||d===null){setTimeout(()=>{d===404?i("abort",d):i("next",l)});return}setTimeout(()=>{i("success",d)})}).catch(()=>{i("next",l)})},Ys={prepare:zs,send:Us};function Vs(o){const r={loaded:[],missing:[],pending:[]},i=Object.create(null);o.sort((l,d)=>l.provider!==d.provider?l.provider.localeCompare(d.provider):l.prefix!==d.prefix?l.prefix.localeCompare(d.prefix):l.name.localeCompare(d.name));let s={provider:"",prefix:"",name:""};return o.forEach(l=>{if(s.name===l.name&&s.prefix===l.prefix&&s.provider===l.provider)return;s=l;const d=l.provider,h=l.prefix,g=l.name,D=i[d]||(i[d]=Object.create(null)),C=D[h]||(D[h]=mn(d,h));let K;g in C.icons?K=r.loaded:h===""||C.missing.has(g)?K=r.missing:K=r.pending;const F={provider:d,prefix:h,name:g};K.push(F)}),r}function Hi(o,r){o.forEach(i=>{const s=i.loaderCallbacks;s&&(i.loaderCallbacks=s.filter(l=>l.id!==r))})}function Ws(o){o.pendingCallbacksFlag||(o.pendingCallbacksFlag=!0,setTimeout(()=>{o.pendingCallbacksFlag=!1;const r=o.loaderCallbacks?o.loaderCallbacks.slice(0):[];if(!r.length)return;let i=!1;const s=o.provider,l=o.prefix;r.forEach(d=>{const h=d.icons,g=h.pending.length;h.pending=h.pending.filter(D=>{if(D.prefix!==l)return!0;const C=D.name;if(o.icons[C])h.loaded.push({provider:s,prefix:l,name:C});else if(o.missing.has(C))h.missing.push({provider:s,prefix:l,name:C});else return i=!0,!0;return!1}),h.pending.length!==g&&(i||Hi([o],d.id),d.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),d.abort))})}))}let Gs=0;function Qs(o,r,i){const s=Gs++,l=Hi.bind(null,i,s);if(!r.pending.length)return l;const d={id:s,icons:r,callback:o,abort:l};return i.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(d)}),l}function Js(o,r=!0,i=!1){const s=[];return o.forEach(l=>{const d=typeof l=="string"?pr(l,r,i):l;d&&s.push(d)}),s}var Xs={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Zs(o,r,i,s){const l=o.resources.length,d=o.random?Math.floor(Math.random()*l):o.index;let h;if(o.random){let V=o.resources.slice(0);for(h=[];V.length>1;){const U=Math.floor(Math.random()*V.length);h.push(V[U]),V=V.slice(0,U).concat(V.slice(U+1))}h=h.concat(V)}else h=o.resources.slice(d).concat(o.resources.slice(0,d));const g=Date.now();let D="pending",C=0,K,F=null,O=[],q=[];typeof s=="function"&&q.push(s);function L(){F&&(clearTimeout(F),F=null)}function B(){D==="pending"&&(D="aborted"),L(),O.forEach(V=>{V.status==="pending"&&(V.status="aborted")}),O=[]}function W(V,U){U&&(q=[]),typeof V=="function"&&q.push(V)}function H(){return{startTime:g,payload:r,status:D,queriesSent:C,queriesPending:O.length,subscribe:W,abort:B}}function P(){D="failed",q.forEach(V=>{V(void 0,K)})}function M(){O.forEach(V=>{V.status==="pending"&&(V.status="aborted")}),O=[]}function w(V,U,ie){const pe=U!=="success";switch(O=O.filter(ue=>ue!==V),D){case"pending":break;case"failed":if(pe||!o.dataAfterTimeout)return;break;default:return}if(U==="abort"){K=ie,P();return}if(pe){K=ie,O.length||(h.length?R():P());return}if(L(),M(),!o.random){const ue=o.resources.indexOf(V.resource);ue!==-1&&ue!==o.index&&(o.index=ue)}D="completed",q.forEach(ue=>{ue(ie)})}function R(){if(D!=="pending")return;L();const V=h.shift();if(V===void 0){if(O.length){F=setTimeout(()=>{L(),D==="pending"&&(M(),P())},o.timeout);return}P();return}const U={status:"pending",resource:V,callback:(ie,pe)=>{w(U,ie,pe)}};O.push(U),C++,F=setTimeout(R,o.rotate),i(V,r,U.callback)}return setTimeout(R),H}function zi(o){const r={...Xs,...o};let i=[];function s(){i=i.filter(g=>g().status==="pending")}function l(g,D,C){const K=Zs(r,g,D,(F,O)=>{s(),C&&C(F,O)});return i.push(K),K}function d(g){return i.find(D=>g(D))||null}return{query:l,find:d,setIndex:g=>{r.index=g},getIndex:()=>r.index,cleanup:s}}function di(){}const eo=Object.create(null);function $s(o){if(!eo[o]){const r=bo(o);if(!r)return;const i=zi(r),s={config:r,redundancy:i};eo[o]=s}return eo[o]}function eu(o,r,i){let s,l;if(typeof o=="string"){const d=uo(o);if(!d)return i(void 0,424),di;l=d.send;const h=$s(o);h&&(s=h.redundancy)}else{const d=mo(o);if(d){s=zi(d);const h=o.resources?o.resources[0]:"",g=uo(h);g&&(l=g.send)}}return!s||!l?(i(void 0,424),di):s.query(r,l,i)().abort}function hi(){}function tu(o){o.iconsLoaderFlag||(o.iconsLoaderFlag=!0,setTimeout(()=>{o.iconsLoaderFlag=!1,Ws(o)}))}function nu(o){const r=[],i=[];return o.forEach(s=>{(s.match(Mi)?r:i).push(s)}),{valid:r,invalid:i}}function Mn(o,r,i){function s(){const l=o.pendingIcons;r.forEach(d=>{l&&l.delete(d),o.icons[d]||o.missing.add(d)})}if(i&&typeof i=="object")try{if(!qi(o,i).length){s();return}}catch(l){console.error(l)}s(),tu(o)}function vi(o,r){o instanceof Promise?o.then(i=>{r(i)}).catch(()=>{r(null)}):r(o)}function ru(o,r){o.iconsToLoad?o.iconsToLoad=o.iconsToLoad.concat(r).sort():o.iconsToLoad=r,o.iconsQueueFlag||(o.iconsQueueFlag=!0,setTimeout(()=>{o.iconsQueueFlag=!1;const{provider:i,prefix:s}=o,l=o.iconsToLoad;if(delete o.iconsToLoad,!l||!l.length)return;const d=o.loadIcon;if(o.loadIcons&&(l.length>1||!d)){vi(o.loadIcons(l,s,i),K=>{Mn(o,l,K)});return}if(d){l.forEach(K=>{const F=d(K,s,i);vi(F,O=>{const q=O?{prefix:s,icons:{[K]:O}}:null;Mn(o,[K],q)})});return}const{valid:h,invalid:g}=nu(l);if(g.length&&Mn(o,g,null),!h.length)return;const D=s.match(Mi)?uo(i):null;if(!D){Mn(o,h,null);return}D.prepare(i,s,h).forEach(K=>{eu(i,K,F=>{Mn(o,K.icons,F)})})}))}const ou=(o,r)=>{const i=Js(o,!0,Ri()),s=Vs(i);if(!s.pending.length){let D=!0;return r&&setTimeout(()=>{D&&r(s.loaded,s.missing,s.pending,hi)}),()=>{D=!1}}const l=Object.create(null),d=[];let h,g;return s.pending.forEach(D=>{const{provider:C,prefix:K}=D;if(K===g&&C===h)return;h=C,g=K,d.push(mn(C,K));const F=l[C]||(l[C]=Object.create(null));F[K]||(F[K]=[])}),s.pending.forEach(D=>{const{provider:C,prefix:K,name:F}=D,O=mn(C,K),q=O.pendingIcons||(O.pendingIcons=new Set);q.has(F)||(q.add(F),l[C][K].push(F))}),d.forEach(D=>{const C=l[D.provider][D.prefix];C.length&&ru(D,C)}),r?Qs(r,s,d):hi};function iu(o,r){const i={...o};for(const s in r){const l=r[s],d=typeof l;s in Ni?(l===null||l&&(d==="string"||d==="number"))&&(i[s]=l):d===typeof i[s]&&(i[s]=s==="rotate"?l%4:l)}return i}const au=/[\s,]+/;function su(o,r){r.split(au).forEach(i=>{switch(i.trim()){case"horizontal":o.hFlip=!0;break;case"vertical":o.vFlip=!0;break}})}function uu(o,r=0){const i=o.replace(/^-?[0-9.]*/,"");function s(l){for(;l<0;)l+=4;return l%4}if(i===""){const l=parseInt(o);return isNaN(l)?0:s(l)}else if(i!==o){let l=0;switch(i){case"%":l=25;break;case"deg":l=90}if(l){let d=parseFloat(o.slice(0,o.length-i.length));return isNaN(d)?0:(d=d/l,d%1===0?s(d):0)}}return r}function lu(o,r){let i=o.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in r)i+=" "+s+'="'+r[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+o+"</svg>"}function cu(o){return o.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function fu(o){return"data:image/svg+xml,"+cu(o)}function du(o){return'url("'+fu(o)+'")'}const pi={...Bi,inline:!1},hu={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},vu={display:"inline-block"},lo={"background-color":"currentColor"},Li={"background-color":"transparent"},gi={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},mi={"-webkit-mask":lo,mask:lo,background:Li};for(const o in mi){const r=mi[o];for(const i in gi)r[o+"-"+i]=gi[i]}function pu(o){return o+(o.match(/^[-0-9.]+$/)?"px":"")}function gu(o,r){const i=iu(pi,r),s=r.mode||"svg",l=s==="svg"?{...hu}:{};o.body.indexOf("xlink:")===-1&&delete l["xmlns:xlink"];let d=typeof r.style=="string"?r.style:"";for(let H in r){const P=r[H];if(P!==void 0)switch(H){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":i[H]=P===!0||P==="true"||P===1;break;case"flip":typeof P=="string"&&su(i,P);break;case"color":d=d+(d.length>0&&d.trim().slice(-1)!==";"?";":"")+"color: "+P+"; ";break;case"rotate":typeof P=="string"?i[H]=uu(P):typeof P=="number"&&(i[H]=P);break;case"ariaHidden":case"aria-hidden":P!==!0&&P!=="true"&&delete l["aria-hidden"];break;default:if(H.slice(0,3)==="on:")break;pi[H]===void 0&&(l[H]=P)}}const h=As(o,i),g=h.attributes;if(i.inline&&(d="vertical-align: -0.125em; "+d),s==="svg"){Object.assign(l,g),d!==""&&(l.style=d);let H=0,P=r.id;return typeof P=="string"&&(P=P.replace(/-/g,"_")),{svg:!0,attributes:l,body:Fs(h.body,P?()=>P+"ID"+H++:"iconifySvelte")}}const{body:D,width:C,height:K}=o,F=s==="mask"||(s==="bg"?!1:D.indexOf("currentColor")!==-1),O=lu(D,{...g,width:C+"",height:K+""}),L={"--svg":du(O)},B=H=>{const P=g[H];P&&(L[H]=pu(P))};B("width"),B("height"),Object.assign(L,vu,F?lo:Li);let W="";for(const H in L)W+=H+": "+L[H]+";";return l.style=W+d,{svg:!1,attributes:l}}Ri(!0);qs("",Ys);if(typeof document<"u"&&typeof window<"u"){const o=window;if(o.IconifyPreload!==void 0){const r=o.IconifyPreload,i="Invalid IconifyPreload syntax.";typeof r=="object"&&r!==null&&(r instanceof Array?r:[r]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!Ss(s))&&console.error(i)}catch{console.error(i)}})}if(o.IconifyProviders!==void 0){const r=o.IconifyProviders;if(typeof r=="object"&&r!==null)for(let i in r){const s="IconifyProviders["+i+"] is invalid.";try{const l=r[i];if(typeof l!="object"||!l||l.resources===void 0)continue;Rs(i,l)||console.error(s)}catch{console.error(s)}}}}function mu(o,r,i,s,l){function d(){r.loading&&(r.loading.abort(),r.loading=null)}if(typeof o=="object"&&o!==null&&typeof o.body=="string")return r.name="",d(),{data:{...gr,...o}};let h;if(typeof o!="string"||(h=pr(o,!1,!0))===null)return d(),null;const g=xs(h);if(!g)return i&&(!r.loading||r.loading.name!==o)&&(d(),r.name="",r.loading={name:o,abort:ou([h],s)}),null;d(),r.name!==o&&(r.name=o,l&&!r.destroyed&&l(o));const D=["iconify"];return h.prefix!==""&&D.push("iconify--"+h.prefix),h.provider!==""&&D.push("iconify--"+h.provider),{data:g,classes:D}}function yu(o,r){return o?gu({...gr,...o},r):null}var bu=Ya("<svg><!></svg>"),_u=ge("<span></span>");function st(o,r){ut(r,!0);const i={name:"",loading:null,destroyed:!1},s=Va(r,["$$slots","$$events","$$legacy"]);let l=Be(!1),d=Be(0),h=Be(null);La(()=>{S(d);const F=!!r.ssr||S(l),O=mu(r.icon,i,F,g,r.onload),q=O?yu(O.data,s):null;q&&O.classes&&(q.attributes.class=(typeof s.class=="string"?s.class+" ":"")+O.classes.join(" ")),de(h,q,!0)});function g(){Ua(d)}co(()=>{de(l,!0)}),ya(()=>{i.destroyed=!0,i.loading&&(i.loading.abort(),i.loading=null)});var D=an(),C=kt(D);{var K=F=>{var O=an(),q=kt(O);{var L=W=>{var H=bu();ri(H,()=>({...S(h).attributes}));var P=Y(H);$a(P,()=>S(h).body,!0),N(H),he(W,H)},B=W=>{var H=_u();ri(H,()=>({...S(h).attributes})),he(W,H)};tt(q,W=>{S(h).svg?W(L):W(B,!1)})}he(F,O)};tt(C,F=>{S(h)&&F(K)})}he(o,D),lt()}var wu=(o,r)=>r(0),ku=(o,r)=>r(14),xu=(o,r)=>r(16),Du=(o,r)=>r(23),Su=(o,r)=>r(40),Tu=ge('<div class="svelte-ziixid"><button type="button"><!></button> <button type="button">14h</button> <button type="button">16h</button> <button type="button">23h</button> <button type="button">40h</button></div>');function Eu(o,r){ut(r,!0);let i=_e(r,"value",7,0);function s(W){i(W),r.onchange&&r.onchange(i())}var l=Tu(),d=Y(l);d.__click=[wu,s];let h;var g=Y(d);st(g,{height:"20",icon:"stash:infinity-duotone",width:"20"}),N(d);var D=X(d,2);D.__click=[ku,s];let C;var K=X(D,2);K.__click=[xu,s];let F;var O=X(K,2);O.__click=[Du,s];let q;var L=X(O,2);L.__click=[Su,s];let B;N(l),ze((W,H,P,M,w)=>{h=yt(d,1,"svelte-ziixid",null,h,W),C=yt(D,1,"svelte-ziixid",null,C,H),F=yt(K,1,"svelte-ziixid",null,F,P),q=yt(O,1,"svelte-ziixid",null,q,M),B=yt(L,1,"svelte-ziixid",null,B,w)},[()=>({selected:i()===0}),()=>({selected:i()===14}),()=>({selected:i()===16}),()=>({selected:i()===23}),()=>({selected:i()===40})]),he(o,l),lt()}xt(["click"]);var Ou=ge('<div class="hour svelte-z94qzf"></div>'),Cu=ge('<div class="day svelte-z94qzf"><!></div>'),Iu=ge('<p class="day svelte-z94qzf"> </p> <!>',1),Pu=ge('<div class="day svelte-z94qzf"><div class="hour svelte-z94qzf"></div></div>'),Au=ge('<figure class="svelte-z94qzf"><div class="labels svelte-z94qzf"><p class="date svelte-z94qzf">Date</p> <p class="hour svelte-z94qzf">0</p> <p class="hour svelte-z94qzf">12</p> <p class="hour svelte-z94qzf">24</p></div> <div class="grid svelte-z94qzf"><!></div> <div class="average grid svelte-z94qzf"><p class="day svelte-z94qzf">Avg</p> <!></div></figure>');function Mu(o,r){ut(r,!0);let i=_e(r,"average",19,()=>[]),s=_e(r,"daily",3,null);_e(r,"days",3,10);function l(O){return O=new Date(O+"T00:00:00"),new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(O)}function d(O,q){return O===0||q[O-1]===0?(1-q[O])*100+"%":0}var h=Au(),g=X(Y(h),2),D=Y(g);{var C=O=>{var q=an(),L=kt(q);Ct(L,17,()=>Object.keys(s()),Ot,(B,W)=>{var H=Iu();const P=Qe(()=>s()[S(W)]);var M=kt(H),w=Y(M,!0);N(M);var R=X(M,2);Ct(R,16,()=>({length:24}),Ot,(V,U,ie)=>{var pe=Cu(),ue=Y(pe);{var ke=me=>{var He=Ou();let Ce;ze(Ye=>Ce=gn(He,"",Ce,Ye),[()=>({"margin-left":d(ie,S(P)),width:100*S(P)[ie]+"%"})]),he(me,He)};tt(ue,me=>{S(P)[ie]!==0&&me(ke)})}N(pe),he(V,pe)}),ze(V=>Te(w,V),[()=>l(S(W))]),he(B,H)}),he(O,q)};tt(D,O=>{s()!==null&&O(C)})}N(g);var K=X(g,2),F=X(Y(K),2);Ct(F,16,()=>({length:24}),Ot,(O,q,L)=>{var B=Pu(),W=Y(B);let H;N(B),ze(P=>H=gn(W,"",H,P),[()=>({opacity:i()[L],width:"100%"})]),he(O,B)}),N(K),N(h),he(o,h),lt()}function ju(o,r,i,s){const l=S(r).getBoundingClientRect();S(i).style.width=l.width-2+"px",de(s,!S(s))}var Ku=(o,r,i)=>r(S(i)),Fu=ge('<li><button type="button" class="svelte-1uz3cqu"><!> <span class="svelte-1uz3cqu"> </span> <!></button></li>'),qu=ge('<label class="svelte-1uz3cqu"><button type="button" class="svelte-1uz3cqu"><!> <span class="svelte-1uz3cqu"> </span> <!></button> <ul></ul></label>');function Ru(o,r){ut(r,!0);let i=_e(r,"items",19,()=>[]),s=_e(r,"mount",3,null),l=_e(r,"value",7,0),d=Be(!1),h=Be(void 0),g=Be(void 0),D=Qe(()=>i().length>0?i()[l()].icon:""),C=Qe(()=>i().length>0?i()[l()].label:"");co(()=>(document.addEventListener("click",K),()=>{document.removeEventListener("click",K)}));function K(w){!S(h).contains(w.target)&&!S(g).contains(w.target)&&de(d,!1)}function F(w){l(w.value),de(d,!1),r.onchange&&r.onchange(w)}var O=qu(),q=Y(O);q.__click=[ju,h,g,d];var L=Y(q);st(L,{height:"20",get icon(){return S(D)},width:"20"});var B=X(L,2),W=Y(B,!0);N(B);var H=X(B,2);st(H,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),N(q),Ft(q,w=>de(h,w),()=>S(h));var P=X(q,2);let M;Ct(P,21,i,Ot,(w,R)=>{var V=Fu();let U;var ie=Y(V);ie.__click=[Ku,F,R];var pe=Y(ie);st(pe,{height:"20",get icon(){return S(R).icon},width:"20"});var ue=X(pe,2),ke=Y(ue,!0);N(ue);var me=X(ue,2);{var He=Ce=>{st(Ce,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};tt(me,Ce=>{S(R).value===l()&&Ce(He)})}N(ie),N(V),ze(Ce=>{U=yt(V,1,"svelte-1uz3cqu",null,U,Ce),Te(ke,S(R).label)},[()=>({selected:l()===S(R).value})]),he(w,V)}),N(P),Ft(P,w=>de(g,w),()=>S(g)),N(O),ze(w=>{Te(W,S(C)),M=yt(P,1,"svelte-1uz3cqu",null,M,w)},[()=>({open:S(d),top:s()==="top"})]),he(o,O),lt()}xt(["click"]);var Nu=ge('<p class="svelte-16tnkhr">0</p>'),Bu=ge('<p class="svelte-16tnkhr"> </p>'),Hu=ge('<p class="svelte-16tnkhr"> </p>'),zu=ge('<div class="column svelte-16tnkhr"><p class="svelte-16tnkhr"> </p></div>'),Lu=ge('<div class="line svelte-16tnkhr"></div>'),Uu=ge('<div class="average svelte-16tnkhr"></div>'),Yu=ge('<figure class="svelte-16tnkhr"><div class="labels svelte-16tnkhr"><!></div> <div class="chart svelte-16tnkhr"><div class="labels svelte-16tnkhr"></div> <div class="columns svelte-16tnkhr"><!> <!> <!></div></div></figure>');function Vu(o,r){ut(r,!0);let i=_e(r,"average",3,0),s=_e(r,"daily",19,()=>[]),l=Qe(()=>s().reduce((w,R)=>(w=R.volume>w?R.volume:w,w),0)),d=Qe(()=>{const w=Math.floor(S(l)+S(l)*.1);return[0,Math.round(w/4)*1,Math.round(w/4)*2,Math.round(w/4)*3,w]});function h(w){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(w)}var g=Yu(),D=Y(g),C=Y(D);{var K=w=>{var R=Nu();he(w,R)},F=w=>{var R=an(),V=kt(R);Ct(V,17,()=>S(d),Ot,(U,ie)=>{var pe=Bu();const ue=Qe(()=>S(ie)===0?"0":S(ie)+" oz");var ke=Y(pe,!0);N(pe),ze(()=>Te(ke,S(ue))),he(U,pe)}),he(w,R)};tt(C,w=>{S(l)===0?w(K):w(F,!1)})}N(D);var O=X(D,2),q=Y(O);Ct(q,21,s,Ot,(w,R)=>{var V=Hu(),U=Y(V,!0);N(V),ze(ie=>Te(U,ie),[()=>h(S(R).created)]),he(w,V)}),N(q);var L=X(q,2),B=Y(L);{var W=w=>{var R=an(),V=kt(R);Ct(V,17,s,Ot,(U,ie)=>{var pe=zu();let ue;var ke=Y(pe),me=Y(ke);N(ke),N(pe),ze(He=>{ue=gn(pe,"",ue,He),Te(me,`${S(ie).volume??""} oz`)},[()=>({width:`${S(ie).volume/Math.floor(S(l)+S(l)*.1)*100}%`})]),he(U,pe)}),he(w,R)};tt(B,w=>{S(l)!==0&&w(W)})}var H=X(B,2);Ct(H,16,()=>({length:4}),Ot,(w,R,V)=>{var U=Lu();Gt(U,"data-value",V),gn(U,"",{},{left:`${25*(V+1)}%`}),he(w,U)});var P=X(H,2);{var M=w=>{var R=Uu();let V;ze(U=>{Gt(R,"data-value",i()),V=gn(R,"",V,U)},[()=>({left:`${i()/Math.floor(S(l)+S(l)*.1)*100}%`})]),he(w,R)};tt(P,w=>{i()>0&&w(M)})}N(L),N(O),N(g),he(o,g),lt()}var Wu=ge('<button class="sun svelte-wl8176" type="button">Sunrise/sunset</button>'),Gu=ge('<!> <p class="svelte-wl8176"> </p>',1),Qu=ge('<section class="svelte-wl8176"><!> <footer class="svelte-wl8176"><div class="daynight svelte-wl8176"><!></div> <!></footer></section>');function Ui(o,r){ut(r,!0);let i=_e(r,"activity",3,null),s=_e(r,"days",3,10),l=_e(r,"water",3,null);const d=[{icon:"material-symbols:local-fire-department-outline-rounded",label:"Fasting",value:0},{icon:"material-symbols:water-drop-outline-rounded",label:"Water",value:1}];let h=Be(0);function g(P){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(P)}var D=Qu(),C=Y(D);{var K=P=>{const M=Qe(()=>i()&&i().average?i().average:[]),w=Qe(()=>i()&&i().daily?i().daily:[]);Mu(P,{get average(){return S(M)},get daily(){return S(w)},get days(){return s()}})},F=(P,M)=>{{var w=R=>{const V=Qe(()=>l()&&l().average?l().average:null),U=Qe(()=>l()&&l().daily?l().daily:null);Vu(R,{get average(){return S(V)},get daily(){return S(U)}})};tt(P,R=>{S(h)===1&&R(w)},M)}};tt(C,P=>{S(h)===0?P(K):P(F,!1)})}var O=X(C,2),q=Y(O),L=Y(q);{var B=P=>{var M=Wu();M.__click=function(...w){var R;(R=r.onsun)==null||R.apply(this,w)},he(P,M)},W=P=>{var M=Gu(),w=kt(M);const R=Qe(()=>r.sun&&r.sun.icon?r.sun.icon:null);st(w,{height:"16",get icon(){return S(R)},width:"16"});var V=X(w,2),U=Y(V,!0);N(V),ze(ie=>Te(U,ie),[()=>r.sun&&r.sun.timing?g(r.sun.timing):""]),he(P,M)};tt(L,P=>{r.sun===null?P(B):P(W,!1)})}N(q);var H=X(q,2);Ru(H,{get items(){return d},mount:"top",onchange:P=>de(h,P.value,!0)}),N(O),N(D),he(o,D),lt()}xt(["click"]);var Ju=ge('<article><p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">hrs</span></p> <p class="colon svelte-1yn3hhw">:</p> <p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">min</span></p> <p class="colon svelte-1yn3hhw">:</p> <p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">sec</span></p></article>');function Xu(o,r){ut(r,!0);let i=_e(r,"duration",3,0),s=_e(r,"now",3,null),l=_e(r,"started",3,null),d=Qe(()=>{let P=Math.floor((s()-l().getTime())/1e3);if(i()!==0){const M=new Date(l().getTime()+i()*36e5);P=Math.floor((M.getTime()-s())/1e3)}return P}),h=Qe(()=>l()===null?{hours:0,minutes:"00",seconds:"00"}:{hours:Math.floor(S(d)/3600).toString(10).padStart(2,"0"),minutes:Math.floor(S(d)%3600/60).toString(10).padStart(2,"0"),seconds:(S(d)%60).toString(10).padStart(2,"0")});var g=Ju();let D;var C=Y(g),K=Y(C),F=Y(K,!0);N(K),Gr(2),N(C);var O=X(C,4),q=Y(O),L=Y(q,!0);N(q),Gr(2),N(O);var B=X(O,4),W=Y(B),H=Y(W,!0);N(W),Gr(2),N(B),N(g),ze(P=>{D=yt(g,1,"svelte-1yn3hhw",null,D,P),Te(F,S(h).hours),Te(L,S(h).minutes),Te(H,S(h).seconds)},[()=>({complete:S(d)<0})]),he(o,g),lt()}function Zu(o,r,i){r()===null?i.onstart&&i.onstart():i.onend&&i.onend()}var $u=ge('<p class="svelte-cj8gv0">You are not fasting.</p>'),el=ge('<p class="svelte-cj8gv0">You are fasting.</p> <!> <!> <p class="started svelte-cj8gv0"> </p>',1),tl=ge('<section class="svelte-cj8gv0"><header class="svelte-cj8gv0"><h3 class="svelte-cj8gv0">Fasting</h3> <button type="button" class="svelte-cj8gv0"><!></button></header> <article class="svelte-cj8gv0"><!> <button class="primary svelte-cj8gv0" type="button"> </button></article> <div class="graph svelte-cj8gv0"><!></div> <footer class="svelte-cj8gv0"><button class="hunger secondary svelte-cj8gv0" type="button"><!> <span> </span></button> <button class="water secondary svelte-cj8gv0" type="button"><!> <span> </span></button></footer></section>');function nl(o,r){ut(r,!0);let i=_e(r,"activity",3,null),s=_e(r,"duration",3,0),l=_e(r,"hunger",3,5),d=_e(r,"levels",19,()=>[]),h=_e(r,"now",3,null),g=_e(r,"started",3,null),D=_e(r,"sun",3,null),C=_e(r,"volume",3,null),K=_e(r,"water",3,0);function F(ye){return d().find(Le=>Le.value===ye).label}function O(ye){return ye===null?null:new Intl.DateTimeFormat(navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(ye)}var q=tl(),L=Y(q),B=X(Y(L),2);B.__click=function(...ye){var je;(je=r.onsettings)==null||je.apply(this,ye)};var W=Y(B);st(W,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),N(B),N(L);var H=X(L,2),P=Y(H);{var M=ye=>{var je=$u();he(ye,je)},w=ye=>{var je=el(),Le=X(kt(je),2);Xu(Le,{get duration(){return s()},get now(){return h()},get started(){return g()}});var ee=X(Le,2);Eu(ee,{get onchange(){return r.onduration},get value(){return s()}});var le=X(ee,2),ce=Y(le);N(le),ze(Ke=>Te(ce,`Started ${Ke??""}`),[()=>O(g())]),he(ye,je)};tt(P,ye=>{g()===null?ye(M):ye(w,!1)})}var R=X(P,2);R.__click=[Zu,g,r];var V=Y(R);N(R),N(H);var U=X(H,2),ie=Y(U);Ui(ie,{get activity(){return i()},days:7,get onsun(){return r.onsun},get sun(){return D()},get water(){return C()}}),N(U);var pe=X(U,2),ue=Y(pe);ue.__click=function(...ye){var je;(je=r.onhunger)==null||je.apply(this,ye)};var ke=Y(ue);st(ke,{height:"20",icon:"material-symbols:fork-spoon-rounded",width:"20"});var me=X(ke,2),He=Y(me,!0);N(me),N(ue);var Ce=X(ue,2);Ce.__click=function(...ye){var je;(je=r.onwater)==null||je.apply(this,ye)};var Ye=Y(Ce);st(Ye,{height:"20",icon:"material-symbols:water-drop-outline-rounded",width:"20"});var Je=X(Ye,2),ct=Y(Je);N(Je),N(Ce),N(pe),N(q),ze(ye=>{Te(V,`${g()===null?"Start":"Stop"} fasting`),Te(He,ye),Te(ct,`${K()??""} oz`)},[()=>F(l())]),he(o,q),lt()}xt(["click"]);function rl(o,r,i,s){const l=new Date(parseInt(o.currentTarget.getAttribute("data-year")),parseInt(o.currentTarget.getAttribute("data-month")),parseInt(o.currentTarget.getAttribute("data-date")));l.getMonth()!==r().getMonth()&&r(new Date(l.getTime())),i(new Date(l.getTime())),s.onchange&&s.onchange(i())}var ol=ge('<button type="button"> </button>'),il=ge('<section><header class="svelte-1ll096s"><h3 class="svelte-1ll096s"> </h3> <button type="button" class="svelte-1ll096s"><!></button> <button type="button" class="svelte-1ll096s"><!></button></header> <article class="svelte-1ll096s"><p class="svelte-1ll096s">Sun</p> <p class="svelte-1ll096s">Mon</p> <p class="svelte-1ll096s">Tue</p> <p class="svelte-1ll096s">Wed</p> <p class="svelte-1ll096s">Thu</p> <p class="svelte-1ll096s">Fri</p> <p class="svelte-1ll096s">Sat</p></article> <article class="svelte-1ll096s"></article></section>');function al(o,r){ut(r,!0);let i=_e(r,"display",23,()=>new Date),s=_e(r,"value",23,()=>new Date),l=Qe(()=>new Intl.DateTimeFormat(navigator.language,{month:"long",year:"numeric"}).format(i())),d=Qe(()=>{const H=[],P=new Date,M=new Date(i().getFullYear(),i().getMonth(),1);M.setDate(M.getDate()-M.getDay());for(let w=0;w<42;w++){const R={date:M.getDate(),month:M.getMonth(),year:M.getFullYear(),outside:!0,today:!1,selected:!1,after:!1};M.getFullYear()===i().getFullYear()&&M.getMonth()===i().getMonth()&&(R.outside=!1),M.getTime()>Date.now()&&(R.after=!0),M.getFullYear()===P.getFullYear()&&M.getMonth()===P.getMonth()&&M.getDate()===P.getDate()&&(R.today=!0),M.getFullYear()===s().getFullYear()&&M.getMonth()===s().getMonth()&&M.getDate()===s().getDate()&&(R.selected=!0),M.setDate(M.getDate()+1),H.push(R)}return H});function h(){let H=i().getMonth(),P=i().getFullYear();P=H===0?P-1:P,H=H===0?11:H-1,i(new Date(P,H,i().getDate()))}function g(){let H=i().getMonth(),P=i().getFullYear();P=H===11?P+1:P,H=(H+1)%12,i(new Date(P,H,i().getDate()))}var D=il(),C=Y(D),K=Y(C),F=Y(K,!0);N(K);var O=X(K,2);O.__click=h;var q=Y(O);st(q,{height:"24",icon:"material-symbols:navigate-before",width:"24"}),N(O);var L=X(O,2);L.__click=g;var B=Y(L);st(B,{height:"24",icon:"material-symbols:navigate-next",width:"24"}),N(L),N(C);var W=X(C,4);Ct(W,21,()=>S(d),Ot,(H,P)=>{var M=ol();M.__click=[rl,i,s,r];let w;var R=Y(M,!0);N(M),ze(V=>{Gt(M,"data-year",S(P).year),Gt(M,"data-month",S(P).month),Gt(M,"data-date",S(P).date),M.disabled=S(P).after,w=yt(M,1,"svelte-1ll096s",null,w,V),Te(R,S(P).date)},[()=>({outside:S(P).outside,today:S(P).today,selected:S(P).selected})]),he(H,M)}),N(W),N(D),ze(()=>Te(F,S(l))),he(o,D),lt()}xt(["click"]);function sl(o,r,i){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===12?s.setHours(23):s.setHours(s.getHours()-1):s.getHours()===0?s.setHours(11):s.setHours(s.getHours()-1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function ul(o,r,i){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===23?s.setHours(12):s.setHours(s.getHours()+1):s.getHours()===11?s.setHours(0):s.setHours(s.getHours()+1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function ll(o,r,i){const s=new Date(r().getTime());s.getHours()>=12&&s.setHours(s.getHours()-12),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function cl(o,r,i){const s=new Date(r().getTime());s.getHours()<12&&s.setHours(s.getHours()+12),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function fl(o,r,i){const s=new Date(r().getTime());s.getMinutes()===0?s.setMinutes(59):s.setMinutes(s.getMinutes()-1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function dl(o,r,i){const s=new Date(r().getTime());s.getMinutes()===59?s.setMinutes(0):s.setMinutes(s.getMinutes()+1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}var hl=ge('<article class="svelte-1bevvpj"><div class="time svelte-1bevvpj"><div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div> <p class="svelte-1bevvpj">:</p> <div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div></div> <div class="meridian svelte-1bevvpj"><button type="button">AM</button> <button type="button">PM</button></div></article>');function vl(o,r){ut(r,!0);let i=_e(r,"value",23,()=>new Date),s=Qe(()=>i().getHours()%12||12),l=Qe(()=>i().getMinutes().toString(10).padStart(2,"0")),d=Qe(()=>i().getHours()>=12?"PM":"AM");var h=hl(),g=Y(h),D=Y(g),C=Y(D);C.__click=[ul,i,r];var K=Y(C);st(K,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),N(C);var F=X(C,2),O=Y(F,!0);N(F);var q=X(F,2);q.__click=[sl,i,r];var L=Y(q);st(L,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),N(q),N(D);var B=X(D,4),W=Y(B);W.__click=[dl,i,r];var H=Y(W);st(H,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),N(W);var P=X(W,2),M=Y(P,!0);N(P);var w=X(P,2);w.__click=[fl,i,r];var R=Y(w);st(R,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),N(w),N(B),N(g);var V=X(g,2),U=Y(V);U.__click=[ll,i,r];let ie;var pe=X(U,2);pe.__click=[cl,i,r];let ue;N(V),N(h),ze((ke,me)=>{Te(O,S(s)),Te(M,S(l)),ie=yt(U,1,"svelte-1bevvpj",null,ie,ke),ue=yt(pe,1,"svelte-1bevvpj",null,ue,me)},[()=>({selected:S(d)==="AM"}),()=>({selected:S(d)==="PM"})]),he(o,h),lt()}xt(["click"]);function pl(o,r){de(r,"calendar")}function gl(o,r){de(r,"clock")}var ml=ge('<article class="svelte-8yzu2w"><header class="svelte-8yzu2w"><button type="button"><p class="svelte-8yzu2w"> </p> <p class="svelte-8yzu2w"> </p></button> <button type="button"><p class="svelte-8yzu2w"> </p></button></header> <!></article>');function yl(o,r){ut(r,!0);let i=_e(r,"value",23,()=>new Date),s=Be("calendar");function l(U){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(U)}function d(U){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(U)}function h(U){U.setHours(i().getHours()),U.setMinutes(i().getMinutes()),U.setSeconds(i().getSeconds()),i(new Date(U.getTime())),r.onchange&&r.onchange(i())}function g(U){U.setFullYear(i().getFullYear()),U.getMonth(i().getMonth()),U.getDate(i().getDate()),i(new Date(U.getTime())),r.onchange&&r.onchange(i())}var D=ml(),C=Y(D),K=Y(C);K.__click=[pl,s];let F;var O=Y(K),q=Y(O,!0);N(O);var L=X(O,2),B=Y(L,!0);N(L),N(K);var W=X(K,2);W.__click=[gl,s];let H;var P=Y(W),M=Y(P,!0);N(P),N(W),N(C);var w=X(C,2);{var R=U=>{al(U,{onchange:h,get value(){return i()}})},V=U=>{vl(U,{onchange:g,get value(){return i()}})};tt(w,U=>{S(s)===null||S(s)==="calendar"?U(R):U(V,!1)})}N(D),ze((U,ie,pe,ue)=>{F=yt(K,1,"svelte-8yzu2w",null,F,U),Te(q,r.label),Te(B,ie),H=yt(W,1,"svelte-8yzu2w",null,H,pe),Te(M,ue)},[()=>({selected:S(s)==="calendar"}),()=>l(i()),()=>({selected:S(s)==="clock"}),()=>d(i())]),he(o,D),lt()}xt(["click"]);function bl(o,r,i,s){r(),i(null),s.oncancel&&s.oncancel()}function _l(o,r,i){r.ondelete&&r.ondelete(i().id)}function wl(o,r){const i=o.currentTarget.value.trim().length===0?null:o.currentTarget.value;r({...r(),notes:i})}function kl(o,r,i){r.onsave&&r.onsave(i())}var xl=ge('<dialog class="svelte-13glclx"><h3 class="svelte-13glclx"> </h3> <!> <textarea placeholder="Notes" class="svelte-13glclx"></textarea> <footer class="svelte-13glclx"><button class="delete svelte-13glclx" type="button">Delete</button> <button class="cancel svelte-13glclx" type="button">Cancel</button> <button type="button" class="svelte-13glclx">Save</button></footer></dialog>');function Dl(o,r){ut(r,!0);let i=_e(r,"field",3,"started"),s=_e(r,"item",7,null),l=_e(r,"label",3,"Started"),d=_e(r,"title",3,"Edit Fast Start"),h=Be(void 0);function g(w){const R={...s()};R[i()]=new Date(w.getTime()),s({...R})}function D(){S(h).close()}function C(){S(h).showModal()}var K=xl(),F=Y(K),O=Y(F,!0);N(F);var q=X(F,2);const L=Qe(()=>s()&&s().id&&s().id!==null?s()[i()]:new Date);yl(q,{get label(){return l()},onchange:g,get value(){return S(L)}});var B=X(q,2);Qa(B),B.__input=[wl,s];var W=X(B,2),H=Y(W);H.__click=[_l,r,s];var P=X(H,2);P.__click=[bl,D,s,r];var M=X(P,2);return M.__click=[kl,r,s],N(W),N(K),Ft(K,w=>de(h,w),()=>S(h)),ze(()=>{Te(O,d()),as(B,s()&&s().id&&s().id!==null?s().notes:"")}),he(o,K),lt({close:D,showModal:C})}xt(["input","click"]);var Sl=ge('<article class="svelte-1vxkmhw"><p class="svelte-1vxkmhw">Your fasting history<br/>will be displayed here.</p></article>'),Tl=ge('<li class="header svelte-1vxkmhw"><p class="svelte-1vxkmhw"> </p></li>'),El=(o,r,i)=>r(S(i).type,S(i).id),Ol=ge('<p class="svelte-1vxkmhw">Started Fast</p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Cl=ge('<p class="svelte-1vxkmhw">Water</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Il=ge('<p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Pl=ge('<p class="svelte-1vxkmhw">Ended Fast</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Al=ge('<li class="svelte-1vxkmhw"><button type="button" class="svelte-1vxkmhw"><!></button></li>'),Ml=ge('<ul class="svelte-1vxkmhw"></ul>');function jl(o,r){ut(r,!0);let i=_e(r,"items",19,()=>[]);function s(O){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",year:"numeric"}).format(O)}function l(O,q){const L=q.getTime()-O.getTime(),B=Math.floor(L/1e3),W=Math.floor(B/3600),H=Math.floor(B%3600/60);return new Intl.DurationFormat(navigator.language,{style:"short",units:["hour","minute"]}).format({hours:W,minutes:H})}function d(O){return new Intl.DateTimeFormat(navigator.language,{weekday:"long",month:"short",day:"numeric"}).format(O)}function h(O){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(O)}function g(O,q){r.onchange&&r.onchange(O,q)}var D=an(),C=kt(D);{var K=O=>{var q=Sl();he(O,q)},F=O=>{var q=Ml();Ct(q,21,i,Ot,(L,B)=>{var W=an(),H=kt(W);{var P=w=>{var R=Tl(),V=Y(R),U=Y(V,!0);N(V),N(R),ze(ie=>Te(U,ie),[()=>d(S(B).timed)]),he(w,R)},M=w=>{var R=Al(),V=Y(R);V.__click=[El,g,B];var U=Y(V);{var ie=ue=>{var ke=Ol(),me=X(kt(ke),4),He=Y(me,!0);N(me);var Ce=X(me,2),Ye=Y(Ce,!0);N(Ce),ze((Je,ct)=>{Te(He,Je),Te(Ye,ct)},[()=>s(S(B).timed),()=>h(S(B).timed)]),he(ue,ke)},pe=(ue,ke)=>{{var me=Ce=>{var Ye=Cl(),Je=X(kt(Ye),2),ct=Y(Je);N(Je);var ye=X(Je,2),je=Y(ye,!0);N(ye);var Le=X(ye,2),ee=Y(Le,!0);N(Le),ze((le,ce)=>{Te(ct,`${S(B).volume??""} oz`),Te(je,le),Te(ee,ce)},[()=>s(S(B).timed),()=>h(S(B).timed)]),he(Ce,Ye)},He=(Ce,Ye)=>{{var Je=ye=>{var je=Il(),Le=kt(je),ee=Y(Le,!0);N(Le);var le=X(Le,4),ce=Y(le,!0);N(le);var Ke=X(le,2),Se=Y(Ke,!0);N(Ke),ze((qe,Pe)=>{Te(ee,S(B).level),Te(ce,qe),Te(Se,Pe)},[()=>s(S(B).timed),()=>h(S(B).timed)]),he(ye,je)},ct=(ye,je)=>{{var Le=ee=>{var le=Pl(),ce=X(kt(le),2),Ke=Y(ce,!0);N(ce);var Se=X(ce,2),qe=Y(Se,!0);N(Se);var Pe=X(Se,2),Ve=Y(Pe,!0);N(Pe),ze((re,rt,ot)=>{Te(Ke,re),Te(qe,rt),Te(Ve,ot)},[()=>l(S(B).started,S(B).ended),()=>s(S(B).timed),()=>h(S(B).timed)]),he(ee,le)};tt(ye,ee=>{S(B).type==="end"&&ee(Le)},je)}};tt(Ce,ye=>{S(B).type==="hunger"?ye(Je):ye(ct,!1)},Ye)}};tt(ue,Ce=>{S(B).type==="water"?Ce(me):Ce(He,!1)},ke)}};tt(U,ue=>{S(B).type==="start"?ue(ie):ue(pe,!1)})}N(V),N(R),he(w,R)};tt(H,w=>{S(B).type==="header"?w(P):w(M,!1)})}he(L,W)}),N(q),he(O,q)};tt(C,O=>{i().length===0?O(K):O(F,!1)})}he(o,D),lt()}xt(["click"]);var Kl=ge('<section class="svelte-1moll0f"><header class="svelte-1moll0f"><h3 class="svelte-1moll0f">Hours</h3></header> <div class="svelte-1moll0f"><!></div> <article class="svelte-1moll0f"><!></article></section>');function Fl(o,r){let i=_e(r,"activity",3,null),s=_e(r,"history",19,()=>[]);_e(r,"levels",19,()=>[]);let l=_e(r,"sun",3,null);var d=Kl(),h=X(Y(d),2),g=Y(h);Ui(g,{get activity(){return i()},days:7,get onsun(){return r.onsun},get sun(){return l()},get water(){return r.volume}}),N(h);var D=X(h,2),C=Y(D);jl(C,{get items(){return s()},get onchange(){return r.onchange}}),N(D),N(d),he(o,d)}function ql(o,r,i,s){r(),i(null),s.oncancel&&s.oncancel()}function Rl(o,r,i){r.ondelete&&r.ondelete(i().id)}function Nl(o,r,i){r()===null&&r({...r(),level:5}),i.onsave&&i.onsave(r())}var Bl=(o,r,i)=>r(S(i).value),Hl=ge('<li class="svelte-1gyfgoj"><button type="button" class="svelte-1gyfgoj"><p class="svelte-1gyfgoj"> </p> <!></button></li>'),zl=ge('<button class="delete svelte-1gyfgoj" type="button">Delete</button>'),Ll=ge('<dialog class="svelte-1gyfgoj"><h3 class="svelte-1gyfgoj"> </h3> <ul class="svelte-1gyfgoj"></ul> <footer class="svelte-1gyfgoj"><!> <button class="cancel svelte-1gyfgoj" type="button">Cancel</button> <button type="button" class="svelte-1gyfgoj">Save</button></footer></dialog>');function Ul(o,r){ut(r,!0);let i=_e(r,"item",7,null),s=_e(r,"levels",19,()=>[]);_e(r,"units",3,"oz");let l=Be(void 0),d=Qe(()=>i()&&i().level&&i().level!==null?i().level:5);function h(P){const M=P;i({...i(),level:M})}function g(){S(l).close(),i(null)}function D(){S(l).showModal()}var C=Ll(),K=Y(C),F=Y(K);N(K);var O=X(K,2);Ct(O,21,s,Ot,(P,M)=>{var w=Hl();const R=Qe(()=>S(M).value===S(d)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var V=Y(w);V.__click=[Bl,h,M];var U=Y(V),ie=Y(U,!0);N(U);var pe=X(U,2);const ue=Qe(()=>S(M).value===S(d)?"#0284c7":"#161616");st(pe,{get color(){return S(ue)},height:"20",get icon(){return S(R)},width:"20"}),N(V),N(w),ze(()=>Te(ie,S(M).label)),he(P,w)}),N(O);var q=X(O,2),L=Y(q);{var B=P=>{var M=zl();M.__click=[Rl,r,i],he(P,M)};tt(L,P=>{i()&&i().id&&i().id!==null&&P(B)})}var W=X(L,2);W.__click=[ql,g,i,r];var H=X(W,2);return H.__click=[Nl,i,r],N(q),N(C),Ft(C,P=>de(l,P),()=>S(l)),ze(()=>Te(F,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Hunger`)),he(o,C),lt({close:g,showModal:D})}xt(["click"]);function Yl(o,r,i){r()!==0&&(r(0),i.onchange&&i.onchange(r()))}function Vl(o,r,i){r()!==1&&(r(1),i.onchange&&i.onchange(r()))}var Wl=ge('<ul class="svelte-tu3q0a"><li><button type="button">Fasting</button></li> <li><button type="button">Hours</button></li></ul>');function Gl(o,r){ut(r,!0);let i=_e(r,"value",7,0);var s=Wl(),l=Y(s),d=Y(l);let h;d.__click=[Yl,i,r],N(l);var g=X(l,2),D=Y(g);let C;D.__click=[Vl,i,r],N(g),N(s),ze((K,F)=>{h=yt(d,1,"fasting svelte-tu3q0a",null,h,K),C=yt(D,1,"hours svelte-tu3q0a",null,C,F)},[()=>({selected:i()===0}),()=>({selected:i()===1})]),he(o,s),lt()}xt(["click"]);function Ql(o,r){r()}var Jl=ge('<dialog class="svelte-msa23r"><h3 class="svelte-msa23r">Settings</h3> <article class="svelte-msa23r"><p class="svelte-msa23r">Settings.</p></article> <footer class="svelte-msa23r"><button type="button" class="svelte-msa23r">Done</button></footer></dialog>');function Xl(o,r){ut(r,!0);let i=Be(void 0);function s(){S(i).close()}function l(){S(i).showModal()}var d=Jl(),h=X(Y(d),4),g=Y(h);return g.__click=[Ql,s],N(h),N(d),Ft(d,D=>de(i,D),()=>S(i)),he(o,d),lt({close:s,showModal:l})}xt(["click"]);function Zl(o,r,i,s){r(),i(null),s.oncancel&&s.oncancel()}function $l(o,r,i){r.ondelete&&r.ondelete(i().id)}function ec(o,r,i){r()===null&&r({...r(),volume:8}),i.onsave&&i.onsave(r())}var tc=(o,r,i)=>r(S(i).value),nc=ge('<li class="svelte-1sbih0z"><button type="button" class="svelte-1sbih0z"><p class="svelte-1sbih0z"> </p> <p class="svelte-1sbih0z"> </p> <!></button></li>'),rc=ge('<button class="delete svelte-1sbih0z" type="button">Delete</button>'),oc=ge('<dialog class="svelte-1sbih0z"><h3 class="svelte-1sbih0z"> </h3> <ul class="svelte-1sbih0z"></ul> <footer class="svelte-1sbih0z"><!> <button class="cancel svelte-1sbih0z" type="button">Cancel</button> <button type="button" class="svelte-1sbih0z">Save</button></footer></dialog>');function ic(o,r){ut(r,!0);let i=_e(r,"item",7,null),s=_e(r,"units",3,"oz"),l=Be(void 0),d=ro([{value:8,label:"Cup"},{value:12,label:"Can"},{value:16,label:"Bottle"},{value:20,label:"Medium"},{value:30,label:"Gatorade"},{value:32,label:"Big Q"},{value:44,label:"QT Large"},{value:52,label:"Extra Large"}]),h=Qe(()=>i()&&i().volume&&i().volume!==null?i().volume:8);function g(M){const w=M;i({...i(),volume:w})}function D(){S(l).close(),i(null)}function C(){S(l).showModal()}var K=oc(),F=Y(K),O=Y(F);N(F);var q=X(F,2);Ct(q,21,()=>d,Ot,(M,w)=>{var R=nc();const V=Qe(()=>S(w).value===S(h)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var U=Y(R);U.__click=[tc,g,w];var ie=Y(U),pe=Y(ie,!0);N(ie);var ue=X(ie,2),ke=Y(ue);N(ue);var me=X(ue,2);const He=Qe(()=>S(w).value===S(h)?"#0284c7":"#161616");st(me,{get color(){return S(He)},height:"20",get icon(){return S(V)},width:"20"}),N(U),N(R),ze(()=>{Te(pe,S(w).label),Te(ke,`${S(w).value??""} ${s()??""}`)}),he(M,R)}),N(q);var L=X(q,2),B=Y(L);{var W=M=>{var w=rc();w.__click=[$l,r,i],he(M,w)};tt(B,M=>{i()&&i().id&&i().id!==null&&M(W)})}var H=X(B,2);H.__click=[Zl,D,i,r];var P=X(H,2);return P.__click=[ec,i,r],N(L),N(K),Ft(K,M=>de(l,M),()=>S(l)),ze(()=>Te(O,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Water`)),he(o,K),lt({close:D,showModal:C})}xt(["click"]);var ac=ge('<main class="svelte-odvko0"><header class="svelte-odvko0"><span></span> <!> <button type="button" class="svelte-odvko0"><!></button></header> <section class="svelte-odvko0"><article class="svelte-odvko0"><!></article> <article class="svelte-odvko0"><!></article></section></main> <!> <!> <!> <!>',1);function wc(o,r){ut(r,!0);const i=new hs,s=gs;let l=0,d=Be(null),h=Be(0),g=Be(ro([])),D=Be(void 0),C=Be("started"),K=Be(null),F=Be("Started"),O=Be("Edit Fast Started"),q=Be(void 0),L=Be(null),B=Be(5),W=ro([{value:1,label:"Starving"},{value:2,label:"Very hungry"},{value:3,label:"Pretty hungry"},{value:4,label:"Snacky"},{value:5,label:"Satisfied"},{value:6,label:"Slightly full"},{value:7,label:"Uncomfortable"},{value:8,label:"Stuffed"},{value:9,label:"Stomach aches"},{value:10,label:"Sick"}]),H=Be(null),P=Be(0),M=Be(void 0),w=Be(null),R=Be(null),V=Be(null),U=Be(0),ie=Be(void 0),pe=Be(null);co(()=>{let oe=window.localStorage.getItem("fh_screen");de(P,oe===null?0:parseInt(oe),!0);let fe=window.localStorage.getItem("fh_duration");de(h,fe===null?0:parseInt(fe),!0);const ve=window.localStorage.getItem("fh_latitude");ve!==null&&ve!=="DENIED"&&Ye(),setInterval(()=>{if(l===60){ke();const Re=window.localStorage.getItem("fh_latitude");Re!==null&&Re!=="DENIED"&&Ye(),l=0}else l=l+1;S(w)!==null&&de(H,Date.now(),!0)},1e3),Ce(),ke(),He(),Je(),me()});function ue(oe){const fe=oe.getFullYear(),ve=String(oe.getMonth()+1).padStart(2,"0"),Re=String(oe.getDate()).padStart(2,"0");return`${fe}-${ve}-${Re}`}function ke(oe=7){i.browseHistory().then(fe=>{const ve={},Re=new Date,De=new Date(Re.getFullYear(),Re.getMonth(),Re.getDate()),Fe=new Date(De);if(Fe.setDate(De.getDate()-(oe-1)),!Array.isArray(fe)||fe.length===0){const Ue=new Date(Fe);for(;Ue<=De;){const nt=ue(Ue);ve[nt]=Array(24).fill(0),Ue.setDate(Ue.getDate()+1)}}else{for(const nt of fe){const te=new Date(nt.started),bn=nt.ended?new Date(nt.ended):new Date,_n=new Date(te.getTime());_n.setSeconds(0,0);const sn=new Date(bn.getTime());sn.setSeconds(0,0);let Pt=new Date(_n);for(;Pt<sn;){const Xt=ue(Pt),Fn=new Date(Pt.getFullYear(),Pt.getMonth(),Pt.getDate());if(Fn>=Fe&&Fn<=De){const mr=Pt.getHours();ve[Xt]||(ve[Xt]=Array(24).fill(0)),ve[Xt][mr]+=1}Pt.setMinutes(Pt.getMinutes()+1)}}for(const nt in ve)ve[nt]=ve[nt].map(te=>+(Math.min(te,60)/60).toFixed(6));const Ue=new Date(Fe);for(;Ue<=De;){const nt=ue(Ue);ve[nt]||(ve[nt]=Array(24).fill(0)),Ue.setDate(Ue.getDate()+1)}}const Ie=Object.keys(ve).sort((Ue,nt)=>nt.localeCompare(Ue)),Ae={};for(const Ue of Ie)Ae[Ue]=ve[Ue];const se=Array(24).fill(0);for(const Ue of Array(24).keys())for(const nt of Ie)se[Ue]+=Ae[nt][Ue];const Jt=se.map(Ue=>+(Ue/oe).toFixed(6));de(d,{daily:Ae,average:Jt},!0)})}function me(){i.browseHistory().then(oe=>{let fe=null,ve=structuredClone(oe);ve.forEach(De=>{De.type="start",De.timed=new Date(De.started.getTime())});let Re=structuredClone(oe);Re=Re.filter(De=>De.ended!==null),Re.forEach(De=>{De.type="end",De.timed=new Date(De.ended.getTime())}),ve=ve.concat(Re),fe=[...ve],i.browseHunger().then(De=>(De=De.map(Fe=>{const Ie=W.find(Ae=>Ae.value===Fe.level);return Fe.level=Ie.label,Fe.timed=new Date(Fe.created.getTime()),Fe}),fe=fe.concat(De),i.browseWater())).then(De=>{De=De.map(Ie=>(Ie.timed=new Date(Ie.created.getTime()),Ie)),fe=fe.concat(De),fe.sort((Ie,Ae)=>Ie.timed.getTime()<Ae.timed.getTime()?1:Ie.timed.getTime()>Ae.timed.getTime()?-1:0);const Fe=[];for(let Ie=0;Ie<fe.length;Ie++){const Ae=new Date(fe[Ie].timed.getTime());Ae.setHours(23),Ae.setMinutes(59),Ae.setSeconds(59),Ae.setMilliseconds(999),Fe.length===0?Fe.push({type:"header",timed:Ae}):(Fe[Fe.length-1].timed.getDate()!==fe[Ie].timed.getDate()||Fe[Fe.length-1].timed.getMonth()!==fe[Ie].timed.getMonth()||Fe[Fe.length-1].timed.getFullYear()!==fe[Ie].timed.getFullYear())&&Fe.push({type:"header",timed:Ae})}fe=fe.concat(Fe),fe.sort((Ie,Ae)=>Ie.timed.getTime()<Ae.timed.getTime()?1:Ie.timed.getTime()>Ae.timed.getTime()?-1:0),de(g,[...fe],!0)})})}function He(){i.browseHunger(!0).then(oe=>{if(oe===null)de(B,5);else{const fe=new Date,ve=new Date(oe.created);fe.getFullYear()===ve.getFullYear()&&fe.getMonth()===ve.getMonth()&&fe.getDate()===ve.getDate()?de(B,oe.level,!0):de(B,5)}})}function Ce(){i.browseHistory().then(oe=>{oe.length===0&&(de(w,null),de(H,null)),oe.sort((fe,ve)=>fe.started.getTime()>ve.started.getTime()?-1:fe.started.getTime()<ve.started.getTime()?1:0),oe[0].ended===null&&(de(w,new Date(oe[0].started.getTime()),!0),de(H,Date.now(),!0))})}function Ye(){const oe=parseFloat(window.localStorage.getItem("fh_latitude")),fe=parseFloat(window.localStorage.getItem("fh_longitude")),ve=new Date;let Re=null,De=s.getTimes(ve,oe,fe),Fe=null;if(Date.now()<De.sunrise.getTime())Fe=new Date(De.sunrise.getTime()),Re="material-symbols:wb-sunny-outline-rounded";else if(Date.now()>De.sunrise.getTime()&&Date.now()<De.sunset.getTime())Fe=new Date(De.sunset.getTime()),Re="material-symbols:moon-stars-outline-rounded";else{const Ie=new Date;Ie.setDate(ve.getDate()+1),De=s.getTimes(Ie,oe,fe),Fe=new Date(De.sunrise.getTime()),Re="material-symbols:wb-sunny-outline-rounded"}de(R,{icon:Re,timing:Fe},!0)}function Je(){i.browseWater(!0).then(oe=>{const fe=oe.reduce((ve,Re)=>ve+Re.volume,0);return de(U,fe,!0),i.browseWater()}).then(oe=>{const fe=new Date;fe.setHours(0,0,0,0);const ve={};for(const{created:Ie,volume:Ae}of oe){const se=ct(Ie);ve[se]=(ve[se]||0)+Ae}const Re=[];for(let Ie=0;Ie<7;Ie++){const Ae=new Date(fe.getTime());Ae.setDate(fe.getDate()-Ie);const se=ct(Ae);Re.push({created:new Date(Ae.getTime()),volume:ve[se]||0})}const Fe=Re.reduce((Ie,{volume:Ae})=>Ie+Ae,0)/Re.length;de(V,{average:Fe,daily:[...Re]},!0)})}function ct(oe){const fe=oe.getFullYear(),ve=String(oe.getMonth()+1).padStart(2,"0"),Re=String(oe.getDate()).padStart(2,"0");return`${fe}-${ve}-${Re}`}function ye(oe){de(h,oe,!0),window.localStorage.setItem("fh_duration",S(h))}function je(){de(w,null),de(H,null),i.browseHistoryByEnd().then(oe=>(oe.ended=new Date,i.editHistory(oe))).then(()=>{Ce(),ke(),me()})}function Le(){S(q).showModal()}function ee(){i.addHistory().then(()=>{Ce(),ke(),me()})}function le(){S(ie).showModal()}function ce(oe){S(w)!==null&&S(K).started.getTime()===S(w).getTime()&&(de(w,null),de(H,null)),i.deleteHistory(oe).then(()=>{S(D).close(),de(K,null),Ce(),ke(),me()})}function Ke(oe){i.editHistory(oe).then(()=>{S(D).close(),de(K,null),Ce(),ke(),me()})}function Se(oe,fe){oe==="start"?(de(C,"started"),de(F,"Started"),de(O,"Edit Fast Started"),i.readHistory(fe).then(ve=>{de(K,{...ve},!0),S(D).showModal()})):oe==="end"?(de(C,"ended"),de(F,"Ended"),de(O,"Edit Fast Ended"),i.readHistory(fe).then(ve=>{de(K,{...ve},!0),S(D).showModal()})):oe==="water"?i.readWater(fe).then(ve=>{de(pe,{...ve},!0),S(ie).showModal()}):oe==="hunger"&&i.readHunger(fe).then(ve=>{de(L,{...ve},!0),S(q).showModal()})}function qe(oe){i.deleteHunger(oe).then(()=>{S(q).close(),de(L,null),He(),me()})}function Pe(oe){S(L)===null?i.addHunger(oe.level).then(fe=>{S(q).close(),He(),me()}):i.editHunger(oe).then(fe=>{S(q).close(),de(L,null),He(),me()})}function Ve(oe){S(P)!==oe&&(window.localStorage.setItem("fh_screen",oe),de(P,oe,!0))}function re(){S(M).showModal()}function rt(){confirm("Sunrise/set (important for religious observations) needs to know your location? Enable location detection?")?navigator.geolocation.getCurrentPosition(fe=>{window.localStorage.setItem("fh_latitude",fe.coords.latitude),window.localStorage.setItem("fh_longitude",fe.coords.longitude),Ye()}):window.localStorage.setItem("fh_latitude","DENIED")}function ot(oe){i.deleteWater(oe).then(()=>{S(ie).close(),de(pe,null),Je(),me()})}function xe(oe){S(pe)===null?i.addWater(oe.volume).then(fe=>{S(ie).close(),Je(),me()}):i.editWater(oe).then(fe=>{S(ie).close(),de(pe,null),Je(),me()})}var ft=ac(),dt=kt(ft),Ze=Y(dt),It=X(Y(Ze),2);Gl(It,{onchange:Ve,get value(){return S(P)}});var ht=X(It,2);ht.__click=re;var bt=Y(ht);st(bt,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),N(ht),N(Ze);var _t=X(Ze,2),Dt=Y(_t),We=Y(Dt);nl(We,{get activity(){return S(d)},get duration(){return S(h)},get hunger(){return S(B)},get levels(){return W},get now(){return S(H)},onduration:ye,onend:je,onhunger:Le,onsettings:re,onstart:ee,onsun:rt,onwater:le,get started(){return S(w)},get sun(){return S(R)},get volume(){return S(V)},get water(){return S(U)}}),N(Dt);var At=X(Dt,2),Qt=Y(At);Fl(Qt,{get activity(){return S(d)},get history(){return S(g)},get levels(){return W},onchange:Se,onsun:rt,get sun(){return S(R)},get volume(){return S(V)}}),N(At),N(_t),N(dt);var yn=X(dt,2);Ft(Dl(yn,{get field(){return S(C)},get item(){return S(K)},get label(){return S(F)},ondelete:ce,onsave:Ke,get title(){return S(O)}}),oe=>de(D,oe,!0),()=>S(D));var Bt=X(yn,2);Ft(Ul(Bt,{get item(){return S(L)},get levels(){return W},ondelete:qe,onsave:Pe}),oe=>de(q,oe,!0),()=>S(q));var Mt=X(Bt,2);Ft(ic(Mt,{get item(){return S(pe)},ondelete:ot,onsave:xe}),oe=>de(ie,oe,!0),()=>S(ie));var qt=X(Mt,2);Ft(Xl(qt,{}),oe=>de(M,oe,!0),()=>S(M)),ze(()=>Gt(_t,"data-screen",S(P)===0?"fasting":"hours")),he(o,ft),lt()}xt(["click"]);export{wc as component};
