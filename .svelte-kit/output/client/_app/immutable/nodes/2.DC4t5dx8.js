import"../chunks/CWj6FrbW.js";import{i as pa,c as ga,d as wt,n as ma,a as ya,o as pi,b as ba,s as Oe}from"../chunks/fpJi1qvQ.js";import{a3 as uo,av as gi,aw as _a,h as pt,a5 as vn,ac as mi,q as yi,af as wa,b as lo,i as ir,d as to,w as I,A as xa,r as ka,e as Da,g as Vo,j as Pn,m as tn,a6 as bi,a9 as Sa,k as _i,l as vr,p as Ta,ax as Wr,ad as wi,a1 as no,ay as Wo,ar as Ea,az as Go,aA as co,aB as Oa,aC as Ca,aD as cr,aE as fo,aF as Ia,a7 as xi,aG as ki,aH as Pa,V as He,aI as Aa,aa as Ma,a8 as ja,ag as Qo,aJ as Ka,n as Di,aK as Fa,aL as qa,aM as Ra,aN as Na,aO as Ba,aP as Ha,z as za,aQ as La,R as at,K as Ua,c as rn,f as gt,a as de,W as st,as as Be,y as ve,aR as Ya,aS as Va,X as L,Y as N,T as pe,Z as te,at as Je,s as Wa,aT as Ga,aU as Gr,x as In}from"../chunks/CgBZ2jj9.js";import{i as rt,r as Qa,p as xe,b as Yt}from"../chunks/DmV43-3_.js";const Ja=[];function Qr(o,r=!1){return ar(o,new Map,"",Ja)}function ar(o,r,i,s,c=null){if(typeof o=="object"&&o!==null){var d=r.get(o);if(d!==void 0)return d;if(o instanceof Map)return new Map(o);if(o instanceof Set)return new Set(o);if(uo(o)){var h=Array(o.length);r.set(o,h),c!==null&&r.set(c,h);for(var m=0;m<o.length;m+=1){var T=o[m];m in o&&(h[m]=ar(T,r,i,s))}return h}if(gi(o)===_a){h={},r.set(o,h),c!==null&&r.set(c,h);for(var E in o)h[E]=ar(o[E],r,i,s);return h}if(o instanceof Date)return structuredClone(o);if(typeof o.toJSON=="function")return ar(o.toJSON(),r,i,s,o)}if(o instanceof EventTarget)return o;try{return structuredClone(o)}catch{return o}}function Xa(o,r){if(r){const i=document.body;o.autofocus=!0,yi(()=>{document.activeElement===i&&o.focus()})}}function Za(o){pt&&vn(o)!==null&&mi(o)}function Ot(o,r){return r}function $a(o,r,i,s){for(var c=[],d=r.length,h=0;h<d;h++)Oa(r[h].e,c,!0);var m=d>0&&c.length===0&&i!==null;if(m){var T=i.parentNode;mi(T),T.append(i),s.clear(),Ut(o,r[0].prev,r[d-1].next)}Ca(c,()=>{for(var E=0;E<d;E++){var K=r[E];m||(s.delete(K.k),Ut(o,K.prev,K.next)),cr(K.e,!m)}})}function Ct(o,r,i,s,c,d=null){var h=o,m={flags:r,items:new Map,first:null},T=(r&ki)!==0;if(T){var E=o;h=pt?ir(vn(E)):E.appendChild(wa())}pt&&to();var K=null,q=!1,S=xa(()=>{var B=i();return uo(B)?B:B==null?[]:wi(B)});lo(()=>{var B=I(S),H=B.length;if(q&&H===0)return;q=H===0;let z=!1;if(pt){var V=ka(h)===Da;V!==(H===0)&&(h=Vo(),ir(h),Pn(!1),z=!0)}if(pt){for(var F=null,C,P=0;P<H;P++){if(tn.nodeType===bi&&tn.data===Sa){h=tn,z=!0,Pn(!1);break}var M=B[P],Y=s(M,P);C=Si(tn,m,F,null,M,Y,P,c,r,i),m.items.set(Y,C),F=C}H>0&&ir(Vo())}pt||es(B,m,h,c,r,s,i),d!==null&&(H===0?K?_i(K):K=vr(()=>d(h)):K!==null&&Ta(K,()=>{K=null})),z&&Pn(!0),I(S)}),pt&&(h=tn)}function es(o,r,i,s,c,d,h){var Ue,ze,Xe,ut;var m=(c&Pa)!==0,T=(c&(fo|co))!==0,E=o.length,K=r.items,q=r.first,S=q,B,H=null,z,V=[],F=[],C,P,M,Y;if(m)for(Y=0;Y<E;Y+=1)C=o[Y],P=d(C,Y),M=K.get(P),M!==void 0&&((Ue=M.a)==null||Ue.measure(),(z??(z=new Set)).add(M));for(Y=0;Y<E;Y+=1){if(C=o[Y],P=d(C,Y),M=K.get(P),M===void 0){var W=S?S.e.nodes_start:i;H=Si(W,r,H,H===null?r.first:H.next,C,P,Y,s,c,h),K.set(P,H),V=[],F=[],S=H.next;continue}if(T&&ts(M,C,Y,c),(M.e.f&Wr)!==0&&(_i(M.e),m&&((ze=M.a)==null||ze.unfix(),(z??(z=new Set)).delete(M))),M!==S){if(B!==void 0&&B.has(M)){if(V.length<F.length){var U=F[0],le;H=U.prev;var Ce=V[0],ce=V[V.length-1];for(le=0;le<V.length;le+=1)Jo(V[le],U,i);for(le=0;le<F.length;le+=1)B.delete(F[le]);Ut(r,Ce.prev,ce.next),Ut(r,H,Ce),Ut(r,ce,U),S=U,H=ce,Y-=1,V=[],F=[]}else B.delete(M),Jo(M,S,i),Ut(r,M.prev,M.next),Ut(r,M,H===null?r.first:H.next),Ut(r,H,M),H=M;continue}for(V=[],F=[];S!==null&&S.k!==P;)(S.e.f&Wr)===0&&(B??(B=new Set)).add(S),F.push(S),S=S.next;if(S===null)continue;M=S}V.push(M),H=M,S=M.next}if(S!==null||B!==void 0){for(var _e=B===void 0?[]:wi(B);S!==null;)(S.e.f&Wr)===0&&_e.push(S),S=S.next;var Me=_e.length;if(Me>0){var Re=(c&ki)!==0&&E===0?i:null;if(m){for(Y=0;Y<Me;Y+=1)(Xe=_e[Y].a)==null||Xe.measure();for(Y=0;Y<Me;Y+=1)(ut=_e[Y].a)==null||ut.fix()}$a(r,_e,Re,K)}}m&&yi(()=>{var Le;if(z!==void 0)for(M of z)(Le=M.a)==null||Le.apply()}),no.first=r.first&&r.first.e,no.last=H&&H.e}function ts(o,r,i,s){(s&fo)!==0&&Wo(o.v,r),(s&co)!==0?Wo(o.i,i):o.i=i}function Si(o,r,i,s,c,d,h,m,T,E){var K=(T&fo)!==0,q=(T&Ia)===0,S=K?q?Ea(c,!1,!1):Go(c):c,B=(T&co)===0?h:Go(h),H={i:B,v:S,k:d,a:null,e:null,prev:i,next:s};try{return H.e=vr(()=>m(o,S,B,E),pt),H.e.prev=i&&i.e,H.e.next=s&&s.e,i===null?r.first=H:(i.next=H,i.e.next=H.e),s!==null&&(s.prev=H,s.e.prev=H.e),H}finally{}}function Jo(o,r,i){for(var s=o.next?o.next.e.nodes_start:i,c=r?r.e.nodes_start:i,d=o.e.nodes_start;d!==s;){var h=xi(d);c.before(d),d=h}}function Ut(o,r,i){r===null?o.first=i:(r.next=i,r.e.next=i&&i.e),i!==null&&(i.prev=r,i.e.prev=r&&r.e)}function ns(o,r,i=!1,s=!1,c=!1){var d=o,h="";He(()=>{var m=no;if(h===(h=r()??"")){pt&&to();return}if(m.nodes_start!==null&&(Aa(m.nodes_start,m.nodes_end),m.nodes_start=m.nodes_end=null),h!==""){if(pt){tn.data;for(var T=to(),E=T;T!==null&&(T.nodeType!==bi||T.data!=="");)E=T,T=xi(T);if(T===null)throw Ma(),ja;Qo(tn,E),d=ir(T);return}var K=h+"";i?K=`<svg>${K}</svg>`:s&&(K=`<math>${K}</math>`);var q=Ka(K);if((i||s)&&(q=vn(q)),Qo(vn(q),q.lastChild),i||s)for(;vn(q);)d.before(vn(q));else d.before(q)}})}function rs(o,r){var i=void 0,s;lo(()=>{i!==(i=r())&&(s&&(cr(s),s=null),i&&(s=vr(()=>{Di(()=>i(o))})))})}function Ti(o){var r,i,s="";if(typeof o=="string"||typeof o=="number")s+=o;else if(typeof o=="object")if(Array.isArray(o)){var c=o.length;for(r=0;r<c;r++)o[r]&&(i=Ti(o[r]))&&(s&&(s+=" "),s+=i)}else for(i in o)o[i]&&(s&&(s+=" "),s+=i);return s}function os(){for(var o,r,i=0,s="",c=arguments.length;i<c;i++)(o=arguments[i])&&(r=Ti(o))&&(s&&(s+=" "),s+=r);return s}function is(o){return typeof o=="object"?os(o):o??""}const Xo=[...` 	
\r\fÂ \v\uFEFF`];function as(o,r,i){var s=o==null?"":""+o;if(r&&(s=s?s+" "+r:r),i){for(var c in i)if(i[c])s=s?s+" "+c:c;else if(s.length)for(var d=c.length,h=0;(h=s.indexOf(c,h))>=0;){var m=h+d;(h===0||Xo.includes(s[h-1]))&&(m===s.length||Xo.includes(s[m]))?s=(h===0?"":s.substring(0,h))+s.substring(m+1):h=m}}return s===""?null:s}function Zo(o,r=!1){var i=r?" !important;":";",s="";for(var c in o){var d=o[c];d!=null&&d!==""&&(s+=" "+c+": "+d+i)}return s}function Jr(o){return o[0]!=="-"||o[1]!=="-"?o.toLowerCase():o}function ss(o,r){if(r){var i="",s,c;if(Array.isArray(r)?(s=r[0],c=r[1]):s=r,o){o=String(o).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var d=!1,h=0,m=!1,T=[];s&&T.push(...Object.keys(s).map(Jr)),c&&T.push(...Object.keys(c).map(Jr));var E=0,K=-1;const z=o.length;for(var q=0;q<z;q++){var S=o[q];if(m?S==="/"&&o[q-1]==="*"&&(m=!1):d?d===S&&(d=!1):S==="/"&&o[q+1]==="*"?m=!0:S==='"'||S==="'"?d=S:S==="("?h++:S===")"&&h--,!m&&d===!1&&h===0){if(S===":"&&K===-1)K=q;else if(S===";"||q===z-1){if(K!==-1){var B=Jr(o.substring(E,K).trim());if(!T.includes(B)){S!==";"&&q++;var H=o.substring(E,q).trim();i+=" "+H+";"}}E=q+1,K=-1}}}}return s&&(i+=Zo(s)),c&&(i+=Zo(c,!0)),i=i.trim(),i===""?null:i}return o==null?null:String(o)}function Vt(o,r,i,s,c,d){var h=o.__className;if(pt||h!==i||h===void 0){var m=as(i,s,d);(!pt||m!==o.getAttribute("class"))&&(m==null?o.removeAttribute("class"):r?o.className=m:o.setAttribute("class",m)),o.__className=i}else if(d&&c!==d)for(var T in d){var E=!!d[T];(c==null||E!==!!c[T])&&o.classList.toggle(T,E)}return d}function Xr(o,r={},i,s){for(var c in i){var d=i[c];r[c]!==d&&(i[c]==null?o.style.removeProperty(c):o.style.setProperty(c,d,s))}}function An(o,r,i,s){var c=o.__style;if(pt||c!==r){var d=ss(r,s);(!pt||d!==o.getAttribute("style"))&&(d==null?o.removeAttribute("style"):o.style.cssText=d),o.__style=r}else s&&(Array.isArray(s)?(Xr(o,i==null?void 0:i[0],s[0]),Xr(o,i==null?void 0:i[1],s[1],"important")):Xr(o,i,s));return s}function fr(o,r,i){if(o.multiple){if(r==null)return;if(!uo(r))return qa();for(var s of o.options)s.selected=r.includes($o(s));return}for(s of o.options){var c=$o(s);if(Ra(c,r)){s.selected=!0;return}}(!i||r!==void 0)&&(o.selectedIndex=-1)}function Ei(o){var r=new MutationObserver(()=>{fr(o,o.__value)});r.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Fa(()=>{r.disconnect()})}function $o(o){return"__value"in o?o.__value:o.value}const Tn=Symbol("class"),En=Symbol("style"),Oi=Symbol("is custom element"),Ci=Symbol("is html");function us(o,r){var i=ho(o);i.value===(i.value=r??void 0)||o.value===r&&(r!==0||o.nodeName!=="PROGRESS")||(o.value=r??"")}function ls(o,r){r?o.hasAttribute("selected")||o.setAttribute("selected",""):o.removeAttribute("selected")}function nn(o,r,i,s){var c=ho(o);pt&&(c[r]=o.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&o.nodeName==="LINK")||c[r]!==(c[r]=i)&&(r==="loading"&&(o[Ha]=i),i==null?o.removeAttribute(r):typeof i!="string"&&Ii(o).includes(r)?o[r]=i:o.setAttribute(r,i))}function cs(o,r,i,s,c=!1){var d=ho(o),h=d[Oi],m=!d[Ci];let T=pt&&h;T&&Pn(!1);var E=r||{},K=o.tagName==="OPTION";for(var q in r)q in i||(i[q]=null);i.class?i.class=is(i.class):i[Tn]&&(i.class=null),i[En]&&(i.style??(i.style=null));var S=Ii(o);for(const P in i){let M=i[P];if(K&&P==="value"&&M==null){o.value=o.__value="",E[P]=M;continue}if(P==="class"){var B=o.namespaceURI==="http://www.w3.org/1999/xhtml";Vt(o,B,M,s,r==null?void 0:r[Tn],i[Tn]),E[P]=M,E[Tn]=i[Tn];continue}if(P==="style"){An(o,M,r==null?void 0:r[En],i[En]),E[P]=M,E[En]=i[En];continue}var H=E[P];if(!(M===H&&!(M===void 0&&o.hasAttribute(P)))){E[P]=M;var z=P[0]+P[1];if(z!=="$$")if(z==="on"){const Y={},W="$$"+P;let U=P.slice(2);var V=ya(U);if(pa(U)&&(U=U.slice(0,-7),Y.capture=!0),!V&&H){if(M!=null)continue;o.removeEventListener(U,E[W],Y),E[W]=null}if(M!=null)if(V)o[`__${U}`]=M,wt([U]);else{let le=function(Ce){E[P].call(this,Ce)};E[W]=ga(U,o,le,Y)}else V&&(o[`__${U}`]=void 0)}else if(P==="style")nn(o,P,M);else if(P==="autofocus")Xa(o,!!M);else if(!h&&(P==="__value"||P==="value"&&M!=null))o.value=o.__value=M;else if(P==="selected"&&K)ls(o,M);else{var F=P;m||(F=ma(F));var C=F==="defaultValue"||F==="defaultChecked";if(M==null&&!h&&!C)if(d[P]=null,F==="value"||F==="checked"){let Y=o;const W=r===void 0;if(F==="value"){let U=Y.defaultValue;Y.removeAttribute(F),Y.defaultValue=U,Y.value=Y.__value=W?U:null}else{let U=Y.defaultChecked;Y.removeAttribute(F),Y.defaultChecked=U,Y.checked=W?U:!1}}else o.removeAttribute(P);else C||S.includes(F)&&(h||typeof M!="string")?o[F]=M:typeof M!="function"&&nn(o,F,M)}}}return T&&Pn(!0),E}function ei(o,r,i=[],s,c=!1,d=za){const h=i.map(d);var m=void 0,T={},E=o.nodeName==="SELECT",K=!1;if(lo(()=>{var S=r(...h.map(I)),B=cs(o,m,S,s,c);K&&E&&"value"in S&&fr(o,S.value,!1);for(let z of Object.getOwnPropertySymbols(T))S[z]||cr(T[z]);for(let z of Object.getOwnPropertySymbols(S)){var H=S[z];z.description===La&&(!m||H!==m[z])&&(T[z]&&cr(T[z]),T[z]=vr(()=>rs(o,()=>H))),B[z]=H}m=B}),E){var q=o;Di(()=>{fr(q,m.value),Ei(q)})}K=!0}function ho(o){return o.__attributes??(o.__attributes={[Oi]:o.nodeName.includes("-"),[Ci]:o.namespaceURI===Na})}var ti=new Map;function Ii(o){var r=ti.get(o.nodeName);if(r)return r;ti.set(o.nodeName,r=[]);for(var i,s=o,c=Element.prototype;c!==s;){i=Ba(s);for(var d in i)i[d].set&&r.push(d);s=gi(s)}return r}var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pi(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var sr={exports:{}},ds=sr.exports,ni;function hs(){return ni||(ni=1,function(o,r){(function(i,s){o.exports=s()})(ds,function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)};function c(e,t,n){for(var a,u=0,l=t.length;u<l;u++)!a&&u in t||((a=a||Array.prototype.slice.call(t,0,u))[u]=t[u]);return e.concat(a||Array.prototype.slice.call(t))}var d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:fs,h=Object.keys,m=Array.isArray;function T(e,t){return typeof t!="object"||h(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||d.Promise||(d.Promise=Promise);var E=Object.getPrototypeOf,K={}.hasOwnProperty;function q(e,t){return K.call(e,t)}function S(e,t){typeof t=="function"&&(t=t(E(e))),(typeof Reflect>"u"?h:Reflect.ownKeys)(t).forEach(function(n){H(e,n,t[n])})}var B=Object.defineProperty;function H(e,t,n,a){B(e,t,T(n&&q(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},a))}function z(e){return{from:function(t){return e.prototype=Object.create(t.prototype),H(e.prototype,"constructor",e),{extend:S.bind(null,e.prototype)}}}}var V=Object.getOwnPropertyDescriptor,F=[].slice;function C(e,t,n){return F.call(e,t,n)}function P(e,t){return t(e)}function M(e){if(!e)throw new Error("Assertion Failed")}function Y(e){d.setImmediate?setImmediate(e):setTimeout(e,0)}function W(e,t){if(typeof t=="string"&&q(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],a=0,u=t.length;a<u;++a){var l=W(e,t[a]);n.push(l)}return n}var f=t.indexOf(".");if(f!==-1){var v=e[t.substr(0,f)];return v==null?void 0:W(v,t.substr(f+1))}}function U(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){M(typeof n!="string"&&"length"in n);for(var a=0,u=t.length;a<u;++a)U(e,t[a],n[a])}else{var l,f,v=t.indexOf(".");v!==-1?(l=t.substr(0,v),(f=t.substr(v+1))===""?n===void 0?m(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=n:U(v=!(v=e[l])||!q(e,l)?e[l]={}:v,f,n)):n===void 0?m(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function le(e){var t,n={};for(t in e)q(e,t)&&(n[t]=e[t]);return n}var Ce=[].concat;function ce(e){return Ce.apply([],e)}var fe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ce([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return d[e]}),_e=new Set(fe.map(function(e){return d[e]})),Me=null;function Re(e){return Me=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var a=Me.get(n);if(a)return a;if(m(n)){a=[],Me.set(n,a);for(var u=0,l=n.length;u<l;++u)a.push(t(n[u]))}else if(_e.has(n.constructor))a=n;else{var f,v=E(n);for(f in a=v===Object.prototype?{}:Object.create(v),Me.set(n,a),n)q(n,f)&&(a[f]=t(n[f]))}return a}(e),Me=null,e}var Ue={}.toString;function ze(e){return Ue.call(e).slice(8,-1)}var Xe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ut=typeof Xe=="symbol"?function(e){var t;return e!=null&&(t=e[Xe])&&t.apply(e)}:function(){return null};function Le(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var De={};function be(e){var t,n,a,u;if(arguments.length===1){if(m(e))return e.slice();if(this===De&&typeof e=="string")return[e];if(u=ut(e)){for(n=[];!(a=u.next()).done;)n.push(a.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var $=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ie=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Et=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ie),se={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ue(e,t){this.name=e,this.message=t}function je(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,a,u){return u.indexOf(n)===a}).join(`
`)}function ke(e,t,n,a){this.failures=t,this.failedKeys=a,this.successCount=n,this.message=je(e,t)}function Ke(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=je(e,this.failures)}z(ue).from(Error).extend({toString:function(){return this.name+": "+this.message}}),z(ke).from(ue),z(Ke).from(ue);var Pe=Et.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ve=ue,oe=Et.reduce(function(e,t){var n=t+"Error";function a(u,l){this.name=n,u?typeof u=="string"?(this.message="".concat(u).concat(l?`
 `+l:""),this.inner=l||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=se[t]||n,this.inner=null)}return z(a).from(Ve),e[t]=a,e},{});oe.Syntax=SyntaxError,oe.Type=TypeError,oe.Range=RangeError;var tt=ie.reduce(function(e,t){return e[t+"Error"]=oe[t],e},{}),Ze=Et.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=oe[t]),e},{});function me(){}function lt(e){return e}function ct(e,t){return e==null||e===lt?t:function(n){return t(e(n))}}function nt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Dt(e,t){return e===me?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var a=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var l=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?nt(a,this.onsuccess):a),u&&(this.onerror=this.onerror?nt(u,this.onerror):u),l!==void 0?l:n}}function ft(e,t){return e===me?t:function(){e.apply(this,arguments);var n=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?nt(n,this.onsuccess):n),a&&(this.onerror=this.onerror?nt(a,this.onerror):a)}}function mt(e,t){return e===me?t:function(n){var a=e.apply(this,arguments);T(n,a);var u=this.onsuccess,l=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?nt(u,this.onsuccess):u),l&&(this.onerror=this.onerror?nt(l,this.onerror):l),a===void 0?n===void 0?void 0:n:T(a,n)}}function _t(e,t){return e===me?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function St(e,t){return e===me?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var a=this,u=arguments.length,l=new Array(u);u--;)l[u]=arguments[u];return n.then(function(){return t.apply(a,l)})}return t.apply(this,arguments)}}Ze.ModifyError=ke,Ze.DexieError=ue,Ze.BulkError=Ke;var Ye=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function It(e){Ye=e}var qt={},jn=100,fe=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,E(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,E(t),e]}(),ie=fe[0],Et=fe[1],fe=fe[2],Et=Et&&Et.then,he=ie&&ie.constructor,Qe=!!fe,we=function(e,t){Mt.push([e,t]),Ie&&(queueMicrotask(Yi),Ie=!1)},Se=!0,Ie=!0,qe=[],Wt=[],gn=lt,Ne={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:me,pgp:!1,env:{},finalize:me},re=Ne,Mt=[],jt=0,Gt=[];function ne(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=re;if(typeof e!="function"){if(e!==qt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&an(this,this._value))}this._state=null,this._value=null,++t.ref,function n(a,u){try{u(function(l){if(a._state===null){if(l===a)throw new TypeError("A promise cannot be resolved with itself.");var f=a._lib&&sn();l&&typeof l.then=="function"?n(a,function(v,g){l instanceof ne?l._then(v,g):l.then(v,g)}):(a._state=!0,a._value=l,Kn(a)),f&&un()}},an.bind(null,a))}catch(l){an(a,l)}}(this,e)}var Tt={get:function(){var e=re,t=Nn;function n(a,u){var l=this,f=!e.global&&(e!==re||t!==Nn),v=f&&!Nt(),g=new ne(function(b,x){mr(l,new on(yo(a,e,f,v),yo(u,e,f,v),b,x,e))});return this._consoleTask&&(g._consoleTask=this._consoleTask),g}return n.prototype=qt,n},set:function(e){H(this,"then",e&&e.prototype===qt?Tt:{get:function(){return e},set:Tt.set})}};function on(e,t,n,a,u){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=a,this.psd=u}function an(e,t){var n,a;Wt.push(t),e._state===null&&(n=e._lib&&sn(),t=gn(t),e._state=!1,e._value=t,a=e,qe.some(function(u){return u._value===a._value})||qe.push(a),Kn(e),n&&un())}function Kn(e){var t=e._listeners;e._listeners=[];for(var n=0,a=t.length;n<a;++n)mr(e,t[n]);var u=e._PSD;--u.ref||u.finalize(),jt===0&&(++jt,we(function(){--jt==0&&yr()},[]))}function mr(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++jt,we(Ui,[n,e,t])}else e._listeners.push(t)}function Ui(e,t,n){try{var a,u=t._value;!t._state&&Wt.length&&(Wt=[]),a=Ye&&t._consoleTask?t._consoleTask.run(function(){return e(u)}):e(u),t._state||Wt.indexOf(u)!==-1||function(l){for(var f=qe.length;f;)if(qe[--f]._value===l._value)return qe.splice(f,1)}(t),n.resolve(a)}catch(l){n.reject(l)}finally{--jt==0&&yr(),--n.psd.ref||n.psd.finalize()}}function Yi(){Qt(Ne,function(){sn()&&un()})}function sn(){var e=Se;return Ie=Se=!1,e}function un(){var e,t,n;do for(;0<Mt.length;)for(e=Mt,Mt=[],n=e.length,t=0;t<n;++t){var a=e[t];a[0].apply(null,a[1])}while(0<Mt.length);Ie=Se=!0}function yr(){var e=qe;qe=[],e.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var t=Gt.slice(0),n=t.length;n;)t[--n]()}function Fn(e){return new ne(qt,!1,e)}function Ge(e,t){var n=re;return function(){var a=sn(),u=re;try{return Bt(n,!0),e.apply(this,arguments)}catch(l){t&&t(l)}finally{Bt(u,!1),a&&un()}}}S(ne.prototype,{then:Tt,_then:function(e,t){mr(this,new on(null,null,e,t,re))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(a){return(a instanceof t?n:Fn)(a)}):this.then(null,function(a){return(a&&a.name===t?n:Fn)(a)})},finally:function(e){return this.then(function(t){return ne.resolve(e()).then(function(){return t})},function(t){return ne.resolve(e()).then(function(){return Fn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new ne(function(a,u){var l=setTimeout(function(){return u(new oe.Timeout(t))},e);n.then(a,u).finally(clearTimeout.bind(null,l))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&H(ne.prototype,Symbol.toStringTag,"Dexie.Promise"),Ne.env=mo(),S(ne,{all:function(){var e=be.apply(null,arguments).map(Bn);return new ne(function(t,n){e.length===0&&t([]);var a=e.length;e.forEach(function(u,l){return ne.resolve(u).then(function(f){e[l]=f,--a||t(e)},n)})})},resolve:function(e){return e instanceof ne?e:e&&typeof e.then=="function"?new ne(function(t,n){e.then(t,n)}):new ne(qt,!0,e)},reject:Fn,race:function(){var e=be.apply(null,arguments).map(Bn);return new ne(function(t,n){e.map(function(a){return ne.resolve(a).then(t,n)})})},PSD:{get:function(){return re},set:function(e){return re=e}},totalEchoes:{get:function(){return Nn}},newPSD:Rt,usePSD:Qt,scheduler:{get:function(){return we},set:function(e){we=e}},rejectionMapper:{get:function(){return gn},set:function(e){gn=e}},follow:function(e,t){return new ne(function(n,a){return Rt(function(u,l){var f=re;f.unhandleds=[],f.onunhandled=l,f.finalize=nt(function(){var v,g=this;v=function(){g.unhandleds.length===0?u():l(g.unhandleds[0])},Gt.push(function b(){v(),Gt.splice(Gt.indexOf(b),1)}),++jt,we(function(){--jt==0&&yr()},[])},f.finalize),e()},t,n,a)})}}),he&&(he.allSettled&&H(ne,"allSettled",function(){var e=be.apply(null,arguments).map(Bn);return new ne(function(t){e.length===0&&t([]);var n=e.length,a=new Array(n);e.forEach(function(u,l){return ne.resolve(u).then(function(f){return a[l]={status:"fulfilled",value:f}},function(f){return a[l]={status:"rejected",reason:f}}).then(function(){return--n||t(a)})})})}),he.any&&typeof AggregateError<"u"&&H(ne,"any",function(){var e=be.apply(null,arguments).map(Bn);return new ne(function(t,n){e.length===0&&n(new AggregateError([]));var a=e.length,u=new Array(a);e.forEach(function(l,f){return ne.resolve(l).then(function(v){return t(v)},function(v){u[f]=v,--a||n(new AggregateError(u))})})})}),he.withResolvers&&(ne.withResolvers=he.withResolvers));var ot={awaits:0,echoes:0,id:0},Vi=0,qn=[],Rn=0,Nn=0,Wi=0;function Rt(e,t,n,a){var u=re,l=Object.create(u);return l.parent=u,l.ref=0,l.global=!1,l.id=++Wi,Ne.env,l.env=Qe?{Promise:ne,PromiseProp:{value:ne,configurable:!0,writable:!0},all:ne.all,race:ne.race,allSettled:ne.allSettled,any:ne.any,resolve:ne.resolve,reject:ne.reject}:{},t&&T(l,t),++u.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()},a=Qt(l,e,n,a),l.ref===0&&l.finalize(),a}function ln(){return ot.id||(ot.id=++Vi),++ot.awaits,ot.echoes+=jn,ot.id}function Nt(){return!!ot.awaits&&(--ot.awaits==0&&(ot.id=0),ot.echoes=ot.awaits*jn,!0)}function Bn(e){return ot.echoes&&e&&e.constructor===he?(ln(),e.then(function(t){return Nt(),t},function(t){return Nt(),$e(t)})):e}function Gi(){var e=qn[qn.length-1];qn.pop(),Bt(e,!1)}function Bt(e,t){var n,a=re;(t?!ot.echoes||Rn++&&e===re:!Rn||--Rn&&e===re)||queueMicrotask(t?(function(u){++Nn,ot.echoes&&--ot.echoes!=0||(ot.echoes=ot.awaits=ot.id=0),qn.push(re),Bt(u,!0)}).bind(null,e):Gi),e!==re&&(re=e,a===Ne&&(Ne.env=mo()),Qe&&(n=Ne.env.Promise,t=e.env,(a.global||e.global)&&(Object.defineProperty(d,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function mo(){var e=d.Promise;return Qe?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Qt(e,t,n,a,u){var l=re;try{return Bt(e,!0),t(n,a,u)}finally{Bt(l,!1)}}function yo(e,t,n,a){return typeof e!="function"?e:function(){var u=re;n&&ln(),Bt(t,!0);try{return e.apply(this,arguments)}finally{Bt(u,!1),a&&queueMicrotask(Nt)}}}function br(e){Promise===he&&ot.echoes===0?Rn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Et).indexOf("[native code]")===-1&&(ln=Nt=me);var $e=ne.reject,Jt="ï¿¿",Kt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bo="String expected.",cn=[],Hn="__dbnames",_r="readonly",wr="readwrite";function Xt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var _o={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function zn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=Re(t))[e],t}}function wo(){throw oe.Type()}function Ae(e,t){try{var n=xo(e),a=xo(t);if(n!==a)return n==="Array"?1:a==="Array"?-1:n==="binary"?1:a==="binary"?-1:n==="string"?1:a==="string"?-1:n==="Date"?1:a!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(u,l){for(var f=u.length,v=l.length,g=f<v?f:v,b=0;b<g;++b)if(u[b]!==l[b])return u[b]<l[b]?-1:1;return f===v?0:f<v?-1:1}(ko(e),ko(t));case"Array":return function(u,l){for(var f=u.length,v=l.length,g=f<v?f:v,b=0;b<g;++b){var x=Ae(u[b],l[b]);if(x!==0)return x}return f===v?0:f<v?-1:1}(e,t)}}catch{}return NaN}function xo(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=ze(e),e==="ArrayBuffer"?"binary":e)}function ko(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Do=(We.prototype._trans=function(e,t,n){var a=this._tx||re.trans,u=this.name,l=Ye&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function f(b,x,p){if(!p.schema[u])throw new oe.NotFound("Table "+u+" not part of transaction");return t(p.idbtrans,p)}var v=sn();try{var g=a&&a.db._novip===this.db._novip?a===re.trans?a._promise(e,f,n):Rt(function(){return a._promise(e,f,n)},{trans:a,transless:re.transless||re}):function b(x,p,D,y){if(x.idbdb&&(x._state.openComplete||re.letThrough||x._vip)){var w=x._createTransaction(p,D,x._dbSchema);try{w.create(),x._state.PR1398_maxLoop=3}catch(k){return k.name===Pe.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return b(x,p,D,y)})):$e(k)}return w._promise(p,function(k,_){return Rt(function(){return re.trans=w,y(k,_,w)})}).then(function(k){if(p==="readwrite")try{w.idbtrans.commit()}catch{}return p==="readonly"?k:w._completion.then(function(){return k})})}if(x._state.openComplete)return $e(new oe.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return $e(new oe.DatabaseClosed);x.open().catch(me)}return x._state.dbReadyPromise.then(function(){return b(x,p,D,y)})}(this.db,e,[this.name],f);return l&&(g._consoleTask=l,g=g.catch(function(b){return console.trace(b),$e(b)})),g}finally{v&&un()}},We.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?$e(new oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return n.core.get({trans:a,key:e}).then(function(u){return n.hook.reading.fire(u)})}).then(t)},We.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(m(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=h(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&t.every(function(b){return 0<=v.keyPath.indexOf(b)})){for(var g=0;g<t.length;++g)if(t.indexOf(v.keyPath[g])===-1)return!1;return!0}return!1}).sort(function(v,g){return v.keyPath.length-g.keyPath.length})[0];if(n&&this.db._maxKey!==Jt){var l=n.keyPath.slice(0,t.length);return this.where(l).equals(l.map(function(g){return e[g]}))}!n&&Ye&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var a=this.schema.idxByName;function u(v,g){return Ae(v,g)===0}var f=t.reduce(function(p,g){var b=p[0],x=p[1],p=a[g],D=e[g];return[b||p,b||!p?Xt(x,p&&p.multi?function(y){return y=W(y,g),m(y)&&y.some(function(w){return u(D,w)})}:function(y){return u(D,W(y,g))}):x]},[null,null]),l=f[0],f=f[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(f):n?this.filter(f):this.where(t).equals("")},We.prototype.filter=function(e){return this.toCollection().and(e)},We.prototype.count=function(e){return this.toCollection().count(e)},We.prototype.offset=function(e){return this.toCollection().offset(e)},We.prototype.limit=function(e){return this.toCollection().limit(e)},We.prototype.each=function(e){return this.toCollection().each(e)},We.prototype.toArray=function(e){return this.toCollection().toArray(e)},We.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},We.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,m(e)?"[".concat(e.join("+"),"]"):e))},We.prototype.reverse=function(){return this.toCollection().reverse()},We.prototype.mapToClass=function(e){var t,n=this.db,a=this.name;function u(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof wo&&(function(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function x(){this.constructor=g}i(g,b),g.prototype=b===null?Object.create(b):(x.prototype=b.prototype,new x)}(u,t=e),Object.defineProperty(u.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),u.prototype.table=function(){return a},e=u);for(var l=new Set,f=e.prototype;f;f=E(f))Object.getOwnPropertyNames(f).forEach(function(g){return l.add(g)});function v(g){if(!g)return g;var b,x=Object.create(e.prototype);for(b in g)if(!l.has(b))try{x[b]=g[b]}catch{}return x}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),e},We.prototype.defineClass=function(){return this.mapToClass(function(e){T(this,e)})},We.prototype.add=function(e,t){var n=this,a=this.schema.primKey,u=a.auto,l=a.keyPath,f=e;return l&&u&&(f=zn(l)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"add",keys:t!=null?[t]:null,values:[f]})}).then(function(v){return v.numFailures?ne.reject(v.failures[0]):v.lastResult}).then(function(v){if(l)try{U(e,l,v)}catch{}return v})},We.prototype.update=function(e,t){return typeof e!="object"||m(e)?this.where(":id").equals(e).modify(t):(e=W(e,this.schema.primKey.keyPath),e===void 0?$e(new oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},We.prototype.put=function(e,t){var n=this,a=this.schema.primKey,u=a.auto,l=a.keyPath,f=e;return l&&u&&(f=zn(l)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"put",values:[f],keys:t!=null?[t]:null})}).then(function(v){return v.numFailures?ne.reject(v.failures[0]):v.lastResult}).then(function(v){if(l)try{U(e,l,v)}catch{}return v})},We.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?ne.reject(n.failures[0]):void 0})},We.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:_o})}).then(function(t){return t.numFailures?ne.reject(t.failures[0]):void 0})},We.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(a){return a.map(function(u){return t.hook.reading.fire(u)})})})},We.prototype.bulkAdd=function(e,t,n){var a=this,u=Array.isArray(t)?t:void 0,l=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(f){var b=a.schema.primKey,v=b.auto,b=b.keyPath;if(b&&u)throw new oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var g=e.length,b=b&&v?e.map(zn(b)):e;return a.core.mutate({trans:f,type:"add",keys:u,values:b,wantResults:l}).then(function(w){var p=w.numFailures,D=w.results,y=w.lastResult,w=w.failures;if(p===0)return l?D:y;throw new Ke("".concat(a.name,".bulkAdd(): ").concat(p," of ").concat(g," operations failed"),w)})})},We.prototype.bulkPut=function(e,t,n){var a=this,u=Array.isArray(t)?t:void 0,l=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(f){var b=a.schema.primKey,v=b.auto,b=b.keyPath;if(b&&u)throw new oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var g=e.length,b=b&&v?e.map(zn(b)):e;return a.core.mutate({trans:f,type:"put",keys:u,values:b,wantResults:l}).then(function(w){var p=w.numFailures,D=w.results,y=w.lastResult,w=w.failures;if(p===0)return l?D:y;throw new Ke("".concat(a.name,".bulkPut(): ").concat(p," of ").concat(g," operations failed"),w)})})},We.prototype.bulkUpdate=function(e){var t=this,n=this.core,a=e.map(function(f){return f.key}),u=e.map(function(f){return f.changes}),l=[];return this._trans("readwrite",function(f){return n.getMany({trans:f,keys:a,cache:"clone"}).then(function(v){var g=[],b=[];e.forEach(function(p,D){var y=p.key,w=p.changes,k=v[D];if(k){for(var _=0,O=Object.keys(w);_<O.length;_++){var A=O[_],j=w[A];if(A===t.schema.primKey.keyPath){if(Ae(j,y)!==0)throw new oe.Constraint("Cannot update primary key in bulkUpdate()")}else U(k,A,j)}l.push(D),g.push(y),b.push(k)}});var x=g.length;return n.mutate({trans:f,type:"put",keys:g,values:b,updates:{keys:a,changeSpecs:u}}).then(function(p){var D=p.numFailures,y=p.failures;if(D===0)return x;for(var w=0,k=Object.keys(y);w<k.length;w++){var _,O=k[w],A=l[Number(O)];A!=null&&(_=y[O],delete y[O],y[A]=_)}throw new Ke("".concat(t.name,".bulkUpdate(): ").concat(D," of ").concat(x," operations failed"),y)})})})},We.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"delete",keys:e})}).then(function(f){var u=f.numFailures,l=f.lastResult,f=f.failures;if(u===0)return l;throw new Ke("".concat(t.name,".bulkDelete(): ").concat(u," of ").concat(n," operations failed"),f)})},We);function We(){}function mn(e){function t(f,v){if(v){for(var g=arguments.length,b=new Array(g-1);--g;)b[g-1]=arguments[g];return n[f].subscribe.apply(null,b),e}if(typeof f=="string")return n[f]}var n={};t.addEventType=l;for(var a=1,u=arguments.length;a<u;++a)l(arguments[a]);return t;function l(f,v,g){if(typeof f!="object"){var b;v=v||_t;var x={subscribers:[],fire:g=g||me,subscribe:function(p){x.subscribers.indexOf(p)===-1&&(x.subscribers.push(p),x.fire=v(x.fire,p))},unsubscribe:function(p){x.subscribers=x.subscribers.filter(function(D){return D!==p}),x.fire=x.subscribers.reduce(v,g)}};return n[f]=t[f]=x}h(b=f).forEach(function(p){var D=b[p];if(m(D))l(p,b[p][0],b[p][1]);else{if(D!=="asap")throw new oe.InvalidArgument("Invalid event config");var y=l(p,lt,function(){for(var w=arguments.length,k=new Array(w);w--;)k[w]=arguments[w];y.subscribers.forEach(function(_){Y(function(){_.apply(null,k)})})})}})}}function yn(e,t){return z(t).from({prototype:e}),t}function fn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function xr(e,t){e.filter=Xt(e.filter,t)}function kr(e,t,n){var a=e.replayFilter;e.replayFilter=a?function(){return Xt(a(),t())}:t,e.justLimit=n&&!a}function Ln(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new oe.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function So(e,t,n){var a=Ln(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:a,range:e.range}})}function Un(e,t,n,a){var u=e.replayFilter?Xt(e.filter,e.replayFilter()):e.filter;if(e.or){var l={},f=function(v,g,b){var x,p;u&&!u(g,b,function(D){return g.stop(D)},function(D){return g.fail(D)})||((p=""+(x=g.primaryKey))=="[object ArrayBuffer]"&&(p=""+new Uint8Array(x)),q(l,p)||(l[p]=!0,t(v,g,b)))};return Promise.all([e.or._iterate(f,n),To(So(e,a,n),e.algorithm,f,!e.keysOnly&&e.valueMapper)])}return To(So(e,a,n),Xt(e.algorithm,u),t,!e.keysOnly&&e.valueMapper)}function To(e,t,n,a){var u=Ge(a?function(l,f,v){return n(a(l),f,v)}:n);return e.then(function(l){if(l)return l.start(function(){var f=function(){return l.continue()};t&&!t(l,function(v){return f=v},function(v){l.stop(v),f=me},function(v){l.fail(v),f=me})||u(l.value,l,function(v){return f=v}),f()})})}var bn=(Eo.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(m(n))return c(c([],m(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var a=t.remove;if(m(a))return m(e)?e.filter(function(u){return!a.includes(u)}).sort():[];if(typeof a=="number")return Number(e)-a;if(typeof a=="bigint")try{return BigInt(e)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Eo);function Eo(e){this["@@propmod"]=e}var Qi=(Fe.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,$e.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Fe.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,$e.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Fe.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Xt(t.algorithm,e)},Fe.prototype._iterate=function(e,t){return Un(this._ctx,e,t,this._ctx.table.core)},Fe.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&T(n,e),t._ctx=n,t},Fe.prototype.raw=function(){return this._ctx.valueMapper=null,this},Fe.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Un(t,e,n,t.table.core)})},Fe.prototype.count=function(e){var t=this;return this._read(function(n){var a=t._ctx,u=a.table.core;if(fn(a,!0))return u.count({trans:n,query:{index:Ln(a,u.schema),range:a.range}}).then(function(f){return Math.min(f,a.limit)});var l=0;return Un(a,function(){return++l,!1},n,u).then(function(){return l})}).then(e)},Fe.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),a=n[0],u=n.length-1;function l(g,b){return b?l(g[n[b]],b-1):g[a]}var f=this._ctx.dir==="next"?1:-1;function v(g,b){return Ae(l(g,u),l(b,u))*f}return this.toArray(function(g){return g.sort(v)}).then(t)},Fe.prototype.toArray=function(e){var t=this;return this._read(function(n){var a=t._ctx;if(a.dir==="next"&&fn(a,!0)&&0<a.limit){var u=a.valueMapper,l=Ln(a,a.table.core.schema);return a.table.core.query({trans:n,limit:a.limit,values:!0,query:{index:l,range:a.range}}).then(function(v){return v=v.result,u?v.map(u):v})}var f=[];return Un(a,function(v){return f.push(v)},n,a.table.core).then(function(){return f})},e)},Fe.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,fn(t)?kr(t,function(){var n=e;return function(a,u){return n===0||(n===1?--n:u(function(){a.advance(n),n=0}),!1)}}):kr(t,function(){var n=e;return function(){return--n<0}})),this},Fe.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),kr(this._ctx,function(){var t=e;return function(n,a,u){return--t<=0&&a(u),0<=t}},!0),this},Fe.prototype.until=function(e,t){return xr(this._ctx,function(n,a,u){return!e(n.value)||(a(u),t)}),this},Fe.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},Fe.prototype.last=function(e){return this.reverse().first(e)},Fe.prototype.filter=function(e){var t;return xr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=Xt(t.isMatch,e),this},Fe.prototype.and=function(e){return this.filter(e)},Fe.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Fe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Fe.prototype.desc=function(){return this.reverse()},Fe.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,a){e(a.key,a)})},Fe.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Fe.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,a){e(a.primaryKey,a)})},Fe.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(a,u){n.push(u.key)}).then(function(){return n}).then(e)},Fe.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&fn(t,!0)&&0<t.limit)return this._read(function(a){var u=Ln(t,t.table.core.schema);return t.table.core.query({trans:a,values:!1,limit:t.limit,query:{index:u,range:t.range}})}).then(function(a){return a.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(a,u){n.push(u.primaryKey)}).then(function(){return n}).then(e)},Fe.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Fe.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},Fe.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Fe.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return xr(this._ctx,function(u){var a=u.primaryKey.toString(),u=q(t,a);return t[a]=!0,!u}),this},Fe.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(a){var u,l,f;f=typeof e=="function"?e:(u=h(e),l=u.length,function(_){for(var O=!1,A=0;A<l;++A){var j=u[A],R=e[j],G=W(_,j);R instanceof bn?(U(_,j,R.execute(G)),O=!0):G!==R&&(U(_,j,R),O=!0)}return O});var v=n.table.core,p=v.schema.primaryKey,g=p.outbound,b=p.extractKey,x=200,p=t.db._options.modifyChunkSize;p&&(x=typeof p=="object"?p[v.name]||p["*"]||200:p);function D(_,j){var A=j.failures,j=j.numFailures;w+=_-j;for(var R=0,G=h(A);R<G.length;R++){var Z=G[R];y.push(A[Z])}}var y=[],w=0,k=[];return t.clone().primaryKeys().then(function(_){function O(j){var R=Math.min(x,_.length-j);return v.getMany({trans:a,keys:_.slice(j,j+R),cache:"immutable"}).then(function(G){for(var Z=[],Q=[],J=g?[]:null,ee=[],X=0;X<R;++X){var ae=G[X],ye={value:Re(ae),primKey:_[j+X]};f.call(ye,ye.value,ye)!==!1&&(ye.value==null?ee.push(_[j+X]):g||Ae(b(ae),b(ye.value))===0?(Q.push(ye.value),g&&J.push(_[j+X])):(ee.push(_[j+X]),Z.push(ye.value)))}return Promise.resolve(0<Z.length&&v.mutate({trans:a,type:"add",values:Z}).then(function(Te){for(var Ee in Te.failures)ee.splice(parseInt(Ee),1);D(Z.length,Te)})).then(function(){return(0<Q.length||A&&typeof e=="object")&&v.mutate({trans:a,type:"put",keys:J,values:Q,criteria:A,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<j}).then(function(Te){return D(Q.length,Te)})}).then(function(){return(0<ee.length||A&&e===Dr)&&v.mutate({trans:a,type:"delete",keys:ee,criteria:A,isAdditionalChunk:0<j}).then(function(Te){return D(ee.length,Te)})}).then(function(){return _.length>j+R&&O(j+x)})})}var A=fn(n)&&n.limit===1/0&&(typeof e!="function"||e===Dr)&&{index:n.index,range:n.range};return O(0).then(function(){if(0<y.length)throw new ke("Error modifying one or more objects",y,w,k);return _.length})})})},Fe.prototype.delete=function(){var e=this._ctx,t=e.range;return fn(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var a=e.table.core.schema.primaryKey,u=t;return e.table.core.count({trans:n,query:{index:a,range:u}}).then(function(l){return e.table.core.mutate({trans:n,type:"deleteRange",range:u}).then(function(f){var v=f.failures;if(f.lastResult,f.results,f=f.numFailures,f)throw new ke("Could not delete some values",Object.keys(v).map(function(g){return v[g]}),l-f);return l-f})})}):this.modify(Dr)},Fe);function Fe(){}var Dr=function(e,t){return t.value=null};function Ji(e,t){return e<t?-1:e===t?0:1}function Xi(e,t){return t<e?-1:e===t?0:1}function xt(e,t,n){return e=e instanceof Co?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function dn(e){return new e.Collection(e,function(){return Oo("")}).limit(0)}function Yn(e,t,n,a){var u,l,f,v,g,b,x,p=n.length;if(!n.every(function(w){return typeof w=="string"}))return xt(e,bo);function D(w){u=w==="next"?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()},l=w==="next"?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()},f=w==="next"?Ji:Xi;var k=n.map(function(_){return{lower:l(_),upper:u(_)}}).sort(function(_,O){return f(_.lower,O.lower)});v=k.map(function(_){return _.upper}),g=k.map(function(_){return _.lower}),x=(b=w)==="next"?"":a}D("next"),e=new e.Collection(e,function(){return Ht(v[0],g[p-1]+a)}),e._ondirectionchange=function(w){D(w)};var y=0;return e._addAlgorithm(function(w,k,_){var O=w.key;if(typeof O!="string")return!1;var A=l(O);if(t(A,g,y))return!0;for(var j=null,R=y;R<p;++R){var G=function(Z,Q,J,ee,X,ae){for(var ye=Math.min(Z.length,ee.length),Te=-1,Ee=0;Ee<ye;++Ee){var kt=Q[Ee];if(kt!==ee[Ee])return X(Z[Ee],J[Ee])<0?Z.substr(0,Ee)+J[Ee]+J.substr(Ee+1):X(Z[Ee],ee[Ee])<0?Z.substr(0,Ee)+ee[Ee]+J.substr(Ee+1):0<=Te?Z.substr(0,Te)+Q[Te]+J.substr(Te+1):null;X(Z[Ee],kt)<0&&(Te=Ee)}return ye<ee.length&&ae==="next"?Z+J.substr(Z.length):ye<Z.length&&ae==="prev"?Z.substr(0,J.length):Te<0?null:Z.substr(0,Te)+ee[Te]+J.substr(Te+1)}(O,A,v[R],g[R],f,b);G===null&&j===null?y=R+1:(j===null||0<f(j,G))&&(j=G)}return k(j!==null?function(){w.continue(j+x)}:_),!1}),e}function Ht(e,t,n,a){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:a}}function Oo(e){return{type:1,lower:e,upper:e}}var Co=(Object.defineProperty(it.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),it.prototype.between=function(e,t,n,a){n=n!==!1,a=a===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||a)&&(!n||!a)?dn(this):new this.Collection(this,function(){return Ht(e,t,!n,!a)})}catch{return xt(this,Kt)}},it.prototype.equals=function(e){return e==null?xt(this,Kt):new this.Collection(this,function(){return Oo(e)})},it.prototype.above=function(e){return e==null?xt(this,Kt):new this.Collection(this,function(){return Ht(e,void 0,!0)})},it.prototype.aboveOrEqual=function(e){return e==null?xt(this,Kt):new this.Collection(this,function(){return Ht(e,void 0,!1)})},it.prototype.below=function(e){return e==null?xt(this,Kt):new this.Collection(this,function(){return Ht(void 0,e,!1,!0)})},it.prototype.belowOrEqual=function(e){return e==null?xt(this,Kt):new this.Collection(this,function(){return Ht(void 0,e)})},it.prototype.startsWith=function(e){return typeof e!="string"?xt(this,bo):this.between(e,e+Jt,!0,!0)},it.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Yn(this,function(t,n){return t.indexOf(n[0])===0},[e],Jt)},it.prototype.equalsIgnoreCase=function(e){return Yn(this,function(t,n){return t===n[0]},[e],"")},it.prototype.anyOfIgnoreCase=function(){var e=be.apply(De,arguments);return e.length===0?dn(this):Yn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},it.prototype.startsWithAnyOfIgnoreCase=function(){var e=be.apply(De,arguments);return e.length===0?dn(this):Yn(this,function(t,n){return n.some(function(a){return t.indexOf(a)===0})},e,Jt)},it.prototype.anyOf=function(){var e=this,t=be.apply(De,arguments),n=this._cmp;try{t.sort(n)}catch{return xt(this,Kt)}if(t.length===0)return dn(this);var a=new this.Collection(this,function(){return Ht(t[0],t[t.length-1])});a._ondirectionchange=function(l){n=l==="next"?e._ascending:e._descending,t.sort(n)};var u=0;return a._addAlgorithm(function(l,f,v){for(var g=l.key;0<n(g,t[u]);)if(++u===t.length)return f(v),!1;return n(g,t[u])===0||(f(function(){l.continue(t[u])}),!1)}),a},it.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},it.prototype.noneOf=function(){var e=be.apply(De,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return xt(this,Kt)}var t=e.reduce(function(n,a){return n?n.concat([[n[n.length-1][1],a]]):[[-1/0,a]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},it.prototype.inAnyRange=function(O,t){var n=this,a=this._cmp,u=this._ascending,l=this._descending,f=this._min,v=this._max;if(O.length===0)return dn(this);if(!O.every(function(A){return A[0]!==void 0&&A[1]!==void 0&&u(A[0],A[1])<=0}))return xt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",oe.InvalidArgument);var g=!t||t.includeLowers!==!1,b=t&&t.includeUppers===!0,x,p=u;function D(A,j){return p(A[0],j[0])}try{(x=O.reduce(function(A,j){for(var R=0,G=A.length;R<G;++R){var Z=A[R];if(a(j[0],Z[1])<0&&0<a(j[1],Z[0])){Z[0]=f(Z[0],j[0]),Z[1]=v(Z[1],j[1]);break}}return R===G&&A.push(j),A},[])).sort(D)}catch{return xt(this,Kt)}var y=0,w=b?function(A){return 0<u(A,x[y][1])}:function(A){return 0<=u(A,x[y][1])},k=g?function(A){return 0<l(A,x[y][0])}:function(A){return 0<=l(A,x[y][0])},_=w,O=new this.Collection(this,function(){return Ht(x[0][0],x[x.length-1][1],!g,!b)});return O._ondirectionchange=function(A){p=A==="next"?(_=w,u):(_=k,l),x.sort(D)},O._addAlgorithm(function(A,j,R){for(var G,Z=A.key;_(Z);)if(++y===x.length)return j(R),!1;return!w(G=Z)&&!k(G)||(n._cmp(Z,x[y][1])===0||n._cmp(Z,x[y][0])===0||j(function(){p===u?A.continue(x[y][0]):A.continue(x[y][1])}),!1)}),O},it.prototype.startsWithAnyOf=function(){var e=be.apply(De,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?dn(this):this.inAnyRange(e.map(function(t){return[t,t+Jt]})):xt(this,"startsWithAnyOf() only works with strings")},it);function it(){}function Pt(e){return Ge(function(t){return _n(t),e(t.target.error),!1})}function _n(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var wn="storagemutated",Sr="x-storagemutated-1",zt=mn(null,wn),Zi=(At.prototype._lock=function(){return M(!re.global),++this._reculock,this._reculock!==1||re.global||(re.lockOwnerFor=this),this},At.prototype._unlock=function(){if(M(!re.global),--this._reculock==0)for(re.global||(re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Qt(e[1],e[0])}catch{}}return this},At.prototype._locked=function(){return this._reculock&&re.lockOwnerFor!==this},At.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,a=this.db._state.dbOpenError;if(M(!this.idbtrans),!e&&!n)switch(a&&a.name){case"DatabaseClosedError":throw new oe.DatabaseClosed(a);case"MissingAPIError":throw new oe.MissingAPI(a.message,a);default:throw new oe.OpenFailed(a)}if(!this.active)throw new oe.TransactionInactive;return M(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ge(function(u){_n(u),t._reject(e.error)}),e.onabort=Ge(function(u){_n(u),t.active&&t._reject(new oe.Abort(e.error)),t.active=!1,t.on("abort").fire(u)}),e.oncomplete=Ge(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&zt.storagemutated.fire(e.mutatedParts)}),this},At.prototype._promise=function(e,t,n){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return $e(new oe.ReadOnly("Transaction is readonly"));if(!this.active)return $e(new oe.TransactionInactive);if(this._locked())return new ne(function(l,f){a._blockedFuncs.push([function(){a._promise(e,t,n).then(l,f)},re])});if(n)return Rt(function(){var l=new ne(function(f,v){a._lock();var g=t(f,v,a);g&&g.then&&g.then(f,v)});return l.finally(function(){return a._unlock()}),l._lib=!0,l});var u=new ne(function(l,f){var v=t(l,f,a);v&&v.then&&v.then(l,f)});return u._lib=!0,u},At.prototype._root=function(){return this.parent?this.parent._root():this},At.prototype.waitFor=function(e){var t,n=this._root(),a=ne.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return a}):(n._waitingFor=a,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function l(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=l)}());var u=n._waitingFor;return new ne(function(l,f){a.then(function(v){return n._waitingQueue.push(Ge(l.bind(null,v)))},function(v){return n._waitingQueue.push(Ge(f.bind(null,v)))}).finally(function(){n._waitingFor===u&&(n._waitingFor=null)})})},At.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new oe.Abort))},At.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(q(t,e))return t[e];var n=this.schema[e];if(!n)throw new oe.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},At);function At(){}function Tr(e,t,n,a,u,l,f){return{name:e,keyPath:t,unique:n,multi:a,auto:u,compound:l,src:(n&&!f?"&":"")+(a?"*":"")+(u?"++":"")+Io(t)}}function Io(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Er(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(a=function(u){return[u.name,u]},n.reduce(function(u,l,f){return f=a(l,f),f&&(u[f[0]]=f[1]),u},{}))};var a}var xn=function(e){try{return e.only([[]]),xn=function(){return[[]]},[[]]}catch{return xn=function(){return Jt},Jt}};function Or(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return W(n,t)}:function(n){return W(n,e)};var t}function Po(e){return[].slice.call(e)}var $i=0;function kn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function ea(e,t,g){function a(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var y=_.lower,w=_.upper,k=_.lowerOpen,_=_.upperOpen;return y===void 0?w===void 0?null:t.upperBound(w,!!_):w===void 0?t.lowerBound(y,!!k):t.bound(y,w,!!k,!!_)}function u(D){var y,w=D.name;return{name:w,schema:D,mutate:function(k){var _=k.trans,O=k.type,A=k.keys,j=k.values,R=k.range;return new Promise(function(G,Z){G=Ge(G);var Q=_.objectStore(w),J=Q.keyPath==null,ee=O==="put"||O==="add";if(!ee&&O!=="delete"&&O!=="deleteRange")throw new Error("Invalid operation type: "+O);var X,ae=(A||j||{length:1}).length;if(A&&j&&A.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(ae===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function ye(yt){++kt,_n(yt)}var Te=[],Ee=[],kt=0;if(O==="deleteRange"){if(R.type===4)return G({numFailures:kt,failures:Ee,results:[],lastResult:void 0});R.type===3?Te.push(X=Q.clear()):Te.push(X=Q.delete(a(R)))}else{var J=ee?J?[j,A]:[j,null]:[A,null],ge=J[0],ht=J[1];if(ee)for(var vt=0;vt<ae;++vt)Te.push(X=ht&&ht[vt]!==void 0?Q[O](ge[vt],ht[vt]):Q[O](ge[vt])),X.onerror=ye;else for(vt=0;vt<ae;++vt)Te.push(X=Q[O](ge[vt])),X.onerror=ye}function or(yt){yt=yt.target.result,Te.forEach(function(en,Vr){return en.error!=null&&(Ee[Vr]=en.error)}),G({numFailures:kt,failures:Ee,results:O==="delete"?A:Te.map(function(en){return en.result}),lastResult:yt})}X.onerror=function(yt){ye(yt),or(yt)},X.onsuccess=or})},getMany:function(k){var _=k.trans,O=k.keys;return new Promise(function(A,j){A=Ge(A);for(var R,G=_.objectStore(w),Z=O.length,Q=new Array(Z),J=0,ee=0,X=function(Te){Te=Te.target,Q[Te._pos]=Te.result,++ee===J&&A(Q)},ae=Pt(j),ye=0;ye<Z;++ye)O[ye]!=null&&((R=G.get(O[ye]))._pos=ye,R.onsuccess=X,R.onerror=ae,++J);J===0&&A(Q)})},get:function(k){var _=k.trans,O=k.key;return new Promise(function(A,j){A=Ge(A);var R=_.objectStore(w).get(O);R.onsuccess=function(G){return A(G.target.result)},R.onerror=Pt(j)})},query:(y=b,function(k){return new Promise(function(_,O){_=Ge(_);var A,j,R,J=k.trans,G=k.values,Z=k.limit,X=k.query,Q=Z===1/0?void 0:Z,ee=X.index,X=X.range,J=J.objectStore(w),ee=ee.isPrimaryKey?J:J.index(ee.name),X=a(X);if(Z===0)return _({result:[]});y?((Q=G?ee.getAll(X,Q):ee.getAllKeys(X,Q)).onsuccess=function(ae){return _({result:ae.target.result})},Q.onerror=Pt(O)):(A=0,j=!G&&"openKeyCursor"in ee?ee.openKeyCursor(X):ee.openCursor(X),R=[],j.onsuccess=function(ae){var ye=j.result;return ye?(R.push(G?ye.value:ye.primaryKey),++A===Z?_({result:R}):void ye.continue()):_({result:R})},j.onerror=Pt(O))})}),openCursor:function(k){var _=k.trans,O=k.values,A=k.query,j=k.reverse,R=k.unique;return new Promise(function(G,Z){G=Ge(G);var ee=A.index,Q=A.range,J=_.objectStore(w),J=ee.isPrimaryKey?J:J.index(ee.name),ee=j?R?"prevunique":"prev":R?"nextunique":"next",X=!O&&"openKeyCursor"in J?J.openKeyCursor(a(Q),ee):J.openCursor(a(Q),ee);X.onerror=Pt(Z),X.onsuccess=Ge(function(ae){var ye,Te,Ee,kt,ge=X.result;ge?(ge.___id=++$i,ge.done=!1,ye=ge.continue.bind(ge),Te=(Te=ge.continuePrimaryKey)&&Te.bind(ge),Ee=ge.advance.bind(ge),kt=function(){throw new Error("Cursor not stopped")},ge.trans=_,ge.stop=ge.continue=ge.continuePrimaryKey=ge.advance=function(){throw new Error("Cursor not started")},ge.fail=Ge(Z),ge.next=function(){var ht=this,vt=1;return this.start(function(){return vt--?ht.continue():ht.stop()}).then(function(){return ht})},ge.start=function(ht){function vt(){if(X.result)try{ht()}catch(yt){ge.fail(yt)}else ge.done=!0,ge.start=function(){throw new Error("Cursor behind last entry")},ge.stop()}var or=new Promise(function(yt,en){yt=Ge(yt),X.onerror=Pt(en),ge.fail=en,ge.stop=function(Vr){ge.stop=ge.continue=ge.continuePrimaryKey=ge.advance=kt,yt(Vr)}});return X.onsuccess=Ge(function(yt){X.onsuccess=vt,vt()}),ge.continue=ye,ge.continuePrimaryKey=Te,ge.advance=Ee,vt(),or},G(ge)):G(null)},Z)})},count:function(k){var _=k.query,O=k.trans,A=_.index,j=_.range;return new Promise(function(R,G){var Z=O.objectStore(w),Q=A.isPrimaryKey?Z:Z.index(A.name),Z=a(j),Q=Z?Q.count(Z):Q.count();Q.onsuccess=Ge(function(J){return R(J.target.result)}),Q.onerror=Pt(G)})}}}var l,f,v,x=(f=g,v=Po((l=e).objectStoreNames),{schema:{name:l.name,tables:v.map(function(D){return f.objectStore(D)}).map(function(D){var y=D.keyPath,_=D.autoIncrement,w=m(y),k={},_={name:D.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y==null,compound:w,keyPath:y,autoIncrement:_,unique:!0,extractKey:Or(y)},indexes:Po(D.indexNames).map(function(O){return D.index(O)}).map(function(R){var A=R.name,j=R.unique,G=R.multiEntry,R=R.keyPath,G={name:A,compound:m(R),keyPath:R,unique:j,multiEntry:G,extractKey:Or(R)};return k[kn(R)]=G}),getIndexByKeyPath:function(O){return k[kn(O)]}};return k[":id"]=_.primaryKey,y!=null&&(k[kn(y)]=_.primaryKey),_})},hasGetAll:0<v.length&&"getAll"in f.objectStore(v[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),g=x.schema,b=x.hasGetAll,x=g.tables.map(u),p={};return x.forEach(function(D){return p[D.name]=D}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(D){if(!p[D])throw new Error("Table '".concat(D,"' not found"));return p[D]},MIN_KEY:-1/0,MAX_KEY:xn(t),schema:g}}function ta(e,t,n,a){var u=n.IDBKeyRange;return n.indexedDB,{dbcore:(a=ea(t,u,a),e.dbcore.reduce(function(l,f){return f=f.create,s(s({},l),f(l))},a))}}function Vn(e,a){var n=a.db,a=ta(e._middlewares,n,e._deps,a);e.core=a.dbcore,e.tables.forEach(function(u){var l=u.name;e.core.schema.tables.some(function(f){return f.name===l})&&(u.core=e.core.table(l),e[l]instanceof e.Table&&(e[l].core=u.core))})}function Wn(e,t,n,a){n.forEach(function(u){var l=a[u];t.forEach(function(f){var v=function g(b,x){return V(b,x)||(b=E(b))&&g(b,x)}(f,u);(!v||"value"in v&&v.value===void 0)&&(f===e.Transaction.prototype||f instanceof e.Transaction?H(f,u,{get:function(){return this.table(u)},set:function(g){B(this,u,{value:g,writable:!0,configurable:!0,enumerable:!0})}}):f[u]=new e.Table(u,l))})})}function Cr(e,t){t.forEach(function(n){for(var a in n)n[a]instanceof e.Table&&delete n[a]})}function na(e,t){return e._cfg.version-t._cfg.version}function ra(e,t,n,a){var u=e._dbSchema;n.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=Er("$meta",Mo("")[0],[]),e._storeNames.push("$meta"));var l=e._createTransaction("readwrite",e._storeNames,u);l.create(n),l._completion.catch(a);var f=l._reject.bind(l),v=re.transless||re;Rt(function(){return re.trans=l,re.transless=v,t!==0?(Vn(e,n),b=t,((g=l).storeNames.includes("$meta")?g.table("$meta").get("version").then(function(x){return x??b}):ne.resolve(b)).then(function(x){return D=x,y=l,w=n,k=[],x=(p=e)._versions,_=p._dbSchema=Qn(0,p.idbdb,w),(x=x.filter(function(O){return O._cfg.version>=D})).length!==0?(x.forEach(function(O){k.push(function(){var A=_,j=O._cfg.dbschema;Jn(p,A,w),Jn(p,j,w),_=p._dbSchema=j;var R=Ir(A,j);R.add.forEach(function(ee){Pr(w,ee[0],ee[1].primKey,ee[1].indexes)}),R.change.forEach(function(ee){if(ee.recreate)throw new oe.Upgrade("Not yet support for changing primary key");var X=w.objectStore(ee.name);ee.add.forEach(function(ae){return Gn(X,ae)}),ee.change.forEach(function(ae){X.deleteIndex(ae.name),Gn(X,ae)}),ee.del.forEach(function(ae){return X.deleteIndex(ae)})});var G=O._cfg.contentUpgrade;if(G&&O._cfg.version>D){Vn(p,w),y._memoizedTables={};var Z=le(j);R.del.forEach(function(ee){Z[ee]=A[ee]}),Cr(p,[p.Transaction.prototype]),Wn(p,[p.Transaction.prototype],h(Z),Z),y.schema=Z;var Q,J=$(G);return J&&ln(),R=ne.follow(function(){var ee;(Q=G(y))&&J&&(ee=Nt.bind(null,null),Q.then(ee,ee))}),Q&&typeof Q.then=="function"?ne.resolve(Q):R.then(function(){return Q})}}),k.push(function(A){var j,R,G=O._cfg.dbschema;j=G,R=A,[].slice.call(R.db.objectStoreNames).forEach(function(Z){return j[Z]==null&&R.db.deleteObjectStore(Z)}),Cr(p,[p.Transaction.prototype]),Wn(p,[p.Transaction.prototype],p._storeNames,p._dbSchema),y.schema=p._dbSchema}),k.push(function(A){p.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(p.idbdb.version/10)===O._cfg.version?(p.idbdb.deleteObjectStore("$meta"),delete p._dbSchema.$meta,p._storeNames=p._storeNames.filter(function(j){return j!=="$meta"})):A.objectStore("$meta").put(O._cfg.version,"version"))})}),function O(){return k.length?ne.resolve(k.shift()(y.idbtrans)).then(O):ne.resolve()}().then(function(){Ao(_,w)})):ne.resolve();var p,D,y,w,k,_}).catch(f)):(h(u).forEach(function(x){Pr(n,x,u[x].primKey,u[x].indexes)}),Vn(e,n),void ne.follow(function(){return e.on.populate.fire(l)}).catch(f));var g,b})}function oa(e,t){Ao(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Qn(0,e.idbdb,t);Jn(e,e._dbSchema,t);for(var a=0,u=Ir(n,e._dbSchema).change;a<u.length;a++){var l=function(f){if(f.change.length||f.recreate)return console.warn("Unable to patch indexes of table ".concat(f.name," because it has changes on the type of index or primary key.")),{value:void 0};var v=t.objectStore(f.name);f.add.forEach(function(g){Ye&&console.debug("Dexie upgrade patch: Creating missing index ".concat(f.name,".").concat(g.src)),Gn(v,g)})}(u[a]);if(typeof l=="object")return l.value}}function Ir(e,t){var n,a={del:[],add:[],change:[]};for(n in e)t[n]||a.del.push(n);for(n in t){var u=e[n],l=t[n];if(u){var f={name:n,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||u.primKey.auto!==l.primKey.auto)f.recreate=!0,a.change.push(f);else{var v=u.idxByName,g=l.idxByName,b=void 0;for(b in v)g[b]||f.del.push(b);for(b in g){var x=v[b],p=g[b];x?x.src!==p.src&&f.change.push(p):f.add.push(p)}(0<f.del.length||0<f.add.length||0<f.change.length)&&a.change.push(f)}}else a.add.push([n,l])}return a}function Pr(e,t,n,a){var u=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return a.forEach(function(l){return Gn(u,l)}),u}function Ao(e,t){h(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(Ye&&console.debug("Dexie: Creating missing table",n),Pr(t,n,e[n].primKey,e[n].indexes))})}function Gn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Qn(e,t,n){var a={};return C(t.objectStoreNames,0).forEach(function(u){for(var l=n.objectStore(u),f=Tr(Io(b=l.keyPath),b||"",!0,!1,!!l.autoIncrement,b&&typeof b!="string",!0),v=[],g=0;g<l.indexNames.length;++g){var x=l.index(l.indexNames[g]),b=x.keyPath,x=Tr(x.name,b,!!x.unique,!!x.multiEntry,!1,b&&typeof b!="string",!1);v.push(x)}a[u]=Er(u,f,v)}),a}function Jn(e,t,n){for(var a=n.db.objectStoreNames,u=0;u<a.length;++u){var l=a[u],f=n.objectStore(l);e._hasGetAll="getAll"in f;for(var v=0;v<f.indexNames.length;++v){var g=f.indexNames[v],b=f.index(g).keyPath,x=typeof b=="string"?b:"["+C(b).join("+")+"]";!t[l]||(b=t[l].idxByName[x])&&(b.name=g,delete t[l].idxByName[x],t[l].idxByName[g]=b)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Mo(e){return e.split(",").map(function(t,n){var a=(t=t.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return Tr(a,u||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),m(u),n===0)})}var ia=(Xn.prototype._parseStoresSpec=function(e,t){h(e).forEach(function(n){if(e[n]!==null){var a=Mo(e[n]),u=a.shift();if(u.unique=!0,u.multi)throw new oe.Schema("Primary key cannot be multi-valued");a.forEach(function(l){if(l.auto)throw new oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new oe.Schema("Index must have a name and cannot be an empty string")}),t[n]=Er(n,u,a)}})},Xn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?T(this._cfg.storesSource,n):n;var n=t._versions,a={},u={};return n.forEach(function(l){T(a,l._cfg.storesSource),u=l._cfg.dbschema={},l._parseStoresSpec(a,u)}),t._dbSchema=u,Cr(t,[t._allTables,t,t.Transaction.prototype]),Wn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],h(u),u),t._storeNames=h(u),this},Xn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=St(this._cfg.contentUpgrade||me,e),this},Xn);function Xn(){}function Ar(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Ft(Hn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Mr(e){return e&&typeof e.databases=="function"}function jr(e){return Rt(function(){return re.letThrough=!0,e()})}function Kr(e){return!("from"in e)}var dt=function(e,t){if(!this){var n=new dt;return e&&"d"in e&&T(n,e),n}T(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Dn(e,t,n){var a=Ae(t,n);if(!isNaN(a)){if(0<a)throw RangeError();if(Kr(e))return T(e,{from:t,to:n,d:1});var u=e.l,a=e.r;if(Ae(n,e.from)<0)return u?Dn(u,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ko(e);if(0<Ae(t,e.to))return a?Dn(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ko(e);Ae(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),0<Ae(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,u&&!e.l&&Sn(e,u),a&&n&&Sn(e,a)}}function Sn(e,t){Kr(t)||function n(a,g){var l=g.from,f=g.to,v=g.l,g=g.r;Dn(a,l,f),v&&n(a,v),g&&n(a,g)}(e,t)}function jo(e,t){var n=Zn(t),a=n.next();if(a.done)return!1;for(var u=a.value,l=Zn(e),f=l.next(u.from),v=f.value;!a.done&&!f.done;){if(Ae(v.from,u.to)<=0&&0<=Ae(v.to,u.from))return!0;Ae(u.from,v.from)<0?u=(a=n.next(v.from)).value:v=(f=l.next(u.from)).value}return!1}function Zn(e){var t=Kr(e)?null:{s:0,n:e};return{next:function(n){for(var a=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,a)for(;t.n.l&&Ae(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!a||Ae(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ko(e){var t,n,a=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),u=1<a?"r":a<-1?"l":"";u&&(t=u=="r"?"l":"r",n=s({},e),a=e[u],e.from=a.from,e.to=a.to,e[u]=a[u],n[u]=a[t],(e[t]=n).d=Fo(n)),e.d=Fo(e)}function Fo(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function $n(e,t){return h(t).forEach(function(n){e[n]?Sn(e[n],t[n]):e[n]=function a(u){var l,f,v={};for(l in u)q(u,l)&&(f=u[l],v[l]=!f||typeof f!="object"||_e.has(f.constructor)?f:a(f));return v}(t[n])}),e}function Fr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&jo(t[n],e[n])})}S(dt.prototype,((Et={add:function(e){return Sn(this,e),this},addKey:function(e){return Dn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Dn(t,n,n)}),this},hasKey:function(e){var t=Zn(this).next(e).value;return t&&Ae(t.from,e)<=0&&0<=Ae(t.to,e)}})[Xe]=function(){return Zn(this)},Et));var Zt={},qr={},Rr=!1;function er(e){$n(qr,e),Rr||(Rr=!0,setTimeout(function(){Rr=!1,Nr(qr,!(qr={}))},0))}function Nr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var a=0,u=Object.values(Zt);a<u.length;a++)qo(f=u[a],e,n,t);else for(var l in e){var f,v=/^idb\:\/\/(.*)\/(.*)\//.exec(l);v&&(l=v[1],v=v[2],(f=Zt["idb://".concat(l,"/").concat(v)])&&qo(f,e,n,t))}n.forEach(function(g){return g()})}function qo(e,t,n,a){for(var u=[],l=0,f=Object.entries(e.queries.query);l<f.length;l++){for(var v=f[l],g=v[0],b=[],x=0,p=v[1];x<p.length;x++){var D=p[x];Fr(t,D.obsSet)?D.subscribers.forEach(function(_){return n.add(_)}):a&&b.push(D)}a&&u.push([g,b])}if(a)for(var y=0,w=u;y<w.length;y++){var k=w[y],g=k[0],b=k[1];e.queries.query[g]=b}}function aa(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?$e(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var a=t.openCanceller,u=Math.round(10*e.verno),l=!1;function f(){if(t.openCanceller!==a)throw new oe.DatabaseClosed("db.open() was cancelled")}function v(){return new ne(function(D,y){if(f(),!n)throw new oe.MissingAPI;var w=e.name,k=t.autoSchema||!u?n.open(w):n.open(w,u);if(!k)throw new oe.MissingAPI;k.onerror=Pt(y),k.onblocked=Ge(e._fireOnBlocked),k.onupgradeneeded=Ge(function(_){var O;x=k.transaction,t.autoSchema&&!e._options.allowEmptyDB?(k.onerror=_n,x.abort(),k.result.close(),(O=n.deleteDatabase(w)).onsuccess=O.onerror=Ge(function(){y(new oe.NoSuchDatabase("Database ".concat(w," doesnt exist")))})):(x.onerror=Pt(y),_=_.oldVersion>Math.pow(2,62)?0:_.oldVersion,p=_<1,e.idbdb=k.result,l&&oa(e,x),ra(e,_/10,x,y))},y),k.onsuccess=Ge(function(){x=null;var _,O,A,j,R,G=e.idbdb=k.result,Z=C(G.objectStoreNames);if(0<Z.length)try{var Q=G.transaction((j=Z).length===1?j[0]:j,"readonly");if(t.autoSchema)O=G,A=Q,(_=e).verno=O.version/10,A=_._dbSchema=Qn(0,O,A),_._storeNames=C(O.objectStoreNames,0),Wn(_,[_._allTables],h(A),A);else if(Jn(e,e._dbSchema,Q),((R=Ir(Qn(0,(R=e).idbdb,Q),R._dbSchema)).add.length||R.change.some(function(J){return J.add.length||J.change.length}))&&!l)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),u=G.version+1,l=!0,D(v());Vn(e,Q)}catch{}cn.push(e),G.onversionchange=Ge(function(J){t.vcFired=!0,e.on("versionchange").fire(J)}),G.onclose=Ge(function(J){e.on("close").fire(J)}),p&&(R=e._deps,Q=w,G=R.indexedDB,R=R.IDBKeyRange,Mr(G)||Q===Hn||Ar(G,R).put({name:Q}).catch(me)),D()},y)}).catch(function(D){switch(D==null?void 0:D.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),v();break;case"VersionError":if(0<u)return u=0,v()}return ne.reject(D)})}var g,b=t.dbReadyResolve,x=null,p=!1;return ne.race([a,(typeof navigator>"u"?ne.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(D){function y(){return indexedDB.databases().finally(D)}g=setInterval(y,100),y()}).finally(function(){return clearInterval(g)}):Promise.resolve()).then(v)]).then(function(){return f(),t.onReadyBeingFired=[],ne.resolve(jr(function(){return e.on.ready.fire(e.vip)})).then(function D(){if(0<t.onReadyBeingFired.length){var y=t.onReadyBeingFired.reduce(St,me);return t.onReadyBeingFired=[],ne.resolve(jr(function(){return y(e.vip)})).then(D)}})}).finally(function(){t.openCanceller===a&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(D){t.dbOpenError=D;try{x&&x.abort()}catch{}return a===t.openCanceller&&e._close(),$e(D)}).finally(function(){t.openComplete=!0,b()}).then(function(){var D;return p&&(D={},e.tables.forEach(function(y){y.schema.indexes.forEach(function(w){w.name&&(D["idb://".concat(e.name,"/").concat(y.name,"/").concat(w.name)]=new dt(-1/0,[[[]]]))}),D["idb://".concat(e.name,"/").concat(y.name,"/")]=D["idb://".concat(e.name,"/").concat(y.name,"/:dels")]=new dt(-1/0,[[[]]])}),zt(wn).fire(D),Nr(D,!0)),e})}function Br(e){function t(l){return e.next(l)}var n=u(t),a=u(function(l){return e.throw(l)});function u(l){return function(g){var v=l(g),g=v.value;return v.done?g:g&&typeof g.then=="function"?g.then(n,a):m(g)?Promise.all(g).then(n,a):n(g)}}return u(t)()}function tr(e,t,n){for(var a=m(e)?e.slice():[e],u=0;u<n;++u)a.push(t);return a}var sa={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),a=n.schema,u={},l=[];function f(p,D,y){var w=kn(p),k=u[w]=u[w]||[],_=p==null?0:typeof p=="string"?1:p.length,O=0<D,O=s(s({},y),{name:O?"".concat(w,"(virtual-from:").concat(y.name,")"):y.name,lowLevelIndex:y,isVirtual:O,keyTail:D,keyLength:_,extractKey:Or(p),unique:!O&&y.unique});return k.push(O),O.isPrimaryKey||l.push(O),1<_&&f(_===2?p[0]:p.slice(0,_-1),D+1,y),k.sort(function(A,j){return A.keyTail-j.keyTail}),O}t=f(a.primaryKey.keyPath,0,a.primaryKey),u[":id"]=[t];for(var v=0,g=a.indexes;v<g.length;v++){var b=g[v];f(b.keyPath,0,b)}function x(p){var D,y=p.query.index;return y.isVirtual?s(s({},p),{query:{index:y.lowLevelIndex,range:(D=p.query.range,y=y.keyTail,{type:D.type===1?2:D.type,lower:tr(D.lower,D.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:tr(D.upper,D.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}):p}return s(s({},n),{schema:s(s({},a),{primaryKey:t,indexes:l,getIndexByKeyPath:function(p){return(p=u[kn(p)])&&p[0]}}),count:function(p){return n.count(x(p))},query:function(p){return n.query(x(p))},openCursor:function(p){var D=p.query.index,y=D.keyTail,w=D.isVirtual,k=D.keyLength;return w?n.openCursor(x(p)).then(function(O){return O&&_(O)}):n.openCursor(p);function _(O){return Object.create(O,{continue:{value:function(A){A!=null?O.continue(tr(A,p.reverse?e.MAX_KEY:e.MIN_KEY,y)):p.unique?O.continue(O.key.slice(0,k).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,y)):O.continue()}},continuePrimaryKey:{value:function(A,j){O.continuePrimaryKey(tr(A,e.MAX_KEY,y),j)}},primaryKey:{get:function(){return O.primaryKey}},key:{get:function(){var A=O.key;return k===1?A[0]:A.slice(0,k)}},value:{get:function(){return O.value}}})}}})}})}};function Hr(e,t,n,a){return n=n||{},a=a||"",h(e).forEach(function(u){var l,f,v;q(t,u)?(l=e[u],f=t[u],typeof l=="object"&&typeof f=="object"&&l&&f?(v=ze(l))!==ze(f)?n[a+u]=t[u]:v==="Object"?Hr(l,f,n,a+u+"."):l!==f&&(n[a+u]=t[u]):l!==f&&(n[a+u]=t[u])):n[a+u]=void 0}),h(t).forEach(function(u){q(e,u)||(n[a+u]=t[u])}),n}function zr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ua={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),a=n.schema.primaryKey;return s(s({},n),{mutate:function(u){var l=re.trans,f=l.table(t).hook,v=f.deleting,g=f.creating,b=f.updating;switch(u.type){case"add":if(g.fire===me)break;return l._promise("readwrite",function(){return x(u)},!0);case"put":if(g.fire===me&&b.fire===me)break;return l._promise("readwrite",function(){return x(u)},!0);case"delete":if(v.fire===me)break;return l._promise("readwrite",function(){return x(u)},!0);case"deleteRange":if(v.fire===me)break;return l._promise("readwrite",function(){return function p(D,y,w){return n.query({trans:D,values:!1,query:{index:a,range:y},limit:w}).then(function(k){var _=k.result;return x({type:"delete",keys:_,trans:D}).then(function(O){return 0<O.numFailures?Promise.reject(O.failures[0]):_.length<w?{failures:[],numFailures:0,lastResult:void 0}:p(D,s(s({},y),{lower:_[_.length-1],lowerOpen:!0}),w)})})}(u.trans,u.range,1e4)},!0)}return n.mutate(u);function x(p){var D,y,w,k=re.trans,_=p.keys||zr(a,p);if(!_)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?s(s({},p),{keys:_}):s({},p)).type!=="delete"&&(p.values=c([],p.values)),p.keys&&(p.keys=c([],p.keys)),D=n,w=_,((y=p).type==="add"?Promise.resolve([]):D.getMany({trans:y.trans,keys:w,cache:"immutable"})).then(function(O){var A=_.map(function(j,R){var G,Z,Q,J=O[R],ee={onerror:null,onsuccess:null};return p.type==="delete"?v.fire.call(ee,j,J,k):p.type==="add"||J===void 0?(G=g.fire.call(ee,j,p.values[R],k),j==null&&G!=null&&(p.keys[R]=j=G,a.outbound||U(p.values[R],a.keyPath,j))):(G=Hr(J,p.values[R]),(Z=b.fire.call(ee,G,j,J,k))&&(Q=p.values[R],Object.keys(Z).forEach(function(X){q(Q,X)?Q[X]=Z[X]:U(Q,X,Z[X])}))),ee});return n.mutate(p).then(function(j){for(var R=j.failures,G=j.results,Z=j.numFailures,j=j.lastResult,Q=0;Q<_.length;++Q){var J=(G||_)[Q],ee=A[Q];J==null?ee.onerror&&ee.onerror(R[Q]):ee.onsuccess&&ee.onsuccess(p.type==="put"&&O[Q]?p.values[Q]:J)}return{failures:R,results:G,numFailures:Z,lastResult:j}}).catch(function(j){return A.forEach(function(R){return R.onerror&&R.onerror(j)}),Promise.reject(j)})})}}})}})}};function Ro(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var a=[],u=0,l=0;u<t.keys.length&&l<e.length;++u)Ae(t.keys[u],e[l])===0&&(a.push(n?Re(t.values[u]):t.values[u]),++l);return a.length===e.length?a:null}catch{return null}}var la={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return s(s({},n),{getMany:function(a){if(!a.cache)return n.getMany(a);var u=Ro(a.keys,a.trans._cache,a.cache==="clone");return u?ne.resolve(u):n.getMany(a).then(function(l){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?Re(l):l},l})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),n.mutate(a)}})}}}};function No(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Bo(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ca={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new dt(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(a,u,l){if(re.subscr&&u!=="readonly")throw new oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(re.querier));return e.transaction(a,u,l)},table:function(a){var u=e.table(a),l=u.schema,f=l.primaryKey,p=l.indexes,v=f.extractKey,g=f.outbound,b=f.autoIncrement&&p.filter(function(y){return y.compound&&y.keyPath.includes(f.keyPath)}),x=s(s({},u),{mutate:function(y){function w(X){return X="idb://".concat(t,"/").concat(a,"/").concat(X),j[X]||(j[X]=new dt)}var k,_,O,A=y.trans,j=y.mutatedParts||(y.mutatedParts={}),R=w(""),G=w(":dels"),Z=y.type,ee=y.type==="deleteRange"?[y.range]:y.type==="delete"?[y.keys]:y.values.length<50?[zr(f,y).filter(function(X){return X}),y.values]:[],Q=ee[0],J=ee[1],ee=y.trans._cache;return m(Q)?(R.addKeys(Q),(ee=Z==="delete"||Q.length===J.length?Ro(Q,ee):null)||G.addKeys(Q),(ee||J)&&(k=w,_=ee,O=J,l.indexes.forEach(function(X){var ae=k(X.name||"");function ye(Ee){return Ee!=null?X.extractKey(Ee):null}function Te(Ee){return X.multiEntry&&m(Ee)?Ee.forEach(function(kt){return ae.addKey(kt)}):ae.addKey(Ee)}(_||O).forEach(function(Ee,ht){var ge=_&&ye(_[ht]),ht=O&&ye(O[ht]);Ae(ge,ht)!==0&&(ge!=null&&Te(ge),ht!=null&&Te(ht))})}))):Q?(J={from:(J=Q.lower)!==null&&J!==void 0?J:e.MIN_KEY,to:(J=Q.upper)!==null&&J!==void 0?J:e.MAX_KEY},G.add(J),R.add(J)):(R.add(n),G.add(n),l.indexes.forEach(function(X){return w(X.name).add(n)})),u.mutate(y).then(function(X){return!Q||y.type!=="add"&&y.type!=="put"||(R.addKeys(X.results),b&&b.forEach(function(ae){for(var ye=y.values.map(function(ge){return ae.extractKey(ge)}),Te=ae.keyPath.findIndex(function(ge){return ge===f.keyPath}),Ee=0,kt=X.results.length;Ee<kt;++Ee)ye[Ee][Te]=X.results[Ee];w(ae.name).addKeys(ye)})),A.mutatedParts=$n(A.mutatedParts||{},j),X})}}),p=function(w){var k=w.query,w=k.index,k=k.range;return[w,new dt((w=k.lower)!==null&&w!==void 0?w:e.MIN_KEY,(k=k.upper)!==null&&k!==void 0?k:e.MAX_KEY)]},D={get:function(y){return[f,new dt(y.key)]},getMany:function(y){return[f,new dt().addKeys(y.keys)]},count:p,query:p,openCursor:p};return h(D).forEach(function(y){x[y]=function(w){var k=re.subscr,_=!!k,O=No(re,u)&&Bo(y,w)?w.obsSet={}:k;if(_){var A=function(J){return J="idb://".concat(t,"/").concat(a,"/").concat(J),O[J]||(O[J]=new dt)},j=A(""),R=A(":dels"),k=D[y](w),_=k[0],k=k[1];if((y==="query"&&_.isPrimaryKey&&!w.values?R:A(_.name||"")).add(k),!_.isPrimaryKey){if(y!=="count"){var G=y==="query"&&g&&w.values&&u.query(s(s({},w),{values:!1}));return u[y].apply(this,arguments).then(function(J){if(y==="query"){if(g&&w.values)return G.then(function(ye){return ye=ye.result,j.addKeys(ye),J});var ee=w.values?J.result.map(v):J.result;(w.values?j:R).addKeys(ee)}else if(y==="openCursor"){var X=J,ae=w.values;return X&&Object.create(X,{key:{get:function(){return R.addKey(X.primaryKey),X.key}},primaryKey:{get:function(){var ye=X.primaryKey;return R.addKey(ye),ye}},value:{get:function(){return ae&&j.addKey(X.primaryKey),X.value}}})}return J})}R.add(n)}}return u[y].apply(this,arguments)}}),x}})}};function Ho(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var a=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===a?null:(t=s({},t),m(t.keys)&&(t.keys=t.keys.filter(function(u,l){return!(l in n.failures)})),"values"in t&&m(t.values)&&(t.values=t.values.filter(function(u,l){return!(l in n.failures)})),t)}function Lr(e,t){return n=e,((a=t).lower===void 0||(a.lowerOpen?0<Ae(n,a.lower):0<=Ae(n,a.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?Ae(e,t.upper)<0:Ae(e,t.upper)<=0));var n,a}function zo(e,t,D,a,u,l){if(!D||D.length===0)return e;var f=t.query.index,v=f.multiEntry,g=t.query.range,b=a.schema.primaryKey.extractKey,x=f.extractKey,p=(f.lowLevelIndex||f).extractKey,D=D.reduce(function(y,w){var k=y,_=[];if(w.type==="add"||w.type==="put")for(var O=new dt,A=w.values.length-1;0<=A;--A){var j,R=w.values[A],G=b(R);O.hasKey(G)||(j=x(R),(v&&m(j)?j.some(function(X){return Lr(X,g)}):Lr(j,g))&&(O.addKey(G),_.push(R)))}switch(w.type){case"add":var Z=new dt().addKeys(t.values?y.map(function(ae){return b(ae)}):y),k=y.concat(t.values?_.filter(function(ae){return ae=b(ae),!Z.hasKey(ae)&&(Z.addKey(ae),!0)}):_.map(function(ae){return b(ae)}).filter(function(ae){return!Z.hasKey(ae)&&(Z.addKey(ae),!0)}));break;case"put":var Q=new dt().addKeys(w.values.map(function(ae){return b(ae)}));k=y.filter(function(ae){return!Q.hasKey(t.values?b(ae):ae)}).concat(t.values?_:_.map(function(ae){return b(ae)}));break;case"delete":var J=new dt().addKeys(w.keys);k=y.filter(function(ae){return!J.hasKey(t.values?b(ae):ae)});break;case"deleteRange":var ee=w.range;k=y.filter(function(ae){return!Lr(b(ae),ee)})}return k},e);return D===e?e:(D.sort(function(y,w){return Ae(p(y),p(w))||Ae(b(y),b(w))}),t.limit&&t.limit<1/0&&(D.length>t.limit?D.length=t.limit:e.length===t.limit&&D.length<t.limit&&(u.dirty=!0)),l?Object.freeze(D):D)}function Lo(e,t){return Ae(e.lower,t.lower)===0&&Ae(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function fa(e,t){return function(n,a,u,l){if(n===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=Ae(n,a))===0){if(u&&l)return 0;if(u)return 1;if(l)return-1}return a}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,a,u,l){if(n===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=Ae(n,a))===0){if(u&&l)return 0;if(u)return-1;if(l)return 1}return a}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function da(e,t,n,a){e.subscribers.add(n),a.addEventListener("abort",function(){var u,l;e.subscribers.delete(n),e.subscribers.size===0&&(u=e,l=t,setTimeout(function(){u.subscribers.size===0&&Le(l,u)},3e3))})}var ha={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(n,a,u){var l,f,v=e.transaction(n,a,u);return a==="readwrite"&&(f=(l=new AbortController).signal,u=function(g){return function(){if(l.abort(),a==="readwrite"){for(var b=new Set,x=0,p=n;x<p.length;x++){var D=p[x],y=Zt["idb://".concat(t,"/").concat(D)];if(y){var w=e.table(D),k=y.optimisticOps.filter(function(ae){return ae.trans===v});if(v._explicit&&g&&v.mutatedParts)for(var _=0,O=Object.values(y.queries.query);_<O.length;_++)for(var A=0,j=(Z=O[_]).slice();A<j.length;A++)Fr((Q=j[A]).obsSet,v.mutatedParts)&&(Le(Z,Q),Q.subscribers.forEach(function(ae){return b.add(ae)}));else if(0<k.length){y.optimisticOps=y.optimisticOps.filter(function(ae){return ae.trans!==v});for(var R=0,G=Object.values(y.queries.query);R<G.length;R++)for(var Z,Q,J,ee=0,X=(Z=G[R]).slice();ee<X.length;ee++)(Q=X[ee]).res!=null&&v.mutatedParts&&(g&&!Q.dirty?(J=Object.isFrozen(Q.res),J=zo(Q.res,Q.req,k,w,Q,J),Q.dirty?(Le(Z,Q),Q.subscribers.forEach(function(ae){return b.add(ae)})):J!==Q.res&&(Q.res=J,Q.promise=ne.resolve({result:J}))):(Q.dirty&&Le(Z,Q),Q.subscribers.forEach(function(ae){return b.add(ae)})))}}}b.forEach(function(ae){return ae()})}}},v.addEventListener("abort",u(!1),{signal:f}),v.addEventListener("error",u(!1),{signal:f}),v.addEventListener("complete",u(!0),{signal:f})),v},table:function(n){var a=e.table(n),u=a.schema.primaryKey;return s(s({},a),{mutate:function(l){var f=re.trans;if(u.outbound||f.db._options.cache==="disabled"||f.explicit||f.idbtrans.mode!=="readwrite")return a.mutate(l);var v=Zt["idb://".concat(t,"/").concat(n)];return v?(f=a.mutate(l),l.type!=="add"&&l.type!=="put"||!(50<=l.values.length||zr(u,l).some(function(g){return g==null}))?(v.optimisticOps.push(l),l.mutatedParts&&er(l.mutatedParts),f.then(function(g){0<g.numFailures&&(Le(v.optimisticOps,l),(g=Ho(0,l,g))&&v.optimisticOps.push(g),l.mutatedParts&&er(l.mutatedParts))}),f.catch(function(){Le(v.optimisticOps,l),l.mutatedParts&&er(l.mutatedParts)})):f.then(function(g){var b=Ho(0,s(s({},l),{values:l.values.map(function(x,p){var D;return g.failures[p]?x:(x=(D=u.keyPath)!==null&&D!==void 0&&D.includes(".")?Re(x):s({},x),U(x,u.keyPath,g.results[p]),x)})}),g);v.optimisticOps.push(b),queueMicrotask(function(){return l.mutatedParts&&er(l.mutatedParts)})}),f):a.mutate(l)},query:function(l){if(!No(re,a)||!Bo("query",l))return a.query(l);var f=((b=re.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",p=re,v=p.requery,g=p.signal,b=function(w,k,_,O){var A=Zt["idb://".concat(w,"/").concat(k)];if(!A)return[];if(!(k=A.queries[_]))return[null,!1,A,null];var j=k[(O.query?O.query.index.name:null)||""];if(!j)return[null,!1,A,null];switch(_){case"query":var R=j.find(function(G){return G.req.limit===O.limit&&G.req.values===O.values&&Lo(G.req.query.range,O.query.range)});return R?[R,!0,A,j]:[j.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=O.limit&&(!O.values||G.req.values)&&fa(G.req.query.range,O.query.range)}),!1,A,j];case"count":return R=j.find(function(G){return Lo(G.req.query.range,O.query.range)}),[R,!!R,A,j]}}(t,n,"query",l),x=b[0],p=b[1],D=b[2],y=b[3];return x&&p?x.obsSet=l.obsSet:(p=a.query(l).then(function(w){var k=w.result;if(x&&(x.res=k),f){for(var _=0,O=k.length;_<O;++_)Object.freeze(k[_]);Object.freeze(k)}else w.result=Re(k);return w}).catch(function(w){return y&&x&&Le(y,x),Promise.reject(w)}),x={obsSet:l.obsSet,promise:p,subscribers:new Set,type:"query",req:l,dirty:!1},y?y.push(x):(y=[x],(D=D||(Zt["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[l.query.index.name||""]=y)),da(x,y,v,g),x.promise.then(function(w){return{result:zo(w.result,l,D==null?void 0:D.optimisticOps,a,x,f)}})}})}})}};function nr(e,t){return new Proxy(e,{get:function(n,a,u){return a==="db"?t:Reflect.get(n,a,u)}})}var Ft=(et.prototype.version=function(e){if(isNaN(e)||e<.1)throw new oe.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(a){return a._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(na),n.stores({}),this._state.autoSchema=!1,n)},et.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||re.letThrough||this._vip)?e():new ne(function(n,a){if(t._state.openComplete)return a(new oe.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void a(new oe.DatabaseClosed);t.open().catch(me)}t._state.dbReadyPromise.then(n,a)}).then(e)},et.prototype.use=function(e){var t=e.stack,n=e.create,a=e.level,u=e.name;return u&&this.unuse({stack:t,name:u}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:a??10,name:u}),e.sort(function(l,f){return l.level-f.level}),this},et.prototype.unuse=function(e){var t=e.stack,n=e.name,a=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(u){return a?u.create!==a:!!n&&u.name!==n})),this},et.prototype.open=function(){var e=this;return Qt(Ne,function(){return aa(e)})},et.prototype._close=function(){var e=this._state,t=cn.indexOf(this);if(0<=t&&cn.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ne(function(n){e.dbReadyResolve=n}),e.openCanceller=new ne(function(n,a){e.cancelOpen=a}))},et.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new oe.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new oe.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},et.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new ne(function(u,l){function f(){t.close(e);var v=t._deps.indexedDB.deleteDatabase(t.name);v.onsuccess=Ge(function(){var g,b,x;g=t._deps,b=t.name,x=g.indexedDB,g=g.IDBKeyRange,Mr(x)||b===Hn||Ar(x,g).delete(b).catch(me),u()}),v.onerror=Pt(l),v.onblocked=t._fireOnBlocked}if(n)throw new oe.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(f):f()})},et.prototype.backendDB=function(){return this.idbdb},et.prototype.isOpen=function(){return this.idbdb!==null},et.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},et.prototype.hasFailed=function(){return this._state.dbOpenError!==null},et.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(et.prototype,"tables",{get:function(){var e=this;return h(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),et.prototype.transaction=function(){var e=(function(t,n,a){var u=arguments.length;if(u<2)throw new oe.InvalidArgument("Too few arguments");for(var l=new Array(u-1);--u;)l[u-1]=arguments[u];return a=l.pop(),[t,ce(l),a]}).apply(this,arguments);return this._transaction.apply(this,e)},et.prototype._transaction=function(e,t,n){var a=this,u=re.trans;u&&u.db===this&&e.indexOf("!")===-1||(u=null);var l,f,v=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(f=t.map(function(b){if(b=b instanceof a.Table?b.name:b,typeof b!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return b}),e=="r"||e===_r)l=_r;else{if(e!="rw"&&e!=wr)throw new oe.InvalidArgument("Invalid transaction mode: "+e);l=wr}if(u){if(u.mode===_r&&l===wr){if(!v)throw new oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&f.forEach(function(b){if(u&&u.storeNames.indexOf(b)===-1){if(!v)throw new oe.SubTransaction("Table "+b+" not included in parent transaction.");u=null}}),v&&u&&!u.active&&(u=null)}}catch(b){return u?u._promise(null,function(x,p){p(b)}):$e(b)}var g=(function b(x,p,D,y,w){return ne.resolve().then(function(){var k=re.transless||re,_=x._createTransaction(p,D,x._dbSchema,y);if(_.explicit=!0,k={trans:_,transless:k},y)_.idbtrans=y.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,x._state.PR1398_maxLoop=3}catch(j){return j.name===Pe.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return b(x,p,D,null,w)})):$e(j)}var O,A=$(w);return A&&ln(),k=ne.follow(function(){var j;(O=w.call(_,_))&&(A?(j=Nt.bind(null,null),O.then(j,j)):typeof O.next=="function"&&typeof O.throw=="function"&&(O=Br(O)))},k),(O&&typeof O.then=="function"?ne.resolve(O).then(function(j){return _.active?j:$e(new oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):k.then(function(){return O})).then(function(j){return y&&_._resolve(),_._completion.then(function(){return j})}).catch(function(j){return _._reject(j),$e(j)})})}).bind(null,this,l,f,u,n);return u?u._promise(l,g,"lock"):re.trans?Qt(re.transless,function(){return a._whenReady(g)}):this._whenReady(g)},et.prototype.table=function(e){if(!q(this._allTables,e))throw new oe.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},et);function et(e,t){var n=this;this._middlewares={},this.verno=0;var a=et.dependencies;this._options=t=s({addons:et.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},a=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u,l,f,v,g,b={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:me,dbReadyPromise:null,cancelOpen:me,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};b.dbReadyPromise=new ne(function(p){b.dbReadyResolve=p}),b.openCanceller=new ne(function(p,D){b.cancelOpen=D}),this._state=b,this.name=e,this.on=mn(this,"populate","blocked","versionchange","close",{ready:[St,me]}),this.on.ready.subscribe=P(this.on.ready.subscribe,function(p){return function(D,y){et.vip(function(){var w,k=n._state;k.openComplete?(k.dbOpenError||ne.resolve().then(D),y&&p(D)):k.onReadyBeingFired?(k.onReadyBeingFired.push(D),y&&p(D)):(p(D),w=n,y||p(function _(){w.on.ready.unsubscribe(D),w.on.ready.unsubscribe(_)}))})}}),this.Collection=(u=this,yn(Qi.prototype,function(O,_){this.db=u;var y=_o,w=null;if(_)try{y=_()}catch(A){w=A}var k=O._ctx,_=k.table,O=_.hook.reading.fire;this._ctx={table:_,index:k.index,isPrimKey:!k.index||_.schema.primKey.keyPath&&k.index===_.schema.primKey.name,range:y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:w,or:k.or,valueMapper:O!==lt?O:null}})),this.Table=(l=this,yn(Do.prototype,function(p,D,y){this.db=l,this._tx=y,this.name=p,this.schema=D,this.hook=l._allTables[p]?l._allTables[p].hook:mn(null,{creating:[Dt,me],reading:[ct,lt],updating:[mt,me],deleting:[ft,me]})})),this.Transaction=(f=this,yn(Zi.prototype,function(p,D,y,w,k){var _=this;this.db=f,this.mode=p,this.storeNames=D,this.schema=y,this.chromeTransactionDurability=w,this.idbtrans=null,this.on=mn(this,"complete","error","abort"),this.parent=k||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ne(function(O,A){_._resolve=O,_._reject=A}),this._completion.then(function(){_.active=!1,_.on.complete.fire()},function(O){var A=_.active;return _.active=!1,_.on.error.fire(O),_.parent?_.parent._reject(O):A&&_.idbtrans&&_.idbtrans.abort(),$e(O)})})),this.Version=(v=this,yn(ia.prototype,function(p){this.db=v,this._cfg={version:p,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(g=this,yn(Co.prototype,function(p,D,y){if(this.db=g,this._ctx={table:p,index:D===":id"?null:D,or:y},this._cmp=this._ascending=Ae,this._descending=function(w,k){return Ae(k,w)},this._max=function(w,k){return 0<Ae(w,k)?w:k},this._min=function(w,k){return Ae(w,k)<0?w:k},this._IDBKeyRange=g._deps.IDBKeyRange,!this._IDBKeyRange)throw new oe.MissingAPI})),this.on("versionchange",function(p){0<p.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=xn(t.IDBKeyRange),this._createTransaction=function(p,D,y,w){return new n.Transaction(p,D,y,n._options.chromeTransactionDurability,w)},this._fireOnBlocked=function(p){n.on("blocked").fire(p),cn.filter(function(D){return D.name===n.name&&D!==n&&!D._state.vcFired}).map(function(D){return D.on("versionchange").fire(p)})},this.use(la),this.use(ha),this.use(ca),this.use(sa),this.use(ua);var x=new Proxy(this,{get:function(p,D,y){if(D==="_vip")return!0;if(D==="table")return function(k){return nr(n.table(k),x)};var w=Reflect.get(p,D,y);return w instanceof Do?nr(w,x):D==="tables"?w.map(function(k){return nr(k,x)}):D==="_createTransaction"?function(){return nr(w.apply(this,arguments),x)}:w}});this.vip=x,a.forEach(function(p){return p(n)})}var rr,Et=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",va=(Ur.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Ur.prototype[Et]=function(){return this},Ur);function Ur(e){this._subscribe=e}try{rr={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch{rr={indexedDB:null,IDBKeyRange:null}}function Uo(e){var t,n=!1,a=new va(function(u){var l=$(e),f,v=!1,g={},b={},x={get closed(){return v},unsubscribe:function(){v||(v=!0,f&&f.abort(),p&&zt.storagemutated.unsubscribe(y))}};u.start&&u.start(x);var p=!1,D=function(){return br(w)},y=function(k){$n(g,k),Fr(b,g)&&D()},w=function(){var k,_,O;!v&&rr.indexedDB&&(g={},k={},f&&f.abort(),f=new AbortController,O=function(A){var j=sn();try{l&&ln();var R=Rt(e,A);return R=l?R.finally(Nt):R}finally{j&&un()}}(_={subscr:k,signal:f.signal,requery:D,querier:e,trans:null}),Promise.resolve(O).then(function(A){n=!0,t=A,v||_.signal.aborted||(g={},function(j){for(var R in j)if(q(j,R))return;return 1}(b=k)||p||(zt(wn,y),p=!0),br(function(){return!v&&u.next&&u.next(A)}))},function(A){n=!1,["DatabaseClosedError","AbortError"].includes(A==null?void 0:A.name)||v||br(function(){v||u.error&&u.error(A)})}))};return setTimeout(D,0),x});return a.hasValue=function(){return n},a.getValue=function(){return t},a}var $t=Ft;function Yr(e){var t=Lt;try{Lt=!0,zt.storagemutated.fire(e),Nr(e,!0)}finally{Lt=t}}S($t,s(s({},Ze),{delete:function(e){return new $t(e,{addons:[]}).delete()},exists:function(e){return new $t(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=$t.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Mr(n)?Promise.resolve(n.databases()).then(function(a){return a.map(function(u){return u.name}).filter(function(u){return u!==Hn})}):Ar(n,t).toCollection().primaryKeys()).then(e)}catch{return $e(new oe.MissingAPI)}var t,n},defineClass:function(){return function(e){T(this,e)}},ignoreTransaction:function(e){return re.trans?Qt(re.transless,e):e()},vip:jr,async:function(e){return function(){try{var t=Br(e.apply(this,arguments));return t&&typeof t.then=="function"?t:ne.resolve(t)}catch(n){return $e(n)}}},spawn:function(e,t,n){try{var a=Br(e.apply(n,t||[]));return a&&typeof a.then=="function"?a:ne.resolve(a)}catch(u){return $e(u)}},currentTransaction:{get:function(){return re.trans||null}},waitFor:function(e,t){return t=ne.resolve(typeof e=="function"?$t.ignoreTransaction(e):e).timeout(t||6e4),re.trans?re.trans.waitFor(t):t},Promise:ne,debug:{get:function(){return Ye},set:function(e){It(e)}},derive:z,extend:T,props:S,override:P,Events:mn,on:zt,liveQuery:Uo,extendObservabilitySet:$n,getByKeyPath:W,setByKeyPath:U,delByKeyPath:function(e,t){typeof t=="string"?U(e,t,void 0):"length"in t&&[].map.call(t,function(n){U(e,n,void 0)})},shallowClone:le,deepClone:Re,getObjectDiff:Hr,cmp:Ae,asap:Y,minKey:-1/0,addons:[],connections:cn,errnames:Pe,dependencies:rr,cache:Zt,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),$t.maxKey=xn($t.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zt(wn,function(e){Lt||(e=new CustomEvent(Sr,{detail:e}),Lt=!0,dispatchEvent(e),Lt=!1)}),addEventListener(Sr,function(e){e=e.detail,Lt||Yr(e)}));var hn,Lt=!1,Yo=function(){};return typeof BroadcastChannel<"u"&&((Yo=function(){(hn=new BroadcastChannel(Sr)).onmessage=function(e){return e.data&&Yr(e.data)}})(),typeof hn.unref=="function"&&hn.unref(),zt(wn,function(e){Lt||hn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ft.disableBfCache&&e.persisted){Ye&&console.debug("Dexie: handling persisted pagehide"),hn!=null&&hn.close();for(var t=0,n=cn;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Ft.disableBfCache&&e.persisted&&(Ye&&console.debug("Dexie: handling persisted pageshow"),Yo(),Yr({all:new dt(-1/0,[[]])}))})),ne.rejectionMapper=function(e,t){return!e||e instanceof ue||e instanceof TypeError||e instanceof SyntaxError||!e.name||!tt[e.name]?e:(t=new tt[e.name](t||e.message,e),"stack"in e&&H(t,"stack",{get:function(){return this.inner.stack}}),t)},It(Ye),s(Ft,Object.freeze({__proto__:null,Dexie:Ft,liveQuery:Uo,Entity:wo,cmp:Ae,PropModification:bn,replacePrefix:function(e,t){return new bn({replacePrefix:[e,t]})},add:function(e){return new bn({add:e})},remove:function(e){return new bn({remove:e})},default:Ft,RangeSet:dt,mergeRanges:Sn,rangesOverlap:jo}),{default:Ft}),Ft})}(sr)),sr.exports}var vs=hs();const ro=Pi(vs),ri=Symbol.for("Dexie"),dr=globalThis[ri]||(globalThis[ri]=ro);if(ro.semVer!==dr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ro.semVer} and ${dr.semVer}`);const{liveQuery:oc,mergeRanges:ic,rangesOverlap:ac,RangeSet:sc,cmp:uc,Entity:lc,PropModification:cc,replacePrefix:fc,add:dc,remove:hc}=dr;class ps{constructor(){this._db=new dr("FastingHours"),this._db.version(20).stores({history:"id, started",hunger:"id, created",water:"id, created"})}browseHistory(){return this._db.history.toArray()}browseHistoryByEnd(){return this._db.history.toArray().then(r=>r.filter(s=>s.ended===null)[0])}readHistory(r){return this._db.history.get({id:r})}editHistory(r){const i=Qr(r);return i.updated=new Date,this._db.history.put(i).then(()=>this._db.history.get({id:r.id}))}addHistory(){const r={id:crypto.randomUUID(),type:"history",created:new Date,updated:new Date,started:new Date,ended:null,notes:null};return this._db.history.add(r).then(()=>this._db.history.get({id:r.id}))}deleteHistory(r){return this._db.history.delete(r)}browseHunger(r=!1){return this._db.hunger.toArray().then(i=>r?(i.sort((s,c)=>s.created.getTime()<c.created.getTime()?1:s.created.getTime()>c.created.getTime()?-1:0),i.length===0?null:i[0]):i)}readHunger(r){return this._db.hunger.get({id:r})}editHunger(r){const i=Qr(r);return i.updated=new Date,this._db.hunger.put(i).then(()=>this._db.hunger.get({id:r.id}))}addHunger(r=5){const i={id:crypto.randomUUID(),type:"hunger",created:new Date,updated:new Date,level:r};return this._db.hunger.add(i).then(()=>this._db.hunger.get({id:i.id}))}deleteHunger(r){return this._db.hunger.delete(r)}browseWater(r=!1){return this._db.water.toArray().then(i=>{if(r){const s=new Date;s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);const c=new Date(s.getTime());return c.setDate(c.getDate()+1),i.filter(d=>d.created.getTime()>s.getTime()&&d.created.getTime()<c.getTime())}else return i})}readWater(r){return this._db.water.get({id:r})}editWater(r){const i=Qr(r);return i.updated=new Date,this._db.water.put(i).then(()=>this._db.water.get({id:r.id}))}addWater(r){const i={id:crypto.randomUUID(),type:"water",created:new Date,updated:new Date,volume:r};return crypto.randomUUID(),this._db.water.add(i).then(()=>this._db.water.get({id:i.id}))}deleteWater(r){return this._db.water.delete(r)}}var Zr={exports:{}},oi;function gs(){return oi||(oi=1,function(o,r){(function(){var i=Math.PI,s=Math.sin,c=Math.cos,d=Math.tan,h=Math.asin,m=Math.atan2,T=Math.acos,E=i/180,K=1e3*60*60*24,q=2440588,S=2451545;function B($){return $.valueOf()/K-.5+q}function H($){return new Date(($+.5-q)*K)}function z($){return B($)-S}var V=E*23.4397;function F($,se){return m(s($)*c(V)-d(se)*s(V),c($))}function C($,se){return h(s(se)*c(V)+c(se)*s(V)*s($))}function P($,se,ue){return m(s($),c($)*s(se)-d(ue)*c(se))}function M($,se,ue){return h(s(se)*s(ue)+c(se)*c(ue)*c($))}function Y($,se){return E*(280.16+360.9856235*$)-se}function W($){return $<0&&($=0),2967e-7/Math.tan($+.00312536/($+.08901179))}function U($){return E*(357.5291+.98560028*$)}function le($){var se=E*(1.9148*s($)+.02*s(2*$)+3e-4*s(3*$)),ue=E*102.9372;return $+se+ue+i}function Ce($){var se=U($),ue=le(se);return{dec:C(ue,0),ra:F(ue,0)}}var ce={};ce.getPosition=function($,se,ue){var je=E*-ue,ke=E*se,Ke=z($),Pe=Ce(Ke),Ve=Y(Ke,je)-Pe.ra;return{azimuth:P(Ve,ke,Pe.dec),altitude:M(Ve,ke,Pe.dec)}};var _e=ce.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];ce.addTime=function($,se,ue){_e.push([$,se,ue])};var Me=9e-4;function Re($,se){return Math.round($-Me-se/(2*i))}function Ue($,se,ue){return Me+($+se)/(2*i)+ue}function ze($,se,ue){return S+$+.0053*s(se)-.0069*s(2*ue)}function Xe($,se,ue){return T((s($)-s(se)*s(ue))/(c(se)*c(ue)))}function ut($){return-2.076*Math.sqrt($)/60}function Le($,se,ue,je,ke,Ke,Pe){var Ve=Xe($,ue,je),oe=Ue(Ve,se,ke);return ze(oe,Ke,Pe)}ce.getTimes=function($,se,ue,je){je=je||0;var ke=E*-ue,Ke=E*se,Pe=ut(je),Ve=z($),oe=Re(Ve,ke),tt=Ue(0,ke,oe),Ze=U(tt),me=le(Ze),lt=C(me,0),ct=ze(tt,Ze,me),nt,Dt,ft,mt,_t,St,Ye={solarNoon:H(ct),nadir:H(ct-.5)};for(nt=0,Dt=_e.length;nt<Dt;nt+=1)ft=_e[nt],mt=(ft[0]+Pe)*E,_t=Le(mt,ke,Ke,lt,oe,Ze,me),St=ct-(_t-ct),Ye[ft[1]]=H(St),Ye[ft[2]]=H(_t);return Ye};function De($){var se=E*(218.316+13.176396*$),ue=E*(134.963+13.064993*$),je=E*(93.272+13.22935*$),ke=se+E*6.289*s(ue),Ke=E*5.128*s(je),Pe=385001-20905*c(ue);return{ra:F(ke,Ke),dec:C(ke,Ke),dist:Pe}}ce.getMoonPosition=function($,se,ue){var je=E*-ue,ke=E*se,Ke=z($),Pe=De(Ke),Ve=Y(Ke,je)-Pe.ra,oe=M(Ve,ke,Pe.dec),tt=m(s(Ve),d(ke)*c(Pe.dec)-s(Pe.dec)*c(Ve));return oe=oe+W(oe),{azimuth:P(Ve,ke,Pe.dec),altitude:oe,distance:Pe.dist,parallacticAngle:tt}},ce.getMoonIllumination=function($){var se=z($||new Date),ue=Ce(se),je=De(se),ke=149598e3,Ke=T(s(ue.dec)*s(je.dec)+c(ue.dec)*c(je.dec)*c(ue.ra-je.ra)),Pe=m(ke*s(Ke),je.dist-ke*c(Ke)),Ve=m(c(ue.dec)*s(ue.ra-je.ra),s(ue.dec)*c(je.dec)-c(ue.dec)*s(je.dec)*c(ue.ra-je.ra));return{fraction:(1+c(Pe))/2,phase:.5+.5*Pe*(Ve<0?-1:1)/Math.PI,angle:Ve}};function be($,se){return new Date($.valueOf()+se*K/24)}ce.getMoonTimes=function($,se,ue,je){var ke=new Date($);je?ke.setUTCHours(0,0,0,0):ke.setHours(0,0,0,0);for(var Ke=.133*E,Pe=ce.getMoonPosition(ke,se,ue).altitude-Ke,Ve,oe,tt,Ze,me,lt,ct,nt,Dt,ft,mt,_t,St,Ye=1;Ye<=24&&(Ve=ce.getMoonPosition(be(ke,Ye),se,ue).altitude-Ke,oe=ce.getMoonPosition(be(ke,Ye+1),se,ue).altitude-Ke,me=(Pe+oe)/2-Ve,lt=(oe-Pe)/2,ct=-lt/(2*me),nt=(me*ct+lt)*ct+Ve,Dt=lt*lt-4*me*Ve,ft=0,Dt>=0&&(St=Math.sqrt(Dt)/(Math.abs(me)*2),mt=ct-St,_t=ct+St,Math.abs(mt)<=1&&ft++,Math.abs(_t)<=1&&ft++,mt<-1&&(mt=_t)),ft===1?Pe<0?tt=Ye+mt:Ze=Ye+mt:ft===2&&(tt=Ye+(nt<0?_t:mt),Ze=Ye+(nt<0?mt:_t)),!(tt&&Ze));Ye+=2)Pe=oe;var It={};return tt&&(It.rise=be(ke,tt)),Ze&&(It.set=be(ke,Ze)),!tt&&!Ze&&(It[nt>0?"alwaysUp":"alwaysDown"]=!0),It},o.exports=ce})()}(Zr)),Zr.exports}var ms=gs();const ys=Pi(ms),Ai=/^[a-z0-9]+(-[a-z0-9]+)*$/,pr=(o,r,i,s="")=>{const c=o.split(":");if(o.slice(0,1)==="@"){if(c.length<2||c.length>3)return null;s=c.shift().slice(1)}if(c.length>3||!c.length)return null;if(c.length>1){const m=c.pop(),T=c.pop(),E={provider:c.length>0?c[0]:s,prefix:T,name:m};return r&&!ur(E)?null:E}const d=c[0],h=d.split("-");if(h.length>1){const m={provider:s,prefix:h.shift(),name:h.join("-")};return r&&!ur(m)?null:m}if(i&&s===""){const m={provider:s,prefix:"",name:d};return r&&!ur(m,i)?null:m}return null},ur=(o,r)=>o?!!((r&&o.prefix===""||o.prefix)&&o.name):!1,Mi=Object.freeze({left:0,top:0,width:16,height:16}),hr=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),gr=Object.freeze({...Mi,...hr}),oo=Object.freeze({...gr,body:"",hidden:!1});function bs(o,r){const i={};!o.hFlip!=!r.hFlip&&(i.hFlip=!0),!o.vFlip!=!r.vFlip&&(i.vFlip=!0);const s=((o.rotate||0)+(r.rotate||0))%4;return s&&(i.rotate=s),i}function ii(o,r){const i=bs(o,r);for(const s in oo)s in hr?s in o&&!(s in i)&&(i[s]=hr[s]):s in r?i[s]=r[s]:s in o&&(i[s]=o[s]);return i}function _s(o,r){const i=o.icons,s=o.aliases||Object.create(null),c=Object.create(null);function d(h){if(i[h])return c[h]=[];if(!(h in c)){c[h]=null;const m=s[h]&&s[h].parent,T=m&&d(m);T&&(c[h]=[m].concat(T))}return c[h]}return Object.keys(i).concat(Object.keys(s)).forEach(d),c}function ws(o,r,i){const s=o.icons,c=o.aliases||Object.create(null);let d={};function h(m){d=ii(s[m]||c[m],d)}return h(r),i.forEach(h),ii(o,d)}function ji(o,r){const i=[];if(typeof o!="object"||typeof o.icons!="object")return i;o.not_found instanceof Array&&o.not_found.forEach(c=>{r(c,null),i.push(c)});const s=_s(o);for(const c in s){const d=s[c];d&&(r(c,ws(o,c,d)),i.push(c))}return i}const xs={provider:"",aliases:{},not_found:{},...Mi};function $r(o,r){for(const i in r)if(i in o&&typeof o[i]!=typeof r[i])return!1;return!0}function Ki(o){if(typeof o!="object"||o===null)return null;const r=o;if(typeof r.prefix!="string"||!o.icons||typeof o.icons!="object"||!$r(o,xs))return null;const i=r.icons;for(const c in i){const d=i[c];if(!c||typeof d.body!="string"||!$r(d,oo))return null}const s=r.aliases||Object.create(null);for(const c in s){const d=s[c],h=d.parent;if(!c||typeof h!="string"||!i[h]&&!s[h]||!$r(d,oo))return null}return r}const ai=Object.create(null);function ks(o,r){return{provider:o,prefix:r,icons:Object.create(null),missing:new Set}}function pn(o,r){const i=ai[o]||(ai[o]=Object.create(null));return i[r]||(i[r]=ks(o,r))}function Fi(o,r){return Ki(r)?ji(r,(i,s)=>{s?o.icons[i]=s:o.missing.add(i)}):[]}function Ds(o,r,i){try{if(typeof i.body=="string")return o.icons[r]={...i},!0}catch{}return!1}let Mn=!1;function qi(o){return typeof o=="boolean"&&(Mn=o),Mn}function Ss(o){const r=typeof o=="string"?pr(o,!0,Mn):o;if(r){const i=pn(r.provider,r.prefix),s=r.name;return i.icons[s]||(i.missing.has(s)?null:void 0)}}function Ts(o,r){const i=pr(o,!0,Mn);if(!i)return!1;const s=pn(i.provider,i.prefix);return r?Ds(s,i.name,r):(s.missing.add(i.name),!0)}function Es(o,r){if(typeof o!="object")return!1;if(typeof r!="string"&&(r=o.provider||""),Mn&&!r&&!o.prefix){let c=!1;return Ki(o)&&(o.prefix="",ji(o,(d,h)=>{Ts(d,h)&&(c=!0)})),c}const i=o.prefix;if(!ur({prefix:i,name:"a"}))return!1;const s=pn(r,i);return!!Fi(s,o)}const Ri=Object.freeze({width:null,height:null}),Ni=Object.freeze({...Ri,...hr}),Os=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Cs=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function si(o,r,i){if(r===1)return o;if(i=i||100,typeof o=="number")return Math.ceil(o*r*i)/i;if(typeof o!="string")return o;const s=o.split(Os);if(s===null||!s.length)return o;const c=[];let d=s.shift(),h=Cs.test(d);for(;;){if(h){const m=parseFloat(d);isNaN(m)?c.push(d):c.push(Math.ceil(m*r*i)/i)}else c.push(d);if(d=s.shift(),d===void 0)return c.join("");h=!h}}function Is(o,r="defs"){let i="";const s=o.indexOf("<"+r);for(;s>=0;){const c=o.indexOf(">",s),d=o.indexOf("</"+r);if(c===-1||d===-1)break;const h=o.indexOf(">",d);if(h===-1)break;i+=o.slice(c+1,d).trim(),o=o.slice(0,s).trim()+o.slice(h+1)}return{defs:i,content:o}}function Ps(o,r){return o?"<defs>"+o+"</defs>"+r:r}function As(o,r,i){const s=Is(o);return Ps(s.defs,r+s.content+i)}const Ms=o=>o==="unset"||o==="undefined"||o==="none";function js(o,r){const i={...gr,...o},s={...Ni,...r},c={left:i.left,top:i.top,width:i.width,height:i.height};let d=i.body;[i,s].forEach(z=>{const V=[],F=z.hFlip,C=z.vFlip;let P=z.rotate;F?C?P+=2:(V.push("translate("+(c.width+c.left).toString()+" "+(0-c.top).toString()+")"),V.push("scale(-1 1)"),c.top=c.left=0):C&&(V.push("translate("+(0-c.left).toString()+" "+(c.height+c.top).toString()+")"),V.push("scale(1 -1)"),c.top=c.left=0);let M;switch(P<0&&(P-=Math.floor(P/4)*4),P=P%4,P){case 1:M=c.height/2+c.top,V.unshift("rotate(90 "+M.toString()+" "+M.toString()+")");break;case 2:V.unshift("rotate(180 "+(c.width/2+c.left).toString()+" "+(c.height/2+c.top).toString()+")");break;case 3:M=c.width/2+c.left,V.unshift("rotate(-90 "+M.toString()+" "+M.toString()+")");break}P%2===1&&(c.left!==c.top&&(M=c.left,c.left=c.top,c.top=M),c.width!==c.height&&(M=c.width,c.width=c.height,c.height=M)),V.length&&(d=As(d,'<g transform="'+V.join(" ")+'">',"</g>"))});const h=s.width,m=s.height,T=c.width,E=c.height;let K,q;h===null?(q=m===null?"1em":m==="auto"?E:m,K=si(q,T/E)):(K=h==="auto"?T:h,q=m===null?si(K,E/T):m==="auto"?E:m);const S={},B=(z,V)=>{Ms(V)||(S[z]=V.toString())};B("width",K),B("height",q);const H=[c.left,c.top,T,E];return S.viewBox=H.join(" "),{attributes:S,viewBox:H,body:d}}const Ks=/\sid="(\S+)"/g,Fs="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let qs=0;function Rs(o,r=Fs){const i=[];let s;for(;s=Ks.exec(o);)i.push(s[1]);if(!i.length)return o;const c="suffix"+(Math.random()*16777216|Date.now()).toString(16);return i.forEach(d=>{const h=typeof r=="function"?r(d):r+(qs++).toString(),m=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o=o.replace(new RegExp('([#;"])('+m+')([")]|\\.[a-z])',"g"),"$1"+h+c+"$3")}),o=o.replace(new RegExp(c,"g"),""),o}const io=Object.create(null);function Ns(o,r){io[o]=r}function ao(o){return io[o]||io[""]}function vo(o){let r;if(typeof o.resources=="string")r=[o.resources];else if(r=o.resources,!(r instanceof Array)||!r.length)return null;return{resources:r,path:o.path||"/",maxURL:o.maxURL||500,rotate:o.rotate||750,timeout:o.timeout||5e3,random:o.random===!0,index:o.index||0,dataAfterTimeout:o.dataAfterTimeout!==!1}}const po=Object.create(null),On=["https://api.simplesvg.com","https://api.unisvg.com"],lr=[];for(;On.length>0;)On.length===1||Math.random()>.5?lr.push(On.shift()):lr.push(On.pop());po[""]=vo({resources:["https://api.iconify.design"].concat(lr)});function Bs(o,r){const i=vo(r);return i===null?!1:(po[o]=i,!0)}function go(o){return po[o]}const Hs=()=>{let o;try{if(o=fetch,typeof o=="function")return o}catch{}};let ui=Hs();function zs(o,r){const i=go(o);if(!i)return 0;let s;if(!i.maxURL)s=0;else{let c=0;i.resources.forEach(h=>{c=Math.max(c,h.length)});const d=r+".json?icons=";s=i.maxURL-c-i.path.length-d.length}return s}function Ls(o){return o===404}const Us=(o,r,i)=>{const s=[],c=zs(o,r),d="icons";let h={type:d,provider:o,prefix:r,icons:[]},m=0;return i.forEach((T,E)=>{m+=T.length+1,m>=c&&E>0&&(s.push(h),h={type:d,provider:o,prefix:r,icons:[]},m=T.length),h.icons.push(T)}),s.push(h),s};function Ys(o){if(typeof o=="string"){const r=go(o);if(r)return r.path}return"/"}const Vs=(o,r,i)=>{if(!ui){i("abort",424);return}let s=Ys(r.provider);switch(r.type){case"icons":{const d=r.prefix,m=r.icons.join(","),T=new URLSearchParams({icons:m});s+=d+".json?"+T.toString();break}case"custom":{const d=r.uri;s+=d.slice(0,1)==="/"?d.slice(1):d;break}default:i("abort",400);return}let c=503;ui(o+s).then(d=>{const h=d.status;if(h!==200){setTimeout(()=>{i(Ls(h)?"abort":"next",h)});return}return c=501,d.json()}).then(d=>{if(typeof d!="object"||d===null){setTimeout(()=>{d===404?i("abort",d):i("next",c)});return}setTimeout(()=>{i("success",d)})}).catch(()=>{i("next",c)})},Ws={prepare:Us,send:Vs};function Gs(o){const r={loaded:[],missing:[],pending:[]},i=Object.create(null);o.sort((c,d)=>c.provider!==d.provider?c.provider.localeCompare(d.provider):c.prefix!==d.prefix?c.prefix.localeCompare(d.prefix):c.name.localeCompare(d.name));let s={provider:"",prefix:"",name:""};return o.forEach(c=>{if(s.name===c.name&&s.prefix===c.prefix&&s.provider===c.provider)return;s=c;const d=c.provider,h=c.prefix,m=c.name,T=i[d]||(i[d]=Object.create(null)),E=T[h]||(T[h]=pn(d,h));let K;m in E.icons?K=r.loaded:h===""||E.missing.has(m)?K=r.missing:K=r.pending;const q={provider:d,prefix:h,name:m};K.push(q)}),r}function Bi(o,r){o.forEach(i=>{const s=i.loaderCallbacks;s&&(i.loaderCallbacks=s.filter(c=>c.id!==r))})}function Qs(o){o.pendingCallbacksFlag||(o.pendingCallbacksFlag=!0,setTimeout(()=>{o.pendingCallbacksFlag=!1;const r=o.loaderCallbacks?o.loaderCallbacks.slice(0):[];if(!r.length)return;let i=!1;const s=o.provider,c=o.prefix;r.forEach(d=>{const h=d.icons,m=h.pending.length;h.pending=h.pending.filter(T=>{if(T.prefix!==c)return!0;const E=T.name;if(o.icons[E])h.loaded.push({provider:s,prefix:c,name:E});else if(o.missing.has(E))h.missing.push({provider:s,prefix:c,name:E});else return i=!0,!0;return!1}),h.pending.length!==m&&(i||Bi([o],d.id),d.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),d.abort))})}))}let Js=0;function Xs(o,r,i){const s=Js++,c=Bi.bind(null,i,s);if(!r.pending.length)return c;const d={id:s,icons:r,callback:o,abort:c};return i.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(d)}),c}function Zs(o,r=!0,i=!1){const s=[];return o.forEach(c=>{const d=typeof c=="string"?pr(c,r,i):c;d&&s.push(d)}),s}var $s={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function eu(o,r,i,s){const c=o.resources.length,d=o.random?Math.floor(Math.random()*c):o.index;let h;if(o.random){let W=o.resources.slice(0);for(h=[];W.length>1;){const U=Math.floor(Math.random()*W.length);h.push(W[U]),W=W.slice(0,U).concat(W.slice(U+1))}h=h.concat(W)}else h=o.resources.slice(d).concat(o.resources.slice(0,d));const m=Date.now();let T="pending",E=0,K,q=null,S=[],B=[];typeof s=="function"&&B.push(s);function H(){q&&(clearTimeout(q),q=null)}function z(){T==="pending"&&(T="aborted"),H(),S.forEach(W=>{W.status==="pending"&&(W.status="aborted")}),S=[]}function V(W,U){U&&(B=[]),typeof W=="function"&&B.push(W)}function F(){return{startTime:m,payload:r,status:T,queriesSent:E,queriesPending:S.length,subscribe:V,abort:z}}function C(){T="failed",B.forEach(W=>{W(void 0,K)})}function P(){S.forEach(W=>{W.status==="pending"&&(W.status="aborted")}),S=[]}function M(W,U,le){const Ce=U!=="success";switch(S=S.filter(ce=>ce!==W),T){case"pending":break;case"failed":if(Ce||!o.dataAfterTimeout)return;break;default:return}if(U==="abort"){K=le,C();return}if(Ce){K=le,S.length||(h.length?Y():C());return}if(H(),P(),!o.random){const ce=o.resources.indexOf(W.resource);ce!==-1&&ce!==o.index&&(o.index=ce)}T="completed",B.forEach(ce=>{ce(le)})}function Y(){if(T!=="pending")return;H();const W=h.shift();if(W===void 0){if(S.length){q=setTimeout(()=>{H(),T==="pending"&&(P(),C())},o.timeout);return}C();return}const U={status:"pending",resource:W,callback:(le,Ce)=>{M(U,le,Ce)}};S.push(U),E++,q=setTimeout(Y,o.rotate),i(W,r,U.callback)}return setTimeout(Y),F}function Hi(o){const r={...$s,...o};let i=[];function s(){i=i.filter(m=>m().status==="pending")}function c(m,T,E){const K=eu(r,m,T,(q,S)=>{s(),E&&E(q,S)});return i.push(K),K}function d(m){return i.find(T=>m(T))||null}return{query:c,find:d,setIndex:m=>{r.index=m},getIndex:()=>r.index,cleanup:s}}function li(){}const eo=Object.create(null);function tu(o){if(!eo[o]){const r=go(o);if(!r)return;const i=Hi(r),s={config:r,redundancy:i};eo[o]=s}return eo[o]}function nu(o,r,i){let s,c;if(typeof o=="string"){const d=ao(o);if(!d)return i(void 0,424),li;c=d.send;const h=tu(o);h&&(s=h.redundancy)}else{const d=vo(o);if(d){s=Hi(d);const h=o.resources?o.resources[0]:"",m=ao(h);m&&(c=m.send)}}return!s||!c?(i(void 0,424),li):s.query(r,c,i)().abort}function ci(){}function ru(o){o.iconsLoaderFlag||(o.iconsLoaderFlag=!0,setTimeout(()=>{o.iconsLoaderFlag=!1,Qs(o)}))}function ou(o){const r=[],i=[];return o.forEach(s=>{(s.match(Ai)?r:i).push(s)}),{valid:r,invalid:i}}function Cn(o,r,i){function s(){const c=o.pendingIcons;r.forEach(d=>{c&&c.delete(d),o.icons[d]||o.missing.add(d)})}if(i&&typeof i=="object")try{if(!Fi(o,i).length){s();return}}catch(c){console.error(c)}s(),ru(o)}function fi(o,r){o instanceof Promise?o.then(i=>{r(i)}).catch(()=>{r(null)}):r(o)}function iu(o,r){o.iconsToLoad?o.iconsToLoad=o.iconsToLoad.concat(r).sort():o.iconsToLoad=r,o.iconsQueueFlag||(o.iconsQueueFlag=!0,setTimeout(()=>{o.iconsQueueFlag=!1;const{provider:i,prefix:s}=o,c=o.iconsToLoad;if(delete o.iconsToLoad,!c||!c.length)return;const d=o.loadIcon;if(o.loadIcons&&(c.length>1||!d)){fi(o.loadIcons(c,s,i),K=>{Cn(o,c,K)});return}if(d){c.forEach(K=>{const q=d(K,s,i);fi(q,S=>{const B=S?{prefix:s,icons:{[K]:S}}:null;Cn(o,[K],B)})});return}const{valid:h,invalid:m}=ou(c);if(m.length&&Cn(o,m,null),!h.length)return;const T=s.match(Ai)?ao(i):null;if(!T){Cn(o,h,null);return}T.prepare(i,s,h).forEach(K=>{nu(i,K,q=>{Cn(o,K.icons,q)})})}))}const au=(o,r)=>{const i=Zs(o,!0,qi()),s=Gs(i);if(!s.pending.length){let T=!0;return r&&setTimeout(()=>{T&&r(s.loaded,s.missing,s.pending,ci)}),()=>{T=!1}}const c=Object.create(null),d=[];let h,m;return s.pending.forEach(T=>{const{provider:E,prefix:K}=T;if(K===m&&E===h)return;h=E,m=K,d.push(pn(E,K));const q=c[E]||(c[E]=Object.create(null));q[K]||(q[K]=[])}),s.pending.forEach(T=>{const{provider:E,prefix:K,name:q}=T,S=pn(E,K),B=S.pendingIcons||(S.pendingIcons=new Set);B.has(q)||(B.add(q),c[E][K].push(q))}),d.forEach(T=>{const E=c[T.provider][T.prefix];E.length&&iu(T,E)}),r?Xs(r,s,d):ci};function su(o,r){const i={...o};for(const s in r){const c=r[s],d=typeof c;s in Ri?(c===null||c&&(d==="string"||d==="number"))&&(i[s]=c):d===typeof i[s]&&(i[s]=s==="rotate"?c%4:c)}return i}const uu=/[\s,]+/;function lu(o,r){r.split(uu).forEach(i=>{switch(i.trim()){case"horizontal":o.hFlip=!0;break;case"vertical":o.vFlip=!0;break}})}function cu(o,r=0){const i=o.replace(/^-?[0-9.]*/,"");function s(c){for(;c<0;)c+=4;return c%4}if(i===""){const c=parseInt(o);return isNaN(c)?0:s(c)}else if(i!==o){let c=0;switch(i){case"%":c=25;break;case"deg":c=90}if(c){let d=parseFloat(o.slice(0,o.length-i.length));return isNaN(d)?0:(d=d/c,d%1===0?s(d):0)}}return r}function fu(o,r){let i=o.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in r)i+=" "+s+'="'+r[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+o+"</svg>"}function du(o){return o.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function hu(o){return"data:image/svg+xml,"+du(o)}function vu(o){return'url("'+hu(o)+'")'}const di={...Ni,inline:!1},pu={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},gu={display:"inline-block"},so={"background-color":"currentColor"},zi={"background-color":"transparent"},hi={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},vi={"-webkit-mask":so,mask:so,background:zi};for(const o in vi){const r=vi[o];for(const i in hi)r[o+"-"+i]=hi[i]}function mu(o){return o+(o.match(/^[-0-9.]+$/)?"px":"")}function yu(o,r){const i=su(di,r),s=r.mode||"svg",c=s==="svg"?{...pu}:{};o.body.indexOf("xlink:")===-1&&delete c["xmlns:xlink"];let d=typeof r.style=="string"?r.style:"";for(let F in r){const C=r[F];if(C!==void 0)switch(F){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":i[F]=C===!0||C==="true"||C===1;break;case"flip":typeof C=="string"&&lu(i,C);break;case"color":d=d+(d.length>0&&d.trim().slice(-1)!==";"?";":"")+"color: "+C+"; ";break;case"rotate":typeof C=="string"?i[F]=cu(C):typeof C=="number"&&(i[F]=C);break;case"ariaHidden":case"aria-hidden":C!==!0&&C!=="true"&&delete c["aria-hidden"];break;default:if(F.slice(0,3)==="on:")break;di[F]===void 0&&(c[F]=C)}}const h=js(o,i),m=h.attributes;if(i.inline&&(d="vertical-align: -0.125em; "+d),s==="svg"){Object.assign(c,m),d!==""&&(c.style=d);let F=0,C=r.id;return typeof C=="string"&&(C=C.replace(/-/g,"_")),{svg:!0,attributes:c,body:Rs(h.body,C?()=>C+"ID"+F++:"iconifySvelte")}}const{body:T,width:E,height:K}=o,q=s==="mask"||(s==="bg"?!1:T.indexOf("currentColor")!==-1),S=fu(T,{...m,width:E+"",height:K+""}),H={"--svg":vu(S)},z=F=>{const C=m[F];C&&(H[F]=mu(C))};z("width"),z("height"),Object.assign(H,gu,q?so:zi);let V="";for(const F in H)V+=F+": "+H[F]+";";return c.style=V+d,{svg:!1,attributes:c}}qi(!0);Ns("",Ws);if(typeof document<"u"&&typeof window<"u"){const o=window;if(o.IconifyPreload!==void 0){const r=o.IconifyPreload,i="Invalid IconifyPreload syntax.";typeof r=="object"&&r!==null&&(r instanceof Array?r:[r]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!Es(s))&&console.error(i)}catch{console.error(i)}})}if(o.IconifyProviders!==void 0){const r=o.IconifyProviders;if(typeof r=="object"&&r!==null)for(let i in r){const s="IconifyProviders["+i+"] is invalid.";try{const c=r[i];if(typeof c!="object"||!c||c.resources===void 0)continue;Bs(i,c)||console.error(s)}catch{console.error(s)}}}}function bu(o,r,i,s,c){function d(){r.loading&&(r.loading.abort(),r.loading=null)}if(typeof o=="object"&&o!==null&&typeof o.body=="string")return r.name="",d(),{data:{...gr,...o}};let h;if(typeof o!="string"||(h=pr(o,!1,!0))===null)return d(),null;const m=Ss(h);if(!m)return i&&(!r.loading||r.loading.name!==o)&&(d(),r.name="",r.loading={name:o,abort:au([h],s)}),null;d(),r.name!==o&&(r.name=o,c&&!r.destroyed&&c(o));const T=["iconify"];return h.prefix!==""&&T.push("iconify--"+h.prefix),h.provider!==""&&T.push("iconify--"+h.provider),{data:m,classes:T}}function _u(o,r){return o?yu({...gr,...o},r):null}var wu=Va("<svg><!></svg>"),xu=pe("<span></span>");function bt(o,r){at(r,!0);const i={name:"",loading:null,destroyed:!1},s=Qa(r,["$$slots","$$events","$$legacy"]);let c=Be(!1),d=Be(0),h=Be(null);Ua(()=>{I(d);const q=!!r.ssr||I(c),S=bu(r.icon,i,q,m,r.onload),B=S?_u(S.data,s):null;B&&S.classes&&(B.attributes.class=(typeof s.class=="string"?s.class+" ":"")+S.classes.join(" ")),ve(h,B,!0)});function m(){Ya(d)}pi(()=>{ve(c,!0)}),ba(()=>{i.destroyed=!0,i.loading&&(i.loading.abort(),i.loading=null)});var T=rn(),E=gt(T);{var K=q=>{var S=rn(),B=gt(S);{var H=V=>{var F=wu();ei(F,()=>({...I(h).attributes}));var C=L(F);ns(C,()=>I(h).body,!0),N(F),de(V,F)},z=V=>{var F=xu();ei(F,()=>({...I(h).attributes})),de(V,F)};rt(B,V=>{I(h).svg?V(H):V(z,!1)})}de(q,S)};rt(E,q=>{I(h)&&q(K)})}de(o,T),st()}var ku=pe('<div class="hour svelte-z94qzf"></div>'),Du=pe('<div class="day svelte-z94qzf"><!></div>'),Su=pe('<p class="day svelte-z94qzf"> </p> <!>',1),Tu=pe('<div class="day svelte-z94qzf"><div class="hour svelte-z94qzf"></div></div>'),Eu=pe('<figure class="svelte-z94qzf"><div class="labels svelte-z94qzf"><p class="date svelte-z94qzf">Date</p> <p class="hour svelte-z94qzf">0</p> <p class="hour svelte-z94qzf">12</p> <p class="hour svelte-z94qzf">24</p></div> <div class="grid svelte-z94qzf"><!></div> <div class="average grid svelte-z94qzf"><p class="day svelte-z94qzf">Avg</p> <!></div></figure>');function Ou(o,r){at(r,!0);let i=xe(r,"average",19,()=>[]),s=xe(r,"daily",3,null);xe(r,"days",3,10);function c(S){return S=new Date(S+"T00:00:00"),new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(S)}function d(S,B){return S===0||B[S-1]===0?(1-B[S])*100+"%":0}var h=Eu(),m=te(L(h),2),T=L(m);{var E=S=>{var B=rn(),H=gt(B);Ct(H,17,()=>Object.keys(s()),Ot,(z,V)=>{var F=Su();const C=Je(()=>s()[I(V)]);var P=gt(F),M=L(P,!0);N(P);var Y=te(P,2);Ct(Y,16,()=>({length:24}),Ot,(W,U,le)=>{var Ce=Du(),ce=L(Ce);{var _e=Me=>{var Re=ku();let Ue;He(ze=>Ue=An(Re,"",Ue,ze),[()=>({"margin-left":d(le,I(C)),width:100*I(C)[le]+"%"})]),de(Me,Re)};rt(ce,Me=>{I(C)[le]!==0&&Me(_e)})}N(Ce),de(W,Ce)}),He(W=>Oe(M,W),[()=>c(I(V))]),de(z,F)}),de(S,B)};rt(T,S=>{s()!==null&&S(E)})}N(m);var K=te(m,2),q=te(L(K),2);Ct(q,16,()=>({length:24}),Ot,(S,B,H)=>{var z=Tu(),V=L(z);let F;N(z),He(C=>F=An(V,"",F,C),[()=>({opacity:i()[H],width:"100%"})]),de(S,z)}),N(K),N(h),de(o,h),st()}function Cu(o,r,i,s,c){r(parseInt(o.currentTarget.value)),i(o.currentTarget.options[o.currentTarget.selectedIndex].textContent),s(o.currentTarget.options[o.currentTarget.selectedIndex].getAttribute("data-icon")),c.onchange&&c.onchange(r())}var Iu=pe('<div class="svelte-avz5er"><!> <p class="svelte-avz5er"> </p> <!> <select class="svelte-avz5er"><!></select></div>');function Pu(o,r){at(r,!0);let i=xe(r,"icon",7),s=xe(r,"label",7),c=xe(r,"value",7,0);var d=Iu(),h=L(d);bt(h,{color:"#161616",height:"20",get icon(){return i()},width:"20"});var m=te(h,2),T=L(m,!0);N(m);var E=te(m,2);bt(E,{color:"#161616",height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"});var K=te(E,2);K.__change=[Cu,c,s,i,r];var q=L(K);Wa(q,()=>r.children??Ga),N(K);var S;Ei(K),N(d),He(()=>{Oe(T,s()),S!==(S=c())&&(K.value=(K.__value=c())??"",fr(K,c()))}),de(o,d),st()}wt(["change"]);var Au=pe('<p class="svelte-1n7m5si">0</p>'),Mu=pe('<p class="svelte-1n7m5si"> </p>'),ju=pe('<p class="svelte-1n7m5si"> </p>'),Ku=pe('<div class="column svelte-1n7m5si"><p class="svelte-1n7m5si"> </p></div>'),Fu=pe('<div class="line svelte-1n7m5si"></div>'),qu=pe('<figure class="svelte-1n7m5si"><div class="labels svelte-1n7m5si"><!></div> <div class="chart svelte-1n7m5si"><div class="labels svelte-1n7m5si"></div> <div class="columns svelte-1n7m5si"><!> <!></div></div></figure>');function Ru(o,r){at(r,!0);let i=xe(r,"water",19,()=>[]),s=Je(()=>i().reduce((F,C)=>(F=C.volume>F?C.volume:F,F),0)),c=Je(()=>{const F=Math.floor(I(s)+I(s)*.1);return[0,Math.round(F/4)*1,Math.round(F/4)*2,Math.round(F/4)*3,F]});function d(F){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(F)}var h=qu(),m=L(h),T=L(m);{var E=F=>{var C=Au();de(F,C)},K=F=>{var C=rn(),P=gt(C);Ct(P,17,()=>I(c),Ot,(M,Y)=>{var W=Mu();const U=Je(()=>I(Y)===0?"0":I(Y)+" oz");var le=L(W,!0);N(W),He(()=>Oe(le,I(U))),de(M,W)}),de(F,C)};rt(T,F=>{I(s)===0?F(E):F(K,!1)})}N(m);var q=te(m,2),S=L(q);Ct(S,21,i,Ot,(F,C)=>{var P=ju(),M=L(P,!0);N(P),He(Y=>Oe(M,Y),[()=>d(I(C).created)]),de(F,P)}),N(S);var B=te(S,2),H=L(B);{var z=F=>{var C=rn(),P=gt(C);Ct(P,17,i,Ot,(M,Y)=>{var W=Ku();let U;var le=L(W),Ce=L(le);N(le),N(W),He(ce=>{U=An(W,"",U,ce),Oe(Ce,`${I(Y).volume??""} oz`)},[()=>({width:`${I(Y).volume/Math.floor(I(s)+I(s)*.1)*100}%`})]),de(M,W)}),de(F,C)};rt(H,F=>{I(s)!==0&&F(z)})}var V=te(H,2);Ct(V,16,()=>({length:4}),Ot,(F,C,P)=>{var M=Fu();nn(M,"data-value",P),An(M,"",{},{left:`${25*(P+1)}%`}),de(F,M)}),N(B),N(q),N(h),de(o,h),st()}var Nu=pe('<button class="sun svelte-bt65q5" type="button">Sunrise/sunset</button>'),Bu=pe('<!> <p class="svelte-bt65q5"> </p>',1),Hu=pe('<option data-icon="material-symbols:mode-heat-outline-rounded" selected>Fasting</option> <option data-icon="material-symbols:water-drop-outline-rounded">Water</option>',1),zu=pe('<section class="svelte-bt65q5"><!> <footer class="svelte-bt65q5"><div class="daynight svelte-bt65q5"><!></div> <!></footer></section>');function Li(o,r){at(r,!0);let i=xe(r,"average",19,()=>[]),s=xe(r,"daily",3,null),c=xe(r,"days",3,10),d=xe(r,"water",19,()=>[]),h=Be(0);function m(C){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(C)}var T=zu(),E=L(T);{var K=C=>{Ou(C,{get average(){return i()},get daily(){return s()},get days(){return c()}})},q=(C,P)=>{{var M=Y=>{Ru(Y,{get water(){return d()}})};rt(C,Y=>{I(h)===1&&Y(M)},P)}};rt(E,C=>{I(h)===0?C(K):C(q,!1)})}var S=te(E,2),B=L(S),H=L(B);{var z=C=>{var P=Nu();P.__click=function(...M){var Y;(Y=r.onsun)==null||Y.apply(this,M)},de(C,P)},V=C=>{var P=Bu(),M=gt(P);const Y=Je(()=>r.sun&&r.sun.icon?r.sun.icon:null);bt(M,{height:"16",get icon(){return I(Y)},width:"16"});var W=te(M,2),U=L(W,!0);N(W),He(le=>Oe(U,le),[()=>r.sun&&r.sun.timing?m(r.sun.timing):""]),de(C,P)};rt(H,C=>{r.sun===null?C(z):C(V,!1)})}N(B);var F=te(B,2);Pu(F,{icon:"material-symbols:mode-heat-outline-rounded",label:"Fasting",onchange:C=>ve(h,C,!0),children:(C,P)=>{var M=Hu(),Y=gt(M);Y.value=Y.__value="0";var W=te(Y,2);W.value=W.__value="1",de(C,M)},$$slots:{default:!0}}),N(S),N(T),de(o,T),st()}wt(["click"]);var Lu=pe('<article class="svelte-10tx4k0"><p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">hrs</span></p> <p class="colon svelte-10tx4k0">:</p> <p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">min</span></p> <p class="colon svelte-10tx4k0">:</p> <p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">sec</span></p></article>');function Uu(o,r){at(r,!0);let i=xe(r,"now",3,null),s=xe(r,"started",3,null),c=Je(()=>{if(s()===null)return{hours:0,minutes:"00",seconds:"00"};const z=Math.floor((i()-s().getTime())/1e3);return{hours:Math.floor(z/3600).toString(10).padStart(2,"0"),minutes:Math.floor(z%3600/60).toString(10).padStart(2,"0"),seconds:(z%60).toString(10).padStart(2,"0")}});var d=Lu(),h=L(d),m=L(h),T=L(m,!0);N(m),Gr(2),N(h);var E=te(h,4),K=L(E),q=L(K,!0);N(K),Gr(2),N(E);var S=te(E,4),B=L(S),H=L(B,!0);N(B),Gr(2),N(S),N(d),He(()=>{Oe(T,I(c).hours),Oe(q,I(c).minutes),Oe(H,I(c).seconds)}),de(o,d),st()}function Yu(o,r,i){r()===null?i.onstart&&i.onstart():i.onend&&i.onend()}var Vu=pe('<p class="svelte-1tavlmb">You are not fasting.</p>'),Wu=pe('<p class="svelte-1tavlmb">You are fasting.</p> <!> <p class="started svelte-1tavlmb"> </p>',1),Gu=pe('<section class="svelte-1tavlmb"><header class="svelte-1tavlmb"><h3 class="svelte-1tavlmb">Fasting</h3> <button type="button" class="svelte-1tavlmb"><!></button></header> <article class="svelte-1tavlmb"><!> <button class="primary svelte-1tavlmb" type="button"> </button></article> <div class="graph svelte-1tavlmb"><!></div> <footer class="svelte-1tavlmb"><button class="hunger secondary svelte-1tavlmb" type="button"><!> <span> </span></button> <button class="water secondary svelte-1tavlmb" type="button"><!> <span> </span></button></footer></section>');function Qu(o,r){at(r,!0);let i=xe(r,"activity",3,null),s=xe(r,"hunger",3,5),c=xe(r,"levels",19,()=>[]),d=xe(r,"now",3,null),h=xe(r,"started",3,null),m=xe(r,"sun",3,null),T=xe(r,"volume",3,null),E=xe(r,"water",3,0);function K(De){return c().find($=>$.value===De).label}function q(De){return De===null?null:new Intl.DateTimeFormat(navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(De)}var S=Gu(),B=L(S),H=te(L(B),2);H.__click=function(...De){var be;(be=r.onsettings)==null||be.apply(this,De)};var z=L(H);bt(z,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),N(H),N(B);var V=te(B,2),F=L(V);{var C=De=>{var be=Vu();de(De,be)},P=De=>{var be=Wu(),$=te(gt(be),2);Uu($,{get now(){return d()},get started(){return h()}});var se=te($,2),ue=L(se);N(se),He(je=>Oe(ue,`Started ${je??""}`),[()=>q(h())]),de(De,be)};rt(F,De=>{h()===null?De(C):De(P,!1)})}var M=te(F,2);M.__click=[Yu,h,r];var Y=L(M);N(M),N(V);var W=te(V,2),U=L(W);const le=Je(()=>i()===null?[]:i().average),Ce=Je(()=>i()===null?null:i().daily);Li(U,{get average(){return I(le)},get daily(){return I(Ce)},days:7,get onsun(){return r.onsun},get sun(){return m()},get water(){return T()}}),N(W);var ce=te(W,2),_e=L(ce);_e.__click=function(...De){var be;(be=r.onhunger)==null||be.apply(this,De)};var Me=L(_e);bt(Me,{height:"20",icon:"material-symbols:fork-spoon-rounded",width:"20"});var Re=te(Me,2),Ue=L(Re,!0);N(Re),N(_e);var ze=te(_e,2);ze.__click=function(...De){var be;(be=r.onwater)==null||be.apply(this,De)};var Xe=L(ze);bt(Xe,{height:"20",icon:"material-symbols:water-drop-outline-rounded",width:"20"});var ut=te(Xe,2),Le=L(ut);N(ut),N(ze),N(ce),N(S),He(De=>{Oe(Y,`${h()===null?"Start":"Stop"} fasting`),Oe(Ue,De),Oe(Le,`${E()??""} oz`)},[()=>K(s())]),de(o,S),st()}wt(["click"]);function Ju(o,r,i,s){const c=new Date(parseInt(o.currentTarget.getAttribute("data-year")),parseInt(o.currentTarget.getAttribute("data-month")),parseInt(o.currentTarget.getAttribute("data-date")));c.getMonth()!==r().getMonth()&&r(new Date(c.getTime())),i(new Date(c.getTime())),s.onchange&&s.onchange(i())}var Xu=pe('<button type="button"> </button>'),Zu=pe('<section><header class="svelte-1ll096s"><h3 class="svelte-1ll096s"> </h3> <button type="button" class="svelte-1ll096s"><!></button> <button type="button" class="svelte-1ll096s"><!></button></header> <article class="svelte-1ll096s"><p class="svelte-1ll096s">Sun</p> <p class="svelte-1ll096s">Mon</p> <p class="svelte-1ll096s">Tue</p> <p class="svelte-1ll096s">Wed</p> <p class="svelte-1ll096s">Thu</p> <p class="svelte-1ll096s">Fri</p> <p class="svelte-1ll096s">Sat</p></article> <article class="svelte-1ll096s"></article></section>');function $u(o,r){at(r,!0);let i=xe(r,"display",23,()=>new Date),s=xe(r,"value",23,()=>new Date),c=Je(()=>new Intl.DateTimeFormat(navigator.language,{month:"long",year:"numeric"}).format(i())),d=Je(()=>{const F=[],C=new Date,P=new Date(i().getFullYear(),i().getMonth(),1);P.setDate(P.getDate()-P.getDay());for(let M=0;M<42;M++){const Y={date:P.getDate(),month:P.getMonth(),year:P.getFullYear(),outside:!0,today:!1,selected:!1,after:!1};P.getFullYear()===i().getFullYear()&&P.getMonth()===i().getMonth()&&(Y.outside=!1),P.getTime()>Date.now()&&(Y.after=!0),P.getFullYear()===C.getFullYear()&&P.getMonth()===C.getMonth()&&P.getDate()===C.getDate()&&(Y.today=!0),P.getFullYear()===s().getFullYear()&&P.getMonth()===s().getMonth()&&P.getDate()===s().getDate()&&(Y.selected=!0),P.setDate(P.getDate()+1),F.push(Y)}return F});function h(){let F=i().getMonth(),C=i().getFullYear();C=F===0?C-1:C,F=F===0?11:F-1,i(new Date(C,F,i().getDate()))}function m(){let F=i().getMonth(),C=i().getFullYear();C=F===11?C+1:C,F=(F+1)%12,i(new Date(C,F,i().getDate()))}var T=Zu(),E=L(T),K=L(E),q=L(K,!0);N(K);var S=te(K,2);S.__click=h;var B=L(S);bt(B,{height:"24",icon:"material-symbols:navigate-before",width:"24"}),N(S);var H=te(S,2);H.__click=m;var z=L(H);bt(z,{height:"24",icon:"material-symbols:navigate-next",width:"24"}),N(H),N(E);var V=te(E,4);Ct(V,21,()=>I(d),Ot,(F,C)=>{var P=Xu();P.__click=[Ju,i,s,r];let M;var Y=L(P,!0);N(P),He(W=>{nn(P,"data-year",I(C).year),nn(P,"data-month",I(C).month),nn(P,"data-date",I(C).date),P.disabled=I(C).after,M=Vt(P,1,"svelte-1ll096s",null,M,W),Oe(Y,I(C).date)},[()=>({outside:I(C).outside,today:I(C).today,selected:I(C).selected})]),de(F,P)}),N(V),N(T),He(()=>Oe(q,I(c))),de(o,T),st()}wt(["click"]);function el(o,r,i){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===12?s.setHours(23):s.setHours(s.getHours()-1):s.getHours()===0?s.setHours(11):s.setHours(s.getHours()-1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function tl(o,r,i){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===23?s.setHours(12):s.setHours(s.getHours()+1):s.getHours()===11?s.setHours(0):s.setHours(s.getHours()+1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function nl(o,r,i){const s=new Date(r().getTime());s.getHours()>=12&&s.setHours(s.getHours()-12),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function rl(o,r,i){const s=new Date(r().getTime());s.getHours()<12&&s.setHours(s.getHours()+12),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function ol(o,r,i){const s=new Date(r().getTime());s.getMinutes()===0?s.setMinutes(59):s.setMinutes(s.getMinutes()-1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function il(o,r,i){const s=new Date(r().getTime());s.getMinutes()===59?s.setMinutes(0):s.setMinutes(s.getMinutes()+1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}var al=pe('<article class="svelte-1bevvpj"><div class="time svelte-1bevvpj"><div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div> <p class="svelte-1bevvpj">:</p> <div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div></div> <div class="meridian svelte-1bevvpj"><button type="button">AM</button> <button type="button">PM</button></div></article>');function sl(o,r){at(r,!0);let i=xe(r,"value",23,()=>new Date),s=Je(()=>i().getHours()%12||12),c=Je(()=>i().getMinutes().toString(10).padStart(2,"0")),d=Je(()=>i().getHours()>=12?"PM":"AM");var h=al(),m=L(h),T=L(m),E=L(T);E.__click=[tl,i,r];var K=L(E);bt(K,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),N(E);var q=te(E,2),S=L(q,!0);N(q);var B=te(q,2);B.__click=[el,i,r];var H=L(B);bt(H,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),N(B),N(T);var z=te(T,4),V=L(z);V.__click=[il,i,r];var F=L(V);bt(F,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),N(V);var C=te(V,2),P=L(C,!0);N(C);var M=te(C,2);M.__click=[ol,i,r];var Y=L(M);bt(Y,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),N(M),N(z),N(m);var W=te(m,2),U=L(W);U.__click=[nl,i,r];let le;var Ce=te(U,2);Ce.__click=[rl,i,r];let ce;N(W),N(h),He((_e,Me)=>{Oe(S,I(s)),Oe(P,I(c)),le=Vt(U,1,"svelte-1bevvpj",null,le,_e),ce=Vt(Ce,1,"svelte-1bevvpj",null,ce,Me)},[()=>({selected:I(d)==="AM"}),()=>({selected:I(d)==="PM"})]),de(o,h),st()}wt(["click"]);function ul(o,r){ve(r,"calendar")}function ll(o,r){ve(r,"clock")}var cl=pe('<article class="svelte-8yzu2w"><header class="svelte-8yzu2w"><button type="button"><p class="svelte-8yzu2w"> </p> <p class="svelte-8yzu2w"> </p></button> <button type="button"><p class="svelte-8yzu2w"> </p></button></header> <!></article>');function fl(o,r){at(r,!0);let i=xe(r,"value",23,()=>new Date),s=Be("calendar");function c(U){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(U)}function d(U){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(U)}function h(U){U.setHours(i().getHours()),U.setMinutes(i().getMinutes()),U.setSeconds(i().getSeconds()),i(new Date(U.getTime())),r.onchange&&r.onchange(i())}function m(U){U.setFullYear(i().getFullYear()),U.getMonth(i().getMonth()),U.getDate(i().getDate()),i(new Date(U.getTime())),r.onchange&&r.onchange(i())}var T=cl(),E=L(T),K=L(E);K.__click=[ul,s];let q;var S=L(K),B=L(S,!0);N(S);var H=te(S,2),z=L(H,!0);N(H),N(K);var V=te(K,2);V.__click=[ll,s];let F;var C=L(V),P=L(C,!0);N(C),N(V),N(E);var M=te(E,2);{var Y=U=>{$u(U,{onchange:h,get value(){return i()}})},W=U=>{sl(U,{onchange:m,get value(){return i()}})};rt(M,U=>{I(s)===null||I(s)==="calendar"?U(Y):U(W,!1)})}N(T),He((U,le,Ce,ce)=>{q=Vt(K,1,"svelte-8yzu2w",null,q,U),Oe(B,r.label),Oe(z,le),F=Vt(V,1,"svelte-8yzu2w",null,F,Ce),Oe(P,ce)},[()=>({selected:I(s)==="calendar"}),()=>c(i()),()=>({selected:I(s)==="clock"}),()=>d(i())]),de(o,T),st()}wt(["click"]);function dl(o,r,i,s){r(),i(null),s.oncancel&&s.oncancel()}function hl(o,r,i){r.ondelete&&r.ondelete(i().id)}function vl(o,r){const i=o.currentTarget.value.trim().length===0?null:o.currentTarget.value;r({...r(),notes:i})}function pl(o,r,i){r.onsave&&r.onsave(i())}var gl=pe('<dialog class="svelte-13glclx"><h3 class="svelte-13glclx"> </h3> <!> <textarea placeholder="Notes" class="svelte-13glclx"></textarea> <footer class="svelte-13glclx"><button class="delete svelte-13glclx" type="button">Delete</button> <button class="cancel svelte-13glclx" type="button">Cancel</button> <button type="button" class="svelte-13glclx">Save</button></footer></dialog>');function ml(o,r){at(r,!0);let i=xe(r,"field",3,"started"),s=xe(r,"item",7,null),c=xe(r,"label",3,"Started"),d=xe(r,"title",3,"Edit Fast Start"),h=Be(void 0);function m(M){const Y={...s()};Y[i()]=new Date(M.getTime()),s({...Y})}function T(){I(h).close()}function E(){I(h).showModal()}var K=gl(),q=L(K),S=L(q,!0);N(q);var B=te(q,2);const H=Je(()=>s()&&s().id&&s().id!==null?s()[i()]:new Date);fl(B,{get label(){return c()},onchange:m,get value(){return I(H)}});var z=te(B,2);Za(z),z.__input=[vl,s];var V=te(z,2),F=L(V);F.__click=[hl,r,s];var C=te(F,2);C.__click=[dl,T,s,r];var P=te(C,2);return P.__click=[pl,r,s],N(V),N(K),Yt(K,M=>ve(h,M),()=>I(h)),He(()=>{Oe(S,d()),us(z,s()&&s().id&&s().id!==null?s().notes:"")}),de(o,K),st({close:T,showModal:E})}wt(["input","click"]);var yl=pe('<article class="svelte-1vxkmhw"><p class="svelte-1vxkmhw">Your fasting history<br/>will be displayed here.</p></article>'),bl=pe('<li class="header svelte-1vxkmhw"><p class="svelte-1vxkmhw"> </p></li>'),_l=(o,r,i)=>r(I(i).type,I(i).id),wl=pe('<p class="svelte-1vxkmhw">Started Fast</p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),xl=pe('<p class="svelte-1vxkmhw">Water</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),kl=pe('<p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Dl=pe('<p class="svelte-1vxkmhw">Ended Fast</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Sl=pe('<li class="svelte-1vxkmhw"><button type="button" class="svelte-1vxkmhw"><!></button></li>'),Tl=pe('<ul class="svelte-1vxkmhw"></ul>');function El(o,r){at(r,!0);let i=xe(r,"items",19,()=>[]);function s(S){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",year:"numeric"}).format(S)}function c(S,B){const H=B.getTime()-S.getTime(),z=Math.floor(H/1e3),V=Math.floor(z/3600),F=Math.floor(z%3600/60);return new Intl.DurationFormat(navigator.language,{style:"short",units:["hour","minute"]}).format({hours:V,minutes:F})}function d(S){return new Intl.DateTimeFormat(navigator.language,{weekday:"long",month:"short",day:"numeric"}).format(S)}function h(S){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(S)}function m(S,B){r.onchange&&r.onchange(S,B)}var T=rn(),E=gt(T);{var K=S=>{var B=yl();de(S,B)},q=S=>{var B=Tl();Ct(B,21,i,Ot,(H,z)=>{var V=rn(),F=gt(V);{var C=M=>{var Y=bl(),W=L(Y),U=L(W,!0);N(W),N(Y),He(le=>Oe(U,le),[()=>d(I(z).timed)]),de(M,Y)},P=M=>{var Y=Sl(),W=L(Y);W.__click=[_l,m,z];var U=L(W);{var le=ce=>{var _e=wl(),Me=te(gt(_e),4),Re=L(Me,!0);N(Me);var Ue=te(Me,2),ze=L(Ue,!0);N(Ue),He((Xe,ut)=>{Oe(Re,Xe),Oe(ze,ut)},[()=>s(I(z).timed),()=>h(I(z).timed)]),de(ce,_e)},Ce=(ce,_e)=>{{var Me=Ue=>{var ze=xl(),Xe=te(gt(ze),2),ut=L(Xe);N(Xe);var Le=te(Xe,2),De=L(Le,!0);N(Le);var be=te(Le,2),$=L(be,!0);N(be),He((se,ue)=>{Oe(ut,`${I(z).volume??""} oz`),Oe(De,se),Oe($,ue)},[()=>s(I(z).timed),()=>h(I(z).timed)]),de(Ue,ze)},Re=(Ue,ze)=>{{var Xe=Le=>{var De=kl(),be=gt(De),$=L(be,!0);N(be);var se=te(be,4),ue=L(se,!0);N(se);var je=te(se,2),ke=L(je,!0);N(je),He((Ke,Pe)=>{Oe($,I(z).level),Oe(ue,Ke),Oe(ke,Pe)},[()=>s(I(z).timed),()=>h(I(z).timed)]),de(Le,De)},ut=(Le,De)=>{{var be=$=>{var se=Dl(),ue=te(gt(se),2),je=L(ue,!0);N(ue);var ke=te(ue,2),Ke=L(ke,!0);N(ke);var Pe=te(ke,2),Ve=L(Pe,!0);N(Pe),He((oe,tt,Ze)=>{Oe(je,oe),Oe(Ke,tt),Oe(Ve,Ze)},[()=>c(I(z).started,I(z).ended),()=>s(I(z).timed),()=>h(I(z).timed)]),de($,se)};rt(Le,$=>{I(z).type==="end"&&$(be)},De)}};rt(Ue,Le=>{I(z).type==="hunger"?Le(Xe):Le(ut,!1)},ze)}};rt(ce,Ue=>{I(z).type==="water"?Ue(Me):Ue(Re,!1)},_e)}};rt(U,ce=>{I(z).type==="start"?ce(le):ce(Ce,!1)})}N(W),N(Y),de(M,Y)};rt(F,M=>{I(z).type==="header"?M(C):M(P,!1)})}de(H,V)}),N(B),de(S,B)};rt(E,S=>{i().length===0?S(K):S(q,!1)})}de(o,T),st()}wt(["click"]);var Ol=pe('<section class="svelte-1moll0f"><header class="svelte-1moll0f"><h3 class="svelte-1moll0f">Hours</h3></header> <div class="svelte-1moll0f"><!></div> <article class="svelte-1moll0f"><!></article></section>');function Cl(o,r){at(r,!0);let i=xe(r,"activity",3,null),s=xe(r,"history",19,()=>[]);xe(r,"levels",19,()=>[]);let c=xe(r,"sun",3,null);var d=Ol(),h=te(L(d),2),m=L(h);const T=Je(()=>i()===null?[]:i().average),E=Je(()=>i()===null?null:i().daily);Li(m,{get average(){return I(T)},get daily(){return I(E)},days:7,get onsun(){return r.onsun},get sun(){return c()},get water(){return r.volume}}),N(h);var K=te(h,2),q=L(K);El(q,{get items(){return s()},get onchange(){return r.onchange}}),N(K),N(d),de(o,d),st()}function Il(o,r,i,s){r(),i(null),s.oncancel&&s.oncancel()}function Pl(o,r,i){r.ondelete&&r.ondelete(i().id)}function Al(o,r,i){r()===null&&r({...r(),level:5}),i.onsave&&i.onsave(r())}var Ml=(o,r,i)=>r(I(i).value),jl=pe('<li class="svelte-1gyfgoj"><button type="button" class="svelte-1gyfgoj"><p class="svelte-1gyfgoj"> </p> <!></button></li>'),Kl=pe('<button class="delete svelte-1gyfgoj" type="button">Delete</button>'),Fl=pe('<dialog class="svelte-1gyfgoj"><h3 class="svelte-1gyfgoj"> </h3> <ul class="svelte-1gyfgoj"></ul> <footer class="svelte-1gyfgoj"><!> <button class="cancel svelte-1gyfgoj" type="button">Cancel</button> <button type="button" class="svelte-1gyfgoj">Save</button></footer></dialog>');function ql(o,r){at(r,!0);let i=xe(r,"item",7,null),s=xe(r,"levels",19,()=>[]);xe(r,"units",3,"oz");let c=Be(void 0),d=Je(()=>i()&&i().level&&i().level!==null?i().level:5);function h(C){const P=C;i({...i(),level:P})}function m(){I(c).close()}function T(){I(c).showModal()}var E=Fl(),K=L(E),q=L(K);N(K);var S=te(K,2);Ct(S,21,s,Ot,(C,P)=>{var M=jl();const Y=Je(()=>I(P).value===I(d)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var W=L(M);W.__click=[Ml,h,P];var U=L(W),le=L(U,!0);N(U);var Ce=te(U,2);const ce=Je(()=>I(P).value===I(d)?"#0284c7":"#161616");bt(Ce,{get color(){return I(ce)},height:"20",get icon(){return I(Y)},width:"20"}),N(W),N(M),He(()=>Oe(le,I(P).label)),de(C,M)}),N(S);var B=te(S,2),H=L(B);{var z=C=>{var P=Kl();P.__click=[Pl,r,i],de(C,P)};rt(H,C=>{i()&&i().id&&i().id!==null&&C(z)})}var V=te(H,2);V.__click=[Il,m,i,r];var F=te(V,2);return F.__click=[Al,i,r],N(B),N(E),Yt(E,C=>ve(c,C),()=>I(c)),He(()=>Oe(q,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Hunger`)),de(o,E),st({close:m,showModal:T})}wt(["click"]);function Rl(o,r,i){r()!==0&&(r(0),i.onchange&&i.onchange(r()))}function Nl(o,r,i){r()!==1&&(r(1),i.onchange&&i.onchange(r()))}var Bl=pe('<ul class="svelte-tu3q0a"><li><button type="button">Fasting</button></li> <li><button type="button">Hours</button></li></ul>');function Hl(o,r){at(r,!0);let i=xe(r,"selected",7,0);var s=Bl(),c=L(s),d=L(c);let h;d.__click=[Rl,i,r],N(c);var m=te(c,2),T=L(m);let E;T.__click=[Nl,i,r],N(m),N(s),He((K,q)=>{h=Vt(d,1,"fasting svelte-tu3q0a",null,h,K),E=Vt(T,1,"hours svelte-tu3q0a",null,E,q)},[()=>({selected:i()===0}),()=>({selected:i()===1})]),de(o,s),st()}wt(["click"]);function zl(o,r){r()}var Ll=pe('<dialog class="svelte-msa23r"><h3 class="svelte-msa23r">Settings</h3> <article class="svelte-msa23r"><p class="svelte-msa23r">Settings.</p></article> <footer class="svelte-msa23r"><button type="button" class="svelte-msa23r">Done</button></footer></dialog>');function Ul(o,r){at(r,!0);let i=Be(void 0);function s(){I(i).close()}function c(){I(i).showModal()}var d=Ll(),h=te(L(d),4),m=L(h);return m.__click=[zl,s],N(h),N(d),Yt(d,T=>ve(i,T),()=>I(i)),de(o,d),st({close:s,showModal:c})}wt(["click"]);function Yl(o,r,i,s){r(),i(null),s.oncancel&&s.oncancel()}function Vl(o,r,i){r.ondelete&&r.ondelete(i().id)}function Wl(o,r,i){r()===null&&r({...r(),volume:8}),i.onsave&&i.onsave(r())}var Gl=(o,r,i)=>r(I(i).value),Ql=pe('<li class="svelte-1sbih0z"><button type="button" class="svelte-1sbih0z"><p class="svelte-1sbih0z"> </p> <p class="svelte-1sbih0z"> </p> <!></button></li>'),Jl=pe('<button class="delete svelte-1sbih0z" type="button">Delete</button>'),Xl=pe('<dialog class="svelte-1sbih0z"><h3 class="svelte-1sbih0z"> </h3> <ul class="svelte-1sbih0z"></ul> <footer class="svelte-1sbih0z"><!> <button class="cancel svelte-1sbih0z" type="button">Cancel</button> <button type="button" class="svelte-1sbih0z">Save</button></footer></dialog>');function Zl(o,r){at(r,!0);let i=xe(r,"item",7,null),s=xe(r,"units",3,"oz"),c=Be(void 0),d=In([{value:8,label:"Cup"},{value:12,label:"Can"},{value:16,label:"Bottle"},{value:20,label:"Medium"},{value:30,label:"Gatorade"},{value:32,label:"Big Q"},{value:44,label:"QT Large"},{value:52,label:"Extra Large"}]),h=Je(()=>i()&&i().volume&&i().volume!==null?i().volume:8);function m(P){const M=P;i({...i(),volume:M})}function T(){I(c).close()}function E(){I(c).showModal()}var K=Xl(),q=L(K),S=L(q);N(q);var B=te(q,2);Ct(B,21,()=>d,Ot,(P,M)=>{var Y=Ql();const W=Je(()=>I(M).value===I(h)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var U=L(Y);U.__click=[Gl,m,M];var le=L(U),Ce=L(le,!0);N(le);var ce=te(le,2),_e=L(ce);N(ce);var Me=te(ce,2);const Re=Je(()=>I(M).value===I(h)?"#0284c7":"#161616");bt(Me,{get color(){return I(Re)},height:"20",get icon(){return I(W)},width:"20"}),N(U),N(Y),He(()=>{Oe(Ce,I(M).label),Oe(_e,`${I(M).value??""} ${s()??""}`)}),de(P,Y)}),N(B);var H=te(B,2),z=L(H);{var V=P=>{var M=Jl();M.__click=[Vl,r,i],de(P,M)};rt(z,P=>{i()&&i().id&&i().id!==null&&P(V)})}var F=te(z,2);F.__click=[Yl,T,i,r];var C=te(F,2);return C.__click=[Wl,i,r],N(H),N(K),Yt(K,P=>ve(c,P),()=>I(c)),He(()=>Oe(S,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Water`)),de(o,K),st({close:T,showModal:E})}wt(["click"]);var $l=pe('<main class="svelte-1p6a8xw"><header class="svelte-1p6a8xw"><span></span> <!> <button type="button" class="svelte-1p6a8xw"><!></button></header> <section class="svelte-1p6a8xw"><article class="svelte-1p6a8xw"><!></article> <article class="svelte-1p6a8xw"><!></article></section></main> <!> <!> <!> <!>',1);function vc(o,r){at(r,!0);const i=new ps,s=ys;let c=0,d=Be(In([])),h=Be(In([])),m=Be(void 0),T=Be("started"),E=Be(null),K=Be("Started"),q=Be("Edit Fast Started"),S=Be(void 0),B=Be(null),H=Be(5),z=In([{value:1,label:"Starving"},{value:2,label:"Very hungry"},{value:3,label:"Pretty hungry"},{value:4,label:"Snacky"},{value:5,label:"Satisfied"},{value:6,label:"Slightly full"},{value:7,label:"Uncomfortable"},{value:8,label:"Stuffed"},{value:9,label:"Stomach aches"},{value:10,label:"Sick"}]),V=Be(null),F=Be(0),C=Be(void 0),P=Be(null),M=Be(null),Y=Be(In([])),W=Be(0),U=Be(void 0),le=Be(null);pi(()=>{let ie=window.localStorage.getItem("fh_screen");ve(F,ie===null?0:parseInt(ie),!0);const fe=window.localStorage.getItem("fh_latitude");fe!==null&&fe!=="DENIED"&&Ue(),setInterval(()=>{if(c===60){ce();const he=window.localStorage.getItem("fh_latitude");he!==null&&he!=="DENIED"&&Ue(),c=0}else c=c+1;I(P)!==null&&ve(V,Date.now(),!0)},1e3),Re(),ce(),Me(),ze(),_e()});function Ce(ie){const fe=ie.getFullYear(),he=String(ie.getMonth()+1).padStart(2,"0"),Qe=String(ie.getDate()).padStart(2,"0");return`${fe}-${he}-${Qe}`}function ce(ie=7){i.browseHistory().then(fe=>{const he={},Qe=new Date,we=new Date(Qe.getFullYear(),Qe.getMonth(),Qe.getDate()),Se=new Date(we);if(Se.setDate(we.getDate()-(ie-1)),!Array.isArray(fe)||fe.length===0){const Ne=new Date(Se);for(;Ne<=we;){const re=Ce(Ne);he[re]=Array(24).fill(0),Ne.setDate(Ne.getDate()+1)}}else{for(const re of fe){const Mt=new Date(re.started),jt=re.ended?new Date(re.ended):new Date,Gt=new Date(Mt.getTime());Gt.setSeconds(0,0);const ne=new Date(jt.getTime());ne.setSeconds(0,0);let Tt=new Date(Gt);for(;Tt<ne;){const on=Ce(Tt),an=new Date(Tt.getFullYear(),Tt.getMonth(),Tt.getDate());if(an>=Se&&an<=we){const Kn=Tt.getHours();he[on]||(he[on]=Array(24).fill(0)),he[on][Kn]+=1}Tt.setMinutes(Tt.getMinutes()+1)}}for(const re in he)he[re]=he[re].map(Mt=>+(Math.min(Mt,60)/60).toFixed(6));const Ne=new Date(Se);for(;Ne<=we;){const re=Ce(Ne);he[re]||(he[re]=Array(24).fill(0)),Ne.setDate(Ne.getDate()+1)}}const Ie=Object.keys(he).sort((Ne,re)=>re.localeCompare(Ne)),qe={};for(const Ne of Ie)qe[Ne]=he[Ne];const Wt=Array(24).fill(0);for(const Ne of Array(24).keys())for(const re of Ie)Wt[Ne]+=qe[re][Ne];const gn=Wt.map(Ne=>+(Ne/ie).toFixed(6));ve(d,{daily:qe,average:gn},!0)})}function _e(){i.browseHistory().then(ie=>{let fe=null,he=structuredClone(ie);he.forEach(we=>{we.type="start",we.timed=new Date(we.started.getTime())});let Qe=structuredClone(ie);Qe=Qe.filter(we=>we.ended!==null),Qe.forEach(we=>{we.type="end",we.timed=new Date(we.ended.getTime())}),he=he.concat(Qe),fe=[...he],i.browseHunger().then(we=>(we=we.map(Se=>{const Ie=z.find(qe=>qe.value===Se.level);return Se.level=Ie.label,Se.timed=new Date(Se.created.getTime()),Se}),fe=fe.concat(we),i.browseWater())).then(we=>{we=we.map(Ie=>(Ie.timed=new Date(Ie.created.getTime()),Ie)),fe=fe.concat(we),fe.sort((Ie,qe)=>Ie.timed.getTime()<qe.timed.getTime()?1:Ie.timed.getTime()>qe.timed.getTime()?-1:0);const Se=[];for(let Ie=0;Ie<fe.length;Ie++){const qe=new Date(fe[Ie].timed.getTime());qe.setHours(23),qe.setMinutes(59),qe.setSeconds(59),qe.setMilliseconds(999),Se.length===0?Se.push({type:"header",timed:qe}):(Se[Se.length-1].timed.getDate()!==fe[Ie].timed.getDate()||Se[Se.length-1].timed.getMonth()!==fe[Ie].timed.getMonth()||Se[Se.length-1].timed.getFullYear()!==fe[Ie].timed.getFullYear())&&Se.push({type:"header",timed:qe})}fe=fe.concat(Se),fe.sort((Ie,qe)=>Ie.timed.getTime()<qe.timed.getTime()?1:Ie.timed.getTime()>qe.timed.getTime()?-1:0),ve(h,[...fe],!0)})})}function Me(){i.browseHunger(!0).then(ie=>{if(ie===null)ve(H,5);else{const fe=new Date,he=new Date(ie.created);fe.getFullYear()===he.getFullYear()&&fe.getMonth()===he.getMonth()&&fe.getDate()===he.getDate()?ve(H,ie.level,!0):ve(H,5)}})}function Re(){i.browseHistory().then(ie=>{ie.length===0&&(ve(P,null),ve(V,null)),ie.sort((fe,he)=>fe.started.getTime()>he.started.getTime()?-1:fe.started.getTime()<he.started.getTime()?1:0),ie[0].ended===null&&(ve(P,new Date(ie[0].started.getTime()),!0),ve(V,Date.now(),!0))})}function Ue(){const ie=parseFloat(window.localStorage.getItem("fh_latitude")),fe=parseFloat(window.localStorage.getItem("fh_longitude")),he=new Date;let Qe=null,we=s.getTimes(he,ie,fe),Se=null;if(Date.now()<we.sunrise.getTime())Se=new Date(we.sunrise.getTime()),Qe="material-symbols:wb-sunny-outline-rounded";else if(Date.now()>we.sunrise.getTime()&&Date.now()<we.sunset.getTime())Se=new Date(we.sunset.getTime()),Qe="material-symbols:moon-stars-outline-rounded";else{const Ie=new Date;Ie.setDate(he.getDate()+1),we=s.getTimes(Ie,ie,fe),Se=new Date(we.sunrise.getTime()),Qe="material-symbols:wb-sunny-outline-rounded"}ve(M,{icon:Qe,timing:Se},!0)}function ze(){i.browseWater(!0).then(ie=>{const fe=ie.reduce((Se,Ie)=>Se+Ie.volume,0);ve(W,fe,!0);const he=new Date;he.setHours(0,0,0,0);const Qe={};for(const{created:Se,volume:Ie}of ie){const qe=new Date(Se).toISOString().slice(0,10);Qe[qe]=(Qe[qe]||0)+Ie}const we=[];for(let Se=0;Se<7;Se++){const Ie=new Date(he);Ie.setDate(he.getDate()-Se);const qe=Ie.toISOString().slice(0,10);we.push({created:new Date(Ie.getTime()),volume:Qe[qe]||0})}ve(Y,[...we],!0)})}function Xe(){ve(P,null),ve(V,null),i.browseHistoryByEnd().then(ie=>(ie.ended=new Date,i.editHistory(ie))).then(()=>{Re(),ce(),_e()})}function ut(){I(S).showModal()}function Le(){i.addHistory().then(()=>{Re(),ce(),_e()})}function De(){I(U).showModal()}function be(ie){I(P)!==null&&I(E).started.getTime()===I(P).getTime()&&(ve(P,null),ve(V,null)),i.deleteHistory(ie).then(()=>{I(m).close(),ve(E,null),Re(),ce(),_e()})}function $(ie){i.editHistory(ie).then(()=>{I(m).close(),ve(E,null),Re(),ce(),_e()})}function se(ie,fe){ie==="start"?(ve(T,"started"),ve(K,"Started"),ve(q,"Edit Fast Started"),i.readHistory(fe).then(he=>{ve(E,{...he},!0),I(m).showModal()})):ie==="end"?(ve(T,"ended"),ve(K,"Ended"),ve(q,"Edit Fast Ended"),i.readHistory(fe).then(he=>{ve(E,{...he},!0),I(m).showModal()})):ie==="water"?i.readWater(fe).then(he=>{ve(le,{...he},!0),I(U).showModal()}):ie==="hunger"&&i.readHunger(fe).then(he=>{ve(B,{...he},!0),I(S).showModal()})}function ue(ie){i.deleteHunger(ie).then(()=>{I(S).close(),ve(B,null),Me(),_e()})}function je(ie){I(B)===null?i.addHunger(ie.level).then(fe=>{I(S).close(),Me(),_e()}):i.editHunger(ie).then(fe=>{I(S).close(),ve(B,null),Me(),_e()})}function ke(ie){I(F)!==ie&&(window.localStorage.setItem("fh_screen",ie),ve(F,ie,!0))}function Ke(){I(C).showModal()}function Pe(){confirm("Sunrise/set (important for religious observations) needs to know your location? Enable location detection?")?navigator.geolocation.getCurrentPosition(fe=>{window.localStorage.setItem("fh_latitude",fe.coords.latitude),window.localStorage.setItem("fh_longitude",fe.coords.longitude),Ue()}):window.localStorage.setItem("fh_latitude","DENIED")}function Ve(ie){i.deleteWater(ie).then(()=>{I(U).close(),ve(le,null),ze(),_e()})}function oe(ie){I(le)===null?i.addWater(ie.volume).then(fe=>{I(U).close(),ze(),_e()}):i.editWater(ie).then(fe=>{I(U).close(),ve(le,null),ze(),_e()})}var tt=$l(),Ze=gt(tt),me=L(Ze),lt=te(L(me),2);Hl(lt,{onchange:ke,get selected(){return I(F)}});var ct=te(lt,2);ct.__click=Ke;var nt=L(ct);bt(nt,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),N(ct),N(me);var Dt=te(me,2),ft=L(Dt),mt=L(ft);Qu(mt,{get activity(){return I(d)},get hunger(){return I(H)},get levels(){return z},get now(){return I(V)},onend:Xe,onhunger:ut,onsettings:Ke,onstart:Le,onsun:Pe,onwater:De,get started(){return I(P)},get sun(){return I(M)},get volume(){return I(Y)},get water(){return I(W)}}),N(ft);var _t=te(ft,2),St=L(_t);Cl(St,{get activity(){return I(d)},get history(){return I(h)},get levels(){return z},onchange:se,onsun:Pe,get sun(){return I(M)},get volume(){return I(Y)}}),N(_t),N(Dt),N(Ze);var Ye=te(Ze,2);Yt(ml(Ye,{get field(){return I(T)},get item(){return I(E)},get label(){return I(K)},ondelete:be,onsave:$,get title(){return I(q)}}),ie=>ve(m,ie,!0),()=>I(m));var It=te(Ye,2);Yt(ql(It,{get item(){return I(B)},get levels(){return z},ondelete:ue,onsave:je}),ie=>ve(S,ie,!0),()=>I(S));var qt=te(It,2);Yt(Zl(qt,{get item(){return I(le)},ondelete:Ve,onsave:oe}),ie=>ve(U,ie,!0),()=>I(U));var jn=te(qt,2);Yt(Ul(jn,{}),ie=>ve(C,ie,!0),()=>I(C)),He(()=>nn(Dt,"data-screen",I(F)===0?"fasting":"hours")),de(o,tt),st()}wt(["click"]);export{vc as component};
