import"../chunks/CWj6FrbW.js";import{i as pa,c as ga,d as xt,n as ma,a as ya,o as pi,b as ba,s as Ee}from"../chunks/fpJi1qvQ.js";import{a3 as uo,av as gi,aw as _a,h as gt,a5 as pn,ac as mi,q as yi,af as wa,b as lo,i as or,d as eo,w as I,A as xa,r as ka,e as Da,g as Vo,j as Pn,m as rn,a6 as bi,a9 as Sa,k as _i,l as hr,p as Ta,ax as Vr,ad as wi,a1 as to,ay as Wo,ar as Ea,az as Go,aA as co,aB as Oa,aC as Ca,aD as lr,aE as fo,aF as Ia,a7 as xi,aG as ki,aH as Pa,V as Ne,aI as Aa,aa as Ma,a8 as ja,ag as Qo,aJ as Ka,n as Di,aK as Fa,aL as qa,aM as Ra,aN as Na,aO as Ba,aP as Ha,z as za,aQ as La,R as ut,K as Ua,c as on,f as mt,a as de,W as lt,as as ze,y as ve,aR as Ya,aS as Va,X as Y,Y as N,T as ge,Z as $,at as Xe,s as Wa,aT as Ga,aU as Wr,x as no}from"../chunks/CgBZ2jj9.js";import{i as nt,r as Qa,p as ke,b as Wt}from"../chunks/DmV43-3_.js";const Ja=[];function Gr(o,r=!1){return ir(o,new Map,"",Ja)}function ir(o,r,i,s,l=null){if(typeof o=="object"&&o!==null){var d=r.get(o);if(d!==void 0)return d;if(o instanceof Map)return new Map(o);if(o instanceof Set)return new Set(o);if(uo(o)){var h=Array(o.length);r.set(o,h),l!==null&&r.set(l,h);for(var g=0;g<o.length;g+=1){var E=o[g];g in o&&(h[g]=ir(E,r,i,s))}return h}if(gi(o)===_a){h={},r.set(o,h),l!==null&&r.set(l,h);for(var O in o)h[O]=ir(o[O],r,i,s);return h}if(o instanceof Date)return structuredClone(o);if(typeof o.toJSON=="function")return ir(o.toJSON(),r,i,s,o)}if(o instanceof EventTarget)return o;try{return structuredClone(o)}catch{return o}}function Xa(o,r){if(r){const i=document.body;o.autofocus=!0,yi(()=>{document.activeElement===i&&o.focus()})}}function Za(o){gt&&pn(o)!==null&&mi(o)}function Ct(o,r){return r}function $a(o,r,i,s){for(var l=[],d=r.length,h=0;h<d;h++)Oa(r[h].e,l,!0);var g=d>0&&l.length===0&&i!==null;if(g){var E=i.parentNode;mi(E),E.append(i),s.clear(),Vt(o,r[0].prev,r[d-1].next)}Ca(l,()=>{for(var O=0;O<d;O++){var j=r[O];g||(s.delete(j.k),Vt(o,j.prev,j.next)),lr(j.e,!g)}})}function It(o,r,i,s,l,d=null){var h=o,g={flags:r,items:new Map,first:null},E=(r&ki)!==0;if(E){var O=o;h=gt?or(pn(O)):O.appendChild(wa())}gt&&eo();var j=null,q=!1,S=xa(()=>{var U=i();return uo(U)?U:U==null?[]:wi(U)});lo(()=>{var U=I(S),H=U.length;if(q&&H===0)return;q=H===0;let z=!1;if(gt){var W=ka(h)===Da;W!==(H===0)&&(h=Vo(),or(h),Pn(!1),z=!0)}if(gt){for(var K=null,F,A=0;A<H;A++){if(rn.nodeType===bi&&rn.data===Sa){h=rn,z=!0,Pn(!1);break}var T=U[A],L=s(T,A);F=Si(rn,g,K,null,T,L,A,l,r,i),g.items.set(L,F),K=F}H>0&&or(Vo())}gt||es(U,g,h,l,r,s,i),d!==null&&(H===0?j?_i(j):j=hr(()=>d(h)):j!==null&&Ta(j,()=>{j=null})),z&&Pn(!0),I(S)}),gt&&(h=rn)}function es(o,r,i,s,l,d,h){var Le,Ue,tt,Ae;var g=(l&Pa)!==0,E=(l&(fo|co))!==0,O=o.length,j=r.items,q=r.first,S=q,U,H=null,z,W=[],K=[],F,A,T,L;if(g)for(L=0;L<O;L+=1)F=o[L],A=d(F,L),T=j.get(A),T!==void 0&&((Le=T.a)==null||Le.measure(),(z??(z=new Set)).add(T));for(L=0;L<O;L+=1){if(F=o[L],A=d(F,L),T=j.get(A),T===void 0){var V=S?S.e.nodes_start:i;H=Si(V,r,H,H===null?r.first:H.next,F,A,L,s,l,h),j.set(A,H),W=[],K=[],S=H.next;continue}if(E&&ts(T,F,L,l),(T.e.f&Vr)!==0&&(_i(T.e),g&&((Ue=T.a)==null||Ue.unfix(),(z??(z=new Set)).delete(T))),T!==S){if(U!==void 0&&U.has(T)){if(W.length<K.length){var B=K[0],le;H=B.prev;var pe=W[0],se=W[W.length-1];for(le=0;le<W.length;le+=1)Jo(W[le],B,i);for(le=0;le<K.length;le+=1)U.delete(K[le]);Vt(r,pe.prev,se.next),Vt(r,H,pe),Vt(r,se,B),S=B,H=se,L-=1,W=[],K=[]}else U.delete(T),Jo(T,S,i),Vt(r,T.prev,T.next),Vt(r,T,H===null?r.first:H.next),Vt(r,H,T),H=T;continue}for(W=[],K=[];S!==null&&S.k!==A;)(S.e.f&Vr)===0&&(U??(U=new Set)).add(S),K.push(S),S=S.next;if(S===null)continue;T=S}W.push(T),H=T,S=T.next}if(S!==null||U!==void 0){for(var me=U===void 0?[]:wi(U);S!==null;)(S.e.f&Vr)===0&&me.push(S),S=S.next;var Ie=me.length;if(Ie>0){var je=(l&ki)!==0&&O===0?i:null;if(g){for(L=0;L<Ie;L+=1)(tt=me[L].a)==null||tt.measure();for(L=0;L<Ie;L+=1)(Ae=me[L].a)==null||Ae.fix()}$a(r,me,je,j)}}g&&yi(()=>{var xe;if(z!==void 0)for(T of z)(xe=T.a)==null||xe.apply()}),to.first=r.first&&r.first.e,to.last=H&&H.e}function ts(o,r,i,s){(s&fo)!==0&&Wo(o.v,r),(s&co)!==0?Wo(o.i,i):o.i=i}function Si(o,r,i,s,l,d,h,g,E,O){var j=(E&fo)!==0,q=(E&Ia)===0,S=j?q?Ea(l,!1,!1):Go(l):l,U=(E&co)===0?h:Go(h),H={i:U,v:S,k:d,a:null,e:null,prev:i,next:s};try{return H.e=hr(()=>g(o,S,U,O),gt),H.e.prev=i&&i.e,H.e.next=s&&s.e,i===null?r.first=H:(i.next=H,i.e.next=H.e),s!==null&&(s.prev=H,s.e.prev=H.e),H}finally{}}function Jo(o,r,i){for(var s=o.next?o.next.e.nodes_start:i,l=r?r.e.nodes_start:i,d=o.e.nodes_start;d!==s;){var h=xi(d);l.before(d),d=h}}function Vt(o,r,i){r===null?o.first=i:(r.next=i,r.e.next=i&&i.e),i!==null&&(i.prev=r,i.e.prev=r&&r.e)}function ns(o,r,i=!1,s=!1,l=!1){var d=o,h="";Ne(()=>{var g=to;if(h===(h=r()??"")){gt&&eo();return}if(g.nodes_start!==null&&(Aa(g.nodes_start,g.nodes_end),g.nodes_start=g.nodes_end=null),h!==""){if(gt){rn.data;for(var E=eo(),O=E;E!==null&&(E.nodeType!==bi||E.data!=="");)O=E,E=xi(E);if(E===null)throw Ma(),ja;Qo(rn,O),d=or(E);return}var j=h+"";i?j=`<svg>${j}</svg>`:s&&(j=`<math>${j}</math>`);var q=Ka(j);if((i||s)&&(q=pn(q)),Qo(pn(q),q.lastChild),i||s)for(;pn(q);)d.before(pn(q));else d.before(q)}})}function rs(o,r){var i=void 0,s;lo(()=>{i!==(i=r())&&(s&&(lr(s),s=null),i&&(s=hr(()=>{Di(()=>i(o))})))})}function Ti(o){var r,i,s="";if(typeof o=="string"||typeof o=="number")s+=o;else if(typeof o=="object")if(Array.isArray(o)){var l=o.length;for(r=0;r<l;r++)o[r]&&(i=Ti(o[r]))&&(s&&(s+=" "),s+=i)}else for(i in o)o[i]&&(s&&(s+=" "),s+=i);return s}function os(){for(var o,r,i=0,s="",l=arguments.length;i<l;i++)(o=arguments[i])&&(r=Ti(o))&&(s&&(s+=" "),s+=r);return s}function is(o){return typeof o=="object"?os(o):o??""}const Xo=[...` 	
\r\f \v\uFEFF`];function as(o,r,i){var s=o==null?"":""+o;if(r&&(s=s?s+" "+r:r),i){for(var l in i)if(i[l])s=s?s+" "+l:l;else if(s.length)for(var d=l.length,h=0;(h=s.indexOf(l,h))>=0;){var g=h+d;(h===0||Xo.includes(s[h-1]))&&(g===s.length||Xo.includes(s[g]))?s=(h===0?"":s.substring(0,h))+s.substring(g+1):h=g}}return s===""?null:s}function Zo(o,r=!1){var i=r?" !important;":";",s="";for(var l in o){var d=o[l];d!=null&&d!==""&&(s+=" "+l+": "+d+i)}return s}function Qr(o){return o[0]!=="-"||o[1]!=="-"?o.toLowerCase():o}function ss(o,r){if(r){var i="",s,l;if(Array.isArray(r)?(s=r[0],l=r[1]):s=r,o){o=String(o).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var d=!1,h=0,g=!1,E=[];s&&E.push(...Object.keys(s).map(Qr)),l&&E.push(...Object.keys(l).map(Qr));var O=0,j=-1;const z=o.length;for(var q=0;q<z;q++){var S=o[q];if(g?S==="/"&&o[q-1]==="*"&&(g=!1):d?d===S&&(d=!1):S==="/"&&o[q+1]==="*"?g=!0:S==='"'||S==="'"?d=S:S==="("?h++:S===")"&&h--,!g&&d===!1&&h===0){if(S===":"&&j===-1)j=q;else if(S===";"||q===z-1){if(j!==-1){var U=Qr(o.substring(O,j).trim());if(!E.includes(U)){S!==";"&&q++;var H=o.substring(O,q).trim();i+=" "+H+";"}}O=q+1,j=-1}}}}return s&&(i+=Zo(s)),l&&(i+=Zo(l,!0)),i=i.trim(),i===""?null:i}return o==null?null:String(o)}function Qt(o,r,i,s,l,d){var h=o.__className;if(gt||h!==i||h===void 0){var g=as(i,s,d);(!gt||g!==o.getAttribute("class"))&&(g==null?o.removeAttribute("class"):r?o.className=g:o.setAttribute("class",g)),o.__className=i}else if(d&&l!==d)for(var E in d){var O=!!d[E];(l==null||O!==!!l[E])&&o.classList.toggle(E,O)}return d}function Jr(o,r={},i,s){for(var l in i){var d=i[l];r[l]!==d&&(i[l]==null?o.style.removeProperty(l):o.style.setProperty(l,d,s))}}function gn(o,r,i,s){var l=o.__style;if(gt||l!==r){var d=ss(r,s);(!gt||d!==o.getAttribute("style"))&&(d==null?o.removeAttribute("style"):o.style.cssText=d),o.__style=r}else s&&(Array.isArray(s)?(Jr(o,i==null?void 0:i[0],s[0]),Jr(o,i==null?void 0:i[1],s[1],"important")):Jr(o,i,s));return s}function cr(o,r,i){if(o.multiple){if(r==null)return;if(!uo(r))return qa();for(var s of o.options)s.selected=r.includes($o(s));return}for(s of o.options){var l=$o(s);if(Ra(l,r)){s.selected=!0;return}}(!i||r!==void 0)&&(o.selectedIndex=-1)}function Ei(o){var r=new MutationObserver(()=>{cr(o,o.__value)});r.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Fa(()=>{r.disconnect()})}function $o(o){return"__value"in o?o.__value:o.value}const En=Symbol("class"),On=Symbol("style"),Oi=Symbol("is custom element"),Ci=Symbol("is html");function us(o,r){var i=ho(o);i.value===(i.value=r??void 0)||o.value===r&&(r!==0||o.nodeName!=="PROGRESS")||(o.value=r??"")}function ls(o,r){r?o.hasAttribute("selected")||o.setAttribute("selected",""):o.removeAttribute("selected")}function Gt(o,r,i,s){var l=ho(o);gt&&(l[r]=o.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&o.nodeName==="LINK")||l[r]!==(l[r]=i)&&(r==="loading"&&(o[Ha]=i),i==null?o.removeAttribute(r):typeof i!="string"&&Ii(o).includes(r)?o[r]=i:o.setAttribute(r,i))}function cs(o,r,i,s,l=!1){var d=ho(o),h=d[Oi],g=!d[Ci];let E=gt&&h;E&&Pn(!1);var O=r||{},j=o.tagName==="OPTION";for(var q in r)q in i||(i[q]=null);i.class?i.class=is(i.class):i[En]&&(i.class=null),i[On]&&(i.style??(i.style=null));var S=Ii(o);for(const A in i){let T=i[A];if(j&&A==="value"&&T==null){o.value=o.__value="",O[A]=T;continue}if(A==="class"){var U=o.namespaceURI==="http://www.w3.org/1999/xhtml";Qt(o,U,T,s,r==null?void 0:r[En],i[En]),O[A]=T,O[En]=i[En];continue}if(A==="style"){gn(o,T,r==null?void 0:r[On],i[On]),O[A]=T,O[On]=i[On];continue}var H=O[A];if(!(T===H&&!(T===void 0&&o.hasAttribute(A)))){O[A]=T;var z=A[0]+A[1];if(z!=="$$")if(z==="on"){const L={},V="$$"+A;let B=A.slice(2);var W=ya(B);if(pa(B)&&(B=B.slice(0,-7),L.capture=!0),!W&&H){if(T!=null)continue;o.removeEventListener(B,O[V],L),O[V]=null}if(T!=null)if(W)o[`__${B}`]=T,xt([B]);else{let le=function(pe){O[A].call(this,pe)};O[V]=ga(B,o,le,L)}else W&&(o[`__${B}`]=void 0)}else if(A==="style")Gt(o,A,T);else if(A==="autofocus")Xa(o,!!T);else if(!h&&(A==="__value"||A==="value"&&T!=null))o.value=o.__value=T;else if(A==="selected"&&j)ls(o,T);else{var K=A;g||(K=ma(K));var F=K==="defaultValue"||K==="defaultChecked";if(T==null&&!h&&!F)if(d[A]=null,K==="value"||K==="checked"){let L=o;const V=r===void 0;if(K==="value"){let B=L.defaultValue;L.removeAttribute(K),L.defaultValue=B,L.value=L.__value=V?B:null}else{let B=L.defaultChecked;L.removeAttribute(K),L.defaultChecked=B,L.checked=V?B:!1}}else o.removeAttribute(A);else F||S.includes(K)&&(h||typeof T!="string")?o[K]=T:typeof T!="function"&&Gt(o,K,T)}}}return E&&Pn(!0),O}function ei(o,r,i=[],s,l=!1,d=za){const h=i.map(d);var g=void 0,E={},O=o.nodeName==="SELECT",j=!1;if(lo(()=>{var S=r(...h.map(I)),U=cs(o,g,S,s,l);j&&O&&"value"in S&&cr(o,S.value,!1);for(let z of Object.getOwnPropertySymbols(E))S[z]||lr(E[z]);for(let z of Object.getOwnPropertySymbols(S)){var H=S[z];z.description===La&&(!g||H!==g[z])&&(E[z]&&lr(E[z]),E[z]=hr(()=>rs(o,()=>H))),U[z]=H}g=U}),O){var q=o;Di(()=>{cr(q,g.value),Ei(q)})}j=!0}function ho(o){return o.__attributes??(o.__attributes={[Oi]:o.nodeName.includes("-"),[Ci]:o.namespaceURI===Na})}var ti=new Map;function Ii(o){var r=ti.get(o.nodeName);if(r)return r;ti.set(o.nodeName,r=[]);for(var i,s=o,l=Element.prototype;l!==s;){i=Ba(s);for(var d in i)i[d].set&&r.push(d);s=gi(s)}return r}var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pi(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ar={exports:{}},ds=ar.exports,ni;function hs(){return ni||(ni=1,function(o,r){(function(i,s){o.exports=s()})(ds,function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)};function l(e,t,n){for(var a,u=0,c=t.length;u<c;u++)!a&&u in t||((a=a||Array.prototype.slice.call(t,0,u))[u]=t[u]);return e.concat(a||Array.prototype.slice.call(t))}var d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:fs,h=Object.keys,g=Array.isArray;function E(e,t){return typeof t!="object"||h(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||d.Promise||(d.Promise=Promise);var O=Object.getPrototypeOf,j={}.hasOwnProperty;function q(e,t){return j.call(e,t)}function S(e,t){typeof t=="function"&&(t=t(O(e))),(typeof Reflect>"u"?h:Reflect.ownKeys)(t).forEach(function(n){H(e,n,t[n])})}var U=Object.defineProperty;function H(e,t,n,a){U(e,t,E(n&&q(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},a))}function z(e){return{from:function(t){return e.prototype=Object.create(t.prototype),H(e.prototype,"constructor",e),{extend:S.bind(null,e.prototype)}}}}var W=Object.getOwnPropertyDescriptor,K=[].slice;function F(e,t,n){return K.call(e,t,n)}function A(e,t){return t(e)}function T(e){if(!e)throw new Error("Assertion Failed")}function L(e){d.setImmediate?setImmediate(e):setTimeout(e,0)}function V(e,t){if(typeof t=="string"&&q(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],a=0,u=t.length;a<u;++a){var c=V(e,t[a]);n.push(c)}return n}var f=t.indexOf(".");if(f!==-1){var v=e[t.substr(0,f)];return v==null?void 0:V(v,t.substr(f+1))}}function B(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){T(typeof n!="string"&&"length"in n);for(var a=0,u=t.length;a<u;++a)B(e,t[a],n[a])}else{var c,f,v=t.indexOf(".");v!==-1?(c=t.substr(0,v),(f=t.substr(v+1))===""?n===void 0?g(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=n:B(v=!(v=e[c])||!q(e,c)?e[c]={}:v,f,n)):n===void 0?g(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function le(e){var t,n={};for(t in e)q(e,t)&&(n[t]=e[t]);return n}var pe=[].concat;function se(e){return pe.apply([],e)}var fe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(se([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return d[e]}),me=new Set(fe.map(function(e){return d[e]})),Ie=null;function je(e){return Ie=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var a=Ie.get(n);if(a)return a;if(g(n)){a=[],Ie.set(n,a);for(var u=0,c=n.length;u<c;++u)a.push(t(n[u]))}else if(me.has(n.constructor))a=n;else{var f,v=O(n);for(f in a=v===Object.prototype?{}:Object.create(v),Ie.set(n,a),n)q(n,f)&&(a[f]=t(n[f]))}return a}(e),Ie=null,e}var Le={}.toString;function Ue(e){return Le.call(e).slice(8,-1)}var tt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ae=typeof tt=="symbol"?function(e){var t;return e!=null&&(t=e[tt])&&t.apply(e)}:function(){return null};function xe(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Qe={};function Be(e){var t,n,a,u;if(arguments.length===1){if(g(e))return e.slice();if(this===Qe&&typeof e=="string")return[e];if(u=Ae(e)){for(n=[];!(a=u.next()).done;)n.push(a.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var ee=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ie=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ot=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ie),ue={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ce(e,t){this.name=e,this.message=t}function Ke(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,a,u){return u.indexOf(n)===a}).join(`
`)}function De(e,t,n,a){this.failures=t,this.failedKeys=a,this.successCount=n,this.message=Ke(e,t)}function Me(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Ke(e,this.failures)}z(ce).from(Error).extend({toString:function(){return this.name+": "+this.message}}),z(De).from(ce),z(Me).from(ce);var Oe=Ot.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ve=ce,oe=Ot.reduce(function(e,t){var n=t+"Error";function a(u,c){this.name=n,u?typeof u=="string"?(this.message="".concat(u).concat(c?`
 `+c:""),this.inner=c||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=ue[t]||n,this.inner=null)}return z(a).from(Ve),e[t]=a,e},{});oe.Syntax=SyntaxError,oe.Type=TypeError,oe.Range=RangeError;var rt=ie.reduce(function(e,t){return e[t+"Error"]=oe[t],e},{}),Ze=Ot.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=oe[t]),e},{});function be(){}function ct(e){return e}function ft(e,t){return e==null||e===ct?t:function(n){return t(e(n))}}function ot(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function St(e,t){return e===be?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var a=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?ot(a,this.onsuccess):a),u&&(this.onerror=this.onerror?ot(u,this.onerror):u),c!==void 0?c:n}}function dt(e,t){return e===be?t:function(){e.apply(this,arguments);var n=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ot(n,this.onsuccess):n),a&&(this.onerror=this.onerror?ot(a,this.onerror):a)}}function yt(e,t){return e===be?t:function(n){var a=e.apply(this,arguments);E(n,a);var u=this.onsuccess,c=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?ot(u,this.onsuccess):u),c&&(this.onerror=this.onerror?ot(c,this.onerror):c),a===void 0?n===void 0?void 0:n:E(a,n)}}function wt(e,t){return e===be?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Tt(e,t){return e===be?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var a=this,u=arguments.length,c=new Array(u);u--;)c[u]=arguments[u];return n.then(function(){return t.apply(a,c)})}return t.apply(this,arguments)}}Ze.ModifyError=De,Ze.DexieError=ce,Ze.BulkError=Me;var Ye=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Pt(e){Ye=e}var Nt={},Mn=100,fe=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,O(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,O(t),e]}(),ie=fe[0],Ot=fe[1],fe=fe[2],Ot=Ot&&Ot.then,he=ie&&ie.constructor,Je=!!fe,_e=function(e,t){Kt.push([e,t]),Re&&(queueMicrotask(Yi),Re=!1)},qe=!0,Re=!0,Ce=[],st=[],At=ct,He={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:be,pgp:!1,env:{},finalize:be},re=He,Kt=[],Ft=0,Jt=[];function ne(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=re;if(typeof e!="function"){if(e!==Nt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&sn(this,this._value))}this._state=null,this._value=null,++t.ref,function n(a,u){try{u(function(c){if(a._state===null){if(c===a)throw new TypeError("A promise cannot be resolved with itself.");var f=a._lib&&un();c&&typeof c.then=="function"?n(a,function(v,m){c instanceof ne?c._then(v,m):c.then(v,m)}):(a._state=!0,a._value=c,jn(a)),f&&ln()}},sn.bind(null,a))}catch(c){sn(a,c)}}(this,e)}var Et={get:function(){var e=re,t=Rn;function n(a,u){var c=this,f=!e.global&&(e!==re||t!==Rn),v=f&&!Ht(),m=new ne(function(b,x){gr(c,new an(yo(a,e,f,v),yo(u,e,f,v),b,x,e))});return this._consoleTask&&(m._consoleTask=this._consoleTask),m}return n.prototype=Nt,n},set:function(e){H(this,"then",e&&e.prototype===Nt?Et:{get:function(){return e},set:Et.set})}};function an(e,t,n,a,u){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=a,this.psd=u}function sn(e,t){var n,a;st.push(t),e._state===null&&(n=e._lib&&un(),t=At(t),e._state=!1,e._value=t,a=e,Ce.some(function(u){return u._value===a._value})||Ce.push(a),jn(e),n&&ln())}function jn(e){var t=e._listeners;e._listeners=[];for(var n=0,a=t.length;n<a;++n)gr(e,t[n]);var u=e._PSD;--u.ref||u.finalize(),Ft===0&&(++Ft,_e(function(){--Ft==0&&mr()},[]))}function gr(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ft,_e(Ui,[n,e,t])}else e._listeners.push(t)}function Ui(e,t,n){try{var a,u=t._value;!t._state&&st.length&&(st=[]),a=Ye&&t._consoleTask?t._consoleTask.run(function(){return e(u)}):e(u),t._state||st.indexOf(u)!==-1||function(c){for(var f=Ce.length;f;)if(Ce[--f]._value===c._value)return Ce.splice(f,1)}(t),n.resolve(a)}catch(c){n.reject(c)}finally{--Ft==0&&mr(),--n.psd.ref||n.psd.finalize()}}function Yi(){Xt(He,function(){un()&&ln()})}function un(){var e=qe;return Re=qe=!1,e}function ln(){var e,t,n;do for(;0<Kt.length;)for(e=Kt,Kt=[],n=e.length,t=0;t<n;++t){var a=e[t];a[0].apply(null,a[1])}while(0<Kt.length);Re=qe=!0}function mr(){var e=Ce;Ce=[],e.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var t=Jt.slice(0),n=t.length;n;)t[--n]()}function Kn(e){return new ne(Nt,!1,e)}function Ge(e,t){var n=re;return function(){var a=un(),u=re;try{return zt(n,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{zt(u,!1),a&&ln()}}}S(ne.prototype,{then:Et,_then:function(e,t){gr(this,new an(null,null,e,t,re))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(a){return(a instanceof t?n:Kn)(a)}):this.then(null,function(a){return(a&&a.name===t?n:Kn)(a)})},finally:function(e){return this.then(function(t){return ne.resolve(e()).then(function(){return t})},function(t){return ne.resolve(e()).then(function(){return Kn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new ne(function(a,u){var c=setTimeout(function(){return u(new oe.Timeout(t))},e);n.then(a,u).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&H(ne.prototype,Symbol.toStringTag,"Dexie.Promise"),He.env=mo(),S(ne,{all:function(){var e=Be.apply(null,arguments).map(Nn);return new ne(function(t,n){e.length===0&&t([]);var a=e.length;e.forEach(function(u,c){return ne.resolve(u).then(function(f){e[c]=f,--a||t(e)},n)})})},resolve:function(e){return e instanceof ne?e:e&&typeof e.then=="function"?new ne(function(t,n){e.then(t,n)}):new ne(Nt,!0,e)},reject:Kn,race:function(){var e=Be.apply(null,arguments).map(Nn);return new ne(function(t,n){e.map(function(a){return ne.resolve(a).then(t,n)})})},PSD:{get:function(){return re},set:function(e){return re=e}},totalEchoes:{get:function(){return Rn}},newPSD:Bt,usePSD:Xt,scheduler:{get:function(){return _e},set:function(e){_e=e}},rejectionMapper:{get:function(){return At},set:function(e){At=e}},follow:function(e,t){return new ne(function(n,a){return Bt(function(u,c){var f=re;f.unhandleds=[],f.onunhandled=c,f.finalize=ot(function(){var v,m=this;v=function(){m.unhandleds.length===0?u():c(m.unhandleds[0])},Jt.push(function b(){v(),Jt.splice(Jt.indexOf(b),1)}),++Ft,_e(function(){--Ft==0&&mr()},[])},f.finalize),e()},t,n,a)})}}),he&&(he.allSettled&&H(ne,"allSettled",function(){var e=Be.apply(null,arguments).map(Nn);return new ne(function(t){e.length===0&&t([]);var n=e.length,a=new Array(n);e.forEach(function(u,c){return ne.resolve(u).then(function(f){return a[c]={status:"fulfilled",value:f}},function(f){return a[c]={status:"rejected",reason:f}}).then(function(){return--n||t(a)})})})}),he.any&&typeof AggregateError<"u"&&H(ne,"any",function(){var e=Be.apply(null,arguments).map(Nn);return new ne(function(t,n){e.length===0&&n(new AggregateError([]));var a=e.length,u=new Array(a);e.forEach(function(c,f){return ne.resolve(c).then(function(v){return t(v)},function(v){u[f]=v,--a||n(new AggregateError(u))})})})}),he.withResolvers&&(ne.withResolvers=he.withResolvers));var it={awaits:0,echoes:0,id:0},Vi=0,Fn=[],qn=0,Rn=0,Wi=0;function Bt(e,t,n,a){var u=re,c=Object.create(u);return c.parent=u,c.ref=0,c.global=!1,c.id=++Wi,He.env,c.env=Je?{Promise:ne,PromiseProp:{value:ne,configurable:!0,writable:!0},all:ne.all,race:ne.race,allSettled:ne.allSettled,any:ne.any,resolve:ne.resolve,reject:ne.reject}:{},t&&E(c,t),++u.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},a=Xt(c,e,n,a),c.ref===0&&c.finalize(),a}function cn(){return it.id||(it.id=++Vi),++it.awaits,it.echoes+=Mn,it.id}function Ht(){return!!it.awaits&&(--it.awaits==0&&(it.id=0),it.echoes=it.awaits*Mn,!0)}function Nn(e){return it.echoes&&e&&e.constructor===he?(cn(),e.then(function(t){return Ht(),t},function(t){return Ht(),$e(t)})):e}function Gi(){var e=Fn[Fn.length-1];Fn.pop(),zt(e,!1)}function zt(e,t){var n,a=re;(t?!it.echoes||qn++&&e===re:!qn||--qn&&e===re)||queueMicrotask(t?(function(u){++Rn,it.echoes&&--it.echoes!=0||(it.echoes=it.awaits=it.id=0),Fn.push(re),zt(u,!0)}).bind(null,e):Gi),e!==re&&(re=e,a===He&&(He.env=mo()),Je&&(n=He.env.Promise,t=e.env,(a.global||e.global)&&(Object.defineProperty(d,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function mo(){var e=d.Promise;return Je?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Xt(e,t,n,a,u){var c=re;try{return zt(e,!0),t(n,a,u)}finally{zt(c,!1)}}function yo(e,t,n,a){return typeof e!="function"?e:function(){var u=re;n&&cn(),zt(t,!0);try{return e.apply(this,arguments)}finally{zt(u,!1),a&&queueMicrotask(Ht)}}}function yr(e){Promise===he&&it.echoes===0?qn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Ot).indexOf("[native code]")===-1&&(cn=Ht=be);var $e=ne.reject,Zt="￿",qt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bo="String expected.",fn=[],Bn="__dbnames",br="readonly",_r="readwrite";function $t(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var _o={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Hn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=je(t))[e],t}}function wo(){throw oe.Type()}function Pe(e,t){try{var n=xo(e),a=xo(t);if(n!==a)return n==="Array"?1:a==="Array"?-1:n==="binary"?1:a==="binary"?-1:n==="string"?1:a==="string"?-1:n==="Date"?1:a!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(u,c){for(var f=u.length,v=c.length,m=f<v?f:v,b=0;b<m;++b)if(u[b]!==c[b])return u[b]<c[b]?-1:1;return f===v?0:f<v?-1:1}(ko(e),ko(t));case"Array":return function(u,c){for(var f=u.length,v=c.length,m=f<v?f:v,b=0;b<m;++b){var x=Pe(u[b],c[b]);if(x!==0)return x}return f===v?0:f<v?-1:1}(e,t)}}catch{}return NaN}function xo(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Ue(e),e==="ArrayBuffer"?"binary":e)}function ko(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Do=(We.prototype._trans=function(e,t,n){var a=this._tx||re.trans,u=this.name,c=Ye&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function f(b,x,p){if(!p.schema[u])throw new oe.NotFound("Table "+u+" not part of transaction");return t(p.idbtrans,p)}var v=un();try{var m=a&&a.db._novip===this.db._novip?a===re.trans?a._promise(e,f,n):Bt(function(){return a._promise(e,f,n)},{trans:a,transless:re.transless||re}):function b(x,p,D,y){if(x.idbdb&&(x._state.openComplete||re.letThrough||x._vip)){var w=x._createTransaction(p,D,x._dbSchema);try{w.create(),x._state.PR1398_maxLoop=3}catch(k){return k.name===Oe.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return b(x,p,D,y)})):$e(k)}return w._promise(p,function(k,_){return Bt(function(){return re.trans=w,y(k,_,w)})}).then(function(k){if(p==="readwrite")try{w.idbtrans.commit()}catch{}return p==="readonly"?k:w._completion.then(function(){return k})})}if(x._state.openComplete)return $e(new oe.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return $e(new oe.DatabaseClosed);x.open().catch(be)}return x._state.dbReadyPromise.then(function(){return b(x,p,D,y)})}(this.db,e,[this.name],f);return c&&(m._consoleTask=c,m=m.catch(function(b){return console.trace(b),$e(b)})),m}finally{v&&ln()}},We.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?$e(new oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return n.core.get({trans:a,key:e}).then(function(u){return n.hook.reading.fire(u)})}).then(t)},We.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(g(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=h(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&t.every(function(b){return 0<=v.keyPath.indexOf(b)})){for(var m=0;m<t.length;++m)if(t.indexOf(v.keyPath[m])===-1)return!1;return!0}return!1}).sort(function(v,m){return v.keyPath.length-m.keyPath.length})[0];if(n&&this.db._maxKey!==Zt){var c=n.keyPath.slice(0,t.length);return this.where(c).equals(c.map(function(m){return e[m]}))}!n&&Ye&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var a=this.schema.idxByName;function u(v,m){return Pe(v,m)===0}var f=t.reduce(function(p,m){var b=p[0],x=p[1],p=a[m],D=e[m];return[b||p,b||!p?$t(x,p&&p.multi?function(y){return y=V(y,m),g(y)&&y.some(function(w){return u(D,w)})}:function(y){return u(D,V(y,m))}):x]},[null,null]),c=f[0],f=f[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(f):n?this.filter(f):this.where(t).equals("")},We.prototype.filter=function(e){return this.toCollection().and(e)},We.prototype.count=function(e){return this.toCollection().count(e)},We.prototype.offset=function(e){return this.toCollection().offset(e)},We.prototype.limit=function(e){return this.toCollection().limit(e)},We.prototype.each=function(e){return this.toCollection().each(e)},We.prototype.toArray=function(e){return this.toCollection().toArray(e)},We.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},We.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,g(e)?"[".concat(e.join("+"),"]"):e))},We.prototype.reverse=function(){return this.toCollection().reverse()},We.prototype.mapToClass=function(e){var t,n=this.db,a=this.name;function u(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof wo&&(function(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function x(){this.constructor=m}i(m,b),m.prototype=b===null?Object.create(b):(x.prototype=b.prototype,new x)}(u,t=e),Object.defineProperty(u.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),u.prototype.table=function(){return a},e=u);for(var c=new Set,f=e.prototype;f;f=O(f))Object.getOwnPropertyNames(f).forEach(function(m){return c.add(m)});function v(m){if(!m)return m;var b,x=Object.create(e.prototype);for(b in m)if(!c.has(b))try{x[b]=m[b]}catch{}return x}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),e},We.prototype.defineClass=function(){return this.mapToClass(function(e){E(this,e)})},We.prototype.add=function(e,t){var n=this,a=this.schema.primKey,u=a.auto,c=a.keyPath,f=e;return c&&u&&(f=Hn(c)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"add",keys:t!=null?[t]:null,values:[f]})}).then(function(v){return v.numFailures?ne.reject(v.failures[0]):v.lastResult}).then(function(v){if(c)try{B(e,c,v)}catch{}return v})},We.prototype.update=function(e,t){return typeof e!="object"||g(e)?this.where(":id").equals(e).modify(t):(e=V(e,this.schema.primKey.keyPath),e===void 0?$e(new oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},We.prototype.put=function(e,t){var n=this,a=this.schema.primKey,u=a.auto,c=a.keyPath,f=e;return c&&u&&(f=Hn(c)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"put",values:[f],keys:t!=null?[t]:null})}).then(function(v){return v.numFailures?ne.reject(v.failures[0]):v.lastResult}).then(function(v){if(c)try{B(e,c,v)}catch{}return v})},We.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?ne.reject(n.failures[0]):void 0})},We.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:_o})}).then(function(t){return t.numFailures?ne.reject(t.failures[0]):void 0})},We.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(a){return a.map(function(u){return t.hook.reading.fire(u)})})})},We.prototype.bulkAdd=function(e,t,n){var a=this,u=Array.isArray(t)?t:void 0,c=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(f){var b=a.schema.primKey,v=b.auto,b=b.keyPath;if(b&&u)throw new oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,b=b&&v?e.map(Hn(b)):e;return a.core.mutate({trans:f,type:"add",keys:u,values:b,wantResults:c}).then(function(w){var p=w.numFailures,D=w.results,y=w.lastResult,w=w.failures;if(p===0)return c?D:y;throw new Me("".concat(a.name,".bulkAdd(): ").concat(p," of ").concat(m," operations failed"),w)})})},We.prototype.bulkPut=function(e,t,n){var a=this,u=Array.isArray(t)?t:void 0,c=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(f){var b=a.schema.primKey,v=b.auto,b=b.keyPath;if(b&&u)throw new oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,b=b&&v?e.map(Hn(b)):e;return a.core.mutate({trans:f,type:"put",keys:u,values:b,wantResults:c}).then(function(w){var p=w.numFailures,D=w.results,y=w.lastResult,w=w.failures;if(p===0)return c?D:y;throw new Me("".concat(a.name,".bulkPut(): ").concat(p," of ").concat(m," operations failed"),w)})})},We.prototype.bulkUpdate=function(e){var t=this,n=this.core,a=e.map(function(f){return f.key}),u=e.map(function(f){return f.changes}),c=[];return this._trans("readwrite",function(f){return n.getMany({trans:f,keys:a,cache:"clone"}).then(function(v){var m=[],b=[];e.forEach(function(p,D){var y=p.key,w=p.changes,k=v[D];if(k){for(var _=0,C=Object.keys(w);_<C.length;_++){var P=C[_],M=w[P];if(P===t.schema.primKey.keyPath){if(Pe(M,y)!==0)throw new oe.Constraint("Cannot update primary key in bulkUpdate()")}else B(k,P,M)}c.push(D),m.push(y),b.push(k)}});var x=m.length;return n.mutate({trans:f,type:"put",keys:m,values:b,updates:{keys:a,changeSpecs:u}}).then(function(p){var D=p.numFailures,y=p.failures;if(D===0)return x;for(var w=0,k=Object.keys(y);w<k.length;w++){var _,C=k[w],P=c[Number(C)];P!=null&&(_=y[C],delete y[C],y[P]=_)}throw new Me("".concat(t.name,".bulkUpdate(): ").concat(D," of ").concat(x," operations failed"),y)})})})},We.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"delete",keys:e})}).then(function(f){var u=f.numFailures,c=f.lastResult,f=f.failures;if(u===0)return c;throw new Me("".concat(t.name,".bulkDelete(): ").concat(u," of ").concat(n," operations failed"),f)})},We);function We(){}function yn(e){function t(f,v){if(v){for(var m=arguments.length,b=new Array(m-1);--m;)b[m-1]=arguments[m];return n[f].subscribe.apply(null,b),e}if(typeof f=="string")return n[f]}var n={};t.addEventType=c;for(var a=1,u=arguments.length;a<u;++a)c(arguments[a]);return t;function c(f,v,m){if(typeof f!="object"){var b;v=v||wt;var x={subscribers:[],fire:m=m||be,subscribe:function(p){x.subscribers.indexOf(p)===-1&&(x.subscribers.push(p),x.fire=v(x.fire,p))},unsubscribe:function(p){x.subscribers=x.subscribers.filter(function(D){return D!==p}),x.fire=x.subscribers.reduce(v,m)}};return n[f]=t[f]=x}h(b=f).forEach(function(p){var D=b[p];if(g(D))c(p,b[p][0],b[p][1]);else{if(D!=="asap")throw new oe.InvalidArgument("Invalid event config");var y=c(p,ct,function(){for(var w=arguments.length,k=new Array(w);w--;)k[w]=arguments[w];y.subscribers.forEach(function(_){L(function(){_.apply(null,k)})})})}})}}function bn(e,t){return z(t).from({prototype:e}),t}function dn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function wr(e,t){e.filter=$t(e.filter,t)}function xr(e,t,n){var a=e.replayFilter;e.replayFilter=a?function(){return $t(a(),t())}:t,e.justLimit=n&&!a}function zn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new oe.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function So(e,t,n){var a=zn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:a,range:e.range}})}function Ln(e,t,n,a){var u=e.replayFilter?$t(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},f=function(v,m,b){var x,p;u&&!u(m,b,function(D){return m.stop(D)},function(D){return m.fail(D)})||((p=""+(x=m.primaryKey))=="[object ArrayBuffer]"&&(p=""+new Uint8Array(x)),q(c,p)||(c[p]=!0,t(v,m,b)))};return Promise.all([e.or._iterate(f,n),To(So(e,a,n),e.algorithm,f,!e.keysOnly&&e.valueMapper)])}return To(So(e,a,n),$t(e.algorithm,u),t,!e.keysOnly&&e.valueMapper)}function To(e,t,n,a){var u=Ge(a?function(c,f,v){return n(a(c),f,v)}:n);return e.then(function(c){if(c)return c.start(function(){var f=function(){return c.continue()};t&&!t(c,function(v){return f=v},function(v){c.stop(v),f=be},function(v){c.fail(v),f=be})||u(c.value,c,function(v){return f=v}),f()})})}var _n=(Eo.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(g(n))return l(l([],g(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var a=t.remove;if(g(a))return g(e)?e.filter(function(u){return!a.includes(u)}).sort():[];if(typeof a=="number")return Number(e)-a;if(typeof a=="bigint")try{return BigInt(e)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Eo);function Eo(e){this["@@propmod"]=e}var Qi=(Fe.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,$e.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Fe.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,$e.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Fe.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=$t(t.algorithm,e)},Fe.prototype._iterate=function(e,t){return Ln(this._ctx,e,t,this._ctx.table.core)},Fe.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&E(n,e),t._ctx=n,t},Fe.prototype.raw=function(){return this._ctx.valueMapper=null,this},Fe.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Ln(t,e,n,t.table.core)})},Fe.prototype.count=function(e){var t=this;return this._read(function(n){var a=t._ctx,u=a.table.core;if(dn(a,!0))return u.count({trans:n,query:{index:zn(a,u.schema),range:a.range}}).then(function(f){return Math.min(f,a.limit)});var c=0;return Ln(a,function(){return++c,!1},n,u).then(function(){return c})}).then(e)},Fe.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),a=n[0],u=n.length-1;function c(m,b){return b?c(m[n[b]],b-1):m[a]}var f=this._ctx.dir==="next"?1:-1;function v(m,b){return Pe(c(m,u),c(b,u))*f}return this.toArray(function(m){return m.sort(v)}).then(t)},Fe.prototype.toArray=function(e){var t=this;return this._read(function(n){var a=t._ctx;if(a.dir==="next"&&dn(a,!0)&&0<a.limit){var u=a.valueMapper,c=zn(a,a.table.core.schema);return a.table.core.query({trans:n,limit:a.limit,values:!0,query:{index:c,range:a.range}}).then(function(v){return v=v.result,u?v.map(u):v})}var f=[];return Ln(a,function(v){return f.push(v)},n,a.table.core).then(function(){return f})},e)},Fe.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,dn(t)?xr(t,function(){var n=e;return function(a,u){return n===0||(n===1?--n:u(function(){a.advance(n),n=0}),!1)}}):xr(t,function(){var n=e;return function(){return--n<0}})),this},Fe.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),xr(this._ctx,function(){var t=e;return function(n,a,u){return--t<=0&&a(u),0<=t}},!0),this},Fe.prototype.until=function(e,t){return wr(this._ctx,function(n,a,u){return!e(n.value)||(a(u),t)}),this},Fe.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},Fe.prototype.last=function(e){return this.reverse().first(e)},Fe.prototype.filter=function(e){var t;return wr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=$t(t.isMatch,e),this},Fe.prototype.and=function(e){return this.filter(e)},Fe.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Fe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Fe.prototype.desc=function(){return this.reverse()},Fe.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,a){e(a.key,a)})},Fe.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Fe.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,a){e(a.primaryKey,a)})},Fe.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(a,u){n.push(u.key)}).then(function(){return n}).then(e)},Fe.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&dn(t,!0)&&0<t.limit)return this._read(function(a){var u=zn(t,t.table.core.schema);return t.table.core.query({trans:a,values:!1,limit:t.limit,query:{index:u,range:t.range}})}).then(function(a){return a.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(a,u){n.push(u.primaryKey)}).then(function(){return n}).then(e)},Fe.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Fe.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},Fe.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Fe.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return wr(this._ctx,function(u){var a=u.primaryKey.toString(),u=q(t,a);return t[a]=!0,!u}),this},Fe.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(a){var u,c,f;f=typeof e=="function"?e:(u=h(e),c=u.length,function(_){for(var C=!1,P=0;P<c;++P){var M=u[P],R=e[M],G=V(_,M);R instanceof _n?(B(_,M,R.execute(G)),C=!0):G!==R&&(B(_,M,R),C=!0)}return C});var v=n.table.core,p=v.schema.primaryKey,m=p.outbound,b=p.extractKey,x=200,p=t.db._options.modifyChunkSize;p&&(x=typeof p=="object"?p[v.name]||p["*"]||200:p);function D(_,M){var P=M.failures,M=M.numFailures;w+=_-M;for(var R=0,G=h(P);R<G.length;R++){var Z=G[R];y.push(P[Z])}}var y=[],w=0,k=[];return t.clone().primaryKeys().then(function(_){function C(M){var R=Math.min(x,_.length-M);return v.getMany({trans:a,keys:_.slice(M,M+R),cache:"immutable"}).then(function(G){for(var Z=[],Q=[],J=m?[]:null,te=[],X=0;X<R;++X){var ae=G[X],we={value:je(ae),primKey:_[M+X]};f.call(we,we.value,we)!==!1&&(we.value==null?te.push(_[M+X]):m||Pe(b(ae),b(we.value))===0?(Q.push(we.value),m&&J.push(_[M+X])):(te.push(_[M+X]),Z.push(we.value)))}return Promise.resolve(0<Z.length&&v.mutate({trans:a,type:"add",values:Z}).then(function(Se){for(var Te in Se.failures)te.splice(parseInt(Te),1);D(Z.length,Se)})).then(function(){return(0<Q.length||P&&typeof e=="object")&&v.mutate({trans:a,type:"put",keys:J,values:Q,criteria:P,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<M}).then(function(Se){return D(Q.length,Se)})}).then(function(){return(0<te.length||P&&e===kr)&&v.mutate({trans:a,type:"delete",keys:te,criteria:P,isAdditionalChunk:0<M}).then(function(Se){return D(te.length,Se)})}).then(function(){return _.length>M+R&&C(M+x)})})}var P=dn(n)&&n.limit===1/0&&(typeof e!="function"||e===kr)&&{index:n.index,range:n.range};return C(0).then(function(){if(0<y.length)throw new De("Error modifying one or more objects",y,w,k);return _.length})})})},Fe.prototype.delete=function(){var e=this._ctx,t=e.range;return dn(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var a=e.table.core.schema.primaryKey,u=t;return e.table.core.count({trans:n,query:{index:a,range:u}}).then(function(c){return e.table.core.mutate({trans:n,type:"deleteRange",range:u}).then(function(f){var v=f.failures;if(f.lastResult,f.results,f=f.numFailures,f)throw new De("Could not delete some values",Object.keys(v).map(function(m){return v[m]}),c-f);return c-f})})}):this.modify(kr)},Fe);function Fe(){}var kr=function(e,t){return t.value=null};function Ji(e,t){return e<t?-1:e===t?0:1}function Xi(e,t){return t<e?-1:e===t?0:1}function kt(e,t,n){return e=e instanceof Co?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function hn(e){return new e.Collection(e,function(){return Oo("")}).limit(0)}function Un(e,t,n,a){var u,c,f,v,m,b,x,p=n.length;if(!n.every(function(w){return typeof w=="string"}))return kt(e,bo);function D(w){u=w==="next"?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()},c=w==="next"?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()},f=w==="next"?Ji:Xi;var k=n.map(function(_){return{lower:c(_),upper:u(_)}}).sort(function(_,C){return f(_.lower,C.lower)});v=k.map(function(_){return _.upper}),m=k.map(function(_){return _.lower}),x=(b=w)==="next"?"":a}D("next"),e=new e.Collection(e,function(){return Lt(v[0],m[p-1]+a)}),e._ondirectionchange=function(w){D(w)};var y=0;return e._addAlgorithm(function(w,k,_){var C=w.key;if(typeof C!="string")return!1;var P=c(C);if(t(P,m,y))return!0;for(var M=null,R=y;R<p;++R){var G=function(Z,Q,J,te,X,ae){for(var we=Math.min(Z.length,te.length),Se=-1,Te=0;Te<we;++Te){var Dt=Q[Te];if(Dt!==te[Te])return X(Z[Te],J[Te])<0?Z.substr(0,Te)+J[Te]+J.substr(Te+1):X(Z[Te],te[Te])<0?Z.substr(0,Te)+te[Te]+J.substr(Te+1):0<=Se?Z.substr(0,Se)+Q[Se]+J.substr(Se+1):null;X(Z[Te],Dt)<0&&(Se=Te)}return we<te.length&&ae==="next"?Z+J.substr(Z.length):we<Z.length&&ae==="prev"?Z.substr(0,J.length):Se<0?null:Z.substr(0,Se)+te[Se]+J.substr(Se+1)}(C,P,v[R],m[R],f,b);G===null&&M===null?y=R+1:(M===null||0<f(M,G))&&(M=G)}return k(M!==null?function(){w.continue(M+x)}:_),!1}),e}function Lt(e,t,n,a){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:a}}function Oo(e){return{type:1,lower:e,upper:e}}var Co=(Object.defineProperty(at.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),at.prototype.between=function(e,t,n,a){n=n!==!1,a=a===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||a)&&(!n||!a)?hn(this):new this.Collection(this,function(){return Lt(e,t,!n,!a)})}catch{return kt(this,qt)}},at.prototype.equals=function(e){return e==null?kt(this,qt):new this.Collection(this,function(){return Oo(e)})},at.prototype.above=function(e){return e==null?kt(this,qt):new this.Collection(this,function(){return Lt(e,void 0,!0)})},at.prototype.aboveOrEqual=function(e){return e==null?kt(this,qt):new this.Collection(this,function(){return Lt(e,void 0,!1)})},at.prototype.below=function(e){return e==null?kt(this,qt):new this.Collection(this,function(){return Lt(void 0,e,!1,!0)})},at.prototype.belowOrEqual=function(e){return e==null?kt(this,qt):new this.Collection(this,function(){return Lt(void 0,e)})},at.prototype.startsWith=function(e){return typeof e!="string"?kt(this,bo):this.between(e,e+Zt,!0,!0)},at.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Un(this,function(t,n){return t.indexOf(n[0])===0},[e],Zt)},at.prototype.equalsIgnoreCase=function(e){return Un(this,function(t,n){return t===n[0]},[e],"")},at.prototype.anyOfIgnoreCase=function(){var e=Be.apply(Qe,arguments);return e.length===0?hn(this):Un(this,function(t,n){return n.indexOf(t)!==-1},e,"")},at.prototype.startsWithAnyOfIgnoreCase=function(){var e=Be.apply(Qe,arguments);return e.length===0?hn(this):Un(this,function(t,n){return n.some(function(a){return t.indexOf(a)===0})},e,Zt)},at.prototype.anyOf=function(){var e=this,t=Be.apply(Qe,arguments),n=this._cmp;try{t.sort(n)}catch{return kt(this,qt)}if(t.length===0)return hn(this);var a=new this.Collection(this,function(){return Lt(t[0],t[t.length-1])});a._ondirectionchange=function(c){n=c==="next"?e._ascending:e._descending,t.sort(n)};var u=0;return a._addAlgorithm(function(c,f,v){for(var m=c.key;0<n(m,t[u]);)if(++u===t.length)return f(v),!1;return n(m,t[u])===0||(f(function(){c.continue(t[u])}),!1)}),a},at.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},at.prototype.noneOf=function(){var e=Be.apply(Qe,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return kt(this,qt)}var t=e.reduce(function(n,a){return n?n.concat([[n[n.length-1][1],a]]):[[-1/0,a]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},at.prototype.inAnyRange=function(C,t){var n=this,a=this._cmp,u=this._ascending,c=this._descending,f=this._min,v=this._max;if(C.length===0)return hn(this);if(!C.every(function(P){return P[0]!==void 0&&P[1]!==void 0&&u(P[0],P[1])<=0}))return kt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",oe.InvalidArgument);var m=!t||t.includeLowers!==!1,b=t&&t.includeUppers===!0,x,p=u;function D(P,M){return p(P[0],M[0])}try{(x=C.reduce(function(P,M){for(var R=0,G=P.length;R<G;++R){var Z=P[R];if(a(M[0],Z[1])<0&&0<a(M[1],Z[0])){Z[0]=f(Z[0],M[0]),Z[1]=v(Z[1],M[1]);break}}return R===G&&P.push(M),P},[])).sort(D)}catch{return kt(this,qt)}var y=0,w=b?function(P){return 0<u(P,x[y][1])}:function(P){return 0<=u(P,x[y][1])},k=m?function(P){return 0<c(P,x[y][0])}:function(P){return 0<=c(P,x[y][0])},_=w,C=new this.Collection(this,function(){return Lt(x[0][0],x[x.length-1][1],!m,!b)});return C._ondirectionchange=function(P){p=P==="next"?(_=w,u):(_=k,c),x.sort(D)},C._addAlgorithm(function(P,M,R){for(var G,Z=P.key;_(Z);)if(++y===x.length)return M(R),!1;return!w(G=Z)&&!k(G)||(n._cmp(Z,x[y][1])===0||n._cmp(Z,x[y][0])===0||M(function(){p===u?P.continue(x[y][0]):P.continue(x[y][1])}),!1)}),C},at.prototype.startsWithAnyOf=function(){var e=Be.apply(Qe,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?hn(this):this.inAnyRange(e.map(function(t){return[t,t+Zt]})):kt(this,"startsWithAnyOf() only works with strings")},at);function at(){}function Mt(e){return Ge(function(t){return wn(t),e(t.target.error),!1})}function wn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var xn="storagemutated",Dr="x-storagemutated-1",Ut=yn(null,xn),Zi=(jt.prototype._lock=function(){return T(!re.global),++this._reculock,this._reculock!==1||re.global||(re.lockOwnerFor=this),this},jt.prototype._unlock=function(){if(T(!re.global),--this._reculock==0)for(re.global||(re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Xt(e[1],e[0])}catch{}}return this},jt.prototype._locked=function(){return this._reculock&&re.lockOwnerFor!==this},jt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,a=this.db._state.dbOpenError;if(T(!this.idbtrans),!e&&!n)switch(a&&a.name){case"DatabaseClosedError":throw new oe.DatabaseClosed(a);case"MissingAPIError":throw new oe.MissingAPI(a.message,a);default:throw new oe.OpenFailed(a)}if(!this.active)throw new oe.TransactionInactive;return T(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ge(function(u){wn(u),t._reject(e.error)}),e.onabort=Ge(function(u){wn(u),t.active&&t._reject(new oe.Abort(e.error)),t.active=!1,t.on("abort").fire(u)}),e.oncomplete=Ge(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ut.storagemutated.fire(e.mutatedParts)}),this},jt.prototype._promise=function(e,t,n){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return $e(new oe.ReadOnly("Transaction is readonly"));if(!this.active)return $e(new oe.TransactionInactive);if(this._locked())return new ne(function(c,f){a._blockedFuncs.push([function(){a._promise(e,t,n).then(c,f)},re])});if(n)return Bt(function(){var c=new ne(function(f,v){a._lock();var m=t(f,v,a);m&&m.then&&m.then(f,v)});return c.finally(function(){return a._unlock()}),c._lib=!0,c});var u=new ne(function(c,f){var v=t(c,f,a);v&&v.then&&v.then(c,f)});return u._lib=!0,u},jt.prototype._root=function(){return this.parent?this.parent._root():this},jt.prototype.waitFor=function(e){var t,n=this._root(),a=ne.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return a}):(n._waitingFor=a,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function c(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=c)}());var u=n._waitingFor;return new ne(function(c,f){a.then(function(v){return n._waitingQueue.push(Ge(c.bind(null,v)))},function(v){return n._waitingQueue.push(Ge(f.bind(null,v)))}).finally(function(){n._waitingFor===u&&(n._waitingFor=null)})})},jt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new oe.Abort))},jt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(q(t,e))return t[e];var n=this.schema[e];if(!n)throw new oe.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},jt);function jt(){}function Sr(e,t,n,a,u,c,f){return{name:e,keyPath:t,unique:n,multi:a,auto:u,compound:c,src:(n&&!f?"&":"")+(a?"*":"")+(u?"++":"")+Io(t)}}function Io(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Tr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(a=function(u){return[u.name,u]},n.reduce(function(u,c,f){return f=a(c,f),f&&(u[f[0]]=f[1]),u},{}))};var a}var kn=function(e){try{return e.only([[]]),kn=function(){return[[]]},[[]]}catch{return kn=function(){return Zt},Zt}};function Er(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return V(n,t)}:function(n){return V(n,e)};var t}function Po(e){return[].slice.call(e)}var $i=0;function Dn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function ea(e,t,m){function a(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var y=_.lower,w=_.upper,k=_.lowerOpen,_=_.upperOpen;return y===void 0?w===void 0?null:t.upperBound(w,!!_):w===void 0?t.lowerBound(y,!!k):t.bound(y,w,!!k,!!_)}function u(D){var y,w=D.name;return{name:w,schema:D,mutate:function(k){var _=k.trans,C=k.type,P=k.keys,M=k.values,R=k.range;return new Promise(function(G,Z){G=Ge(G);var Q=_.objectStore(w),J=Q.keyPath==null,te=C==="put"||C==="add";if(!te&&C!=="delete"&&C!=="deleteRange")throw new Error("Invalid operation type: "+C);var X,ae=(P||M||{length:1}).length;if(P&&M&&P.length!==M.length)throw new Error("Given keys array must have same length as given values array.");if(ae===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function we(bt){++Dt,wn(bt)}var Se=[],Te=[],Dt=0;if(C==="deleteRange"){if(R.type===4)return G({numFailures:Dt,failures:Te,results:[],lastResult:void 0});R.type===3?Se.push(X=Q.clear()):Se.push(X=Q.delete(a(R)))}else{var J=te?J?[M,P]:[M,null]:[P,null],ye=J[0],vt=J[1];if(te)for(var pt=0;pt<ae;++pt)Se.push(X=vt&&vt[pt]!==void 0?Q[C](ye[pt],vt[pt]):Q[C](ye[pt])),X.onerror=we;else for(pt=0;pt<ae;++pt)Se.push(X=Q[C](ye[pt])),X.onerror=we}function rr(bt){bt=bt.target.result,Se.forEach(function(nn,Yr){return nn.error!=null&&(Te[Yr]=nn.error)}),G({numFailures:Dt,failures:Te,results:C==="delete"?P:Se.map(function(nn){return nn.result}),lastResult:bt})}X.onerror=function(bt){we(bt),rr(bt)},X.onsuccess=rr})},getMany:function(k){var _=k.trans,C=k.keys;return new Promise(function(P,M){P=Ge(P);for(var R,G=_.objectStore(w),Z=C.length,Q=new Array(Z),J=0,te=0,X=function(Se){Se=Se.target,Q[Se._pos]=Se.result,++te===J&&P(Q)},ae=Mt(M),we=0;we<Z;++we)C[we]!=null&&((R=G.get(C[we]))._pos=we,R.onsuccess=X,R.onerror=ae,++J);J===0&&P(Q)})},get:function(k){var _=k.trans,C=k.key;return new Promise(function(P,M){P=Ge(P);var R=_.objectStore(w).get(C);R.onsuccess=function(G){return P(G.target.result)},R.onerror=Mt(M)})},query:(y=b,function(k){return new Promise(function(_,C){_=Ge(_);var P,M,R,J=k.trans,G=k.values,Z=k.limit,X=k.query,Q=Z===1/0?void 0:Z,te=X.index,X=X.range,J=J.objectStore(w),te=te.isPrimaryKey?J:J.index(te.name),X=a(X);if(Z===0)return _({result:[]});y?((Q=G?te.getAll(X,Q):te.getAllKeys(X,Q)).onsuccess=function(ae){return _({result:ae.target.result})},Q.onerror=Mt(C)):(P=0,M=!G&&"openKeyCursor"in te?te.openKeyCursor(X):te.openCursor(X),R=[],M.onsuccess=function(ae){var we=M.result;return we?(R.push(G?we.value:we.primaryKey),++P===Z?_({result:R}):void we.continue()):_({result:R})},M.onerror=Mt(C))})}),openCursor:function(k){var _=k.trans,C=k.values,P=k.query,M=k.reverse,R=k.unique;return new Promise(function(G,Z){G=Ge(G);var te=P.index,Q=P.range,J=_.objectStore(w),J=te.isPrimaryKey?J:J.index(te.name),te=M?R?"prevunique":"prev":R?"nextunique":"next",X=!C&&"openKeyCursor"in J?J.openKeyCursor(a(Q),te):J.openCursor(a(Q),te);X.onerror=Mt(Z),X.onsuccess=Ge(function(ae){var we,Se,Te,Dt,ye=X.result;ye?(ye.___id=++$i,ye.done=!1,we=ye.continue.bind(ye),Se=(Se=ye.continuePrimaryKey)&&Se.bind(ye),Te=ye.advance.bind(ye),Dt=function(){throw new Error("Cursor not stopped")},ye.trans=_,ye.stop=ye.continue=ye.continuePrimaryKey=ye.advance=function(){throw new Error("Cursor not started")},ye.fail=Ge(Z),ye.next=function(){var vt=this,pt=1;return this.start(function(){return pt--?vt.continue():vt.stop()}).then(function(){return vt})},ye.start=function(vt){function pt(){if(X.result)try{vt()}catch(bt){ye.fail(bt)}else ye.done=!0,ye.start=function(){throw new Error("Cursor behind last entry")},ye.stop()}var rr=new Promise(function(bt,nn){bt=Ge(bt),X.onerror=Mt(nn),ye.fail=nn,ye.stop=function(Yr){ye.stop=ye.continue=ye.continuePrimaryKey=ye.advance=Dt,bt(Yr)}});return X.onsuccess=Ge(function(bt){X.onsuccess=pt,pt()}),ye.continue=we,ye.continuePrimaryKey=Se,ye.advance=Te,pt(),rr},G(ye)):G(null)},Z)})},count:function(k){var _=k.query,C=k.trans,P=_.index,M=_.range;return new Promise(function(R,G){var Z=C.objectStore(w),Q=P.isPrimaryKey?Z:Z.index(P.name),Z=a(M),Q=Z?Q.count(Z):Q.count();Q.onsuccess=Ge(function(J){return R(J.target.result)}),Q.onerror=Mt(G)})}}}var c,f,v,x=(f=m,v=Po((c=e).objectStoreNames),{schema:{name:c.name,tables:v.map(function(D){return f.objectStore(D)}).map(function(D){var y=D.keyPath,_=D.autoIncrement,w=g(y),k={},_={name:D.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y==null,compound:w,keyPath:y,autoIncrement:_,unique:!0,extractKey:Er(y)},indexes:Po(D.indexNames).map(function(C){return D.index(C)}).map(function(R){var P=R.name,M=R.unique,G=R.multiEntry,R=R.keyPath,G={name:P,compound:g(R),keyPath:R,unique:M,multiEntry:G,extractKey:Er(R)};return k[Dn(R)]=G}),getIndexByKeyPath:function(C){return k[Dn(C)]}};return k[":id"]=_.primaryKey,y!=null&&(k[Dn(y)]=_.primaryKey),_})},hasGetAll:0<v.length&&"getAll"in f.objectStore(v[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),m=x.schema,b=x.hasGetAll,x=m.tables.map(u),p={};return x.forEach(function(D){return p[D.name]=D}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(D){if(!p[D])throw new Error("Table '".concat(D,"' not found"));return p[D]},MIN_KEY:-1/0,MAX_KEY:kn(t),schema:m}}function ta(e,t,n,a){var u=n.IDBKeyRange;return n.indexedDB,{dbcore:(a=ea(t,u,a),e.dbcore.reduce(function(c,f){return f=f.create,s(s({},c),f(c))},a))}}function Yn(e,a){var n=a.db,a=ta(e._middlewares,n,e._deps,a);e.core=a.dbcore,e.tables.forEach(function(u){var c=u.name;e.core.schema.tables.some(function(f){return f.name===c})&&(u.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=u.core))})}function Vn(e,t,n,a){n.forEach(function(u){var c=a[u];t.forEach(function(f){var v=function m(b,x){return W(b,x)||(b=O(b))&&m(b,x)}(f,u);(!v||"value"in v&&v.value===void 0)&&(f===e.Transaction.prototype||f instanceof e.Transaction?H(f,u,{get:function(){return this.table(u)},set:function(m){U(this,u,{value:m,writable:!0,configurable:!0,enumerable:!0})}}):f[u]=new e.Table(u,c))})})}function Or(e,t){t.forEach(function(n){for(var a in n)n[a]instanceof e.Table&&delete n[a]})}function na(e,t){return e._cfg.version-t._cfg.version}function ra(e,t,n,a){var u=e._dbSchema;n.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=Tr("$meta",Mo("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,u);c.create(n),c._completion.catch(a);var f=c._reject.bind(c),v=re.transless||re;Bt(function(){return re.trans=c,re.transless=v,t!==0?(Yn(e,n),b=t,((m=c).storeNames.includes("$meta")?m.table("$meta").get("version").then(function(x){return x??b}):ne.resolve(b)).then(function(x){return D=x,y=c,w=n,k=[],x=(p=e)._versions,_=p._dbSchema=Gn(0,p.idbdb,w),(x=x.filter(function(C){return C._cfg.version>=D})).length!==0?(x.forEach(function(C){k.push(function(){var P=_,M=C._cfg.dbschema;Qn(p,P,w),Qn(p,M,w),_=p._dbSchema=M;var R=Cr(P,M);R.add.forEach(function(te){Ir(w,te[0],te[1].primKey,te[1].indexes)}),R.change.forEach(function(te){if(te.recreate)throw new oe.Upgrade("Not yet support for changing primary key");var X=w.objectStore(te.name);te.add.forEach(function(ae){return Wn(X,ae)}),te.change.forEach(function(ae){X.deleteIndex(ae.name),Wn(X,ae)}),te.del.forEach(function(ae){return X.deleteIndex(ae)})});var G=C._cfg.contentUpgrade;if(G&&C._cfg.version>D){Yn(p,w),y._memoizedTables={};var Z=le(M);R.del.forEach(function(te){Z[te]=P[te]}),Or(p,[p.Transaction.prototype]),Vn(p,[p.Transaction.prototype],h(Z),Z),y.schema=Z;var Q,J=ee(G);return J&&cn(),R=ne.follow(function(){var te;(Q=G(y))&&J&&(te=Ht.bind(null,null),Q.then(te,te))}),Q&&typeof Q.then=="function"?ne.resolve(Q):R.then(function(){return Q})}}),k.push(function(P){var M,R,G=C._cfg.dbschema;M=G,R=P,[].slice.call(R.db.objectStoreNames).forEach(function(Z){return M[Z]==null&&R.db.deleteObjectStore(Z)}),Or(p,[p.Transaction.prototype]),Vn(p,[p.Transaction.prototype],p._storeNames,p._dbSchema),y.schema=p._dbSchema}),k.push(function(P){p.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(p.idbdb.version/10)===C._cfg.version?(p.idbdb.deleteObjectStore("$meta"),delete p._dbSchema.$meta,p._storeNames=p._storeNames.filter(function(M){return M!=="$meta"})):P.objectStore("$meta").put(C._cfg.version,"version"))})}),function C(){return k.length?ne.resolve(k.shift()(y.idbtrans)).then(C):ne.resolve()}().then(function(){Ao(_,w)})):ne.resolve();var p,D,y,w,k,_}).catch(f)):(h(u).forEach(function(x){Ir(n,x,u[x].primKey,u[x].indexes)}),Yn(e,n),void ne.follow(function(){return e.on.populate.fire(c)}).catch(f));var m,b})}function oa(e,t){Ao(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Gn(0,e.idbdb,t);Qn(e,e._dbSchema,t);for(var a=0,u=Cr(n,e._dbSchema).change;a<u.length;a++){var c=function(f){if(f.change.length||f.recreate)return console.warn("Unable to patch indexes of table ".concat(f.name," because it has changes on the type of index or primary key.")),{value:void 0};var v=t.objectStore(f.name);f.add.forEach(function(m){Ye&&console.debug("Dexie upgrade patch: Creating missing index ".concat(f.name,".").concat(m.src)),Wn(v,m)})}(u[a]);if(typeof c=="object")return c.value}}function Cr(e,t){var n,a={del:[],add:[],change:[]};for(n in e)t[n]||a.del.push(n);for(n in t){var u=e[n],c=t[n];if(u){var f={name:n,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||u.primKey.auto!==c.primKey.auto)f.recreate=!0,a.change.push(f);else{var v=u.idxByName,m=c.idxByName,b=void 0;for(b in v)m[b]||f.del.push(b);for(b in m){var x=v[b],p=m[b];x?x.src!==p.src&&f.change.push(p):f.add.push(p)}(0<f.del.length||0<f.add.length||0<f.change.length)&&a.change.push(f)}}else a.add.push([n,c])}return a}function Ir(e,t,n,a){var u=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return a.forEach(function(c){return Wn(u,c)}),u}function Ao(e,t){h(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(Ye&&console.debug("Dexie: Creating missing table",n),Ir(t,n,e[n].primKey,e[n].indexes))})}function Wn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Gn(e,t,n){var a={};return F(t.objectStoreNames,0).forEach(function(u){for(var c=n.objectStore(u),f=Sr(Io(b=c.keyPath),b||"",!0,!1,!!c.autoIncrement,b&&typeof b!="string",!0),v=[],m=0;m<c.indexNames.length;++m){var x=c.index(c.indexNames[m]),b=x.keyPath,x=Sr(x.name,b,!!x.unique,!!x.multiEntry,!1,b&&typeof b!="string",!1);v.push(x)}a[u]=Tr(u,f,v)}),a}function Qn(e,t,n){for(var a=n.db.objectStoreNames,u=0;u<a.length;++u){var c=a[u],f=n.objectStore(c);e._hasGetAll="getAll"in f;for(var v=0;v<f.indexNames.length;++v){var m=f.indexNames[v],b=f.index(m).keyPath,x=typeof b=="string"?b:"["+F(b).join("+")+"]";!t[c]||(b=t[c].idxByName[x])&&(b.name=m,delete t[c].idxByName[x],t[c].idxByName[m]=b)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Mo(e){return e.split(",").map(function(t,n){var a=(t=t.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return Sr(a,u||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),g(u),n===0)})}var ia=(Jn.prototype._parseStoresSpec=function(e,t){h(e).forEach(function(n){if(e[n]!==null){var a=Mo(e[n]),u=a.shift();if(u.unique=!0,u.multi)throw new oe.Schema("Primary key cannot be multi-valued");a.forEach(function(c){if(c.auto)throw new oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new oe.Schema("Index must have a name and cannot be an empty string")}),t[n]=Tr(n,u,a)}})},Jn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?E(this._cfg.storesSource,n):n;var n=t._versions,a={},u={};return n.forEach(function(c){E(a,c._cfg.storesSource),u=c._cfg.dbschema={},c._parseStoresSpec(a,u)}),t._dbSchema=u,Or(t,[t._allTables,t,t.Transaction.prototype]),Vn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],h(u),u),t._storeNames=h(u),this},Jn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Tt(this._cfg.contentUpgrade||be,e),this},Jn);function Jn(){}function Pr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Rt(Bn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Ar(e){return e&&typeof e.databases=="function"}function Mr(e){return Bt(function(){return re.letThrough=!0,e()})}function jr(e){return!("from"in e)}var ht=function(e,t){if(!this){var n=new ht;return e&&"d"in e&&E(n,e),n}E(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Sn(e,t,n){var a=Pe(t,n);if(!isNaN(a)){if(0<a)throw RangeError();if(jr(e))return E(e,{from:t,to:n,d:1});var u=e.l,a=e.r;if(Pe(n,e.from)<0)return u?Sn(u,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ko(e);if(0<Pe(t,e.to))return a?Sn(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ko(e);Pe(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),0<Pe(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,u&&!e.l&&Tn(e,u),a&&n&&Tn(e,a)}}function Tn(e,t){jr(t)||function n(a,m){var c=m.from,f=m.to,v=m.l,m=m.r;Sn(a,c,f),v&&n(a,v),m&&n(a,m)}(e,t)}function jo(e,t){var n=Xn(t),a=n.next();if(a.done)return!1;for(var u=a.value,c=Xn(e),f=c.next(u.from),v=f.value;!a.done&&!f.done;){if(Pe(v.from,u.to)<=0&&0<=Pe(v.to,u.from))return!0;Pe(u.from,v.from)<0?u=(a=n.next(v.from)).value:v=(f=c.next(u.from)).value}return!1}function Xn(e){var t=jr(e)?null:{s:0,n:e};return{next:function(n){for(var a=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,a)for(;t.n.l&&Pe(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!a||Pe(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ko(e){var t,n,a=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),u=1<a?"r":a<-1?"l":"";u&&(t=u=="r"?"l":"r",n=s({},e),a=e[u],e.from=a.from,e.to=a.to,e[u]=a[u],n[u]=a[t],(e[t]=n).d=Fo(n)),e.d=Fo(e)}function Fo(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function Zn(e,t){return h(t).forEach(function(n){e[n]?Tn(e[n],t[n]):e[n]=function a(u){var c,f,v={};for(c in u)q(u,c)&&(f=u[c],v[c]=!f||typeof f!="object"||me.has(f.constructor)?f:a(f));return v}(t[n])}),e}function Kr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&jo(t[n],e[n])})}S(ht.prototype,((Ot={add:function(e){return Tn(this,e),this},addKey:function(e){return Sn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Sn(t,n,n)}),this},hasKey:function(e){var t=Xn(this).next(e).value;return t&&Pe(t.from,e)<=0&&0<=Pe(t.to,e)}})[tt]=function(){return Xn(this)},Ot));var en={},Fr={},qr=!1;function $n(e){Zn(Fr,e),qr||(qr=!0,setTimeout(function(){qr=!1,Rr(Fr,!(Fr={}))},0))}function Rr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var a=0,u=Object.values(en);a<u.length;a++)qo(f=u[a],e,n,t);else for(var c in e){var f,v=/^idb\:\/\/(.*)\/(.*)\//.exec(c);v&&(c=v[1],v=v[2],(f=en["idb://".concat(c,"/").concat(v)])&&qo(f,e,n,t))}n.forEach(function(m){return m()})}function qo(e,t,n,a){for(var u=[],c=0,f=Object.entries(e.queries.query);c<f.length;c++){for(var v=f[c],m=v[0],b=[],x=0,p=v[1];x<p.length;x++){var D=p[x];Kr(t,D.obsSet)?D.subscribers.forEach(function(_){return n.add(_)}):a&&b.push(D)}a&&u.push([m,b])}if(a)for(var y=0,w=u;y<w.length;y++){var k=w[y],m=k[0],b=k[1];e.queries.query[m]=b}}function aa(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?$e(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var a=t.openCanceller,u=Math.round(10*e.verno),c=!1;function f(){if(t.openCanceller!==a)throw new oe.DatabaseClosed("db.open() was cancelled")}function v(){return new ne(function(D,y){if(f(),!n)throw new oe.MissingAPI;var w=e.name,k=t.autoSchema||!u?n.open(w):n.open(w,u);if(!k)throw new oe.MissingAPI;k.onerror=Mt(y),k.onblocked=Ge(e._fireOnBlocked),k.onupgradeneeded=Ge(function(_){var C;x=k.transaction,t.autoSchema&&!e._options.allowEmptyDB?(k.onerror=wn,x.abort(),k.result.close(),(C=n.deleteDatabase(w)).onsuccess=C.onerror=Ge(function(){y(new oe.NoSuchDatabase("Database ".concat(w," doesnt exist")))})):(x.onerror=Mt(y),_=_.oldVersion>Math.pow(2,62)?0:_.oldVersion,p=_<1,e.idbdb=k.result,c&&oa(e,x),ra(e,_/10,x,y))},y),k.onsuccess=Ge(function(){x=null;var _,C,P,M,R,G=e.idbdb=k.result,Z=F(G.objectStoreNames);if(0<Z.length)try{var Q=G.transaction((M=Z).length===1?M[0]:M,"readonly");if(t.autoSchema)C=G,P=Q,(_=e).verno=C.version/10,P=_._dbSchema=Gn(0,C,P),_._storeNames=F(C.objectStoreNames,0),Vn(_,[_._allTables],h(P),P);else if(Qn(e,e._dbSchema,Q),((R=Cr(Gn(0,(R=e).idbdb,Q),R._dbSchema)).add.length||R.change.some(function(J){return J.add.length||J.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),u=G.version+1,c=!0,D(v());Yn(e,Q)}catch{}fn.push(e),G.onversionchange=Ge(function(J){t.vcFired=!0,e.on("versionchange").fire(J)}),G.onclose=Ge(function(J){e.on("close").fire(J)}),p&&(R=e._deps,Q=w,G=R.indexedDB,R=R.IDBKeyRange,Ar(G)||Q===Bn||Pr(G,R).put({name:Q}).catch(be)),D()},y)}).catch(function(D){switch(D==null?void 0:D.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),v();break;case"VersionError":if(0<u)return u=0,v()}return ne.reject(D)})}var m,b=t.dbReadyResolve,x=null,p=!1;return ne.race([a,(typeof navigator>"u"?ne.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(D){function y(){return indexedDB.databases().finally(D)}m=setInterval(y,100),y()}).finally(function(){return clearInterval(m)}):Promise.resolve()).then(v)]).then(function(){return f(),t.onReadyBeingFired=[],ne.resolve(Mr(function(){return e.on.ready.fire(e.vip)})).then(function D(){if(0<t.onReadyBeingFired.length){var y=t.onReadyBeingFired.reduce(Tt,be);return t.onReadyBeingFired=[],ne.resolve(Mr(function(){return y(e.vip)})).then(D)}})}).finally(function(){t.openCanceller===a&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(D){t.dbOpenError=D;try{x&&x.abort()}catch{}return a===t.openCanceller&&e._close(),$e(D)}).finally(function(){t.openComplete=!0,b()}).then(function(){var D;return p&&(D={},e.tables.forEach(function(y){y.schema.indexes.forEach(function(w){w.name&&(D["idb://".concat(e.name,"/").concat(y.name,"/").concat(w.name)]=new ht(-1/0,[[[]]]))}),D["idb://".concat(e.name,"/").concat(y.name,"/")]=D["idb://".concat(e.name,"/").concat(y.name,"/:dels")]=new ht(-1/0,[[[]]])}),Ut(xn).fire(D),Rr(D,!0)),e})}function Nr(e){function t(c){return e.next(c)}var n=u(t),a=u(function(c){return e.throw(c)});function u(c){return function(m){var v=c(m),m=v.value;return v.done?m:m&&typeof m.then=="function"?m.then(n,a):g(m)?Promise.all(m).then(n,a):n(m)}}return u(t)()}function er(e,t,n){for(var a=g(e)?e.slice():[e],u=0;u<n;++u)a.push(t);return a}var sa={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),a=n.schema,u={},c=[];function f(p,D,y){var w=Dn(p),k=u[w]=u[w]||[],_=p==null?0:typeof p=="string"?1:p.length,C=0<D,C=s(s({},y),{name:C?"".concat(w,"(virtual-from:").concat(y.name,")"):y.name,lowLevelIndex:y,isVirtual:C,keyTail:D,keyLength:_,extractKey:Er(p),unique:!C&&y.unique});return k.push(C),C.isPrimaryKey||c.push(C),1<_&&f(_===2?p[0]:p.slice(0,_-1),D+1,y),k.sort(function(P,M){return P.keyTail-M.keyTail}),C}t=f(a.primaryKey.keyPath,0,a.primaryKey),u[":id"]=[t];for(var v=0,m=a.indexes;v<m.length;v++){var b=m[v];f(b.keyPath,0,b)}function x(p){var D,y=p.query.index;return y.isVirtual?s(s({},p),{query:{index:y.lowLevelIndex,range:(D=p.query.range,y=y.keyTail,{type:D.type===1?2:D.type,lower:er(D.lower,D.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:er(D.upper,D.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}):p}return s(s({},n),{schema:s(s({},a),{primaryKey:t,indexes:c,getIndexByKeyPath:function(p){return(p=u[Dn(p)])&&p[0]}}),count:function(p){return n.count(x(p))},query:function(p){return n.query(x(p))},openCursor:function(p){var D=p.query.index,y=D.keyTail,w=D.isVirtual,k=D.keyLength;return w?n.openCursor(x(p)).then(function(C){return C&&_(C)}):n.openCursor(p);function _(C){return Object.create(C,{continue:{value:function(P){P!=null?C.continue(er(P,p.reverse?e.MAX_KEY:e.MIN_KEY,y)):p.unique?C.continue(C.key.slice(0,k).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,y)):C.continue()}},continuePrimaryKey:{value:function(P,M){C.continuePrimaryKey(er(P,e.MAX_KEY,y),M)}},primaryKey:{get:function(){return C.primaryKey}},key:{get:function(){var P=C.key;return k===1?P[0]:P.slice(0,k)}},value:{get:function(){return C.value}}})}}})}})}};function Br(e,t,n,a){return n=n||{},a=a||"",h(e).forEach(function(u){var c,f,v;q(t,u)?(c=e[u],f=t[u],typeof c=="object"&&typeof f=="object"&&c&&f?(v=Ue(c))!==Ue(f)?n[a+u]=t[u]:v==="Object"?Br(c,f,n,a+u+"."):c!==f&&(n[a+u]=t[u]):c!==f&&(n[a+u]=t[u])):n[a+u]=void 0}),h(t).forEach(function(u){q(e,u)||(n[a+u]=t[u])}),n}function Hr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ua={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),a=n.schema.primaryKey;return s(s({},n),{mutate:function(u){var c=re.trans,f=c.table(t).hook,v=f.deleting,m=f.creating,b=f.updating;switch(u.type){case"add":if(m.fire===be)break;return c._promise("readwrite",function(){return x(u)},!0);case"put":if(m.fire===be&&b.fire===be)break;return c._promise("readwrite",function(){return x(u)},!0);case"delete":if(v.fire===be)break;return c._promise("readwrite",function(){return x(u)},!0);case"deleteRange":if(v.fire===be)break;return c._promise("readwrite",function(){return function p(D,y,w){return n.query({trans:D,values:!1,query:{index:a,range:y},limit:w}).then(function(k){var _=k.result;return x({type:"delete",keys:_,trans:D}).then(function(C){return 0<C.numFailures?Promise.reject(C.failures[0]):_.length<w?{failures:[],numFailures:0,lastResult:void 0}:p(D,s(s({},y),{lower:_[_.length-1],lowerOpen:!0}),w)})})}(u.trans,u.range,1e4)},!0)}return n.mutate(u);function x(p){var D,y,w,k=re.trans,_=p.keys||Hr(a,p);if(!_)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?s(s({},p),{keys:_}):s({},p)).type!=="delete"&&(p.values=l([],p.values)),p.keys&&(p.keys=l([],p.keys)),D=n,w=_,((y=p).type==="add"?Promise.resolve([]):D.getMany({trans:y.trans,keys:w,cache:"immutable"})).then(function(C){var P=_.map(function(M,R){var G,Z,Q,J=C[R],te={onerror:null,onsuccess:null};return p.type==="delete"?v.fire.call(te,M,J,k):p.type==="add"||J===void 0?(G=m.fire.call(te,M,p.values[R],k),M==null&&G!=null&&(p.keys[R]=M=G,a.outbound||B(p.values[R],a.keyPath,M))):(G=Br(J,p.values[R]),(Z=b.fire.call(te,G,M,J,k))&&(Q=p.values[R],Object.keys(Z).forEach(function(X){q(Q,X)?Q[X]=Z[X]:B(Q,X,Z[X])}))),te});return n.mutate(p).then(function(M){for(var R=M.failures,G=M.results,Z=M.numFailures,M=M.lastResult,Q=0;Q<_.length;++Q){var J=(G||_)[Q],te=P[Q];J==null?te.onerror&&te.onerror(R[Q]):te.onsuccess&&te.onsuccess(p.type==="put"&&C[Q]?p.values[Q]:J)}return{failures:R,results:G,numFailures:Z,lastResult:M}}).catch(function(M){return P.forEach(function(R){return R.onerror&&R.onerror(M)}),Promise.reject(M)})})}}})}})}};function Ro(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var a=[],u=0,c=0;u<t.keys.length&&c<e.length;++u)Pe(t.keys[u],e[c])===0&&(a.push(n?je(t.values[u]):t.values[u]),++c);return a.length===e.length?a:null}catch{return null}}var la={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return s(s({},n),{getMany:function(a){if(!a.cache)return n.getMany(a);var u=Ro(a.keys,a.trans._cache,a.cache==="clone");return u?ne.resolve(u):n.getMany(a).then(function(c){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?je(c):c},c})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),n.mutate(a)}})}}}};function No(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Bo(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ca={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new ht(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(a,u,c){if(re.subscr&&u!=="readonly")throw new oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(re.querier));return e.transaction(a,u,c)},table:function(a){var u=e.table(a),c=u.schema,f=c.primaryKey,p=c.indexes,v=f.extractKey,m=f.outbound,b=f.autoIncrement&&p.filter(function(y){return y.compound&&y.keyPath.includes(f.keyPath)}),x=s(s({},u),{mutate:function(y){function w(X){return X="idb://".concat(t,"/").concat(a,"/").concat(X),M[X]||(M[X]=new ht)}var k,_,C,P=y.trans,M=y.mutatedParts||(y.mutatedParts={}),R=w(""),G=w(":dels"),Z=y.type,te=y.type==="deleteRange"?[y.range]:y.type==="delete"?[y.keys]:y.values.length<50?[Hr(f,y).filter(function(X){return X}),y.values]:[],Q=te[0],J=te[1],te=y.trans._cache;return g(Q)?(R.addKeys(Q),(te=Z==="delete"||Q.length===J.length?Ro(Q,te):null)||G.addKeys(Q),(te||J)&&(k=w,_=te,C=J,c.indexes.forEach(function(X){var ae=k(X.name||"");function we(Te){return Te!=null?X.extractKey(Te):null}function Se(Te){return X.multiEntry&&g(Te)?Te.forEach(function(Dt){return ae.addKey(Dt)}):ae.addKey(Te)}(_||C).forEach(function(Te,vt){var ye=_&&we(_[vt]),vt=C&&we(C[vt]);Pe(ye,vt)!==0&&(ye!=null&&Se(ye),vt!=null&&Se(vt))})}))):Q?(J={from:(J=Q.lower)!==null&&J!==void 0?J:e.MIN_KEY,to:(J=Q.upper)!==null&&J!==void 0?J:e.MAX_KEY},G.add(J),R.add(J)):(R.add(n),G.add(n),c.indexes.forEach(function(X){return w(X.name).add(n)})),u.mutate(y).then(function(X){return!Q||y.type!=="add"&&y.type!=="put"||(R.addKeys(X.results),b&&b.forEach(function(ae){for(var we=y.values.map(function(ye){return ae.extractKey(ye)}),Se=ae.keyPath.findIndex(function(ye){return ye===f.keyPath}),Te=0,Dt=X.results.length;Te<Dt;++Te)we[Te][Se]=X.results[Te];w(ae.name).addKeys(we)})),P.mutatedParts=Zn(P.mutatedParts||{},M),X})}}),p=function(w){var k=w.query,w=k.index,k=k.range;return[w,new ht((w=k.lower)!==null&&w!==void 0?w:e.MIN_KEY,(k=k.upper)!==null&&k!==void 0?k:e.MAX_KEY)]},D={get:function(y){return[f,new ht(y.key)]},getMany:function(y){return[f,new ht().addKeys(y.keys)]},count:p,query:p,openCursor:p};return h(D).forEach(function(y){x[y]=function(w){var k=re.subscr,_=!!k,C=No(re,u)&&Bo(y,w)?w.obsSet={}:k;if(_){var P=function(J){return J="idb://".concat(t,"/").concat(a,"/").concat(J),C[J]||(C[J]=new ht)},M=P(""),R=P(":dels"),k=D[y](w),_=k[0],k=k[1];if((y==="query"&&_.isPrimaryKey&&!w.values?R:P(_.name||"")).add(k),!_.isPrimaryKey){if(y!=="count"){var G=y==="query"&&m&&w.values&&u.query(s(s({},w),{values:!1}));return u[y].apply(this,arguments).then(function(J){if(y==="query"){if(m&&w.values)return G.then(function(we){return we=we.result,M.addKeys(we),J});var te=w.values?J.result.map(v):J.result;(w.values?M:R).addKeys(te)}else if(y==="openCursor"){var X=J,ae=w.values;return X&&Object.create(X,{key:{get:function(){return R.addKey(X.primaryKey),X.key}},primaryKey:{get:function(){var we=X.primaryKey;return R.addKey(we),we}},value:{get:function(){return ae&&M.addKey(X.primaryKey),X.value}}})}return J})}R.add(n)}}return u[y].apply(this,arguments)}}),x}})}};function Ho(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var a=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===a?null:(t=s({},t),g(t.keys)&&(t.keys=t.keys.filter(function(u,c){return!(c in n.failures)})),"values"in t&&g(t.values)&&(t.values=t.values.filter(function(u,c){return!(c in n.failures)})),t)}function zr(e,t){return n=e,((a=t).lower===void 0||(a.lowerOpen?0<Pe(n,a.lower):0<=Pe(n,a.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?Pe(e,t.upper)<0:Pe(e,t.upper)<=0));var n,a}function zo(e,t,D,a,u,c){if(!D||D.length===0)return e;var f=t.query.index,v=f.multiEntry,m=t.query.range,b=a.schema.primaryKey.extractKey,x=f.extractKey,p=(f.lowLevelIndex||f).extractKey,D=D.reduce(function(y,w){var k=y,_=[];if(w.type==="add"||w.type==="put")for(var C=new ht,P=w.values.length-1;0<=P;--P){var M,R=w.values[P],G=b(R);C.hasKey(G)||(M=x(R),(v&&g(M)?M.some(function(X){return zr(X,m)}):zr(M,m))&&(C.addKey(G),_.push(R)))}switch(w.type){case"add":var Z=new ht().addKeys(t.values?y.map(function(ae){return b(ae)}):y),k=y.concat(t.values?_.filter(function(ae){return ae=b(ae),!Z.hasKey(ae)&&(Z.addKey(ae),!0)}):_.map(function(ae){return b(ae)}).filter(function(ae){return!Z.hasKey(ae)&&(Z.addKey(ae),!0)}));break;case"put":var Q=new ht().addKeys(w.values.map(function(ae){return b(ae)}));k=y.filter(function(ae){return!Q.hasKey(t.values?b(ae):ae)}).concat(t.values?_:_.map(function(ae){return b(ae)}));break;case"delete":var J=new ht().addKeys(w.keys);k=y.filter(function(ae){return!J.hasKey(t.values?b(ae):ae)});break;case"deleteRange":var te=w.range;k=y.filter(function(ae){return!zr(b(ae),te)})}return k},e);return D===e?e:(D.sort(function(y,w){return Pe(p(y),p(w))||Pe(b(y),b(w))}),t.limit&&t.limit<1/0&&(D.length>t.limit?D.length=t.limit:e.length===t.limit&&D.length<t.limit&&(u.dirty=!0)),c?Object.freeze(D):D)}function Lo(e,t){return Pe(e.lower,t.lower)===0&&Pe(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function fa(e,t){return function(n,a,u,c){if(n===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=Pe(n,a))===0){if(u&&c)return 0;if(u)return 1;if(c)return-1}return a}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,a,u,c){if(n===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=Pe(n,a))===0){if(u&&c)return 0;if(u)return-1;if(c)return 1}return a}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function da(e,t,n,a){e.subscribers.add(n),a.addEventListener("abort",function(){var u,c;e.subscribers.delete(n),e.subscribers.size===0&&(u=e,c=t,setTimeout(function(){u.subscribers.size===0&&xe(c,u)},3e3))})}var ha={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(n,a,u){var c,f,v=e.transaction(n,a,u);return a==="readwrite"&&(f=(c=new AbortController).signal,u=function(m){return function(){if(c.abort(),a==="readwrite"){for(var b=new Set,x=0,p=n;x<p.length;x++){var D=p[x],y=en["idb://".concat(t,"/").concat(D)];if(y){var w=e.table(D),k=y.optimisticOps.filter(function(ae){return ae.trans===v});if(v._explicit&&m&&v.mutatedParts)for(var _=0,C=Object.values(y.queries.query);_<C.length;_++)for(var P=0,M=(Z=C[_]).slice();P<M.length;P++)Kr((Q=M[P]).obsSet,v.mutatedParts)&&(xe(Z,Q),Q.subscribers.forEach(function(ae){return b.add(ae)}));else if(0<k.length){y.optimisticOps=y.optimisticOps.filter(function(ae){return ae.trans!==v});for(var R=0,G=Object.values(y.queries.query);R<G.length;R++)for(var Z,Q,J,te=0,X=(Z=G[R]).slice();te<X.length;te++)(Q=X[te]).res!=null&&v.mutatedParts&&(m&&!Q.dirty?(J=Object.isFrozen(Q.res),J=zo(Q.res,Q.req,k,w,Q,J),Q.dirty?(xe(Z,Q),Q.subscribers.forEach(function(ae){return b.add(ae)})):J!==Q.res&&(Q.res=J,Q.promise=ne.resolve({result:J}))):(Q.dirty&&xe(Z,Q),Q.subscribers.forEach(function(ae){return b.add(ae)})))}}}b.forEach(function(ae){return ae()})}}},v.addEventListener("abort",u(!1),{signal:f}),v.addEventListener("error",u(!1),{signal:f}),v.addEventListener("complete",u(!0),{signal:f})),v},table:function(n){var a=e.table(n),u=a.schema.primaryKey;return s(s({},a),{mutate:function(c){var f=re.trans;if(u.outbound||f.db._options.cache==="disabled"||f.explicit||f.idbtrans.mode!=="readwrite")return a.mutate(c);var v=en["idb://".concat(t,"/").concat(n)];return v?(f=a.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||Hr(u,c).some(function(m){return m==null}))?(v.optimisticOps.push(c),c.mutatedParts&&$n(c.mutatedParts),f.then(function(m){0<m.numFailures&&(xe(v.optimisticOps,c),(m=Ho(0,c,m))&&v.optimisticOps.push(m),c.mutatedParts&&$n(c.mutatedParts))}),f.catch(function(){xe(v.optimisticOps,c),c.mutatedParts&&$n(c.mutatedParts)})):f.then(function(m){var b=Ho(0,s(s({},c),{values:c.values.map(function(x,p){var D;return m.failures[p]?x:(x=(D=u.keyPath)!==null&&D!==void 0&&D.includes(".")?je(x):s({},x),B(x,u.keyPath,m.results[p]),x)})}),m);v.optimisticOps.push(b),queueMicrotask(function(){return c.mutatedParts&&$n(c.mutatedParts)})}),f):a.mutate(c)},query:function(c){if(!No(re,a)||!Bo("query",c))return a.query(c);var f=((b=re.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",p=re,v=p.requery,m=p.signal,b=function(w,k,_,C){var P=en["idb://".concat(w,"/").concat(k)];if(!P)return[];if(!(k=P.queries[_]))return[null,!1,P,null];var M=k[(C.query?C.query.index.name:null)||""];if(!M)return[null,!1,P,null];switch(_){case"query":var R=M.find(function(G){return G.req.limit===C.limit&&G.req.values===C.values&&Lo(G.req.query.range,C.query.range)});return R?[R,!0,P,M]:[M.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=C.limit&&(!C.values||G.req.values)&&fa(G.req.query.range,C.query.range)}),!1,P,M];case"count":return R=M.find(function(G){return Lo(G.req.query.range,C.query.range)}),[R,!!R,P,M]}}(t,n,"query",c),x=b[0],p=b[1],D=b[2],y=b[3];return x&&p?x.obsSet=c.obsSet:(p=a.query(c).then(function(w){var k=w.result;if(x&&(x.res=k),f){for(var _=0,C=k.length;_<C;++_)Object.freeze(k[_]);Object.freeze(k)}else w.result=je(k);return w}).catch(function(w){return y&&x&&xe(y,x),Promise.reject(w)}),x={obsSet:c.obsSet,promise:p,subscribers:new Set,type:"query",req:c,dirty:!1},y?y.push(x):(y=[x],(D=D||(en["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=y)),da(x,y,v,m),x.promise.then(function(w){return{result:zo(w.result,c,D==null?void 0:D.optimisticOps,a,x,f)}})}})}})}};function tr(e,t){return new Proxy(e,{get:function(n,a,u){return a==="db"?t:Reflect.get(n,a,u)}})}var Rt=(et.prototype.version=function(e){if(isNaN(e)||e<.1)throw new oe.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(a){return a._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(na),n.stores({}),this._state.autoSchema=!1,n)},et.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||re.letThrough||this._vip)?e():new ne(function(n,a){if(t._state.openComplete)return a(new oe.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void a(new oe.DatabaseClosed);t.open().catch(be)}t._state.dbReadyPromise.then(n,a)}).then(e)},et.prototype.use=function(e){var t=e.stack,n=e.create,a=e.level,u=e.name;return u&&this.unuse({stack:t,name:u}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:a??10,name:u}),e.sort(function(c,f){return c.level-f.level}),this},et.prototype.unuse=function(e){var t=e.stack,n=e.name,a=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(u){return a?u.create!==a:!!n&&u.name!==n})),this},et.prototype.open=function(){var e=this;return Xt(He,function(){return aa(e)})},et.prototype._close=function(){var e=this._state,t=fn.indexOf(this);if(0<=t&&fn.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ne(function(n){e.dbReadyResolve=n}),e.openCanceller=new ne(function(n,a){e.cancelOpen=a}))},et.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new oe.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new oe.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},et.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new ne(function(u,c){function f(){t.close(e);var v=t._deps.indexedDB.deleteDatabase(t.name);v.onsuccess=Ge(function(){var m,b,x;m=t._deps,b=t.name,x=m.indexedDB,m=m.IDBKeyRange,Ar(x)||b===Bn||Pr(x,m).delete(b).catch(be),u()}),v.onerror=Mt(c),v.onblocked=t._fireOnBlocked}if(n)throw new oe.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(f):f()})},et.prototype.backendDB=function(){return this.idbdb},et.prototype.isOpen=function(){return this.idbdb!==null},et.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},et.prototype.hasFailed=function(){return this._state.dbOpenError!==null},et.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(et.prototype,"tables",{get:function(){var e=this;return h(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),et.prototype.transaction=function(){var e=(function(t,n,a){var u=arguments.length;if(u<2)throw new oe.InvalidArgument("Too few arguments");for(var c=new Array(u-1);--u;)c[u-1]=arguments[u];return a=c.pop(),[t,se(c),a]}).apply(this,arguments);return this._transaction.apply(this,e)},et.prototype._transaction=function(e,t,n){var a=this,u=re.trans;u&&u.db===this&&e.indexOf("!")===-1||(u=null);var c,f,v=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(f=t.map(function(b){if(b=b instanceof a.Table?b.name:b,typeof b!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return b}),e=="r"||e===br)c=br;else{if(e!="rw"&&e!=_r)throw new oe.InvalidArgument("Invalid transaction mode: "+e);c=_r}if(u){if(u.mode===br&&c===_r){if(!v)throw new oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&f.forEach(function(b){if(u&&u.storeNames.indexOf(b)===-1){if(!v)throw new oe.SubTransaction("Table "+b+" not included in parent transaction.");u=null}}),v&&u&&!u.active&&(u=null)}}catch(b){return u?u._promise(null,function(x,p){p(b)}):$e(b)}var m=(function b(x,p,D,y,w){return ne.resolve().then(function(){var k=re.transless||re,_=x._createTransaction(p,D,x._dbSchema,y);if(_.explicit=!0,k={trans:_,transless:k},y)_.idbtrans=y.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,x._state.PR1398_maxLoop=3}catch(M){return M.name===Oe.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return b(x,p,D,null,w)})):$e(M)}var C,P=ee(w);return P&&cn(),k=ne.follow(function(){var M;(C=w.call(_,_))&&(P?(M=Ht.bind(null,null),C.then(M,M)):typeof C.next=="function"&&typeof C.throw=="function"&&(C=Nr(C)))},k),(C&&typeof C.then=="function"?ne.resolve(C).then(function(M){return _.active?M:$e(new oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):k.then(function(){return C})).then(function(M){return y&&_._resolve(),_._completion.then(function(){return M})}).catch(function(M){return _._reject(M),$e(M)})})}).bind(null,this,c,f,u,n);return u?u._promise(c,m,"lock"):re.trans?Xt(re.transless,function(){return a._whenReady(m)}):this._whenReady(m)},et.prototype.table=function(e){if(!q(this._allTables,e))throw new oe.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},et);function et(e,t){var n=this;this._middlewares={},this.verno=0;var a=et.dependencies;this._options=t=s({addons:et.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},a=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u,c,f,v,m,b={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:be,dbReadyPromise:null,cancelOpen:be,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};b.dbReadyPromise=new ne(function(p){b.dbReadyResolve=p}),b.openCanceller=new ne(function(p,D){b.cancelOpen=D}),this._state=b,this.name=e,this.on=yn(this,"populate","blocked","versionchange","close",{ready:[Tt,be]}),this.on.ready.subscribe=A(this.on.ready.subscribe,function(p){return function(D,y){et.vip(function(){var w,k=n._state;k.openComplete?(k.dbOpenError||ne.resolve().then(D),y&&p(D)):k.onReadyBeingFired?(k.onReadyBeingFired.push(D),y&&p(D)):(p(D),w=n,y||p(function _(){w.on.ready.unsubscribe(D),w.on.ready.unsubscribe(_)}))})}}),this.Collection=(u=this,bn(Qi.prototype,function(C,_){this.db=u;var y=_o,w=null;if(_)try{y=_()}catch(P){w=P}var k=C._ctx,_=k.table,C=_.hook.reading.fire;this._ctx={table:_,index:k.index,isPrimKey:!k.index||_.schema.primKey.keyPath&&k.index===_.schema.primKey.name,range:y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:w,or:k.or,valueMapper:C!==ct?C:null}})),this.Table=(c=this,bn(Do.prototype,function(p,D,y){this.db=c,this._tx=y,this.name=p,this.schema=D,this.hook=c._allTables[p]?c._allTables[p].hook:yn(null,{creating:[St,be],reading:[ft,ct],updating:[yt,be],deleting:[dt,be]})})),this.Transaction=(f=this,bn(Zi.prototype,function(p,D,y,w,k){var _=this;this.db=f,this.mode=p,this.storeNames=D,this.schema=y,this.chromeTransactionDurability=w,this.idbtrans=null,this.on=yn(this,"complete","error","abort"),this.parent=k||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ne(function(C,P){_._resolve=C,_._reject=P}),this._completion.then(function(){_.active=!1,_.on.complete.fire()},function(C){var P=_.active;return _.active=!1,_.on.error.fire(C),_.parent?_.parent._reject(C):P&&_.idbtrans&&_.idbtrans.abort(),$e(C)})})),this.Version=(v=this,bn(ia.prototype,function(p){this.db=v,this._cfg={version:p,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(m=this,bn(Co.prototype,function(p,D,y){if(this.db=m,this._ctx={table:p,index:D===":id"?null:D,or:y},this._cmp=this._ascending=Pe,this._descending=function(w,k){return Pe(k,w)},this._max=function(w,k){return 0<Pe(w,k)?w:k},this._min=function(w,k){return Pe(w,k)<0?w:k},this._IDBKeyRange=m._deps.IDBKeyRange,!this._IDBKeyRange)throw new oe.MissingAPI})),this.on("versionchange",function(p){0<p.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=kn(t.IDBKeyRange),this._createTransaction=function(p,D,y,w){return new n.Transaction(p,D,y,n._options.chromeTransactionDurability,w)},this._fireOnBlocked=function(p){n.on("blocked").fire(p),fn.filter(function(D){return D.name===n.name&&D!==n&&!D._state.vcFired}).map(function(D){return D.on("versionchange").fire(p)})},this.use(la),this.use(ha),this.use(ca),this.use(sa),this.use(ua);var x=new Proxy(this,{get:function(p,D,y){if(D==="_vip")return!0;if(D==="table")return function(k){return tr(n.table(k),x)};var w=Reflect.get(p,D,y);return w instanceof Do?tr(w,x):D==="tables"?w.map(function(k){return tr(k,x)}):D==="_createTransaction"?function(){return tr(w.apply(this,arguments),x)}:w}});this.vip=x,a.forEach(function(p){return p(n)})}var nr,Ot=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",va=(Lr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Lr.prototype[Ot]=function(){return this},Lr);function Lr(e){this._subscribe=e}try{nr={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch{nr={indexedDB:null,IDBKeyRange:null}}function Uo(e){var t,n=!1,a=new va(function(u){var c=ee(e),f,v=!1,m={},b={},x={get closed(){return v},unsubscribe:function(){v||(v=!0,f&&f.abort(),p&&Ut.storagemutated.unsubscribe(y))}};u.start&&u.start(x);var p=!1,D=function(){return yr(w)},y=function(k){Zn(m,k),Kr(b,m)&&D()},w=function(){var k,_,C;!v&&nr.indexedDB&&(m={},k={},f&&f.abort(),f=new AbortController,C=function(P){var M=un();try{c&&cn();var R=Bt(e,P);return R=c?R.finally(Ht):R}finally{M&&ln()}}(_={subscr:k,signal:f.signal,requery:D,querier:e,trans:null}),Promise.resolve(C).then(function(P){n=!0,t=P,v||_.signal.aborted||(m={},function(M){for(var R in M)if(q(M,R))return;return 1}(b=k)||p||(Ut(xn,y),p=!0),yr(function(){return!v&&u.next&&u.next(P)}))},function(P){n=!1,["DatabaseClosedError","AbortError"].includes(P==null?void 0:P.name)||v||yr(function(){v||u.error&&u.error(P)})}))};return setTimeout(D,0),x});return a.hasValue=function(){return n},a.getValue=function(){return t},a}var tn=Rt;function Ur(e){var t=Yt;try{Yt=!0,Ut.storagemutated.fire(e),Rr(e,!0)}finally{Yt=t}}S(tn,s(s({},Ze),{delete:function(e){return new tn(e,{addons:[]}).delete()},exists:function(e){return new tn(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=tn.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Ar(n)?Promise.resolve(n.databases()).then(function(a){return a.map(function(u){return u.name}).filter(function(u){return u!==Bn})}):Pr(n,t).toCollection().primaryKeys()).then(e)}catch{return $e(new oe.MissingAPI)}var t,n},defineClass:function(){return function(e){E(this,e)}},ignoreTransaction:function(e){return re.trans?Xt(re.transless,e):e()},vip:Mr,async:function(e){return function(){try{var t=Nr(e.apply(this,arguments));return t&&typeof t.then=="function"?t:ne.resolve(t)}catch(n){return $e(n)}}},spawn:function(e,t,n){try{var a=Nr(e.apply(n,t||[]));return a&&typeof a.then=="function"?a:ne.resolve(a)}catch(u){return $e(u)}},currentTransaction:{get:function(){return re.trans||null}},waitFor:function(e,t){return t=ne.resolve(typeof e=="function"?tn.ignoreTransaction(e):e).timeout(t||6e4),re.trans?re.trans.waitFor(t):t},Promise:ne,debug:{get:function(){return Ye},set:function(e){Pt(e)}},derive:z,extend:E,props:S,override:A,Events:yn,on:Ut,liveQuery:Uo,extendObservabilitySet:Zn,getByKeyPath:V,setByKeyPath:B,delByKeyPath:function(e,t){typeof t=="string"?B(e,t,void 0):"length"in t&&[].map.call(t,function(n){B(e,n,void 0)})},shallowClone:le,deepClone:je,getObjectDiff:Br,cmp:Pe,asap:L,minKey:-1/0,addons:[],connections:fn,errnames:Oe,dependencies:nr,cache:en,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),tn.maxKey=kn(tn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ut(xn,function(e){Yt||(e=new CustomEvent(Dr,{detail:e}),Yt=!0,dispatchEvent(e),Yt=!1)}),addEventListener(Dr,function(e){e=e.detail,Yt||Ur(e)}));var vn,Yt=!1,Yo=function(){};return typeof BroadcastChannel<"u"&&((Yo=function(){(vn=new BroadcastChannel(Dr)).onmessage=function(e){return e.data&&Ur(e.data)}})(),typeof vn.unref=="function"&&vn.unref(),Ut(xn,function(e){Yt||vn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Rt.disableBfCache&&e.persisted){Ye&&console.debug("Dexie: handling persisted pagehide"),vn!=null&&vn.close();for(var t=0,n=fn;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Rt.disableBfCache&&e.persisted&&(Ye&&console.debug("Dexie: handling persisted pageshow"),Yo(),Ur({all:new ht(-1/0,[[]])}))})),ne.rejectionMapper=function(e,t){return!e||e instanceof ce||e instanceof TypeError||e instanceof SyntaxError||!e.name||!rt[e.name]?e:(t=new rt[e.name](t||e.message,e),"stack"in e&&H(t,"stack",{get:function(){return this.inner.stack}}),t)},Pt(Ye),s(Rt,Object.freeze({__proto__:null,Dexie:Rt,liveQuery:Uo,Entity:wo,cmp:Pe,PropModification:_n,replacePrefix:function(e,t){return new _n({replacePrefix:[e,t]})},add:function(e){return new _n({add:e})},remove:function(e){return new _n({remove:e})},default:Rt,RangeSet:ht,mergeRanges:Tn,rangesOverlap:jo}),{default:Rt}),Rt})}(ar)),ar.exports}var vs=hs();const ro=Pi(vs),ri=Symbol.for("Dexie"),fr=globalThis[ri]||(globalThis[ri]=ro);if(ro.semVer!==fr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ro.semVer} and ${fr.semVer}`);const{liveQuery:ic,mergeRanges:ac,rangesOverlap:sc,RangeSet:uc,cmp:lc,Entity:cc,PropModification:fc,replacePrefix:dc,add:hc,remove:vc}=fr;class ps{constructor(){this._db=new fr("FastingHours"),this._db.version(20).stores({history:"id, started",hunger:"id, created",water:"id, created"})}browseHistory(){return this._db.history.toArray()}browseHistoryByEnd(){return this._db.history.toArray().then(r=>r.filter(s=>s.ended===null)[0])}readHistory(r){return this._db.history.get({id:r})}editHistory(r){const i=Gr(r);return i.updated=new Date,this._db.history.put(i).then(()=>this._db.history.get({id:r.id}))}addHistory(){const r={id:crypto.randomUUID(),type:"history",created:new Date,updated:new Date,started:new Date,ended:null,notes:null};return this._db.history.add(r).then(()=>this._db.history.get({id:r.id}))}deleteHistory(r){return this._db.history.delete(r)}browseHunger(r=!1){return this._db.hunger.toArray().then(i=>r?(i.sort((s,l)=>s.created.getTime()<l.created.getTime()?1:s.created.getTime()>l.created.getTime()?-1:0),i.length===0?null:i[0]):i)}readHunger(r){return this._db.hunger.get({id:r})}editHunger(r){const i=Gr(r);return i.updated=new Date,this._db.hunger.put(i).then(()=>this._db.hunger.get({id:r.id}))}addHunger(r=5){const i={id:crypto.randomUUID(),type:"hunger",created:new Date,updated:new Date,level:r};return this._db.hunger.add(i).then(()=>this._db.hunger.get({id:i.id}))}deleteHunger(r){return this._db.hunger.delete(r)}browseWater(r=!1){return this._db.water.toArray().then(i=>{if(r){const s=new Date;s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);const l=new Date(s.getTime());return l.setDate(l.getDate()+1),i.filter(d=>d.created.getTime()>s.getTime()&&d.created.getTime()<l.getTime())}else return i})}readWater(r){return this._db.water.get({id:r})}editWater(r){const i=Gr(r);return i.updated=new Date,this._db.water.put(i).then(()=>this._db.water.get({id:r.id}))}addWater(r){const i={id:crypto.randomUUID(),type:"water",created:new Date,updated:new Date,volume:r};return crypto.randomUUID(),this._db.water.add(i).then(()=>this._db.water.get({id:i.id}))}deleteWater(r){return this._db.water.delete(r)}}var Xr={exports:{}},oi;function gs(){return oi||(oi=1,function(o,r){(function(){var i=Math.PI,s=Math.sin,l=Math.cos,d=Math.tan,h=Math.asin,g=Math.atan2,E=Math.acos,O=i/180,j=1e3*60*60*24,q=2440588,S=2451545;function U(ee){return ee.valueOf()/j-.5+q}function H(ee){return new Date((ee+.5-q)*j)}function z(ee){return U(ee)-S}var W=O*23.4397;function K(ee,ue){return g(s(ee)*l(W)-d(ue)*s(W),l(ee))}function F(ee,ue){return h(s(ue)*l(W)+l(ue)*s(W)*s(ee))}function A(ee,ue,ce){return g(s(ee),l(ee)*s(ue)-d(ce)*l(ue))}function T(ee,ue,ce){return h(s(ue)*s(ce)+l(ue)*l(ce)*l(ee))}function L(ee,ue){return O*(280.16+360.9856235*ee)-ue}function V(ee){return ee<0&&(ee=0),2967e-7/Math.tan(ee+.00312536/(ee+.08901179))}function B(ee){return O*(357.5291+.98560028*ee)}function le(ee){var ue=O*(1.9148*s(ee)+.02*s(2*ee)+3e-4*s(3*ee)),ce=O*102.9372;return ee+ue+ce+i}function pe(ee){var ue=B(ee),ce=le(ue);return{dec:F(ce,0),ra:K(ce,0)}}var se={};se.getPosition=function(ee,ue,ce){var Ke=O*-ce,De=O*ue,Me=z(ee),Oe=pe(Me),Ve=L(Me,Ke)-Oe.ra;return{azimuth:A(Ve,De,Oe.dec),altitude:T(Ve,De,Oe.dec)}};var me=se.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];se.addTime=function(ee,ue,ce){me.push([ee,ue,ce])};var Ie=9e-4;function je(ee,ue){return Math.round(ee-Ie-ue/(2*i))}function Le(ee,ue,ce){return Ie+(ee+ue)/(2*i)+ce}function Ue(ee,ue,ce){return S+ee+.0053*s(ue)-.0069*s(2*ce)}function tt(ee,ue,ce){return E((s(ee)-s(ue)*s(ce))/(l(ue)*l(ce)))}function Ae(ee){return-2.076*Math.sqrt(ee)/60}function xe(ee,ue,ce,Ke,De,Me,Oe){var Ve=tt(ee,ce,Ke),oe=Le(Ve,ue,De);return Ue(oe,Me,Oe)}se.getTimes=function(ee,ue,ce,Ke){Ke=Ke||0;var De=O*-ce,Me=O*ue,Oe=Ae(Ke),Ve=z(ee),oe=je(Ve,De),rt=Le(0,De,oe),Ze=B(rt),be=le(Ze),ct=F(be,0),ft=Ue(rt,Ze,be),ot,St,dt,yt,wt,Tt,Ye={solarNoon:H(ft),nadir:H(ft-.5)};for(ot=0,St=me.length;ot<St;ot+=1)dt=me[ot],yt=(dt[0]+Oe)*O,wt=xe(yt,De,Me,ct,oe,Ze,be),Tt=ft-(wt-ft),Ye[dt[1]]=H(Tt),Ye[dt[2]]=H(wt);return Ye};function Qe(ee){var ue=O*(218.316+13.176396*ee),ce=O*(134.963+13.064993*ee),Ke=O*(93.272+13.22935*ee),De=ue+O*6.289*s(ce),Me=O*5.128*s(Ke),Oe=385001-20905*l(ce);return{ra:K(De,Me),dec:F(De,Me),dist:Oe}}se.getMoonPosition=function(ee,ue,ce){var Ke=O*-ce,De=O*ue,Me=z(ee),Oe=Qe(Me),Ve=L(Me,Ke)-Oe.ra,oe=T(Ve,De,Oe.dec),rt=g(s(Ve),d(De)*l(Oe.dec)-s(Oe.dec)*l(Ve));return oe=oe+V(oe),{azimuth:A(Ve,De,Oe.dec),altitude:oe,distance:Oe.dist,parallacticAngle:rt}},se.getMoonIllumination=function(ee){var ue=z(ee||new Date),ce=pe(ue),Ke=Qe(ue),De=149598e3,Me=E(s(ce.dec)*s(Ke.dec)+l(ce.dec)*l(Ke.dec)*l(ce.ra-Ke.ra)),Oe=g(De*s(Me),Ke.dist-De*l(Me)),Ve=g(l(ce.dec)*s(ce.ra-Ke.ra),s(ce.dec)*l(Ke.dec)-l(ce.dec)*s(Ke.dec)*l(ce.ra-Ke.ra));return{fraction:(1+l(Oe))/2,phase:.5+.5*Oe*(Ve<0?-1:1)/Math.PI,angle:Ve}};function Be(ee,ue){return new Date(ee.valueOf()+ue*j/24)}se.getMoonTimes=function(ee,ue,ce,Ke){var De=new Date(ee);Ke?De.setUTCHours(0,0,0,0):De.setHours(0,0,0,0);for(var Me=.133*O,Oe=se.getMoonPosition(De,ue,ce).altitude-Me,Ve,oe,rt,Ze,be,ct,ft,ot,St,dt,yt,wt,Tt,Ye=1;Ye<=24&&(Ve=se.getMoonPosition(Be(De,Ye),ue,ce).altitude-Me,oe=se.getMoonPosition(Be(De,Ye+1),ue,ce).altitude-Me,be=(Oe+oe)/2-Ve,ct=(oe-Oe)/2,ft=-ct/(2*be),ot=(be*ft+ct)*ft+Ve,St=ct*ct-4*be*Ve,dt=0,St>=0&&(Tt=Math.sqrt(St)/(Math.abs(be)*2),yt=ft-Tt,wt=ft+Tt,Math.abs(yt)<=1&&dt++,Math.abs(wt)<=1&&dt++,yt<-1&&(yt=wt)),dt===1?Oe<0?rt=Ye+yt:Ze=Ye+yt:dt===2&&(rt=Ye+(ot<0?wt:yt),Ze=Ye+(ot<0?yt:wt)),!(rt&&Ze));Ye+=2)Oe=oe;var Pt={};return rt&&(Pt.rise=Be(De,rt)),Ze&&(Pt.set=Be(De,Ze)),!rt&&!Ze&&(Pt[ot>0?"alwaysUp":"alwaysDown"]=!0),Pt},o.exports=se})()}(Xr)),Xr.exports}var ms=gs();const ys=Pi(ms),Ai=/^[a-z0-9]+(-[a-z0-9]+)*$/,vr=(o,r,i,s="")=>{const l=o.split(":");if(o.slice(0,1)==="@"){if(l.length<2||l.length>3)return null;s=l.shift().slice(1)}if(l.length>3||!l.length)return null;if(l.length>1){const g=l.pop(),E=l.pop(),O={provider:l.length>0?l[0]:s,prefix:E,name:g};return r&&!sr(O)?null:O}const d=l[0],h=d.split("-");if(h.length>1){const g={provider:s,prefix:h.shift(),name:h.join("-")};return r&&!sr(g)?null:g}if(i&&s===""){const g={provider:s,prefix:"",name:d};return r&&!sr(g,i)?null:g}return null},sr=(o,r)=>o?!!((r&&o.prefix===""||o.prefix)&&o.name):!1,Mi=Object.freeze({left:0,top:0,width:16,height:16}),dr=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),pr=Object.freeze({...Mi,...dr}),oo=Object.freeze({...pr,body:"",hidden:!1});function bs(o,r){const i={};!o.hFlip!=!r.hFlip&&(i.hFlip=!0),!o.vFlip!=!r.vFlip&&(i.vFlip=!0);const s=((o.rotate||0)+(r.rotate||0))%4;return s&&(i.rotate=s),i}function ii(o,r){const i=bs(o,r);for(const s in oo)s in dr?s in o&&!(s in i)&&(i[s]=dr[s]):s in r?i[s]=r[s]:s in o&&(i[s]=o[s]);return i}function _s(o,r){const i=o.icons,s=o.aliases||Object.create(null),l=Object.create(null);function d(h){if(i[h])return l[h]=[];if(!(h in l)){l[h]=null;const g=s[h]&&s[h].parent,E=g&&d(g);E&&(l[h]=[g].concat(E))}return l[h]}return Object.keys(i).concat(Object.keys(s)).forEach(d),l}function ws(o,r,i){const s=o.icons,l=o.aliases||Object.create(null);let d={};function h(g){d=ii(s[g]||l[g],d)}return h(r),i.forEach(h),ii(o,d)}function ji(o,r){const i=[];if(typeof o!="object"||typeof o.icons!="object")return i;o.not_found instanceof Array&&o.not_found.forEach(l=>{r(l,null),i.push(l)});const s=_s(o);for(const l in s){const d=s[l];d&&(r(l,ws(o,l,d)),i.push(l))}return i}const xs={provider:"",aliases:{},not_found:{},...Mi};function Zr(o,r){for(const i in r)if(i in o&&typeof o[i]!=typeof r[i])return!1;return!0}function Ki(o){if(typeof o!="object"||o===null)return null;const r=o;if(typeof r.prefix!="string"||!o.icons||typeof o.icons!="object"||!Zr(o,xs))return null;const i=r.icons;for(const l in i){const d=i[l];if(!l||typeof d.body!="string"||!Zr(d,oo))return null}const s=r.aliases||Object.create(null);for(const l in s){const d=s[l],h=d.parent;if(!l||typeof h!="string"||!i[h]&&!s[h]||!Zr(d,oo))return null}return r}const ai=Object.create(null);function ks(o,r){return{provider:o,prefix:r,icons:Object.create(null),missing:new Set}}function mn(o,r){const i=ai[o]||(ai[o]=Object.create(null));return i[r]||(i[r]=ks(o,r))}function Fi(o,r){return Ki(r)?ji(r,(i,s)=>{s?o.icons[i]=s:o.missing.add(i)}):[]}function Ds(o,r,i){try{if(typeof i.body=="string")return o.icons[r]={...i},!0}catch{}return!1}let An=!1;function qi(o){return typeof o=="boolean"&&(An=o),An}function Ss(o){const r=typeof o=="string"?vr(o,!0,An):o;if(r){const i=mn(r.provider,r.prefix),s=r.name;return i.icons[s]||(i.missing.has(s)?null:void 0)}}function Ts(o,r){const i=vr(o,!0,An);if(!i)return!1;const s=mn(i.provider,i.prefix);return r?Ds(s,i.name,r):(s.missing.add(i.name),!0)}function Es(o,r){if(typeof o!="object")return!1;if(typeof r!="string"&&(r=o.provider||""),An&&!r&&!o.prefix){let l=!1;return Ki(o)&&(o.prefix="",ji(o,(d,h)=>{Ts(d,h)&&(l=!0)})),l}const i=o.prefix;if(!sr({prefix:i,name:"a"}))return!1;const s=mn(r,i);return!!Fi(s,o)}const Ri=Object.freeze({width:null,height:null}),Ni=Object.freeze({...Ri,...dr}),Os=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Cs=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function si(o,r,i){if(r===1)return o;if(i=i||100,typeof o=="number")return Math.ceil(o*r*i)/i;if(typeof o!="string")return o;const s=o.split(Os);if(s===null||!s.length)return o;const l=[];let d=s.shift(),h=Cs.test(d);for(;;){if(h){const g=parseFloat(d);isNaN(g)?l.push(d):l.push(Math.ceil(g*r*i)/i)}else l.push(d);if(d=s.shift(),d===void 0)return l.join("");h=!h}}function Is(o,r="defs"){let i="";const s=o.indexOf("<"+r);for(;s>=0;){const l=o.indexOf(">",s),d=o.indexOf("</"+r);if(l===-1||d===-1)break;const h=o.indexOf(">",d);if(h===-1)break;i+=o.slice(l+1,d).trim(),o=o.slice(0,s).trim()+o.slice(h+1)}return{defs:i,content:o}}function Ps(o,r){return o?"<defs>"+o+"</defs>"+r:r}function As(o,r,i){const s=Is(o);return Ps(s.defs,r+s.content+i)}const Ms=o=>o==="unset"||o==="undefined"||o==="none";function js(o,r){const i={...pr,...o},s={...Ni,...r},l={left:i.left,top:i.top,width:i.width,height:i.height};let d=i.body;[i,s].forEach(z=>{const W=[],K=z.hFlip,F=z.vFlip;let A=z.rotate;K?F?A+=2:(W.push("translate("+(l.width+l.left).toString()+" "+(0-l.top).toString()+")"),W.push("scale(-1 1)"),l.top=l.left=0):F&&(W.push("translate("+(0-l.left).toString()+" "+(l.height+l.top).toString()+")"),W.push("scale(1 -1)"),l.top=l.left=0);let T;switch(A<0&&(A-=Math.floor(A/4)*4),A=A%4,A){case 1:T=l.height/2+l.top,W.unshift("rotate(90 "+T.toString()+" "+T.toString()+")");break;case 2:W.unshift("rotate(180 "+(l.width/2+l.left).toString()+" "+(l.height/2+l.top).toString()+")");break;case 3:T=l.width/2+l.left,W.unshift("rotate(-90 "+T.toString()+" "+T.toString()+")");break}A%2===1&&(l.left!==l.top&&(T=l.left,l.left=l.top,l.top=T),l.width!==l.height&&(T=l.width,l.width=l.height,l.height=T)),W.length&&(d=As(d,'<g transform="'+W.join(" ")+'">',"</g>"))});const h=s.width,g=s.height,E=l.width,O=l.height;let j,q;h===null?(q=g===null?"1em":g==="auto"?O:g,j=si(q,E/O)):(j=h==="auto"?E:h,q=g===null?si(j,O/E):g==="auto"?O:g);const S={},U=(z,W)=>{Ms(W)||(S[z]=W.toString())};U("width",j),U("height",q);const H=[l.left,l.top,E,O];return S.viewBox=H.join(" "),{attributes:S,viewBox:H,body:d}}const Ks=/\sid="(\S+)"/g,Fs="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let qs=0;function Rs(o,r=Fs){const i=[];let s;for(;s=Ks.exec(o);)i.push(s[1]);if(!i.length)return o;const l="suffix"+(Math.random()*16777216|Date.now()).toString(16);return i.forEach(d=>{const h=typeof r=="function"?r(d):r+(qs++).toString(),g=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o=o.replace(new RegExp('([#;"])('+g+')([")]|\\.[a-z])',"g"),"$1"+h+l+"$3")}),o=o.replace(new RegExp(l,"g"),""),o}const io=Object.create(null);function Ns(o,r){io[o]=r}function ao(o){return io[o]||io[""]}function vo(o){let r;if(typeof o.resources=="string")r=[o.resources];else if(r=o.resources,!(r instanceof Array)||!r.length)return null;return{resources:r,path:o.path||"/",maxURL:o.maxURL||500,rotate:o.rotate||750,timeout:o.timeout||5e3,random:o.random===!0,index:o.index||0,dataAfterTimeout:o.dataAfterTimeout!==!1}}const po=Object.create(null),Cn=["https://api.simplesvg.com","https://api.unisvg.com"],ur=[];for(;Cn.length>0;)Cn.length===1||Math.random()>.5?ur.push(Cn.shift()):ur.push(Cn.pop());po[""]=vo({resources:["https://api.iconify.design"].concat(ur)});function Bs(o,r){const i=vo(r);return i===null?!1:(po[o]=i,!0)}function go(o){return po[o]}const Hs=()=>{let o;try{if(o=fetch,typeof o=="function")return o}catch{}};let ui=Hs();function zs(o,r){const i=go(o);if(!i)return 0;let s;if(!i.maxURL)s=0;else{let l=0;i.resources.forEach(h=>{l=Math.max(l,h.length)});const d=r+".json?icons=";s=i.maxURL-l-i.path.length-d.length}return s}function Ls(o){return o===404}const Us=(o,r,i)=>{const s=[],l=zs(o,r),d="icons";let h={type:d,provider:o,prefix:r,icons:[]},g=0;return i.forEach((E,O)=>{g+=E.length+1,g>=l&&O>0&&(s.push(h),h={type:d,provider:o,prefix:r,icons:[]},g=E.length),h.icons.push(E)}),s.push(h),s};function Ys(o){if(typeof o=="string"){const r=go(o);if(r)return r.path}return"/"}const Vs=(o,r,i)=>{if(!ui){i("abort",424);return}let s=Ys(r.provider);switch(r.type){case"icons":{const d=r.prefix,g=r.icons.join(","),E=new URLSearchParams({icons:g});s+=d+".json?"+E.toString();break}case"custom":{const d=r.uri;s+=d.slice(0,1)==="/"?d.slice(1):d;break}default:i("abort",400);return}let l=503;ui(o+s).then(d=>{const h=d.status;if(h!==200){setTimeout(()=>{i(Ls(h)?"abort":"next",h)});return}return l=501,d.json()}).then(d=>{if(typeof d!="object"||d===null){setTimeout(()=>{d===404?i("abort",d):i("next",l)});return}setTimeout(()=>{i("success",d)})}).catch(()=>{i("next",l)})},Ws={prepare:Us,send:Vs};function Gs(o){const r={loaded:[],missing:[],pending:[]},i=Object.create(null);o.sort((l,d)=>l.provider!==d.provider?l.provider.localeCompare(d.provider):l.prefix!==d.prefix?l.prefix.localeCompare(d.prefix):l.name.localeCompare(d.name));let s={provider:"",prefix:"",name:""};return o.forEach(l=>{if(s.name===l.name&&s.prefix===l.prefix&&s.provider===l.provider)return;s=l;const d=l.provider,h=l.prefix,g=l.name,E=i[d]||(i[d]=Object.create(null)),O=E[h]||(E[h]=mn(d,h));let j;g in O.icons?j=r.loaded:h===""||O.missing.has(g)?j=r.missing:j=r.pending;const q={provider:d,prefix:h,name:g};j.push(q)}),r}function Bi(o,r){o.forEach(i=>{const s=i.loaderCallbacks;s&&(i.loaderCallbacks=s.filter(l=>l.id!==r))})}function Qs(o){o.pendingCallbacksFlag||(o.pendingCallbacksFlag=!0,setTimeout(()=>{o.pendingCallbacksFlag=!1;const r=o.loaderCallbacks?o.loaderCallbacks.slice(0):[];if(!r.length)return;let i=!1;const s=o.provider,l=o.prefix;r.forEach(d=>{const h=d.icons,g=h.pending.length;h.pending=h.pending.filter(E=>{if(E.prefix!==l)return!0;const O=E.name;if(o.icons[O])h.loaded.push({provider:s,prefix:l,name:O});else if(o.missing.has(O))h.missing.push({provider:s,prefix:l,name:O});else return i=!0,!0;return!1}),h.pending.length!==g&&(i||Bi([o],d.id),d.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),d.abort))})}))}let Js=0;function Xs(o,r,i){const s=Js++,l=Bi.bind(null,i,s);if(!r.pending.length)return l;const d={id:s,icons:r,callback:o,abort:l};return i.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(d)}),l}function Zs(o,r=!0,i=!1){const s=[];return o.forEach(l=>{const d=typeof l=="string"?vr(l,r,i):l;d&&s.push(d)}),s}var $s={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function eu(o,r,i,s){const l=o.resources.length,d=o.random?Math.floor(Math.random()*l):o.index;let h;if(o.random){let V=o.resources.slice(0);for(h=[];V.length>1;){const B=Math.floor(Math.random()*V.length);h.push(V[B]),V=V.slice(0,B).concat(V.slice(B+1))}h=h.concat(V)}else h=o.resources.slice(d).concat(o.resources.slice(0,d));const g=Date.now();let E="pending",O=0,j,q=null,S=[],U=[];typeof s=="function"&&U.push(s);function H(){q&&(clearTimeout(q),q=null)}function z(){E==="pending"&&(E="aborted"),H(),S.forEach(V=>{V.status==="pending"&&(V.status="aborted")}),S=[]}function W(V,B){B&&(U=[]),typeof V=="function"&&U.push(V)}function K(){return{startTime:g,payload:r,status:E,queriesSent:O,queriesPending:S.length,subscribe:W,abort:z}}function F(){E="failed",U.forEach(V=>{V(void 0,j)})}function A(){S.forEach(V=>{V.status==="pending"&&(V.status="aborted")}),S=[]}function T(V,B,le){const pe=B!=="success";switch(S=S.filter(se=>se!==V),E){case"pending":break;case"failed":if(pe||!o.dataAfterTimeout)return;break;default:return}if(B==="abort"){j=le,F();return}if(pe){j=le,S.length||(h.length?L():F());return}if(H(),A(),!o.random){const se=o.resources.indexOf(V.resource);se!==-1&&se!==o.index&&(o.index=se)}E="completed",U.forEach(se=>{se(le)})}function L(){if(E!=="pending")return;H();const V=h.shift();if(V===void 0){if(S.length){q=setTimeout(()=>{H(),E==="pending"&&(A(),F())},o.timeout);return}F();return}const B={status:"pending",resource:V,callback:(le,pe)=>{T(B,le,pe)}};S.push(B),O++,q=setTimeout(L,o.rotate),i(V,r,B.callback)}return setTimeout(L),K}function Hi(o){const r={...$s,...o};let i=[];function s(){i=i.filter(g=>g().status==="pending")}function l(g,E,O){const j=eu(r,g,E,(q,S)=>{s(),O&&O(q,S)});return i.push(j),j}function d(g){return i.find(E=>g(E))||null}return{query:l,find:d,setIndex:g=>{r.index=g},getIndex:()=>r.index,cleanup:s}}function li(){}const $r=Object.create(null);function tu(o){if(!$r[o]){const r=go(o);if(!r)return;const i=Hi(r),s={config:r,redundancy:i};$r[o]=s}return $r[o]}function nu(o,r,i){let s,l;if(typeof o=="string"){const d=ao(o);if(!d)return i(void 0,424),li;l=d.send;const h=tu(o);h&&(s=h.redundancy)}else{const d=vo(o);if(d){s=Hi(d);const h=o.resources?o.resources[0]:"",g=ao(h);g&&(l=g.send)}}return!s||!l?(i(void 0,424),li):s.query(r,l,i)().abort}function ci(){}function ru(o){o.iconsLoaderFlag||(o.iconsLoaderFlag=!0,setTimeout(()=>{o.iconsLoaderFlag=!1,Qs(o)}))}function ou(o){const r=[],i=[];return o.forEach(s=>{(s.match(Ai)?r:i).push(s)}),{valid:r,invalid:i}}function In(o,r,i){function s(){const l=o.pendingIcons;r.forEach(d=>{l&&l.delete(d),o.icons[d]||o.missing.add(d)})}if(i&&typeof i=="object")try{if(!Fi(o,i).length){s();return}}catch(l){console.error(l)}s(),ru(o)}function fi(o,r){o instanceof Promise?o.then(i=>{r(i)}).catch(()=>{r(null)}):r(o)}function iu(o,r){o.iconsToLoad?o.iconsToLoad=o.iconsToLoad.concat(r).sort():o.iconsToLoad=r,o.iconsQueueFlag||(o.iconsQueueFlag=!0,setTimeout(()=>{o.iconsQueueFlag=!1;const{provider:i,prefix:s}=o,l=o.iconsToLoad;if(delete o.iconsToLoad,!l||!l.length)return;const d=o.loadIcon;if(o.loadIcons&&(l.length>1||!d)){fi(o.loadIcons(l,s,i),j=>{In(o,l,j)});return}if(d){l.forEach(j=>{const q=d(j,s,i);fi(q,S=>{const U=S?{prefix:s,icons:{[j]:S}}:null;In(o,[j],U)})});return}const{valid:h,invalid:g}=ou(l);if(g.length&&In(o,g,null),!h.length)return;const E=s.match(Ai)?ao(i):null;if(!E){In(o,h,null);return}E.prepare(i,s,h).forEach(j=>{nu(i,j,q=>{In(o,j.icons,q)})})}))}const au=(o,r)=>{const i=Zs(o,!0,qi()),s=Gs(i);if(!s.pending.length){let E=!0;return r&&setTimeout(()=>{E&&r(s.loaded,s.missing,s.pending,ci)}),()=>{E=!1}}const l=Object.create(null),d=[];let h,g;return s.pending.forEach(E=>{const{provider:O,prefix:j}=E;if(j===g&&O===h)return;h=O,g=j,d.push(mn(O,j));const q=l[O]||(l[O]=Object.create(null));q[j]||(q[j]=[])}),s.pending.forEach(E=>{const{provider:O,prefix:j,name:q}=E,S=mn(O,j),U=S.pendingIcons||(S.pendingIcons=new Set);U.has(q)||(U.add(q),l[O][j].push(q))}),d.forEach(E=>{const O=l[E.provider][E.prefix];O.length&&iu(E,O)}),r?Xs(r,s,d):ci};function su(o,r){const i={...o};for(const s in r){const l=r[s],d=typeof l;s in Ri?(l===null||l&&(d==="string"||d==="number"))&&(i[s]=l):d===typeof i[s]&&(i[s]=s==="rotate"?l%4:l)}return i}const uu=/[\s,]+/;function lu(o,r){r.split(uu).forEach(i=>{switch(i.trim()){case"horizontal":o.hFlip=!0;break;case"vertical":o.vFlip=!0;break}})}function cu(o,r=0){const i=o.replace(/^-?[0-9.]*/,"");function s(l){for(;l<0;)l+=4;return l%4}if(i===""){const l=parseInt(o);return isNaN(l)?0:s(l)}else if(i!==o){let l=0;switch(i){case"%":l=25;break;case"deg":l=90}if(l){let d=parseFloat(o.slice(0,o.length-i.length));return isNaN(d)?0:(d=d/l,d%1===0?s(d):0)}}return r}function fu(o,r){let i=o.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in r)i+=" "+s+'="'+r[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+o+"</svg>"}function du(o){return o.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function hu(o){return"data:image/svg+xml,"+du(o)}function vu(o){return'url("'+hu(o)+'")'}const di={...Ni,inline:!1},pu={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},gu={display:"inline-block"},so={"background-color":"currentColor"},zi={"background-color":"transparent"},hi={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},vi={"-webkit-mask":so,mask:so,background:zi};for(const o in vi){const r=vi[o];for(const i in hi)r[o+"-"+i]=hi[i]}function mu(o){return o+(o.match(/^[-0-9.]+$/)?"px":"")}function yu(o,r){const i=su(di,r),s=r.mode||"svg",l=s==="svg"?{...pu}:{};o.body.indexOf("xlink:")===-1&&delete l["xmlns:xlink"];let d=typeof r.style=="string"?r.style:"";for(let K in r){const F=r[K];if(F!==void 0)switch(K){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":i[K]=F===!0||F==="true"||F===1;break;case"flip":typeof F=="string"&&lu(i,F);break;case"color":d=d+(d.length>0&&d.trim().slice(-1)!==";"?";":"")+"color: "+F+"; ";break;case"rotate":typeof F=="string"?i[K]=cu(F):typeof F=="number"&&(i[K]=F);break;case"ariaHidden":case"aria-hidden":F!==!0&&F!=="true"&&delete l["aria-hidden"];break;default:if(K.slice(0,3)==="on:")break;di[K]===void 0&&(l[K]=F)}}const h=js(o,i),g=h.attributes;if(i.inline&&(d="vertical-align: -0.125em; "+d),s==="svg"){Object.assign(l,g),d!==""&&(l.style=d);let K=0,F=r.id;return typeof F=="string"&&(F=F.replace(/-/g,"_")),{svg:!0,attributes:l,body:Rs(h.body,F?()=>F+"ID"+K++:"iconifySvelte")}}const{body:E,width:O,height:j}=o,q=s==="mask"||(s==="bg"?!1:E.indexOf("currentColor")!==-1),S=fu(E,{...g,width:O+"",height:j+""}),H={"--svg":vu(S)},z=K=>{const F=g[K];F&&(H[K]=mu(F))};z("width"),z("height"),Object.assign(H,gu,q?so:zi);let W="";for(const K in H)W+=K+": "+H[K]+";";return l.style=W+d,{svg:!1,attributes:l}}qi(!0);Ns("",Ws);if(typeof document<"u"&&typeof window<"u"){const o=window;if(o.IconifyPreload!==void 0){const r=o.IconifyPreload,i="Invalid IconifyPreload syntax.";typeof r=="object"&&r!==null&&(r instanceof Array?r:[r]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!Es(s))&&console.error(i)}catch{console.error(i)}})}if(o.IconifyProviders!==void 0){const r=o.IconifyProviders;if(typeof r=="object"&&r!==null)for(let i in r){const s="IconifyProviders["+i+"] is invalid.";try{const l=r[i];if(typeof l!="object"||!l||l.resources===void 0)continue;Bs(i,l)||console.error(s)}catch{console.error(s)}}}}function bu(o,r,i,s,l){function d(){r.loading&&(r.loading.abort(),r.loading=null)}if(typeof o=="object"&&o!==null&&typeof o.body=="string")return r.name="",d(),{data:{...pr,...o}};let h;if(typeof o!="string"||(h=vr(o,!1,!0))===null)return d(),null;const g=Ss(h);if(!g)return i&&(!r.loading||r.loading.name!==o)&&(d(),r.name="",r.loading={name:o,abort:au([h],s)}),null;d(),r.name!==o&&(r.name=o,l&&!r.destroyed&&l(o));const E=["iconify"];return h.prefix!==""&&E.push("iconify--"+h.prefix),h.provider!==""&&E.push("iconify--"+h.provider),{data:g,classes:E}}function _u(o,r){return o?yu({...pr,...o},r):null}var wu=Va("<svg><!></svg>"),xu=ge("<span></span>");function _t(o,r){ut(r,!0);const i={name:"",loading:null,destroyed:!1},s=Qa(r,["$$slots","$$events","$$legacy"]);let l=ze(!1),d=ze(0),h=ze(null);Ua(()=>{I(d);const q=!!r.ssr||I(l),S=bu(r.icon,i,q,g,r.onload),U=S?_u(S.data,s):null;U&&S.classes&&(U.attributes.class=(typeof s.class=="string"?s.class+" ":"")+S.classes.join(" ")),ve(h,U,!0)});function g(){Ya(d)}pi(()=>{ve(l,!0)}),ba(()=>{i.destroyed=!0,i.loading&&(i.loading.abort(),i.loading=null)});var E=on(),O=mt(E);{var j=q=>{var S=on(),U=mt(S);{var H=W=>{var K=wu();ei(K,()=>({...I(h).attributes}));var F=Y(K);ns(F,()=>I(h).body,!0),N(K),de(W,K)},z=W=>{var K=xu();ei(K,()=>({...I(h).attributes})),de(W,K)};nt(U,W=>{I(h).svg?W(H):W(z,!1)})}de(q,S)};nt(O,q=>{I(h)&&q(j)})}de(o,E),lt()}var ku=ge('<div class="hour svelte-z94qzf"></div>'),Du=ge('<div class="day svelte-z94qzf"><!></div>'),Su=ge('<p class="day svelte-z94qzf"> </p> <!>',1),Tu=ge('<div class="day svelte-z94qzf"><div class="hour svelte-z94qzf"></div></div>'),Eu=ge('<figure class="svelte-z94qzf"><div class="labels svelte-z94qzf"><p class="date svelte-z94qzf">Date</p> <p class="hour svelte-z94qzf">0</p> <p class="hour svelte-z94qzf">12</p> <p class="hour svelte-z94qzf">24</p></div> <div class="grid svelte-z94qzf"><!></div> <div class="average grid svelte-z94qzf"><p class="day svelte-z94qzf">Avg</p> <!></div></figure>');function Ou(o,r){ut(r,!0);let i=ke(r,"average",19,()=>[]),s=ke(r,"daily",3,null);ke(r,"days",3,10);function l(S){return S=new Date(S+"T00:00:00"),new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(S)}function d(S,U){return S===0||U[S-1]===0?(1-U[S])*100+"%":0}var h=Eu(),g=$(Y(h),2),E=Y(g);{var O=S=>{var U=on(),H=mt(U);It(H,17,()=>Object.keys(s()),Ct,(z,W)=>{var K=Su();const F=Xe(()=>s()[I(W)]);var A=mt(K),T=Y(A,!0);N(A);var L=$(A,2);It(L,16,()=>({length:24}),Ct,(V,B,le)=>{var pe=Du(),se=Y(pe);{var me=Ie=>{var je=ku();let Le;Ne(Ue=>Le=gn(je,"",Le,Ue),[()=>({"margin-left":d(le,I(F)),width:100*I(F)[le]+"%"})]),de(Ie,je)};nt(se,Ie=>{I(F)[le]!==0&&Ie(me)})}N(pe),de(V,pe)}),Ne(V=>Ee(T,V),[()=>l(I(W))]),de(z,K)}),de(S,U)};nt(E,S=>{s()!==null&&S(O)})}N(g);var j=$(g,2),q=$(Y(j),2);It(q,16,()=>({length:24}),Ct,(S,U,H)=>{var z=Tu(),W=Y(z);let K;N(z),Ne(F=>K=gn(W,"",K,F),[()=>({opacity:i()[H],width:"100%"})]),de(S,z)}),N(j),N(h),de(o,h),lt()}function Cu(o,r,i,s,l){r(parseInt(o.currentTarget.value)),i(o.currentTarget.options[o.currentTarget.selectedIndex].textContent),s(o.currentTarget.options[o.currentTarget.selectedIndex].getAttribute("data-icon")),l.onchange&&l.onchange(r())}var Iu=ge('<div class="svelte-avz5er"><!> <p class="svelte-avz5er"> </p> <!> <select class="svelte-avz5er"><!></select></div>');function Pu(o,r){ut(r,!0);let i=ke(r,"icon",7),s=ke(r,"label",7),l=ke(r,"value",7,0);var d=Iu(),h=Y(d);_t(h,{color:"#161616",height:"20",get icon(){return i()},width:"20"});var g=$(h,2),E=Y(g,!0);N(g);var O=$(g,2);_t(O,{color:"#161616",height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"});var j=$(O,2);j.__change=[Cu,l,s,i,r];var q=Y(j);Wa(q,()=>r.children??Ga),N(j);var S;Ei(j),N(d),Ne(()=>{Ee(E,s()),S!==(S=l())&&(j.value=(j.__value=l())??"",cr(j,l()))}),de(o,d),lt()}xt(["change"]);var Au=ge('<p class="svelte-19ed0jw">0</p>'),Mu=ge('<p class="svelte-19ed0jw"> </p>'),ju=ge('<p class="svelte-19ed0jw"> </p>'),Ku=ge('<div class="column svelte-19ed0jw"><p class="svelte-19ed0jw"> </p></div>'),Fu=ge('<div class="line svelte-19ed0jw"></div>'),qu=ge('<div class="average svelte-19ed0jw"></div>'),Ru=ge('<figure class="svelte-19ed0jw"><div class="labels svelte-19ed0jw"><!></div> <div class="chart svelte-19ed0jw"><div class="labels svelte-19ed0jw"></div> <div class="columns svelte-19ed0jw"><!> <!> <!></div></div></figure>');function Nu(o,r){ut(r,!0);let i=ke(r,"average",3,0),s=ke(r,"daily",19,()=>[]),l=Xe(()=>s().reduce((T,L)=>(T=L.volume>T?L.volume:T,T),0)),d=Xe(()=>{const T=Math.floor(I(l)+I(l)*.1);return[0,Math.round(T/4)*1,Math.round(T/4)*2,Math.round(T/4)*3,T]});function h(T){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(T)}var g=Ru(),E=Y(g),O=Y(E);{var j=T=>{var L=Au();de(T,L)},q=T=>{var L=on(),V=mt(L);It(V,17,()=>I(d),Ct,(B,le)=>{var pe=Mu();const se=Xe(()=>I(le)===0?"0":I(le)+" oz");var me=Y(pe,!0);N(pe),Ne(()=>Ee(me,I(se))),de(B,pe)}),de(T,L)};nt(O,T=>{I(l)===0?T(j):T(q,!1)})}N(E);var S=$(E,2),U=Y(S);It(U,21,s,Ct,(T,L)=>{var V=ju(),B=Y(V,!0);N(V),Ne(le=>Ee(B,le),[()=>h(I(L).created)]),de(T,V)}),N(U);var H=$(U,2),z=Y(H);{var W=T=>{var L=on(),V=mt(L);It(V,17,s,Ct,(B,le)=>{var pe=Ku();let se;var me=Y(pe),Ie=Y(me);N(me),N(pe),Ne(je=>{se=gn(pe,"",se,je),Ee(Ie,`${I(le).volume??""} oz`)},[()=>({width:`${I(le).volume/Math.floor(I(l)+I(l)*.1)*100}%`})]),de(B,pe)}),de(T,L)};nt(z,T=>{I(l)!==0&&T(W)})}var K=$(z,2);It(K,16,()=>({length:4}),Ct,(T,L,V)=>{var B=Fu();Gt(B,"data-value",V),gn(B,"",{},{left:`${25*(V+1)}%`}),de(T,B)});var F=$(K,2);{var A=T=>{var L=qu();let V;Ne(B=>{Gt(L,"data-value",i()),V=gn(L,"",V,B)},[()=>({left:`${i()/Math.floor(I(l)+I(l)*.1)*100}%`})]),de(T,L)};nt(F,T=>{i()>0&&T(A)})}N(H),N(S),N(g),de(o,g),lt()}var Bu=ge('<button class="sun svelte-bt65q5" type="button">Sunrise/sunset</button>'),Hu=ge('<!> <p class="svelte-bt65q5"> </p>',1),zu=ge('<option data-icon="material-symbols:mode-heat-outline-rounded" selected>Fasting</option> <option data-icon="material-symbols:water-drop-outline-rounded">Water</option>',1),Lu=ge('<section class="svelte-bt65q5"><!> <footer class="svelte-bt65q5"><div class="daynight svelte-bt65q5"><!></div> <!></footer></section>');function Li(o,r){ut(r,!0);let i=ke(r,"activity",3,null),s=ke(r,"days",3,10),l=ke(r,"water",3,null),d=ze(0);function h(K){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(K)}var g=Lu(),E=Y(g);{var O=K=>{const F=Xe(()=>i()&&i().average?i().average:[]),A=Xe(()=>i()&&i().daily?i().daily:[]);Ou(K,{get average(){return I(F)},get daily(){return I(A)},get days(){return s()}})},j=(K,F)=>{{var A=T=>{const L=Xe(()=>l()&&l().average?l().average:null),V=Xe(()=>l()&&l().daily?l().daily:null);Nu(T,{get average(){return I(L)},get daily(){return I(V)}})};nt(K,T=>{I(d)===1&&T(A)},F)}};nt(E,K=>{I(d)===0?K(O):K(j,!1)})}var q=$(E,2),S=Y(q),U=Y(S);{var H=K=>{var F=Bu();F.__click=function(...A){var T;(T=r.onsun)==null||T.apply(this,A)},de(K,F)},z=K=>{var F=Hu(),A=mt(F);const T=Xe(()=>r.sun&&r.sun.icon?r.sun.icon:null);_t(A,{height:"16",get icon(){return I(T)},width:"16"});var L=$(A,2),V=Y(L,!0);N(L),Ne(B=>Ee(V,B),[()=>r.sun&&r.sun.timing?h(r.sun.timing):""]),de(K,F)};nt(U,K=>{r.sun===null?K(H):K(z,!1)})}N(S);var W=$(S,2);Pu(W,{icon:"material-symbols:mode-heat-outline-rounded",label:"Fasting",onchange:K=>ve(d,K,!0),children:(K,F)=>{var A=zu(),T=mt(A);T.value=T.__value="0";var L=$(T,2);L.value=L.__value="1",de(K,A)},$$slots:{default:!0}}),N(q),N(g),de(o,g),lt()}xt(["click"]);var Uu=ge('<article class="svelte-10tx4k0"><p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">hrs</span></p> <p class="colon svelte-10tx4k0">:</p> <p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">min</span></p> <p class="colon svelte-10tx4k0">:</p> <p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">sec</span></p></article>');function Yu(o,r){ut(r,!0);let i=ke(r,"now",3,null),s=ke(r,"started",3,null),l=Xe(()=>{if(s()===null)return{hours:0,minutes:"00",seconds:"00"};const z=Math.floor((i()-s().getTime())/1e3);return{hours:Math.floor(z/3600).toString(10).padStart(2,"0"),minutes:Math.floor(z%3600/60).toString(10).padStart(2,"0"),seconds:(z%60).toString(10).padStart(2,"0")}});var d=Uu(),h=Y(d),g=Y(h),E=Y(g,!0);N(g),Wr(2),N(h);var O=$(h,4),j=Y(O),q=Y(j,!0);N(j),Wr(2),N(O);var S=$(O,4),U=Y(S),H=Y(U,!0);N(U),Wr(2),N(S),N(d),Ne(()=>{Ee(E,I(l).hours),Ee(q,I(l).minutes),Ee(H,I(l).seconds)}),de(o,d),lt()}function Vu(o,r,i){r()===null?i.onstart&&i.onstart():i.onend&&i.onend()}var Wu=ge('<p class="svelte-1tavlmb">You are not fasting.</p>'),Gu=ge('<p class="svelte-1tavlmb">You are fasting.</p> <!> <p class="started svelte-1tavlmb"> </p>',1),Qu=ge('<section class="svelte-1tavlmb"><header class="svelte-1tavlmb"><h3 class="svelte-1tavlmb">Fasting</h3> <button type="button" class="svelte-1tavlmb"><!></button></header> <article class="svelte-1tavlmb"><!> <button class="primary svelte-1tavlmb" type="button"> </button></article> <div class="graph svelte-1tavlmb"><!></div> <footer class="svelte-1tavlmb"><button class="hunger secondary svelte-1tavlmb" type="button"><!> <span> </span></button> <button class="water secondary svelte-1tavlmb" type="button"><!> <span> </span></button></footer></section>');function Ju(o,r){ut(r,!0);let i=ke(r,"activity",3,null),s=ke(r,"hunger",3,5),l=ke(r,"levels",19,()=>[]),d=ke(r,"now",3,null),h=ke(r,"started",3,null),g=ke(r,"sun",3,null),E=ke(r,"volume",3,null),O=ke(r,"water",3,0);function j(Ae){return l().find(Qe=>Qe.value===Ae).label}function q(Ae){return Ae===null?null:new Intl.DateTimeFormat(navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(Ae)}var S=Qu(),U=Y(S),H=$(Y(U),2);H.__click=function(...Ae){var xe;(xe=r.onsettings)==null||xe.apply(this,Ae)};var z=Y(H);_t(z,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),N(H),N(U);var W=$(U,2),K=Y(W);{var F=Ae=>{var xe=Wu();de(Ae,xe)},A=Ae=>{var xe=Gu(),Qe=$(mt(xe),2);Yu(Qe,{get now(){return d()},get started(){return h()}});var Be=$(Qe,2),ee=Y(Be);N(Be),Ne(ue=>Ee(ee,`Started ${ue??""}`),[()=>q(h())]),de(Ae,xe)};nt(K,Ae=>{h()===null?Ae(F):Ae(A,!1)})}var T=$(K,2);T.__click=[Vu,h,r];var L=Y(T);N(T),N(W);var V=$(W,2),B=Y(V);Li(B,{get activity(){return i()},days:7,get onsun(){return r.onsun},get sun(){return g()},get water(){return E()}}),N(V);var le=$(V,2),pe=Y(le);pe.__click=function(...Ae){var xe;(xe=r.onhunger)==null||xe.apply(this,Ae)};var se=Y(pe);_t(se,{height:"20",icon:"material-symbols:fork-spoon-rounded",width:"20"});var me=$(se,2),Ie=Y(me,!0);N(me),N(pe);var je=$(pe,2);je.__click=function(...Ae){var xe;(xe=r.onwater)==null||xe.apply(this,Ae)};var Le=Y(je);_t(Le,{height:"20",icon:"material-symbols:water-drop-outline-rounded",width:"20"});var Ue=$(Le,2),tt=Y(Ue);N(Ue),N(je),N(le),N(S),Ne(Ae=>{Ee(L,`${h()===null?"Start":"Stop"} fasting`),Ee(Ie,Ae),Ee(tt,`${O()??""} oz`)},[()=>j(s())]),de(o,S),lt()}xt(["click"]);function Xu(o,r,i,s){const l=new Date(parseInt(o.currentTarget.getAttribute("data-year")),parseInt(o.currentTarget.getAttribute("data-month")),parseInt(o.currentTarget.getAttribute("data-date")));l.getMonth()!==r().getMonth()&&r(new Date(l.getTime())),i(new Date(l.getTime())),s.onchange&&s.onchange(i())}var Zu=ge('<button type="button"> </button>'),$u=ge('<section><header class="svelte-1ll096s"><h3 class="svelte-1ll096s"> </h3> <button type="button" class="svelte-1ll096s"><!></button> <button type="button" class="svelte-1ll096s"><!></button></header> <article class="svelte-1ll096s"><p class="svelte-1ll096s">Sun</p> <p class="svelte-1ll096s">Mon</p> <p class="svelte-1ll096s">Tue</p> <p class="svelte-1ll096s">Wed</p> <p class="svelte-1ll096s">Thu</p> <p class="svelte-1ll096s">Fri</p> <p class="svelte-1ll096s">Sat</p></article> <article class="svelte-1ll096s"></article></section>');function el(o,r){ut(r,!0);let i=ke(r,"display",23,()=>new Date),s=ke(r,"value",23,()=>new Date),l=Xe(()=>new Intl.DateTimeFormat(navigator.language,{month:"long",year:"numeric"}).format(i())),d=Xe(()=>{const K=[],F=new Date,A=new Date(i().getFullYear(),i().getMonth(),1);A.setDate(A.getDate()-A.getDay());for(let T=0;T<42;T++){const L={date:A.getDate(),month:A.getMonth(),year:A.getFullYear(),outside:!0,today:!1,selected:!1,after:!1};A.getFullYear()===i().getFullYear()&&A.getMonth()===i().getMonth()&&(L.outside=!1),A.getTime()>Date.now()&&(L.after=!0),A.getFullYear()===F.getFullYear()&&A.getMonth()===F.getMonth()&&A.getDate()===F.getDate()&&(L.today=!0),A.getFullYear()===s().getFullYear()&&A.getMonth()===s().getMonth()&&A.getDate()===s().getDate()&&(L.selected=!0),A.setDate(A.getDate()+1),K.push(L)}return K});function h(){let K=i().getMonth(),F=i().getFullYear();F=K===0?F-1:F,K=K===0?11:K-1,i(new Date(F,K,i().getDate()))}function g(){let K=i().getMonth(),F=i().getFullYear();F=K===11?F+1:F,K=(K+1)%12,i(new Date(F,K,i().getDate()))}var E=$u(),O=Y(E),j=Y(O),q=Y(j,!0);N(j);var S=$(j,2);S.__click=h;var U=Y(S);_t(U,{height:"24",icon:"material-symbols:navigate-before",width:"24"}),N(S);var H=$(S,2);H.__click=g;var z=Y(H);_t(z,{height:"24",icon:"material-symbols:navigate-next",width:"24"}),N(H),N(O);var W=$(O,4);It(W,21,()=>I(d),Ct,(K,F)=>{var A=Zu();A.__click=[Xu,i,s,r];let T;var L=Y(A,!0);N(A),Ne(V=>{Gt(A,"data-year",I(F).year),Gt(A,"data-month",I(F).month),Gt(A,"data-date",I(F).date),A.disabled=I(F).after,T=Qt(A,1,"svelte-1ll096s",null,T,V),Ee(L,I(F).date)},[()=>({outside:I(F).outside,today:I(F).today,selected:I(F).selected})]),de(K,A)}),N(W),N(E),Ne(()=>Ee(q,I(l))),de(o,E),lt()}xt(["click"]);function tl(o,r,i){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===12?s.setHours(23):s.setHours(s.getHours()-1):s.getHours()===0?s.setHours(11):s.setHours(s.getHours()-1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function nl(o,r,i){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===23?s.setHours(12):s.setHours(s.getHours()+1):s.getHours()===11?s.setHours(0):s.setHours(s.getHours()+1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function rl(o,r,i){const s=new Date(r().getTime());s.getHours()>=12&&s.setHours(s.getHours()-12),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function ol(o,r,i){const s=new Date(r().getTime());s.getHours()<12&&s.setHours(s.getHours()+12),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function il(o,r,i){const s=new Date(r().getTime());s.getMinutes()===0?s.setMinutes(59):s.setMinutes(s.getMinutes()-1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}function al(o,r,i){const s=new Date(r().getTime());s.getMinutes()===59?s.setMinutes(0):s.setMinutes(s.getMinutes()+1),r(new Date(s.getTime())),i.onchange&&i.onchange(r())}var sl=ge('<article class="svelte-1bevvpj"><div class="time svelte-1bevvpj"><div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div> <p class="svelte-1bevvpj">:</p> <div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div></div> <div class="meridian svelte-1bevvpj"><button type="button">AM</button> <button type="button">PM</button></div></article>');function ul(o,r){ut(r,!0);let i=ke(r,"value",23,()=>new Date),s=Xe(()=>i().getHours()%12||12),l=Xe(()=>i().getMinutes().toString(10).padStart(2,"0")),d=Xe(()=>i().getHours()>=12?"PM":"AM");var h=sl(),g=Y(h),E=Y(g),O=Y(E);O.__click=[nl,i,r];var j=Y(O);_t(j,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),N(O);var q=$(O,2),S=Y(q,!0);N(q);var U=$(q,2);U.__click=[tl,i,r];var H=Y(U);_t(H,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),N(U),N(E);var z=$(E,4),W=Y(z);W.__click=[al,i,r];var K=Y(W);_t(K,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),N(W);var F=$(W,2),A=Y(F,!0);N(F);var T=$(F,2);T.__click=[il,i,r];var L=Y(T);_t(L,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),N(T),N(z),N(g);var V=$(g,2),B=Y(V);B.__click=[rl,i,r];let le;var pe=$(B,2);pe.__click=[ol,i,r];let se;N(V),N(h),Ne((me,Ie)=>{Ee(S,I(s)),Ee(A,I(l)),le=Qt(B,1,"svelte-1bevvpj",null,le,me),se=Qt(pe,1,"svelte-1bevvpj",null,se,Ie)},[()=>({selected:I(d)==="AM"}),()=>({selected:I(d)==="PM"})]),de(o,h),lt()}xt(["click"]);function ll(o,r){ve(r,"calendar")}function cl(o,r){ve(r,"clock")}var fl=ge('<article class="svelte-8yzu2w"><header class="svelte-8yzu2w"><button type="button"><p class="svelte-8yzu2w"> </p> <p class="svelte-8yzu2w"> </p></button> <button type="button"><p class="svelte-8yzu2w"> </p></button></header> <!></article>');function dl(o,r){ut(r,!0);let i=ke(r,"value",23,()=>new Date),s=ze("calendar");function l(B){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(B)}function d(B){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(B)}function h(B){B.setHours(i().getHours()),B.setMinutes(i().getMinutes()),B.setSeconds(i().getSeconds()),i(new Date(B.getTime())),r.onchange&&r.onchange(i())}function g(B){B.setFullYear(i().getFullYear()),B.getMonth(i().getMonth()),B.getDate(i().getDate()),i(new Date(B.getTime())),r.onchange&&r.onchange(i())}var E=fl(),O=Y(E),j=Y(O);j.__click=[ll,s];let q;var S=Y(j),U=Y(S,!0);N(S);var H=$(S,2),z=Y(H,!0);N(H),N(j);var W=$(j,2);W.__click=[cl,s];let K;var F=Y(W),A=Y(F,!0);N(F),N(W),N(O);var T=$(O,2);{var L=B=>{el(B,{onchange:h,get value(){return i()}})},V=B=>{ul(B,{onchange:g,get value(){return i()}})};nt(T,B=>{I(s)===null||I(s)==="calendar"?B(L):B(V,!1)})}N(E),Ne((B,le,pe,se)=>{q=Qt(j,1,"svelte-8yzu2w",null,q,B),Ee(U,r.label),Ee(z,le),K=Qt(W,1,"svelte-8yzu2w",null,K,pe),Ee(A,se)},[()=>({selected:I(s)==="calendar"}),()=>l(i()),()=>({selected:I(s)==="clock"}),()=>d(i())]),de(o,E),lt()}xt(["click"]);function hl(o,r,i,s){r(),i(null),s.oncancel&&s.oncancel()}function vl(o,r,i){r.ondelete&&r.ondelete(i().id)}function pl(o,r){const i=o.currentTarget.value.trim().length===0?null:o.currentTarget.value;r({...r(),notes:i})}function gl(o,r,i){r.onsave&&r.onsave(i())}var ml=ge('<dialog class="svelte-13glclx"><h3 class="svelte-13glclx"> </h3> <!> <textarea placeholder="Notes" class="svelte-13glclx"></textarea> <footer class="svelte-13glclx"><button class="delete svelte-13glclx" type="button">Delete</button> <button class="cancel svelte-13glclx" type="button">Cancel</button> <button type="button" class="svelte-13glclx">Save</button></footer></dialog>');function yl(o,r){ut(r,!0);let i=ke(r,"field",3,"started"),s=ke(r,"item",7,null),l=ke(r,"label",3,"Started"),d=ke(r,"title",3,"Edit Fast Start"),h=ze(void 0);function g(T){const L={...s()};L[i()]=new Date(T.getTime()),s({...L})}function E(){I(h).close()}function O(){I(h).showModal()}var j=ml(),q=Y(j),S=Y(q,!0);N(q);var U=$(q,2);const H=Xe(()=>s()&&s().id&&s().id!==null?s()[i()]:new Date);dl(U,{get label(){return l()},onchange:g,get value(){return I(H)}});var z=$(U,2);Za(z),z.__input=[pl,s];var W=$(z,2),K=Y(W);K.__click=[vl,r,s];var F=$(K,2);F.__click=[hl,E,s,r];var A=$(F,2);return A.__click=[gl,r,s],N(W),N(j),Wt(j,T=>ve(h,T),()=>I(h)),Ne(()=>{Ee(S,d()),us(z,s()&&s().id&&s().id!==null?s().notes:"")}),de(o,j),lt({close:E,showModal:O})}xt(["input","click"]);var bl=ge('<article class="svelte-1vxkmhw"><p class="svelte-1vxkmhw">Your fasting history<br/>will be displayed here.</p></article>'),_l=ge('<li class="header svelte-1vxkmhw"><p class="svelte-1vxkmhw"> </p></li>'),wl=(o,r,i)=>r(I(i).type,I(i).id),xl=ge('<p class="svelte-1vxkmhw">Started Fast</p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),kl=ge('<p class="svelte-1vxkmhw">Water</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Dl=ge('<p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Sl=ge('<p class="svelte-1vxkmhw">Ended Fast</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Tl=ge('<li class="svelte-1vxkmhw"><button type="button" class="svelte-1vxkmhw"><!></button></li>'),El=ge('<ul class="svelte-1vxkmhw"></ul>');function Ol(o,r){ut(r,!0);let i=ke(r,"items",19,()=>[]);function s(S){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",year:"numeric"}).format(S)}function l(S,U){const H=U.getTime()-S.getTime(),z=Math.floor(H/1e3),W=Math.floor(z/3600),K=Math.floor(z%3600/60);return new Intl.DurationFormat(navigator.language,{style:"short",units:["hour","minute"]}).format({hours:W,minutes:K})}function d(S){return new Intl.DateTimeFormat(navigator.language,{weekday:"long",month:"short",day:"numeric"}).format(S)}function h(S){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(S)}function g(S,U){r.onchange&&r.onchange(S,U)}var E=on(),O=mt(E);{var j=S=>{var U=bl();de(S,U)},q=S=>{var U=El();It(U,21,i,Ct,(H,z)=>{var W=on(),K=mt(W);{var F=T=>{var L=_l(),V=Y(L),B=Y(V,!0);N(V),N(L),Ne(le=>Ee(B,le),[()=>d(I(z).timed)]),de(T,L)},A=T=>{var L=Tl(),V=Y(L);V.__click=[wl,g,z];var B=Y(V);{var le=se=>{var me=xl(),Ie=$(mt(me),4),je=Y(Ie,!0);N(Ie);var Le=$(Ie,2),Ue=Y(Le,!0);N(Le),Ne((tt,Ae)=>{Ee(je,tt),Ee(Ue,Ae)},[()=>s(I(z).timed),()=>h(I(z).timed)]),de(se,me)},pe=(se,me)=>{{var Ie=Le=>{var Ue=kl(),tt=$(mt(Ue),2),Ae=Y(tt);N(tt);var xe=$(tt,2),Qe=Y(xe,!0);N(xe);var Be=$(xe,2),ee=Y(Be,!0);N(Be),Ne((ue,ce)=>{Ee(Ae,`${I(z).volume??""} oz`),Ee(Qe,ue),Ee(ee,ce)},[()=>s(I(z).timed),()=>h(I(z).timed)]),de(Le,Ue)},je=(Le,Ue)=>{{var tt=xe=>{var Qe=Dl(),Be=mt(Qe),ee=Y(Be,!0);N(Be);var ue=$(Be,4),ce=Y(ue,!0);N(ue);var Ke=$(ue,2),De=Y(Ke,!0);N(Ke),Ne((Me,Oe)=>{Ee(ee,I(z).level),Ee(ce,Me),Ee(De,Oe)},[()=>s(I(z).timed),()=>h(I(z).timed)]),de(xe,Qe)},Ae=(xe,Qe)=>{{var Be=ee=>{var ue=Sl(),ce=$(mt(ue),2),Ke=Y(ce,!0);N(ce);var De=$(ce,2),Me=Y(De,!0);N(De);var Oe=$(De,2),Ve=Y(Oe,!0);N(Oe),Ne((oe,rt,Ze)=>{Ee(Ke,oe),Ee(Me,rt),Ee(Ve,Ze)},[()=>l(I(z).started,I(z).ended),()=>s(I(z).timed),()=>h(I(z).timed)]),de(ee,ue)};nt(xe,ee=>{I(z).type==="end"&&ee(Be)},Qe)}};nt(Le,xe=>{I(z).type==="hunger"?xe(tt):xe(Ae,!1)},Ue)}};nt(se,Le=>{I(z).type==="water"?Le(Ie):Le(je,!1)},me)}};nt(B,se=>{I(z).type==="start"?se(le):se(pe,!1)})}N(V),N(L),de(T,L)};nt(K,T=>{I(z).type==="header"?T(F):T(A,!1)})}de(H,W)}),N(U),de(S,U)};nt(O,S=>{i().length===0?S(j):S(q,!1)})}de(o,E),lt()}xt(["click"]);var Cl=ge('<section class="svelte-1moll0f"><header class="svelte-1moll0f"><h3 class="svelte-1moll0f">Hours</h3></header> <div class="svelte-1moll0f"><!></div> <article class="svelte-1moll0f"><!></article></section>');function Il(o,r){let i=ke(r,"activity",3,null),s=ke(r,"history",19,()=>[]);ke(r,"levels",19,()=>[]);let l=ke(r,"sun",3,null);var d=Cl(),h=$(Y(d),2),g=Y(h);Li(g,{get activity(){return i()},days:7,get onsun(){return r.onsun},get sun(){return l()},get water(){return r.volume}}),N(h);var E=$(h,2),O=Y(E);Ol(O,{get items(){return s()},get onchange(){return r.onchange}}),N(E),N(d),de(o,d)}function Pl(o,r,i,s){r(),i(null),s.oncancel&&s.oncancel()}function Al(o,r,i){r.ondelete&&r.ondelete(i().id)}function Ml(o,r,i){r()===null&&r({...r(),level:5}),i.onsave&&i.onsave(r())}var jl=(o,r,i)=>r(I(i).value),Kl=ge('<li class="svelte-1gyfgoj"><button type="button" class="svelte-1gyfgoj"><p class="svelte-1gyfgoj"> </p> <!></button></li>'),Fl=ge('<button class="delete svelte-1gyfgoj" type="button">Delete</button>'),ql=ge('<dialog class="svelte-1gyfgoj"><h3 class="svelte-1gyfgoj"> </h3> <ul class="svelte-1gyfgoj"></ul> <footer class="svelte-1gyfgoj"><!> <button class="cancel svelte-1gyfgoj" type="button">Cancel</button> <button type="button" class="svelte-1gyfgoj">Save</button></footer></dialog>');function Rl(o,r){ut(r,!0);let i=ke(r,"item",7,null),s=ke(r,"levels",19,()=>[]);ke(r,"units",3,"oz");let l=ze(void 0),d=Xe(()=>i()&&i().level&&i().level!==null?i().level:5);function h(F){const A=F;i({...i(),level:A})}function g(){I(l).close()}function E(){I(l).showModal()}var O=ql(),j=Y(O),q=Y(j);N(j);var S=$(j,2);It(S,21,s,Ct,(F,A)=>{var T=Kl();const L=Xe(()=>I(A).value===I(d)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var V=Y(T);V.__click=[jl,h,A];var B=Y(V),le=Y(B,!0);N(B);var pe=$(B,2);const se=Xe(()=>I(A).value===I(d)?"#0284c7":"#161616");_t(pe,{get color(){return I(se)},height:"20",get icon(){return I(L)},width:"20"}),N(V),N(T),Ne(()=>Ee(le,I(A).label)),de(F,T)}),N(S);var U=$(S,2),H=Y(U);{var z=F=>{var A=Fl();A.__click=[Al,r,i],de(F,A)};nt(H,F=>{i()&&i().id&&i().id!==null&&F(z)})}var W=$(H,2);W.__click=[Pl,g,i,r];var K=$(W,2);return K.__click=[Ml,i,r],N(U),N(O),Wt(O,F=>ve(l,F),()=>I(l)),Ne(()=>Ee(q,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Hunger`)),de(o,O),lt({close:g,showModal:E})}xt(["click"]);function Nl(o,r,i){r()!==0&&(r(0),i.onchange&&i.onchange(r()))}function Bl(o,r,i){r()!==1&&(r(1),i.onchange&&i.onchange(r()))}var Hl=ge('<ul class="svelte-tu3q0a"><li><button type="button">Fasting</button></li> <li><button type="button">Hours</button></li></ul>');function zl(o,r){ut(r,!0);let i=ke(r,"selected",7,0);var s=Hl(),l=Y(s),d=Y(l);let h;d.__click=[Nl,i,r],N(l);var g=$(l,2),E=Y(g);let O;E.__click=[Bl,i,r],N(g),N(s),Ne((j,q)=>{h=Qt(d,1,"fasting svelte-tu3q0a",null,h,j),O=Qt(E,1,"hours svelte-tu3q0a",null,O,q)},[()=>({selected:i()===0}),()=>({selected:i()===1})]),de(o,s),lt()}xt(["click"]);function Ll(o,r){r()}var Ul=ge('<dialog class="svelte-msa23r"><h3 class="svelte-msa23r">Settings</h3> <article class="svelte-msa23r"><p class="svelte-msa23r">Settings.</p></article> <footer class="svelte-msa23r"><button type="button" class="svelte-msa23r">Done</button></footer></dialog>');function Yl(o,r){ut(r,!0);let i=ze(void 0);function s(){I(i).close()}function l(){I(i).showModal()}var d=Ul(),h=$(Y(d),4),g=Y(h);return g.__click=[Ll,s],N(h),N(d),Wt(d,E=>ve(i,E),()=>I(i)),de(o,d),lt({close:s,showModal:l})}xt(["click"]);function Vl(o,r,i,s){r(),i(null),s.oncancel&&s.oncancel()}function Wl(o,r,i){r.ondelete&&r.ondelete(i().id)}function Gl(o,r,i){r()===null&&r({...r(),volume:8}),i.onsave&&i.onsave(r())}var Ql=(o,r,i)=>r(I(i).value),Jl=ge('<li class="svelte-1sbih0z"><button type="button" class="svelte-1sbih0z"><p class="svelte-1sbih0z"> </p> <p class="svelte-1sbih0z"> </p> <!></button></li>'),Xl=ge('<button class="delete svelte-1sbih0z" type="button">Delete</button>'),Zl=ge('<dialog class="svelte-1sbih0z"><h3 class="svelte-1sbih0z"> </h3> <ul class="svelte-1sbih0z"></ul> <footer class="svelte-1sbih0z"><!> <button class="cancel svelte-1sbih0z" type="button">Cancel</button> <button type="button" class="svelte-1sbih0z">Save</button></footer></dialog>');function $l(o,r){ut(r,!0);let i=ke(r,"item",7,null),s=ke(r,"units",3,"oz"),l=ze(void 0),d=no([{value:8,label:"Cup"},{value:12,label:"Can"},{value:16,label:"Bottle"},{value:20,label:"Medium"},{value:30,label:"Gatorade"},{value:32,label:"Big Q"},{value:44,label:"QT Large"},{value:52,label:"Extra Large"}]),h=Xe(()=>i()&&i().volume&&i().volume!==null?i().volume:8);function g(A){const T=A;i({...i(),volume:T})}function E(){I(l).close()}function O(){I(l).showModal()}var j=Zl(),q=Y(j),S=Y(q);N(q);var U=$(q,2);It(U,21,()=>d,Ct,(A,T)=>{var L=Jl();const V=Xe(()=>I(T).value===I(h)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var B=Y(L);B.__click=[Ql,g,T];var le=Y(B),pe=Y(le,!0);N(le);var se=$(le,2),me=Y(se);N(se);var Ie=$(se,2);const je=Xe(()=>I(T).value===I(h)?"#0284c7":"#161616");_t(Ie,{get color(){return I(je)},height:"20",get icon(){return I(V)},width:"20"}),N(B),N(L),Ne(()=>{Ee(pe,I(T).label),Ee(me,`${I(T).value??""} ${s()??""}`)}),de(A,L)}),N(U);var H=$(U,2),z=Y(H);{var W=A=>{var T=Xl();T.__click=[Wl,r,i],de(A,T)};nt(z,A=>{i()&&i().id&&i().id!==null&&A(W)})}var K=$(z,2);K.__click=[Vl,E,i,r];var F=$(K,2);return F.__click=[Gl,i,r],N(H),N(j),Wt(j,A=>ve(l,A),()=>I(l)),Ne(()=>Ee(S,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Water`)),de(o,j),lt({close:E,showModal:O})}xt(["click"]);var ec=ge('<main class="svelte-1p6a8xw"><header class="svelte-1p6a8xw"><span></span> <!> <button type="button" class="svelte-1p6a8xw"><!></button></header> <section class="svelte-1p6a8xw"><article class="svelte-1p6a8xw"><!></article> <article class="svelte-1p6a8xw"><!></article></section></main> <!> <!> <!> <!>',1);function pc(o,r){ut(r,!0);const i=new ps,s=ys;let l=0,d=ze(null),h=ze(no([])),g=ze(void 0),E=ze("started"),O=ze(null),j=ze("Started"),q=ze("Edit Fast Started"),S=ze(void 0),U=ze(null),H=ze(5),z=no([{value:1,label:"Starving"},{value:2,label:"Very hungry"},{value:3,label:"Pretty hungry"},{value:4,label:"Snacky"},{value:5,label:"Satisfied"},{value:6,label:"Slightly full"},{value:7,label:"Uncomfortable"},{value:8,label:"Stuffed"},{value:9,label:"Stomach aches"},{value:10,label:"Sick"}]),W=ze(null),K=ze(0),F=ze(void 0),A=ze(null),T=ze(null),L=ze(null),V=ze(0),B=ze(void 0),le=ze(null);pi(()=>{let ie=window.localStorage.getItem("fh_screen");ve(K,ie===null?0:parseInt(ie),!0);const fe=window.localStorage.getItem("fh_latitude");fe!==null&&fe!=="DENIED"&&Le(),setInterval(()=>{if(l===60){se();const he=window.localStorage.getItem("fh_latitude");he!==null&&he!=="DENIED"&&Le(),l=0}else l=l+1;I(A)!==null&&ve(W,Date.now(),!0)},1e3),je(),se(),Ie(),Ue(),me()});function pe(ie){const fe=ie.getFullYear(),he=String(ie.getMonth()+1).padStart(2,"0"),Je=String(ie.getDate()).padStart(2,"0");return`${fe}-${he}-${Je}`}function se(ie=7){i.browseHistory().then(fe=>{const he={},Je=new Date,_e=new Date(Je.getFullYear(),Je.getMonth(),Je.getDate()),qe=new Date(_e);if(qe.setDate(_e.getDate()-(ie-1)),!Array.isArray(fe)||fe.length===0){const He=new Date(qe);for(;He<=_e;){const re=pe(He);he[re]=Array(24).fill(0),He.setDate(He.getDate()+1)}}else{for(const re of fe){const Kt=new Date(re.started),Ft=re.ended?new Date(re.ended):new Date,Jt=new Date(Kt.getTime());Jt.setSeconds(0,0);const ne=new Date(Ft.getTime());ne.setSeconds(0,0);let Et=new Date(Jt);for(;Et<ne;){const an=pe(Et),sn=new Date(Et.getFullYear(),Et.getMonth(),Et.getDate());if(sn>=qe&&sn<=_e){const jn=Et.getHours();he[an]||(he[an]=Array(24).fill(0)),he[an][jn]+=1}Et.setMinutes(Et.getMinutes()+1)}}for(const re in he)he[re]=he[re].map(Kt=>+(Math.min(Kt,60)/60).toFixed(6));const He=new Date(qe);for(;He<=_e;){const re=pe(He);he[re]||(he[re]=Array(24).fill(0)),He.setDate(He.getDate()+1)}}const Re=Object.keys(he).sort((He,re)=>re.localeCompare(He)),Ce={};for(const He of Re)Ce[He]=he[He];const st=Array(24).fill(0);for(const He of Array(24).keys())for(const re of Re)st[He]+=Ce[re][He];const At=st.map(He=>+(He/ie).toFixed(6));ve(d,{daily:Ce,average:At},!0)})}function me(){i.browseHistory().then(ie=>{let fe=null,he=structuredClone(ie);he.forEach(_e=>{_e.type="start",_e.timed=new Date(_e.started.getTime())});let Je=structuredClone(ie);Je=Je.filter(_e=>_e.ended!==null),Je.forEach(_e=>{_e.type="end",_e.timed=new Date(_e.ended.getTime())}),he=he.concat(Je),fe=[...he],i.browseHunger().then(_e=>(_e=_e.map(qe=>{const Re=z.find(Ce=>Ce.value===qe.level);return qe.level=Re.label,qe.timed=new Date(qe.created.getTime()),qe}),fe=fe.concat(_e),i.browseWater())).then(_e=>{_e=_e.map(Re=>(Re.timed=new Date(Re.created.getTime()),Re)),fe=fe.concat(_e),fe.sort((Re,Ce)=>Re.timed.getTime()<Ce.timed.getTime()?1:Re.timed.getTime()>Ce.timed.getTime()?-1:0);const qe=[];for(let Re=0;Re<fe.length;Re++){const Ce=new Date(fe[Re].timed.getTime());Ce.setHours(23),Ce.setMinutes(59),Ce.setSeconds(59),Ce.setMilliseconds(999),qe.length===0?qe.push({type:"header",timed:Ce}):(qe[qe.length-1].timed.getDate()!==fe[Re].timed.getDate()||qe[qe.length-1].timed.getMonth()!==fe[Re].timed.getMonth()||qe[qe.length-1].timed.getFullYear()!==fe[Re].timed.getFullYear())&&qe.push({type:"header",timed:Ce})}fe=fe.concat(qe),fe.sort((Re,Ce)=>Re.timed.getTime()<Ce.timed.getTime()?1:Re.timed.getTime()>Ce.timed.getTime()?-1:0),ve(h,[...fe],!0)})})}function Ie(){i.browseHunger(!0).then(ie=>{if(ie===null)ve(H,5);else{const fe=new Date,he=new Date(ie.created);fe.getFullYear()===he.getFullYear()&&fe.getMonth()===he.getMonth()&&fe.getDate()===he.getDate()?ve(H,ie.level,!0):ve(H,5)}})}function je(){i.browseHistory().then(ie=>{ie.length===0&&(ve(A,null),ve(W,null)),ie.sort((fe,he)=>fe.started.getTime()>he.started.getTime()?-1:fe.started.getTime()<he.started.getTime()?1:0),ie[0].ended===null&&(ve(A,new Date(ie[0].started.getTime()),!0),ve(W,Date.now(),!0))})}function Le(){const ie=parseFloat(window.localStorage.getItem("fh_latitude")),fe=parseFloat(window.localStorage.getItem("fh_longitude")),he=new Date;let Je=null,_e=s.getTimes(he,ie,fe),qe=null;if(Date.now()<_e.sunrise.getTime())qe=new Date(_e.sunrise.getTime()),Je="material-symbols:wb-sunny-outline-rounded";else if(Date.now()>_e.sunrise.getTime()&&Date.now()<_e.sunset.getTime())qe=new Date(_e.sunset.getTime()),Je="material-symbols:moon-stars-outline-rounded";else{const Re=new Date;Re.setDate(he.getDate()+1),_e=s.getTimes(Re,ie,fe),qe=new Date(_e.sunrise.getTime()),Je="material-symbols:wb-sunny-outline-rounded"}ve(T,{icon:Je,timing:qe},!0)}function Ue(){i.browseWater(!0).then(ie=>{const fe=ie.reduce((Ce,st)=>Ce+st.volume,0);ve(V,fe,!0);const he=new Date;he.setHours(0,0,0,0);const Je={};for(const{created:Ce,volume:st}of ie){const At=new Date(Ce).toISOString().slice(0,10);Je[At]=(Je[At]||0)+st}const _e=[];for(let Ce=0;Ce<7;Ce++){const st=new Date(he);st.setDate(he.getDate()-Ce);const At=st.toISOString().slice(0,10);_e.push({created:new Date(st.getTime()),volume:Je[At]||0})}const Re=_e.reduce((Ce,{volume:st})=>Ce+st,0)/_e.length;ve(L,{average:Re,daily:[..._e]},!0)})}function tt(){ve(A,null),ve(W,null),i.browseHistoryByEnd().then(ie=>(ie.ended=new Date,i.editHistory(ie))).then(()=>{je(),se(),me()})}function Ae(){I(S).showModal()}function xe(){i.addHistory().then(()=>{je(),se(),me()})}function Qe(){I(B).showModal()}function Be(ie){I(A)!==null&&I(O).started.getTime()===I(A).getTime()&&(ve(A,null),ve(W,null)),i.deleteHistory(ie).then(()=>{I(g).close(),ve(O,null),je(),se(),me()})}function ee(ie){i.editHistory(ie).then(()=>{I(g).close(),ve(O,null),je(),se(),me()})}function ue(ie,fe){ie==="start"?(ve(E,"started"),ve(j,"Started"),ve(q,"Edit Fast Started"),i.readHistory(fe).then(he=>{ve(O,{...he},!0),I(g).showModal()})):ie==="end"?(ve(E,"ended"),ve(j,"Ended"),ve(q,"Edit Fast Ended"),i.readHistory(fe).then(he=>{ve(O,{...he},!0),I(g).showModal()})):ie==="water"?i.readWater(fe).then(he=>{ve(le,{...he},!0),I(B).showModal()}):ie==="hunger"&&i.readHunger(fe).then(he=>{ve(U,{...he},!0),I(S).showModal()})}function ce(ie){i.deleteHunger(ie).then(()=>{I(S).close(),ve(U,null),Ie(),me()})}function Ke(ie){I(U)===null?i.addHunger(ie.level).then(fe=>{I(S).close(),Ie(),me()}):i.editHunger(ie).then(fe=>{I(S).close(),ve(U,null),Ie(),me()})}function De(ie){I(K)!==ie&&(window.localStorage.setItem("fh_screen",ie),ve(K,ie,!0))}function Me(){I(F).showModal()}function Oe(){confirm("Sunrise/set (important for religious observations) needs to know your location? Enable location detection?")?navigator.geolocation.getCurrentPosition(fe=>{window.localStorage.setItem("fh_latitude",fe.coords.latitude),window.localStorage.setItem("fh_longitude",fe.coords.longitude),Le()}):window.localStorage.setItem("fh_latitude","DENIED")}function Ve(ie){i.deleteWater(ie).then(()=>{I(B).close(),ve(le,null),Ue(),me()})}function oe(ie){I(le)===null?i.addWater(ie.volume).then(fe=>{I(B).close(),Ue(),me()}):i.editWater(ie).then(fe=>{I(B).close(),ve(le,null),Ue(),me()})}var rt=ec(),Ze=mt(rt),be=Y(Ze),ct=$(Y(be),2);zl(ct,{onchange:De,get selected(){return I(K)}});var ft=$(ct,2);ft.__click=Me;var ot=Y(ft);_t(ot,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),N(ft),N(be);var St=$(be,2),dt=Y(St),yt=Y(dt);Ju(yt,{get activity(){return I(d)},get hunger(){return I(H)},get levels(){return z},get now(){return I(W)},onend:tt,onhunger:Ae,onsettings:Me,onstart:xe,onsun:Oe,onwater:Qe,get started(){return I(A)},get sun(){return I(T)},get volume(){return I(L)},get water(){return I(V)}}),N(dt);var wt=$(dt,2),Tt=Y(wt);Il(Tt,{get activity(){return I(d)},get history(){return I(h)},get levels(){return z},onchange:ue,onsun:Oe,get sun(){return I(T)},get volume(){return I(L)}}),N(wt),N(St),N(Ze);var Ye=$(Ze,2);Wt(yl(Ye,{get field(){return I(E)},get item(){return I(O)},get label(){return I(j)},ondelete:Be,onsave:ee,get title(){return I(q)}}),ie=>ve(g,ie,!0),()=>I(g));var Pt=$(Ye,2);Wt(Rl(Pt,{get item(){return I(U)},get levels(){return z},ondelete:ce,onsave:Ke}),ie=>ve(S,ie,!0),()=>I(S));var Nt=$(Pt,2);Wt($l(Nt,{get item(){return I(le)},ondelete:Ve,onsave:oe}),ie=>ve(B,ie,!0),()=>I(B));var Mn=$(Nt,2);Wt(Yl(Mn,{}),ie=>ve(F,ie,!0),()=>I(F)),Ne(()=>Gt(St,"data-screen",I(K)===0?"fasting":"hours")),de(o,rt),lt()}xt(["click"]);export{pc as component};
