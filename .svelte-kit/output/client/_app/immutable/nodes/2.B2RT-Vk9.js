import"../chunks/CWj6FrbW.js";import{i as pi,c as gi,d as st,n as mi,a as yi,o as sn,b as bi,s as we}from"../chunks/Erbj99cd.js";import{a3 as fo,av as ba,aw as _i,h as _t,a5 as gn,ac as _a,q as wa,af as wi,b as ho,i as sr,d as no,w as m,A as ki,r as xi,e as Di,g as Jo,j as Kn,m as on,a6 as ka,a9 as Si,k as xa,l as pr,p as Ti,ax as Gr,ad as Da,a1 as ro,ay as Xo,ar as Ei,az as Zo,aA as vo,aB as Ci,aC as Oi,aD as dr,aE as po,aF as Ii,a7 as Sa,aG as Ta,aH as Pi,V as je,aI as Ai,aa as Mi,a8 as ji,ag as $o,aJ as Ki,n as Ea,aK as qi,aL as Fi,aM as Ri,aN as Bi,aO as Ni,aP as Hi,z as Li,aQ as zi,R as $e,K as Ui,c as an,f as Dt,a as he,W as et,as as be,y as oe,aR as Yi,aS as Vi,X as L,Y as R,T as ye,Z as G,at as Ye,aT as Qr,x as oo}from"../chunks/J1024-jQ.js";import{i as ot,r as Wi,p as me,b as dt}from"../chunks/LcVB3aLj.js";const Gi=[];function Jr(o,r=!1){return ur(o,new Map,"",Gi)}function ur(o,r,a,s,l=null){if(typeof o=="object"&&o!==null){var f=r.get(o);if(f!==void 0)return f;if(o instanceof Map)return new Map(o);if(o instanceof Set)return new Set(o);if(fo(o)){var h=Array(o.length);r.set(o,h),l!==null&&r.set(l,h);for(var g=0;g<o.length;g+=1){var x=o[g];g in o&&(h[g]=ur(x,r,a,s))}return h}if(ba(o)===_i){h={},r.set(o,h),l!==null&&r.set(l,h);for(var I in o)h[I]=ur(o[I],r,a,s);return h}if(o instanceof Date)return structuredClone(o);if(typeof o.toJSON=="function")return ur(o.toJSON(),r,a,s,o)}if(o instanceof EventTarget)return o;try{return structuredClone(o)}catch{return o}}function Qi(o,r){if(r){const a=document.body;o.autofocus=!0,wa(()=>{document.activeElement===a&&o.focus()})}}function Ji(o){_t&&gn(o)!==null&&_a(o)}function Tt(o,r){return r}function Xi(o,r,a,s){for(var l=[],f=r.length,h=0;h<f;h++)Ci(r[h].e,l,!0);var g=f>0&&l.length===0&&a!==null;if(g){var x=a.parentNode;_a(x),x.append(a),s.clear(),Wt(o,r[0].prev,r[f-1].next)}Oi(l,()=>{for(var I=0;I<f;I++){var j=r[I];g||(s.delete(j.k),Wt(o,j.prev,j.next)),dr(j.e,!g)}})}function Et(o,r,a,s,l,f=null){var h=o,g={flags:r,items:new Map,first:null},x=(r&Ta)!==0;if(x){var I=o;h=_t?sr(gn(I)):I.appendChild(wi())}_t&&no();var j=null,M=!1,D=ki(()=>{var H=a();return fo(H)?H:H==null?[]:Da(H)});ho(()=>{var H=m(D),z=H.length;if(M&&z===0)return;M=z===0;let N=!1;if(_t){var V=xi(h)===Di;V!==(z===0)&&(h=Jo(),sr(h),Kn(!1),N=!0)}if(_t){for(var K=null,S,P=0;P<z;P++){if(on.nodeType===ka&&on.data===Si){h=on,N=!0,Kn(!1);break}var w=H[P],B=s(w,P);S=Ca(on,g,K,null,w,B,P,l,r,a),g.items.set(B,S),K=S}z>0&&sr(Jo())}_t||Zi(H,g,h,l,r,s,a),f!==null&&(z===0?j?xa(j):j=pr(()=>f(h)):j!==null&&Ti(j,()=>{j=null})),N&&Kn(!0),m(D)}),_t&&(h=on)}function Zi(o,r,a,s,l,f,h){var Ne,He,Qe,ht;var g=(l&Pi)!==0,x=(l&(po|vo))!==0,I=o.length,j=r.items,M=r.first,D=M,H,z=null,N,V=[],K=[],S,P,w,B;if(g)for(B=0;B<I;B+=1)S=o[B],P=f(S,B),w=j.get(P),w!==void 0&&((Ne=w.a)==null||Ne.measure(),(N??(N=new Set)).add(w));for(B=0;B<I;B+=1){if(S=o[B],P=f(S,B),w=j.get(P),w===void 0){var W=D?D.e.nodes_start:a;z=Ca(W,r,z,z===null?r.first:z.next,S,P,B,s,l,h),j.set(P,z),V=[],K=[],D=z.next;continue}if(x&&$i(w,S,B,l),(w.e.f&Gr)!==0&&(xa(w.e),g&&((He=w.a)==null||He.unfix(),(N??(N=new Set)).delete(w))),w!==D){if(H!==void 0&&H.has(w)){if(V.length<K.length){var Y=K[0],ie;z=Y.prev;var ve=V[0],le=V[V.length-1];for(ie=0;ie<V.length;ie+=1)ea(V[ie],Y,a);for(ie=0;ie<K.length;ie+=1)H.delete(K[ie]);Wt(r,ve.prev,le.next),Wt(r,z,ve),Wt(r,le,Y),D=Y,z=le,B-=1,V=[],K=[]}else H.delete(w),ea(w,D,a),Wt(r,w.prev,w.next),Wt(r,w,z===null?r.first:z.next),Wt(r,z,w),z=w;continue}for(V=[],K=[];D!==null&&D.k!==P;)(D.e.f&Gr)===0&&(H??(H=new Set)).add(D),K.push(D),D=D.next;if(D===null)continue;w=D}V.push(w),z=w,D=w.next}if(D!==null||H!==void 0){for(var De=H===void 0?[]:Da(H);D!==null;)(D.e.f&Gr)===0&&De.push(D),D=D.next;var pe=De.length;if(pe>0){var ke=(l&Ta)!==0&&I===0?a:null;if(g){for(B=0;B<pe;B+=1)(Qe=De[B].a)==null||Qe.measure();for(B=0;B<pe;B+=1)(ht=De[B].a)==null||ht.fix()}Xi(r,De,ke,j)}}g&&wa(()=>{var Le;if(N!==void 0)for(w of N)(Le=w.a)==null||Le.apply()}),ro.first=r.first&&r.first.e,ro.last=z&&z.e}function $i(o,r,a,s){(s&po)!==0&&Xo(o.v,r),(s&vo)!==0?Xo(o.i,a):o.i=a}function Ca(o,r,a,s,l,f,h,g,x,I){var j=(x&po)!==0,M=(x&Ii)===0,D=j?M?Ei(l,!1,!1):Zo(l):l,H=(x&vo)===0?h:Zo(h),z={i:H,v:D,k:f,a:null,e:null,prev:a,next:s};try{return z.e=pr(()=>g(o,D,H,I),_t),z.e.prev=a&&a.e,z.e.next=s&&s.e,a===null?r.first=z:(a.next=z,a.e.next=z.e),s!==null&&(s.prev=z,s.e.prev=z.e),z}finally{}}function ea(o,r,a){for(var s=o.next?o.next.e.nodes_start:a,l=r?r.e.nodes_start:a,f=o.e.nodes_start;f!==s;){var h=Sa(f);l.before(f),f=h}}function Wt(o,r,a){r===null?o.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}function es(o,r,a=!1,s=!1,l=!1){var f=o,h="";je(()=>{var g=ro;if(h===(h=r()??"")){_t&&no();return}if(g.nodes_start!==null&&(Ai(g.nodes_start,g.nodes_end),g.nodes_start=g.nodes_end=null),h!==""){if(_t){on.data;for(var x=no(),I=x;x!==null&&(x.nodeType!==ka||x.data!=="");)I=x,x=Sa(x);if(x===null)throw Mi(),ji;$o(on,I),f=sr(x);return}var j=h+"";a?j=`<svg>${j}</svg>`:s&&(j=`<math>${j}</math>`);var M=Ki(j);if((a||s)&&(M=gn(M)),$o(gn(M),M.lastChild),a||s)for(;gn(M);)f.before(gn(M));else f.before(M)}})}function ts(o,r){var a=void 0,s;ho(()=>{a!==(a=r())&&(s&&(dr(s),s=null),a&&(s=pr(()=>{Ea(()=>a(o))})))})}function Oa(o){var r,a,s="";if(typeof o=="string"||typeof o=="number")s+=o;else if(typeof o=="object")if(Array.isArray(o)){var l=o.length;for(r=0;r<l;r++)o[r]&&(a=Oa(o[r]))&&(s&&(s+=" "),s+=a)}else for(a in o)o[a]&&(s&&(s+=" "),s+=a);return s}function ns(){for(var o,r,a=0,s="",l=arguments.length;a<l;a++)(o=arguments[a])&&(r=Oa(o))&&(s&&(s+=" "),s+=r);return s}function rs(o){return typeof o=="object"?ns(o):o??""}const ta=[...` 	
\r\fÂ \v\uFEFF`];function os(o,r,a){var s=o==null?"":""+o;if(r&&(s=s?s+" "+r:r),a){for(var l in a)if(a[l])s=s?s+" "+l:l;else if(s.length)for(var f=l.length,h=0;(h=s.indexOf(l,h))>=0;){var g=h+f;(h===0||ta.includes(s[h-1]))&&(g===s.length||ta.includes(s[g]))?s=(h===0?"":s.substring(0,h))+s.substring(g+1):h=g}}return s===""?null:s}function na(o,r=!1){var a=r?" !important;":";",s="";for(var l in o){var f=o[l];f!=null&&f!==""&&(s+=" "+l+": "+f+a)}return s}function Xr(o){return o[0]!=="-"||o[1]!=="-"?o.toLowerCase():o}function as(o,r){if(r){var a="",s,l;if(Array.isArray(r)?(s=r[0],l=r[1]):s=r,o){o=String(o).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var f=!1,h=0,g=!1,x=[];s&&x.push(...Object.keys(s).map(Xr)),l&&x.push(...Object.keys(l).map(Xr));var I=0,j=-1;const N=o.length;for(var M=0;M<N;M++){var D=o[M];if(g?D==="/"&&o[M-1]==="*"&&(g=!1):f?f===D&&(f=!1):D==="/"&&o[M+1]==="*"?g=!0:D==='"'||D==="'"?f=D:D==="("?h++:D===")"&&h--,!g&&f===!1&&h===0){if(D===":"&&j===-1)j=M;else if(D===";"||M===N-1){if(j!==-1){var H=Xr(o.substring(I,j).trim());if(!x.includes(H)){D!==";"&&M++;var z=o.substring(I,M).trim();a+=" "+z+";"}}I=M+1,j=-1}}}}return s&&(a+=na(s)),l&&(a+=na(l,!0)),a=a.trim(),a===""?null:a}return o==null?null:String(o)}function Xe(o,r,a,s,l,f){var h=o.__className;if(_t||h!==a||h===void 0){var g=os(a,s,f);(!_t||g!==o.getAttribute("class"))&&(g==null?o.removeAttribute("class"):r?o.className=g:o.setAttribute("class",g)),o.__className=a}else if(f&&l!==f)for(var x in f){var I=!!f[x];(l==null||I!==!!l[x])&&o.classList.toggle(x,I)}return f}function Zr(o,r={},a,s){for(var l in a){var f=a[l];r[l]!==f&&(a[l]==null?o.style.removeProperty(l):o.style.setProperty(l,f,s))}}function mn(o,r,a,s){var l=o.__style;if(_t||l!==r){var f=as(r,s);(!_t||f!==o.getAttribute("style"))&&(f==null?o.removeAttribute("style"):o.style.cssText=f),o.__style=r}else s&&(Array.isArray(s)?(Zr(o,a==null?void 0:a[0],s[0]),Zr(o,a==null?void 0:a[1],s[1],"important")):Zr(o,a,s));return s}function ao(o,r,a){if(o.multiple){if(r==null)return;if(!fo(r))return qi();for(var s of o.options)s.selected=r.includes(ra(s));return}for(s of o.options){var l=ra(s);if(Fi(l,r)){s.selected=!0;return}}(!a||r!==void 0)&&(o.selectedIndex=-1)}function is(o){var r=new MutationObserver(()=>{ao(o,o.__value)});r.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ri(()=>{r.disconnect()})}function ra(o){return"__value"in o?o.__value:o.value}const Pn=Symbol("class"),An=Symbol("style"),Ia=Symbol("is custom element"),Pa=Symbol("is html");function ss(o,r){var a=go(o);a.value===(a.value=r??void 0)||o.value===r&&(r!==0||o.nodeName!=="PROGRESS")||(o.value=r??"")}function us(o,r){r?o.hasAttribute("selected")||o.setAttribute("selected",""):o.removeAttribute("selected")}function Gt(o,r,a,s){var l=go(o);_t&&(l[r]=o.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&o.nodeName==="LINK")||l[r]!==(l[r]=a)&&(r==="loading"&&(o[Hi]=a),a==null?o.removeAttribute(r):typeof a!="string"&&Aa(o).includes(r)?o[r]=a:o.setAttribute(r,a))}function ls(o,r,a,s,l=!1){var f=go(o),h=f[Ia],g=!f[Pa];let x=_t&&h;x&&Kn(!1);var I=r||{},j=o.tagName==="OPTION";for(var M in r)M in a||(a[M]=null);a.class?a.class=rs(a.class):a[Pn]&&(a.class=null),a[An]&&(a.style??(a.style=null));var D=Aa(o);for(const P in a){let w=a[P];if(j&&P==="value"&&w==null){o.value=o.__value="",I[P]=w;continue}if(P==="class"){var H=o.namespaceURI==="http://www.w3.org/1999/xhtml";Xe(o,H,w,s,r==null?void 0:r[Pn],a[Pn]),I[P]=w,I[Pn]=a[Pn];continue}if(P==="style"){mn(o,w,r==null?void 0:r[An],a[An]),I[P]=w,I[An]=a[An];continue}var z=I[P];if(!(w===z&&!(w===void 0&&o.hasAttribute(P)))){I[P]=w;var N=P[0]+P[1];if(N!=="$$")if(N==="on"){const B={},W="$$"+P;let Y=P.slice(2);var V=yi(Y);if(pi(Y)&&(Y=Y.slice(0,-7),B.capture=!0),!V&&z){if(w!=null)continue;o.removeEventListener(Y,I[W],B),I[W]=null}if(w!=null)if(V)o[`__${Y}`]=w,st([Y]);else{let ie=function(ve){I[P].call(this,ve)};I[W]=gi(Y,o,ie,B)}else V&&(o[`__${Y}`]=void 0)}else if(P==="style")Gt(o,P,w);else if(P==="autofocus")Qi(o,!!w);else if(!h&&(P==="__value"||P==="value"&&w!=null))o.value=o.__value=w;else if(P==="selected"&&j)us(o,w);else{var K=P;g||(K=mi(K));var S=K==="defaultValue"||K==="defaultChecked";if(w==null&&!h&&!S)if(f[P]=null,K==="value"||K==="checked"){let B=o;const W=r===void 0;if(K==="value"){let Y=B.defaultValue;B.removeAttribute(K),B.defaultValue=Y,B.value=B.__value=W?Y:null}else{let Y=B.defaultChecked;B.removeAttribute(K),B.defaultChecked=Y,B.checked=W?Y:!1}}else o.removeAttribute(P);else S||D.includes(K)&&(h||typeof w!="string")?o[K]=w:typeof w!="function"&&Gt(o,K,w)}}}return x&&Kn(!0),I}function oa(o,r,a=[],s,l=!1,f=Li){const h=a.map(f);var g=void 0,x={},I=o.nodeName==="SELECT",j=!1;if(ho(()=>{var D=r(...h.map(m)),H=ls(o,g,D,s,l);j&&I&&"value"in D&&ao(o,D.value,!1);for(let N of Object.getOwnPropertySymbols(x))D[N]||dr(x[N]);for(let N of Object.getOwnPropertySymbols(D)){var z=D[N];N.description===zi&&(!g||z!==g[N])&&(x[N]&&dr(x[N]),x[N]=pr(()=>ts(o,()=>z))),H[N]=z}g=H}),I){var M=o;Ea(()=>{ao(M,g.value),is(M)})}j=!0}function go(o){return o.__attributes??(o.__attributes={[Ia]:o.nodeName.includes("-"),[Pa]:o.namespaceURI===Bi})}var aa=new Map;function Aa(o){var r=aa.get(o.nodeName);if(r)return r;aa.set(o.nodeName,r=[]);for(var a,s=o,l=Element.prototype;l!==s;){a=Ni(s);for(var f in a)a[f].set&&r.push(f);s=ba(s)}return r}var cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ma(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var lr={exports:{}},fs=lr.exports,ia;function ds(){return ia||(ia=1,function(o,r){(function(a,s){o.exports=s()})(fs,function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)};function l(e,t,n){for(var i,u=0,c=t.length;u<c;u++)!i&&u in t||((i=i||Array.prototype.slice.call(t,0,u))[u]=t[u]);return e.concat(i||Array.prototype.slice.call(t))}var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:cs,h=Object.keys,g=Array.isArray;function x(e,t){return typeof t!="object"||h(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||f.Promise||(f.Promise=Promise);var I=Object.getPrototypeOf,j={}.hasOwnProperty;function M(e,t){return j.call(e,t)}function D(e,t){typeof t=="function"&&(t=t(I(e))),(typeof Reflect>"u"?h:Reflect.ownKeys)(t).forEach(function(n){z(e,n,t[n])})}var H=Object.defineProperty;function z(e,t,n,i){H(e,t,x(n&&M(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function N(e){return{from:function(t){return e.prototype=Object.create(t.prototype),z(e.prototype,"constructor",e),{extend:D.bind(null,e.prototype)}}}}var V=Object.getOwnPropertyDescriptor,K=[].slice;function S(e,t,n){return K.call(e,t,n)}function P(e,t){return t(e)}function w(e){if(!e)throw new Error("Assertion Failed")}function B(e){f.setImmediate?setImmediate(e):setTimeout(e,0)}function W(e,t){if(typeof t=="string"&&M(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],i=0,u=t.length;i<u;++i){var c=W(e,t[i]);n.push(c)}return n}var d=t.indexOf(".");if(d!==-1){var v=e[t.substr(0,d)];return v==null?void 0:W(v,t.substr(d+1))}}function Y(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){w(typeof n!="string"&&"length"in n);for(var i=0,u=t.length;i<u;++i)Y(e,t[i],n[i])}else{var c,d,v=t.indexOf(".");v!==-1?(c=t.substr(0,v),(d=t.substr(v+1))===""?n===void 0?g(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=n:Y(v=!(v=e[c])||!M(e,c)?e[c]={}:v,d,n)):n===void 0?g(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ie(e){var t,n={};for(t in e)M(e,t)&&(n[t]=e[t]);return n}var ve=[].concat;function le(e){return ve.apply([],e)}var jt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(le([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return f[e]}),De=new Set(jt.map(function(e){return f[e]})),pe=null;function ke(e){return pe=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var i=pe.get(n);if(i)return i;if(g(n)){i=[],pe.set(n,i);for(var u=0,c=n.length;u<c;++u)i.push(t(n[u]))}else if(De.has(n.constructor))i=n;else{var d,v=I(n);for(d in i=v===Object.prototype?{}:Object.create(v),pe.set(n,i),n)M(n,d)&&(i[d]=t(n[d]))}return i}(e),pe=null,e}var Ne={}.toString;function He(e){return Ne.call(e).slice(8,-1)}var Qe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ht=typeof Qe=="symbol"?function(e){var t;return e!=null&&(t=e[Qe])&&t.apply(e)}:function(){return null};function Le(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var ut={};function Ve(e){var t,n,i,u;if(arguments.length===1){if(g(e))return e.slice();if(this===ut&&typeof e=="string")return[e];if(u=ht(e)){for(n=[];!(i=u.next()).done;)n.push(i.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var ne=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Nt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],It=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Nt),fe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function de(e,t){this.name=e,this.message=t}function qe(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,i,u){return u.indexOf(n)===i}).join(`
`)}function Ee(e,t,n,i){this.failures=t,this.failedKeys=i,this.successCount=n,this.message=qe(e,t)}function Fe(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=qe(e,this.failures)}N(de).from(Error).extend({toString:function(){return this.name+": "+this.message}}),N(Ee).from(de),N(Fe).from(de);var Pe=It.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ue=de,ae=It.reduce(function(e,t){var n=t+"Error";function i(u,c){this.name=n,u?typeof u=="string"?(this.message="".concat(u).concat(c?`
 `+c:""),this.inner=c||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=fe[t]||n,this.inner=null)}return N(i).from(Ue),e[t]=i,e},{});ae.Syntax=SyntaxError,ae.Type=TypeError,ae.Range=RangeError;var lt=Nt.reduce(function(e,t){return e[t+"Error"]=ae[t],e},{}),it=It.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=ae[t]),e},{});function Se(){}function vt(e){return e}function pt(e,t){return e==null||e===vt?t:function(n){return t(e(n))}}function tt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Pt(e,t){return e===Se?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var i=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?tt(i,this.onsuccess):i),u&&(this.onerror=this.onerror?tt(u,this.onerror):u),c!==void 0?c:n}}function gt(e,t){return e===Se?t:function(){e.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?tt(n,this.onsuccess):n),i&&(this.onerror=this.onerror?tt(i,this.onerror):i)}}function wt(e,t){return e===Se?t:function(n){var i=e.apply(this,arguments);x(n,i);var u=this.onsuccess,c=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?tt(u,this.onsuccess):u),c&&(this.onerror=this.onerror?tt(c,this.onerror):c),i===void 0?n===void 0?void 0:n:x(i,n)}}function kt(e,t){return e===Se?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function St(e,t){return e===Se?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var i=this,u=arguments.length,c=new Array(u);u--;)c[u]=arguments[u];return n.then(function(){return t.apply(i,c)})}return t.apply(this,arguments)}}it.ModifyError=Ee,it.DexieError=de,it.BulkError=Fe;var We=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Mt(e){We=e}var Qt={},bn=100,jt=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,I(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,I(t),e]}(),Nt=jt[0],It=jt[1],jt=jt[2],It=It&&It.then,Ft=Nt&&Nt.constructor,re=!!jt,ce=function(e,t){Jt.push([e,t]),Re&&(queueMicrotask(yr),Re=!1)},ge=!0,Re=!0,Te=[],Ke=[],Ie=vt,Ae={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Se,pgp:!1,env:{},finalize:Se},ue=Ae,Jt=[],ze=0,at=[];function ee(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=ue;if(typeof e!="function"){if(e!==Qt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&un(this,this._value))}this._state=null,this._value=null,++t.ref,function n(i,u){try{u(function(c){if(i._state===null){if(c===i)throw new TypeError("A promise cannot be resolved with itself.");var d=i._lib&&ln();c&&typeof c.then=="function"?n(i,function(v,y){c instanceof ee?c._then(v,y):c.then(v,y)}):(i._state=!0,i._value=c,At(i)),d&&cn()}},un.bind(null,i))}catch(c){un(i,c)}}(this,e)}var _n={get:function(){var e=ue,t=Hn;function n(i,u){var c=this,d=!e.global&&(e!==ue||t!==Hn),v=d&&!Lt(),y=new ee(function(_,E){Xt(c,new wn(ko(i,e,d,v),ko(u,e,d,v),_,E,e))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return n.prototype=Qt,n},set:function(e){z(this,"then",e&&e.prototype===Qt?_n:{get:function(){return e},set:_n.set})}};function wn(e,t,n,i,u){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=i,this.psd=u}function un(e,t){var n,i;Ke.push(t),e._state===null&&(n=e._lib&&ln(),t=Ie(t),e._state=!1,e._value=t,i=e,Te.some(function(u){return u._value===i._value})||Te.push(i),At(e),n&&cn())}function At(e){var t=e._listeners;e._listeners=[];for(var n=0,i=t.length;n<i;++n)Xt(e,t[n]);var u=e._PSD;--u.ref||u.finalize(),ze===0&&(++ze,ce(function(){--ze==0&&br()},[]))}function Xt(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ze,ce(Fn,[n,e,t])}else e._listeners.push(t)}function Fn(e,t,n){try{var i,u=t._value;!t._state&&Ke.length&&(Ke=[]),i=We&&t._consoleTask?t._consoleTask.run(function(){return e(u)}):e(u),t._state||Ke.indexOf(u)!==-1||function(c){for(var d=Te.length;d;)if(Te[--d]._value===c._value)return Te.splice(d,1)}(t),n.resolve(i)}catch(c){n.reject(c)}finally{--ze==0&&br(),--n.psd.ref||n.psd.finalize()}}function yr(){Zt(Ae,function(){ln()&&cn()})}function ln(){var e=ge;return Re=ge=!1,e}function cn(){var e,t,n;do for(;0<Jt.length;)for(e=Jt,Jt=[],n=e.length,t=0;t<n;++t){var i=e[t];i[0].apply(null,i[1])}while(0<Jt.length);Re=ge=!0}function br(){var e=Te;Te=[],e.forEach(function(i){i._PSD.onunhandled.call(null,i._value,i)});for(var t=at.slice(0),n=t.length;n;)t[--n]()}function Rn(e){return new ee(Qt,!1,e)}function Je(e,t){var n=ue;return function(){var i=ln(),u=ue;try{return zt(n,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{zt(u,!1),i&&cn()}}}D(ee.prototype,{then:_n,_then:function(e,t){Xt(this,new wn(null,null,e,t,ue))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(i){return(i instanceof t?n:Rn)(i)}):this.then(null,function(i){return(i&&i.name===t?n:Rn)(i)})},finally:function(e){return this.then(function(t){return ee.resolve(e()).then(function(){return t})},function(t){return ee.resolve(e()).then(function(){return Rn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new ee(function(i,u){var c=setTimeout(function(){return u(new ae.Timeout(t))},e);n.then(i,u).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&z(ee.prototype,Symbol.toStringTag,"Dexie.Promise"),Ae.env=wo(),D(ee,{all:function(){var e=Ve.apply(null,arguments).map(Ln);return new ee(function(t,n){e.length===0&&t([]);var i=e.length;e.forEach(function(u,c){return ee.resolve(u).then(function(d){e[c]=d,--i||t(e)},n)})})},resolve:function(e){return e instanceof ee?e:e&&typeof e.then=="function"?new ee(function(t,n){e.then(t,n)}):new ee(Qt,!0,e)},reject:Rn,race:function(){var e=Ve.apply(null,arguments).map(Ln);return new ee(function(t,n){e.map(function(i){return ee.resolve(i).then(t,n)})})},PSD:{get:function(){return ue},set:function(e){return ue=e}},totalEchoes:{get:function(){return Hn}},newPSD:Ht,usePSD:Zt,scheduler:{get:function(){return ce},set:function(e){ce=e}},rejectionMapper:{get:function(){return Ie},set:function(e){Ie=e}},follow:function(e,t){return new ee(function(n,i){return Ht(function(u,c){var d=ue;d.unhandleds=[],d.onunhandled=c,d.finalize=tt(function(){var v,y=this;v=function(){y.unhandleds.length===0?u():c(y.unhandleds[0])},at.push(function _(){v(),at.splice(at.indexOf(_),1)}),++ze,ce(function(){--ze==0&&br()},[])},d.finalize),e()},t,n,i)})}}),Ft&&(Ft.allSettled&&z(ee,"allSettled",function(){var e=Ve.apply(null,arguments).map(Ln);return new ee(function(t){e.length===0&&t([]);var n=e.length,i=new Array(n);e.forEach(function(u,c){return ee.resolve(u).then(function(d){return i[c]={status:"fulfilled",value:d}},function(d){return i[c]={status:"rejected",reason:d}}).then(function(){return--n||t(i)})})})}),Ft.any&&typeof AggregateError<"u"&&z(ee,"any",function(){var e=Ve.apply(null,arguments).map(Ln);return new ee(function(t,n){e.length===0&&n(new AggregateError([]));var i=e.length,u=new Array(i);e.forEach(function(c,d){return ee.resolve(c).then(function(v){return t(v)},function(v){u[d]=v,--i||n(new AggregateError(u))})})})}),Ft.withResolvers&&(ee.withResolvers=Ft.withResolvers));var ct={awaits:0,echoes:0,id:0},Va=0,Bn=[],Nn=0,Hn=0,Wa=0;function Ht(e,t,n,i){var u=ue,c=Object.create(u);return c.parent=u,c.ref=0,c.global=!1,c.id=++Wa,Ae.env,c.env=re?{Promise:ee,PromiseProp:{value:ee,configurable:!0,writable:!0},all:ee.all,race:ee.race,allSettled:ee.allSettled,any:ee.any,resolve:ee.resolve,reject:ee.reject}:{},t&&x(c,t),++u.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},i=Zt(c,e,n,i),c.ref===0&&c.finalize(),i}function fn(){return ct.id||(ct.id=++Va),++ct.awaits,ct.echoes+=bn,ct.id}function Lt(){return!!ct.awaits&&(--ct.awaits==0&&(ct.id=0),ct.echoes=ct.awaits*bn,!0)}function Ln(e){return ct.echoes&&e&&e.constructor===Ft?(fn(),e.then(function(t){return Lt(),t},function(t){return Lt(),nt(t)})):e}function Ga(){var e=Bn[Bn.length-1];Bn.pop(),zt(e,!1)}function zt(e,t){var n,i=ue;(t?!ct.echoes||Nn++&&e===ue:!Nn||--Nn&&e===ue)||queueMicrotask(t?(function(u){++Hn,ct.echoes&&--ct.echoes!=0||(ct.echoes=ct.awaits=ct.id=0),Bn.push(ue),zt(u,!0)}).bind(null,e):Ga),e!==ue&&(ue=e,i===Ae&&(Ae.env=wo()),re&&(n=Ae.env.Promise,t=e.env,(i.global||e.global)&&(Object.defineProperty(f,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function wo(){var e=f.Promise;return re?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Zt(e,t,n,i,u){var c=ue;try{return zt(e,!0),t(n,i,u)}finally{zt(c,!1)}}function ko(e,t,n,i){return typeof e!="function"?e:function(){var u=ue;n&&fn(),zt(t,!0);try{return e.apply(this,arguments)}finally{zt(u,!1),i&&queueMicrotask(Lt)}}}function _r(e){Promise===Ft&&ct.echoes===0?Nn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+It).indexOf("[native code]")===-1&&(fn=Lt=Se);var nt=ee.reject,$t="ï¿¿",Rt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",xo="String expected.",dn=[],zn="__dbnames",wr="readonly",kr="readwrite";function en(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Do={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Un(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=ke(t))[e],t}}function So(){throw ae.Type()}function Me(e,t){try{var n=To(e),i=To(t);if(n!==i)return n==="Array"?1:i==="Array"?-1:n==="binary"?1:i==="binary"?-1:n==="string"?1:i==="string"?-1:n==="Date"?1:i!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(u,c){for(var d=u.length,v=c.length,y=d<v?d:v,_=0;_<y;++_)if(u[_]!==c[_])return u[_]<c[_]?-1:1;return d===v?0:d<v?-1:1}(Eo(e),Eo(t));case"Array":return function(u,c){for(var d=u.length,v=c.length,y=d<v?d:v,_=0;_<y;++_){var E=Me(u[_],c[_]);if(E!==0)return E}return d===v?0:d<v?-1:1}(e,t)}}catch{}return NaN}function To(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=He(e),e==="ArrayBuffer"?"binary":e)}function Eo(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Co=(Ge.prototype._trans=function(e,t,n){var i=this._tx||ue.trans,u=this.name,c=We&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function d(_,E,p){if(!p.schema[u])throw new ae.NotFound("Table "+u+" not part of transaction");return t(p.idbtrans,p)}var v=ln();try{var y=i&&i.db._novip===this.db._novip?i===ue.trans?i._promise(e,d,n):Ht(function(){return i._promise(e,d,n)},{trans:i,transless:ue.transless||ue}):function _(E,p,O,b){if(E.idbdb&&(E._state.openComplete||ue.letThrough||E._vip)){var T=E._createTransaction(p,O,E._dbSchema);try{T.create(),E._state.PR1398_maxLoop=3}catch(C){return C.name===Pe.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return _(E,p,O,b)})):nt(C)}return T._promise(p,function(C,k){return Ht(function(){return ue.trans=T,b(C,k,T)})}).then(function(C){if(p==="readwrite")try{T.idbtrans.commit()}catch{}return p==="readonly"?C:T._completion.then(function(){return C})})}if(E._state.openComplete)return nt(new ae.DatabaseClosed(E._state.dbOpenError));if(!E._state.isBeingOpened){if(!E._state.autoOpen)return nt(new ae.DatabaseClosed);E.open().catch(Se)}return E._state.dbReadyPromise.then(function(){return _(E,p,O,b)})}(this.db,e,[this.name],d);return c&&(y._consoleTask=c,y=y.catch(function(_){return console.trace(_),nt(_)})),y}finally{v&&cn()}},Ge.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?nt(new ae.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return n.core.get({trans:i,key:e}).then(function(u){return n.hook.reading.fire(u)})}).then(t)},Ge.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(g(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=h(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&t.every(function(_){return 0<=v.keyPath.indexOf(_)})){for(var y=0;y<t.length;++y)if(t.indexOf(v.keyPath[y])===-1)return!1;return!0}return!1}).sort(function(v,y){return v.keyPath.length-y.keyPath.length})[0];if(n&&this.db._maxKey!==$t){var c=n.keyPath.slice(0,t.length);return this.where(c).equals(c.map(function(y){return e[y]}))}!n&&We&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName;function u(v,y){return Me(v,y)===0}var d=t.reduce(function(p,y){var _=p[0],E=p[1],p=i[y],O=e[y];return[_||p,_||!p?en(E,p&&p.multi?function(b){return b=W(b,y),g(b)&&b.some(function(T){return u(O,T)})}:function(b){return u(O,W(b,y))}):E]},[null,null]),c=d[0],d=d[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(d):n?this.filter(d):this.where(t).equals("")},Ge.prototype.filter=function(e){return this.toCollection().and(e)},Ge.prototype.count=function(e){return this.toCollection().count(e)},Ge.prototype.offset=function(e){return this.toCollection().offset(e)},Ge.prototype.limit=function(e){return this.toCollection().limit(e)},Ge.prototype.each=function(e){return this.toCollection().each(e)},Ge.prototype.toArray=function(e){return this.toCollection().toArray(e)},Ge.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ge.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,g(e)?"[".concat(e.join("+"),"]"):e))},Ge.prototype.reverse=function(){return this.toCollection().reverse()},Ge.prototype.mapToClass=function(e){var t,n=this.db,i=this.name;function u(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof So&&(function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function E(){this.constructor=y}a(y,_),y.prototype=_===null?Object.create(_):(E.prototype=_.prototype,new E)}(u,t=e),Object.defineProperty(u.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),u.prototype.table=function(){return i},e=u);for(var c=new Set,d=e.prototype;d;d=I(d))Object.getOwnPropertyNames(d).forEach(function(y){return c.add(y)});function v(y){if(!y)return y;var _,E=Object.create(e.prototype);for(_ in y)if(!c.has(_))try{E[_]=y[_]}catch{}return E}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),e},Ge.prototype.defineClass=function(){return this.mapToClass(function(e){x(this,e)})},Ge.prototype.add=function(e,t){var n=this,i=this.schema.primKey,u=i.auto,c=i.keyPath,d=e;return c&&u&&(d=Un(c)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"add",keys:t!=null?[t]:null,values:[d]})}).then(function(v){return v.numFailures?ee.reject(v.failures[0]):v.lastResult}).then(function(v){if(c)try{Y(e,c,v)}catch{}return v})},Ge.prototype.update=function(e,t){return typeof e!="object"||g(e)?this.where(":id").equals(e).modify(t):(e=W(e,this.schema.primKey.keyPath),e===void 0?nt(new ae.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},Ge.prototype.put=function(e,t){var n=this,i=this.schema.primKey,u=i.auto,c=i.keyPath,d=e;return c&&u&&(d=Un(c)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"put",values:[d],keys:t!=null?[t]:null})}).then(function(v){return v.numFailures?ee.reject(v.failures[0]):v.lastResult}).then(function(v){if(c)try{Y(e,c,v)}catch{}return v})},Ge.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?ee.reject(n.failures[0]):void 0})},Ge.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Do})}).then(function(t){return t.numFailures?ee.reject(t.failures[0]):void 0})},Ge.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(i){return i.map(function(u){return t.hook.reading.fire(u)})})})},Ge.prototype.bulkAdd=function(e,t,n){var i=this,u=Array.isArray(t)?t:void 0,c=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(d){var _=i.schema.primKey,v=_.auto,_=_.keyPath;if(_&&u)throw new ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,_=_&&v?e.map(Un(_)):e;return i.core.mutate({trans:d,type:"add",keys:u,values:_,wantResults:c}).then(function(T){var p=T.numFailures,O=T.results,b=T.lastResult,T=T.failures;if(p===0)return c?O:b;throw new Fe("".concat(i.name,".bulkAdd(): ").concat(p," of ").concat(y," operations failed"),T)})})},Ge.prototype.bulkPut=function(e,t,n){var i=this,u=Array.isArray(t)?t:void 0,c=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(d){var _=i.schema.primKey,v=_.auto,_=_.keyPath;if(_&&u)throw new ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,_=_&&v?e.map(Un(_)):e;return i.core.mutate({trans:d,type:"put",keys:u,values:_,wantResults:c}).then(function(T){var p=T.numFailures,O=T.results,b=T.lastResult,T=T.failures;if(p===0)return c?O:b;throw new Fe("".concat(i.name,".bulkPut(): ").concat(p," of ").concat(y," operations failed"),T)})})},Ge.prototype.bulkUpdate=function(e){var t=this,n=this.core,i=e.map(function(d){return d.key}),u=e.map(function(d){return d.changes}),c=[];return this._trans("readwrite",function(d){return n.getMany({trans:d,keys:i,cache:"clone"}).then(function(v){var y=[],_=[];e.forEach(function(p,O){var b=p.key,T=p.changes,C=v[O];if(C){for(var k=0,A=Object.keys(T);k<A.length;k++){var q=A[k],F=T[q];if(q===t.schema.primKey.keyPath){if(Me(F,b)!==0)throw new ae.Constraint("Cannot update primary key in bulkUpdate()")}else Y(C,q,F)}c.push(O),y.push(b),_.push(C)}});var E=y.length;return n.mutate({trans:d,type:"put",keys:y,values:_,updates:{keys:i,changeSpecs:u}}).then(function(p){var O=p.numFailures,b=p.failures;if(O===0)return E;for(var T=0,C=Object.keys(b);T<C.length;T++){var k,A=C[T],q=c[Number(A)];q!=null&&(k=b[A],delete b[A],b[q]=k)}throw new Fe("".concat(t.name,".bulkUpdate(): ").concat(O," of ").concat(E," operations failed"),b)})})})},Ge.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"delete",keys:e})}).then(function(d){var u=d.numFailures,c=d.lastResult,d=d.failures;if(u===0)return c;throw new Fe("".concat(t.name,".bulkDelete(): ").concat(u," of ").concat(n," operations failed"),d)})},Ge);function Ge(){}function kn(e){function t(d,v){if(v){for(var y=arguments.length,_=new Array(y-1);--y;)_[y-1]=arguments[y];return n[d].subscribe.apply(null,_),e}if(typeof d=="string")return n[d]}var n={};t.addEventType=c;for(var i=1,u=arguments.length;i<u;++i)c(arguments[i]);return t;function c(d,v,y){if(typeof d!="object"){var _;v=v||kt;var E={subscribers:[],fire:y=y||Se,subscribe:function(p){E.subscribers.indexOf(p)===-1&&(E.subscribers.push(p),E.fire=v(E.fire,p))},unsubscribe:function(p){E.subscribers=E.subscribers.filter(function(O){return O!==p}),E.fire=E.subscribers.reduce(v,y)}};return n[d]=t[d]=E}h(_=d).forEach(function(p){var O=_[p];if(g(O))c(p,_[p][0],_[p][1]);else{if(O!=="asap")throw new ae.InvalidArgument("Invalid event config");var b=c(p,vt,function(){for(var T=arguments.length,C=new Array(T);T--;)C[T]=arguments[T];b.subscribers.forEach(function(k){B(function(){k.apply(null,C)})})})}})}}function xn(e,t){return N(t).from({prototype:e}),t}function hn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function xr(e,t){e.filter=en(e.filter,t)}function Dr(e,t,n){var i=e.replayFilter;e.replayFilter=i?function(){return en(i(),t())}:t,e.justLimit=n&&!i}function Yn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new ae.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Oo(e,t,n){var i=Yn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:i,range:e.range}})}function Vn(e,t,n,i){var u=e.replayFilter?en(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},d=function(v,y,_){var E,p;u&&!u(y,_,function(O){return y.stop(O)},function(O){return y.fail(O)})||((p=""+(E=y.primaryKey))=="[object ArrayBuffer]"&&(p=""+new Uint8Array(E)),M(c,p)||(c[p]=!0,t(v,y,_)))};return Promise.all([e.or._iterate(d,n),Io(Oo(e,i,n),e.algorithm,d,!e.keysOnly&&e.valueMapper)])}return Io(Oo(e,i,n),en(e.algorithm,u),t,!e.keysOnly&&e.valueMapper)}function Io(e,t,n,i){var u=Je(i?function(c,d,v){return n(i(c),d,v)}:n);return e.then(function(c){if(c)return c.start(function(){var d=function(){return c.continue()};t&&!t(c,function(v){return d=v},function(v){c.stop(v),d=Se},function(v){c.fail(v),d=Se})||u(c.value,c,function(v){return d=v}),d()})})}var Dn=(Po.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(g(n))return l(l([],g(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var i=t.remove;if(g(i))return g(e)?e.filter(function(u){return!i.includes(u)}).sort():[];if(typeof i=="number")return Number(e)-i;if(typeof i=="bigint")try{return BigInt(e)-i}catch{return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Po);function Po(e){this["@@propmod"]=e}var Qa=(Be.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,nt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Be.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,nt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Be.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=en(t.algorithm,e)},Be.prototype._iterate=function(e,t){return Vn(this._ctx,e,t,this._ctx.table.core)},Be.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&x(n,e),t._ctx=n,t},Be.prototype.raw=function(){return this._ctx.valueMapper=null,this},Be.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Vn(t,e,n,t.table.core)})},Be.prototype.count=function(e){var t=this;return this._read(function(n){var i=t._ctx,u=i.table.core;if(hn(i,!0))return u.count({trans:n,query:{index:Yn(i,u.schema),range:i.range}}).then(function(d){return Math.min(d,i.limit)});var c=0;return Vn(i,function(){return++c,!1},n,u).then(function(){return c})}).then(e)},Be.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),i=n[0],u=n.length-1;function c(y,_){return _?c(y[n[_]],_-1):y[i]}var d=this._ctx.dir==="next"?1:-1;function v(y,_){return Me(c(y,u),c(_,u))*d}return this.toArray(function(y){return y.sort(v)}).then(t)},Be.prototype.toArray=function(e){var t=this;return this._read(function(n){var i=t._ctx;if(i.dir==="next"&&hn(i,!0)&&0<i.limit){var u=i.valueMapper,c=Yn(i,i.table.core.schema);return i.table.core.query({trans:n,limit:i.limit,values:!0,query:{index:c,range:i.range}}).then(function(v){return v=v.result,u?v.map(u):v})}var d=[];return Vn(i,function(v){return d.push(v)},n,i.table.core).then(function(){return d})},e)},Be.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,hn(t)?Dr(t,function(){var n=e;return function(i,u){return n===0||(n===1?--n:u(function(){i.advance(n),n=0}),!1)}}):Dr(t,function(){var n=e;return function(){return--n<0}})),this},Be.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Dr(this._ctx,function(){var t=e;return function(n,i,u){return--t<=0&&i(u),0<=t}},!0),this},Be.prototype.until=function(e,t){return xr(this._ctx,function(n,i,u){return!e(n.value)||(i(u),t)}),this},Be.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},Be.prototype.last=function(e){return this.reverse().first(e)},Be.prototype.filter=function(e){var t;return xr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=en(t.isMatch,e),this},Be.prototype.and=function(e){return this.filter(e)},Be.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Be.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Be.prototype.desc=function(){return this.reverse()},Be.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){e(i.key,i)})},Be.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Be.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){e(i.primaryKey,i)})},Be.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,u){n.push(u.key)}).then(function(){return n}).then(e)},Be.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&hn(t,!0)&&0<t.limit)return this._read(function(i){var u=Yn(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:u,range:t.range}})}).then(function(i){return i.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,u){n.push(u.primaryKey)}).then(function(){return n}).then(e)},Be.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Be.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},Be.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Be.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return xr(this._ctx,function(u){var i=u.primaryKey.toString(),u=M(t,i);return t[i]=!0,!u}),this},Be.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(i){var u,c,d;d=typeof e=="function"?e:(u=h(e),c=u.length,function(k){for(var A=!1,q=0;q<c;++q){var F=u[q],U=e[F],Q=W(k,F);U instanceof Dn?(Y(k,F,U.execute(Q)),A=!0):Q!==U&&(Y(k,F,U),A=!0)}return A});var v=n.table.core,p=v.schema.primaryKey,y=p.outbound,_=p.extractKey,E=200,p=t.db._options.modifyChunkSize;p&&(E=typeof p=="object"?p[v.name]||p["*"]||200:p);function O(k,F){var q=F.failures,F=F.numFailures;T+=k-F;for(var U=0,Q=h(q);U<Q.length;U++){var $=Q[U];b.push(q[$])}}var b=[],T=0,C=[];return t.clone().primaryKeys().then(function(k){function A(F){var U=Math.min(E,k.length-F);return v.getMany({trans:i,keys:k.slice(F,F+U),cache:"immutable"}).then(function(Q){for(var $=[],J=[],X=y?[]:null,te=[],Z=0;Z<U;++Z){var se=Q[Z],xe={value:ke(se),primKey:k[F+Z]};d.call(xe,xe.value,xe)!==!1&&(xe.value==null?te.push(k[F+Z]):y||Me(_(se),_(xe.value))===0?(J.push(xe.value),y&&X.push(k[F+Z])):(te.push(k[F+Z]),$.push(xe.value)))}return Promise.resolve(0<$.length&&v.mutate({trans:i,type:"add",values:$}).then(function(Ce){for(var Oe in Ce.failures)te.splice(parseInt(Oe),1);O($.length,Ce)})).then(function(){return(0<J.length||q&&typeof e=="object")&&v.mutate({trans:i,type:"put",keys:X,values:J,criteria:q,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<F}).then(function(Ce){return O(J.length,Ce)})}).then(function(){return(0<te.length||q&&e===Sr)&&v.mutate({trans:i,type:"delete",keys:te,criteria:q,isAdditionalChunk:0<F}).then(function(Ce){return O(te.length,Ce)})}).then(function(){return k.length>F+U&&A(F+E)})})}var q=hn(n)&&n.limit===1/0&&(typeof e!="function"||e===Sr)&&{index:n.index,range:n.range};return A(0).then(function(){if(0<b.length)throw new Ee("Error modifying one or more objects",b,T,C);return k.length})})})},Be.prototype.delete=function(){var e=this._ctx,t=e.range;return hn(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var i=e.table.core.schema.primaryKey,u=t;return e.table.core.count({trans:n,query:{index:i,range:u}}).then(function(c){return e.table.core.mutate({trans:n,type:"deleteRange",range:u}).then(function(d){var v=d.failures;if(d.lastResult,d.results,d=d.numFailures,d)throw new Ee("Could not delete some values",Object.keys(v).map(function(y){return v[y]}),c-d);return c-d})})}):this.modify(Sr)},Be);function Be(){}var Sr=function(e,t){return t.value=null};function Ja(e,t){return e<t?-1:e===t?0:1}function Xa(e,t){return t<e?-1:e===t?0:1}function Ct(e,t,n){return e=e instanceof Mo?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function vn(e){return new e.Collection(e,function(){return Ao("")}).limit(0)}function Wn(e,t,n,i){var u,c,d,v,y,_,E,p=n.length;if(!n.every(function(T){return typeof T=="string"}))return Ct(e,xo);function O(T){u=T==="next"?function(k){return k.toUpperCase()}:function(k){return k.toLowerCase()},c=T==="next"?function(k){return k.toLowerCase()}:function(k){return k.toUpperCase()},d=T==="next"?Ja:Xa;var C=n.map(function(k){return{lower:c(k),upper:u(k)}}).sort(function(k,A){return d(k.lower,A.lower)});v=C.map(function(k){return k.upper}),y=C.map(function(k){return k.lower}),E=(_=T)==="next"?"":i}O("next"),e=new e.Collection(e,function(){return Ut(v[0],y[p-1]+i)}),e._ondirectionchange=function(T){O(T)};var b=0;return e._addAlgorithm(function(T,C,k){var A=T.key;if(typeof A!="string")return!1;var q=c(A);if(t(q,y,b))return!0;for(var F=null,U=b;U<p;++U){var Q=function($,J,X,te,Z,se){for(var xe=Math.min($.length,te.length),Ce=-1,Oe=0;Oe<xe;++Oe){var Ot=J[Oe];if(Ot!==te[Oe])return Z($[Oe],X[Oe])<0?$.substr(0,Oe)+X[Oe]+X.substr(Oe+1):Z($[Oe],te[Oe])<0?$.substr(0,Oe)+te[Oe]+X.substr(Oe+1):0<=Ce?$.substr(0,Ce)+J[Ce]+X.substr(Ce+1):null;Z($[Oe],Ot)<0&&(Ce=Oe)}return xe<te.length&&se==="next"?$+X.substr($.length):xe<$.length&&se==="prev"?$.substr(0,X.length):Ce<0?null:$.substr(0,Ce)+te[Ce]+X.substr(Ce+1)}(A,q,v[U],y[U],d,_);Q===null&&F===null?b=U+1:(F===null||0<d(F,Q))&&(F=Q)}return C(F!==null?function(){T.continue(F+E)}:k),!1}),e}function Ut(e,t,n,i){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:i}}function Ao(e){return{type:1,lower:e,upper:e}}var Mo=(Object.defineProperty(ft.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ft.prototype.between=function(e,t,n,i){n=n!==!1,i=i===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||i)&&(!n||!i)?vn(this):new this.Collection(this,function(){return Ut(e,t,!n,!i)})}catch{return Ct(this,Rt)}},ft.prototype.equals=function(e){return e==null?Ct(this,Rt):new this.Collection(this,function(){return Ao(e)})},ft.prototype.above=function(e){return e==null?Ct(this,Rt):new this.Collection(this,function(){return Ut(e,void 0,!0)})},ft.prototype.aboveOrEqual=function(e){return e==null?Ct(this,Rt):new this.Collection(this,function(){return Ut(e,void 0,!1)})},ft.prototype.below=function(e){return e==null?Ct(this,Rt):new this.Collection(this,function(){return Ut(void 0,e,!1,!0)})},ft.prototype.belowOrEqual=function(e){return e==null?Ct(this,Rt):new this.Collection(this,function(){return Ut(void 0,e)})},ft.prototype.startsWith=function(e){return typeof e!="string"?Ct(this,xo):this.between(e,e+$t,!0,!0)},ft.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Wn(this,function(t,n){return t.indexOf(n[0])===0},[e],$t)},ft.prototype.equalsIgnoreCase=function(e){return Wn(this,function(t,n){return t===n[0]},[e],"")},ft.prototype.anyOfIgnoreCase=function(){var e=Ve.apply(ut,arguments);return e.length===0?vn(this):Wn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},ft.prototype.startsWithAnyOfIgnoreCase=function(){var e=Ve.apply(ut,arguments);return e.length===0?vn(this):Wn(this,function(t,n){return n.some(function(i){return t.indexOf(i)===0})},e,$t)},ft.prototype.anyOf=function(){var e=this,t=Ve.apply(ut,arguments),n=this._cmp;try{t.sort(n)}catch{return Ct(this,Rt)}if(t.length===0)return vn(this);var i=new this.Collection(this,function(){return Ut(t[0],t[t.length-1])});i._ondirectionchange=function(c){n=c==="next"?e._ascending:e._descending,t.sort(n)};var u=0;return i._addAlgorithm(function(c,d,v){for(var y=c.key;0<n(y,t[u]);)if(++u===t.length)return d(v),!1;return n(y,t[u])===0||(d(function(){c.continue(t[u])}),!1)}),i},ft.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ft.prototype.noneOf=function(){var e=Ve.apply(ut,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ct(this,Rt)}var t=e.reduce(function(n,i){return n?n.concat([[n[n.length-1][1],i]]):[[-1/0,i]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},ft.prototype.inAnyRange=function(A,t){var n=this,i=this._cmp,u=this._ascending,c=this._descending,d=this._min,v=this._max;if(A.length===0)return vn(this);if(!A.every(function(q){return q[0]!==void 0&&q[1]!==void 0&&u(q[0],q[1])<=0}))return Ct(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ae.InvalidArgument);var y=!t||t.includeLowers!==!1,_=t&&t.includeUppers===!0,E,p=u;function O(q,F){return p(q[0],F[0])}try{(E=A.reduce(function(q,F){for(var U=0,Q=q.length;U<Q;++U){var $=q[U];if(i(F[0],$[1])<0&&0<i(F[1],$[0])){$[0]=d($[0],F[0]),$[1]=v($[1],F[1]);break}}return U===Q&&q.push(F),q},[])).sort(O)}catch{return Ct(this,Rt)}var b=0,T=_?function(q){return 0<u(q,E[b][1])}:function(q){return 0<=u(q,E[b][1])},C=y?function(q){return 0<c(q,E[b][0])}:function(q){return 0<=c(q,E[b][0])},k=T,A=new this.Collection(this,function(){return Ut(E[0][0],E[E.length-1][1],!y,!_)});return A._ondirectionchange=function(q){p=q==="next"?(k=T,u):(k=C,c),E.sort(O)},A._addAlgorithm(function(q,F,U){for(var Q,$=q.key;k($);)if(++b===E.length)return F(U),!1;return!T(Q=$)&&!C(Q)||(n._cmp($,E[b][1])===0||n._cmp($,E[b][0])===0||F(function(){p===u?q.continue(E[b][0]):q.continue(E[b][1])}),!1)}),A},ft.prototype.startsWithAnyOf=function(){var e=Ve.apply(ut,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?vn(this):this.inAnyRange(e.map(function(t){return[t,t+$t]})):Ct(this,"startsWithAnyOf() only works with strings")},ft);function ft(){}function Kt(e){return Je(function(t){return Sn(t),e(t.target.error),!1})}function Sn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Tn="storagemutated",Tr="x-storagemutated-1",Yt=kn(null,Tn),Za=(qt.prototype._lock=function(){return w(!ue.global),++this._reculock,this._reculock!==1||ue.global||(ue.lockOwnerFor=this),this},qt.prototype._unlock=function(){if(w(!ue.global),--this._reculock==0)for(ue.global||(ue.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Zt(e[1],e[0])}catch{}}return this},qt.prototype._locked=function(){return this._reculock&&ue.lockOwnerFor!==this},qt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,i=this.db._state.dbOpenError;if(w(!this.idbtrans),!e&&!n)switch(i&&i.name){case"DatabaseClosedError":throw new ae.DatabaseClosed(i);case"MissingAPIError":throw new ae.MissingAPI(i.message,i);default:throw new ae.OpenFailed(i)}if(!this.active)throw new ae.TransactionInactive;return w(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Je(function(u){Sn(u),t._reject(e.error)}),e.onabort=Je(function(u){Sn(u),t.active&&t._reject(new ae.Abort(e.error)),t.active=!1,t.on("abort").fire(u)}),e.oncomplete=Je(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Yt.storagemutated.fire(e.mutatedParts)}),this},qt.prototype._promise=function(e,t,n){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return nt(new ae.ReadOnly("Transaction is readonly"));if(!this.active)return nt(new ae.TransactionInactive);if(this._locked())return new ee(function(c,d){i._blockedFuncs.push([function(){i._promise(e,t,n).then(c,d)},ue])});if(n)return Ht(function(){var c=new ee(function(d,v){i._lock();var y=t(d,v,i);y&&y.then&&y.then(d,v)});return c.finally(function(){return i._unlock()}),c._lib=!0,c});var u=new ee(function(c,d){var v=t(c,d,i);v&&v.then&&v.then(c,d)});return u._lib=!0,u},qt.prototype._root=function(){return this.parent?this.parent._root():this},qt.prototype.waitFor=function(e){var t,n=this._root(),i=ee.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return i}):(n._waitingFor=i,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function c(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=c)}());var u=n._waitingFor;return new ee(function(c,d){i.then(function(v){return n._waitingQueue.push(Je(c.bind(null,v)))},function(v){return n._waitingQueue.push(Je(d.bind(null,v)))}).finally(function(){n._waitingFor===u&&(n._waitingFor=null)})})},qt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ae.Abort))},qt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(M(t,e))return t[e];var n=this.schema[e];if(!n)throw new ae.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},qt);function qt(){}function Er(e,t,n,i,u,c,d){return{name:e,keyPath:t,unique:n,multi:i,auto:u,compound:c,src:(n&&!d?"&":"")+(i?"*":"")+(u?"++":"")+jo(t)}}function jo(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Cr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(i=function(u){return[u.name,u]},n.reduce(function(u,c,d){return d=i(c,d),d&&(u[d[0]]=d[1]),u},{}))};var i}var En=function(e){try{return e.only([[]]),En=function(){return[[]]},[[]]}catch{return En=function(){return $t},$t}};function Or(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return W(n,t)}:function(n){return W(n,e)};var t}function Ko(e){return[].slice.call(e)}var $a=0;function Cn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function ei(e,t,y){function i(k){if(k.type===3)return null;if(k.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var b=k.lower,T=k.upper,C=k.lowerOpen,k=k.upperOpen;return b===void 0?T===void 0?null:t.upperBound(T,!!k):T===void 0?t.lowerBound(b,!!C):t.bound(b,T,!!C,!!k)}function u(O){var b,T=O.name;return{name:T,schema:O,mutate:function(C){var k=C.trans,A=C.type,q=C.keys,F=C.values,U=C.range;return new Promise(function(Q,$){Q=Je(Q);var J=k.objectStore(T),X=J.keyPath==null,te=A==="put"||A==="add";if(!te&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var Z,se=(q||F||{length:1}).length;if(q&&F&&q.length!==F.length)throw new Error("Given keys array must have same length as given values array.");if(se===0)return Q({numFailures:0,failures:{},results:[],lastResult:void 0});function xe(xt){++Ot,Sn(xt)}var Ce=[],Oe=[],Ot=0;if(A==="deleteRange"){if(U.type===4)return Q({numFailures:Ot,failures:Oe,results:[],lastResult:void 0});U.type===3?Ce.push(Z=J.clear()):Ce.push(Z=J.delete(i(U)))}else{var X=te?X?[F,q]:[F,null]:[q,null],_e=X[0],yt=X[1];if(te)for(var bt=0;bt<se;++bt)Ce.push(Z=yt&&yt[bt]!==void 0?J[A](_e[bt],yt[bt]):J[A](_e[bt])),Z.onerror=xe;else for(bt=0;bt<se;++bt)Ce.push(Z=J[A](_e[bt])),Z.onerror=xe}function ir(xt){xt=xt.target.result,Ce.forEach(function(rn,Wr){return rn.error!=null&&(Oe[Wr]=rn.error)}),Q({numFailures:Ot,failures:Oe,results:A==="delete"?q:Ce.map(function(rn){return rn.result}),lastResult:xt})}Z.onerror=function(xt){xe(xt),ir(xt)},Z.onsuccess=ir})},getMany:function(C){var k=C.trans,A=C.keys;return new Promise(function(q,F){q=Je(q);for(var U,Q=k.objectStore(T),$=A.length,J=new Array($),X=0,te=0,Z=function(Ce){Ce=Ce.target,J[Ce._pos]=Ce.result,++te===X&&q(J)},se=Kt(F),xe=0;xe<$;++xe)A[xe]!=null&&((U=Q.get(A[xe]))._pos=xe,U.onsuccess=Z,U.onerror=se,++X);X===0&&q(J)})},get:function(C){var k=C.trans,A=C.key;return new Promise(function(q,F){q=Je(q);var U=k.objectStore(T).get(A);U.onsuccess=function(Q){return q(Q.target.result)},U.onerror=Kt(F)})},query:(b=_,function(C){return new Promise(function(k,A){k=Je(k);var q,F,U,X=C.trans,Q=C.values,$=C.limit,Z=C.query,J=$===1/0?void 0:$,te=Z.index,Z=Z.range,X=X.objectStore(T),te=te.isPrimaryKey?X:X.index(te.name),Z=i(Z);if($===0)return k({result:[]});b?((J=Q?te.getAll(Z,J):te.getAllKeys(Z,J)).onsuccess=function(se){return k({result:se.target.result})},J.onerror=Kt(A)):(q=0,F=!Q&&"openKeyCursor"in te?te.openKeyCursor(Z):te.openCursor(Z),U=[],F.onsuccess=function(se){var xe=F.result;return xe?(U.push(Q?xe.value:xe.primaryKey),++q===$?k({result:U}):void xe.continue()):k({result:U})},F.onerror=Kt(A))})}),openCursor:function(C){var k=C.trans,A=C.values,q=C.query,F=C.reverse,U=C.unique;return new Promise(function(Q,$){Q=Je(Q);var te=q.index,J=q.range,X=k.objectStore(T),X=te.isPrimaryKey?X:X.index(te.name),te=F?U?"prevunique":"prev":U?"nextunique":"next",Z=!A&&"openKeyCursor"in X?X.openKeyCursor(i(J),te):X.openCursor(i(J),te);Z.onerror=Kt($),Z.onsuccess=Je(function(se){var xe,Ce,Oe,Ot,_e=Z.result;_e?(_e.___id=++$a,_e.done=!1,xe=_e.continue.bind(_e),Ce=(Ce=_e.continuePrimaryKey)&&Ce.bind(_e),Oe=_e.advance.bind(_e),Ot=function(){throw new Error("Cursor not stopped")},_e.trans=k,_e.stop=_e.continue=_e.continuePrimaryKey=_e.advance=function(){throw new Error("Cursor not started")},_e.fail=Je($),_e.next=function(){var yt=this,bt=1;return this.start(function(){return bt--?yt.continue():yt.stop()}).then(function(){return yt})},_e.start=function(yt){function bt(){if(Z.result)try{yt()}catch(xt){_e.fail(xt)}else _e.done=!0,_e.start=function(){throw new Error("Cursor behind last entry")},_e.stop()}var ir=new Promise(function(xt,rn){xt=Je(xt),Z.onerror=Kt(rn),_e.fail=rn,_e.stop=function(Wr){_e.stop=_e.continue=_e.continuePrimaryKey=_e.advance=Ot,xt(Wr)}});return Z.onsuccess=Je(function(xt){Z.onsuccess=bt,bt()}),_e.continue=xe,_e.continuePrimaryKey=Ce,_e.advance=Oe,bt(),ir},Q(_e)):Q(null)},$)})},count:function(C){var k=C.query,A=C.trans,q=k.index,F=k.range;return new Promise(function(U,Q){var $=A.objectStore(T),J=q.isPrimaryKey?$:$.index(q.name),$=i(F),J=$?J.count($):J.count();J.onsuccess=Je(function(X){return U(X.target.result)}),J.onerror=Kt(Q)})}}}var c,d,v,E=(d=y,v=Ko((c=e).objectStoreNames),{schema:{name:c.name,tables:v.map(function(O){return d.objectStore(O)}).map(function(O){var b=O.keyPath,k=O.autoIncrement,T=g(b),C={},k={name:O.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b==null,compound:T,keyPath:b,autoIncrement:k,unique:!0,extractKey:Or(b)},indexes:Ko(O.indexNames).map(function(A){return O.index(A)}).map(function(U){var q=U.name,F=U.unique,Q=U.multiEntry,U=U.keyPath,Q={name:q,compound:g(U),keyPath:U,unique:F,multiEntry:Q,extractKey:Or(U)};return C[Cn(U)]=Q}),getIndexByKeyPath:function(A){return C[Cn(A)]}};return C[":id"]=k.primaryKey,b!=null&&(C[Cn(b)]=k.primaryKey),k})},hasGetAll:0<v.length&&"getAll"in d.objectStore(v[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),y=E.schema,_=E.hasGetAll,E=y.tables.map(u),p={};return E.forEach(function(O){return p[O.name]=O}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(O){if(!p[O])throw new Error("Table '".concat(O,"' not found"));return p[O]},MIN_KEY:-1/0,MAX_KEY:En(t),schema:y}}function ti(e,t,n,i){var u=n.IDBKeyRange;return n.indexedDB,{dbcore:(i=ei(t,u,i),e.dbcore.reduce(function(c,d){return d=d.create,s(s({},c),d(c))},i))}}function Gn(e,i){var n=i.db,i=ti(e._middlewares,n,e._deps,i);e.core=i.dbcore,e.tables.forEach(function(u){var c=u.name;e.core.schema.tables.some(function(d){return d.name===c})&&(u.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=u.core))})}function Qn(e,t,n,i){n.forEach(function(u){var c=i[u];t.forEach(function(d){var v=function y(_,E){return V(_,E)||(_=I(_))&&y(_,E)}(d,u);(!v||"value"in v&&v.value===void 0)&&(d===e.Transaction.prototype||d instanceof e.Transaction?z(d,u,{get:function(){return this.table(u)},set:function(y){H(this,u,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):d[u]=new e.Table(u,c))})})}function Ir(e,t){t.forEach(function(n){for(var i in n)n[i]instanceof e.Table&&delete n[i]})}function ni(e,t){return e._cfg.version-t._cfg.version}function ri(e,t,n,i){var u=e._dbSchema;n.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=Cr("$meta",Fo("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,u);c.create(n),c._completion.catch(i);var d=c._reject.bind(c),v=ue.transless||ue;Ht(function(){return ue.trans=c,ue.transless=v,t!==0?(Gn(e,n),_=t,((y=c).storeNames.includes("$meta")?y.table("$meta").get("version").then(function(E){return E??_}):ee.resolve(_)).then(function(E){return O=E,b=c,T=n,C=[],E=(p=e)._versions,k=p._dbSchema=Xn(0,p.idbdb,T),(E=E.filter(function(A){return A._cfg.version>=O})).length!==0?(E.forEach(function(A){C.push(function(){var q=k,F=A._cfg.dbschema;Zn(p,q,T),Zn(p,F,T),k=p._dbSchema=F;var U=Pr(q,F);U.add.forEach(function(te){Ar(T,te[0],te[1].primKey,te[1].indexes)}),U.change.forEach(function(te){if(te.recreate)throw new ae.Upgrade("Not yet support for changing primary key");var Z=T.objectStore(te.name);te.add.forEach(function(se){return Jn(Z,se)}),te.change.forEach(function(se){Z.deleteIndex(se.name),Jn(Z,se)}),te.del.forEach(function(se){return Z.deleteIndex(se)})});var Q=A._cfg.contentUpgrade;if(Q&&A._cfg.version>O){Gn(p,T),b._memoizedTables={};var $=ie(F);U.del.forEach(function(te){$[te]=q[te]}),Ir(p,[p.Transaction.prototype]),Qn(p,[p.Transaction.prototype],h($),$),b.schema=$;var J,X=ne(Q);return X&&fn(),U=ee.follow(function(){var te;(J=Q(b))&&X&&(te=Lt.bind(null,null),J.then(te,te))}),J&&typeof J.then=="function"?ee.resolve(J):U.then(function(){return J})}}),C.push(function(q){var F,U,Q=A._cfg.dbschema;F=Q,U=q,[].slice.call(U.db.objectStoreNames).forEach(function($){return F[$]==null&&U.db.deleteObjectStore($)}),Ir(p,[p.Transaction.prototype]),Qn(p,[p.Transaction.prototype],p._storeNames,p._dbSchema),b.schema=p._dbSchema}),C.push(function(q){p.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(p.idbdb.version/10)===A._cfg.version?(p.idbdb.deleteObjectStore("$meta"),delete p._dbSchema.$meta,p._storeNames=p._storeNames.filter(function(F){return F!=="$meta"})):q.objectStore("$meta").put(A._cfg.version,"version"))})}),function A(){return C.length?ee.resolve(C.shift()(b.idbtrans)).then(A):ee.resolve()}().then(function(){qo(k,T)})):ee.resolve();var p,O,b,T,C,k}).catch(d)):(h(u).forEach(function(E){Ar(n,E,u[E].primKey,u[E].indexes)}),Gn(e,n),void ee.follow(function(){return e.on.populate.fire(c)}).catch(d));var y,_})}function oi(e,t){qo(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Xn(0,e.idbdb,t);Zn(e,e._dbSchema,t);for(var i=0,u=Pr(n,e._dbSchema).change;i<u.length;i++){var c=function(d){if(d.change.length||d.recreate)return console.warn("Unable to patch indexes of table ".concat(d.name," because it has changes on the type of index or primary key.")),{value:void 0};var v=t.objectStore(d.name);d.add.forEach(function(y){We&&console.debug("Dexie upgrade patch: Creating missing index ".concat(d.name,".").concat(y.src)),Jn(v,y)})}(u[i]);if(typeof c=="object")return c.value}}function Pr(e,t){var n,i={del:[],add:[],change:[]};for(n in e)t[n]||i.del.push(n);for(n in t){var u=e[n],c=t[n];if(u){var d={name:n,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||u.primKey.auto!==c.primKey.auto)d.recreate=!0,i.change.push(d);else{var v=u.idxByName,y=c.idxByName,_=void 0;for(_ in v)y[_]||d.del.push(_);for(_ in y){var E=v[_],p=y[_];E?E.src!==p.src&&d.change.push(p):d.add.push(p)}(0<d.del.length||0<d.add.length||0<d.change.length)&&i.change.push(d)}}else i.add.push([n,c])}return i}function Ar(e,t,n,i){var u=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach(function(c){return Jn(u,c)}),u}function qo(e,t){h(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(We&&console.debug("Dexie: Creating missing table",n),Ar(t,n,e[n].primKey,e[n].indexes))})}function Jn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Xn(e,t,n){var i={};return S(t.objectStoreNames,0).forEach(function(u){for(var c=n.objectStore(u),d=Er(jo(_=c.keyPath),_||"",!0,!1,!!c.autoIncrement,_&&typeof _!="string",!0),v=[],y=0;y<c.indexNames.length;++y){var E=c.index(c.indexNames[y]),_=E.keyPath,E=Er(E.name,_,!!E.unique,!!E.multiEntry,!1,_&&typeof _!="string",!1);v.push(E)}i[u]=Cr(u,d,v)}),i}function Zn(e,t,n){for(var i=n.db.objectStoreNames,u=0;u<i.length;++u){var c=i[u],d=n.objectStore(c);e._hasGetAll="getAll"in d;for(var v=0;v<d.indexNames.length;++v){var y=d.indexNames[v],_=d.index(y).keyPath,E=typeof _=="string"?_:"["+S(_).join("+")+"]";!t[c]||(_=t[c].idxByName[E])&&(_.name=y,delete t[c].idxByName[E],t[c].idxByName[y]=_)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Fo(e){return e.split(",").map(function(t,n){var i=(t=t.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return Er(i,u||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),g(u),n===0)})}var ai=($n.prototype._parseStoresSpec=function(e,t){h(e).forEach(function(n){if(e[n]!==null){var i=Fo(e[n]),u=i.shift();if(u.unique=!0,u.multi)throw new ae.Schema("Primary key cannot be multi-valued");i.forEach(function(c){if(c.auto)throw new ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new ae.Schema("Index must have a name and cannot be an empty string")}),t[n]=Cr(n,u,i)}})},$n.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?x(this._cfg.storesSource,n):n;var n=t._versions,i={},u={};return n.forEach(function(c){x(i,c._cfg.storesSource),u=c._cfg.dbschema={},c._parseStoresSpec(i,u)}),t._dbSchema=u,Ir(t,[t._allTables,t,t.Transaction.prototype]),Qn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],h(u),u),t._storeNames=h(u),this},$n.prototype.upgrade=function(e){return this._cfg.contentUpgrade=St(this._cfg.contentUpgrade||Se,e),this},$n);function $n(){}function Mr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Bt(zn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function jr(e){return e&&typeof e.databases=="function"}function Kr(e){return Ht(function(){return ue.letThrough=!0,e()})}function qr(e){return!("from"in e)}var mt=function(e,t){if(!this){var n=new mt;return e&&"d"in e&&x(n,e),n}x(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function On(e,t,n){var i=Me(t,n);if(!isNaN(i)){if(0<i)throw RangeError();if(qr(e))return x(e,{from:t,to:n,d:1});var u=e.l,i=e.r;if(Me(n,e.from)<0)return u?On(u,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Bo(e);if(0<Me(t,e.to))return i?On(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Bo(e);Me(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),0<Me(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,u&&!e.l&&In(e,u),i&&n&&In(e,i)}}function In(e,t){qr(t)||function n(i,y){var c=y.from,d=y.to,v=y.l,y=y.r;On(i,c,d),v&&n(i,v),y&&n(i,y)}(e,t)}function Ro(e,t){var n=er(t),i=n.next();if(i.done)return!1;for(var u=i.value,c=er(e),d=c.next(u.from),v=d.value;!i.done&&!d.done;){if(Me(v.from,u.to)<=0&&0<=Me(v.to,u.from))return!0;Me(u.from,v.from)<0?u=(i=n.next(v.from)).value:v=(d=c.next(u.from)).value}return!1}function er(e){var t=qr(e)?null:{s:0,n:e};return{next:function(n){for(var i=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,i)for(;t.n.l&&Me(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!i||Me(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Bo(e){var t,n,i=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),u=1<i?"r":i<-1?"l":"";u&&(t=u=="r"?"l":"r",n=s({},e),i=e[u],e.from=i.from,e.to=i.to,e[u]=i[u],n[u]=i[t],(e[t]=n).d=No(n)),e.d=No(e)}function No(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function tr(e,t){return h(t).forEach(function(n){e[n]?In(e[n],t[n]):e[n]=function i(u){var c,d,v={};for(c in u)M(u,c)&&(d=u[c],v[c]=!d||typeof d!="object"||De.has(d.constructor)?d:i(d));return v}(t[n])}),e}function Fr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Ro(t[n],e[n])})}D(mt.prototype,((It={add:function(e){return In(this,e),this},addKey:function(e){return On(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return On(t,n,n)}),this},hasKey:function(e){var t=er(this).next(e).value;return t&&Me(t.from,e)<=0&&0<=Me(t.to,e)}})[Qe]=function(){return er(this)},It));var tn={},Rr={},Br=!1;function nr(e){tr(Rr,e),Br||(Br=!0,setTimeout(function(){Br=!1,Nr(Rr,!(Rr={}))},0))}function Nr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var i=0,u=Object.values(tn);i<u.length;i++)Ho(d=u[i],e,n,t);else for(var c in e){var d,v=/^idb\:\/\/(.*)\/(.*)\//.exec(c);v&&(c=v[1],v=v[2],(d=tn["idb://".concat(c,"/").concat(v)])&&Ho(d,e,n,t))}n.forEach(function(y){return y()})}function Ho(e,t,n,i){for(var u=[],c=0,d=Object.entries(e.queries.query);c<d.length;c++){for(var v=d[c],y=v[0],_=[],E=0,p=v[1];E<p.length;E++){var O=p[E];Fr(t,O.obsSet)?O.subscribers.forEach(function(k){return n.add(k)}):i&&_.push(O)}i&&u.push([y,_])}if(i)for(var b=0,T=u;b<T.length;b++){var C=T[b],y=C[0],_=C[1];e.queries.query[y]=_}}function ii(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?nt(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var i=t.openCanceller,u=Math.round(10*e.verno),c=!1;function d(){if(t.openCanceller!==i)throw new ae.DatabaseClosed("db.open() was cancelled")}function v(){return new ee(function(O,b){if(d(),!n)throw new ae.MissingAPI;var T=e.name,C=t.autoSchema||!u?n.open(T):n.open(T,u);if(!C)throw new ae.MissingAPI;C.onerror=Kt(b),C.onblocked=Je(e._fireOnBlocked),C.onupgradeneeded=Je(function(k){var A;E=C.transaction,t.autoSchema&&!e._options.allowEmptyDB?(C.onerror=Sn,E.abort(),C.result.close(),(A=n.deleteDatabase(T)).onsuccess=A.onerror=Je(function(){b(new ae.NoSuchDatabase("Database ".concat(T," doesnt exist")))})):(E.onerror=Kt(b),k=k.oldVersion>Math.pow(2,62)?0:k.oldVersion,p=k<1,e.idbdb=C.result,c&&oi(e,E),ri(e,k/10,E,b))},b),C.onsuccess=Je(function(){E=null;var k,A,q,F,U,Q=e.idbdb=C.result,$=S(Q.objectStoreNames);if(0<$.length)try{var J=Q.transaction((F=$).length===1?F[0]:F,"readonly");if(t.autoSchema)A=Q,q=J,(k=e).verno=A.version/10,q=k._dbSchema=Xn(0,A,q),k._storeNames=S(A.objectStoreNames,0),Qn(k,[k._allTables],h(q),q);else if(Zn(e,e._dbSchema,J),((U=Pr(Xn(0,(U=e).idbdb,J),U._dbSchema)).add.length||U.change.some(function(X){return X.add.length||X.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Q.close(),u=Q.version+1,c=!0,O(v());Gn(e,J)}catch{}dn.push(e),Q.onversionchange=Je(function(X){t.vcFired=!0,e.on("versionchange").fire(X)}),Q.onclose=Je(function(X){e.on("close").fire(X)}),p&&(U=e._deps,J=T,Q=U.indexedDB,U=U.IDBKeyRange,jr(Q)||J===zn||Mr(Q,U).put({name:J}).catch(Se)),O()},b)}).catch(function(O){switch(O==null?void 0:O.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),v();break;case"VersionError":if(0<u)return u=0,v()}return ee.reject(O)})}var y,_=t.dbReadyResolve,E=null,p=!1;return ee.race([i,(typeof navigator>"u"?ee.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(O){function b(){return indexedDB.databases().finally(O)}y=setInterval(b,100),b()}).finally(function(){return clearInterval(y)}):Promise.resolve()).then(v)]).then(function(){return d(),t.onReadyBeingFired=[],ee.resolve(Kr(function(){return e.on.ready.fire(e.vip)})).then(function O(){if(0<t.onReadyBeingFired.length){var b=t.onReadyBeingFired.reduce(St,Se);return t.onReadyBeingFired=[],ee.resolve(Kr(function(){return b(e.vip)})).then(O)}})}).finally(function(){t.openCanceller===i&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(O){t.dbOpenError=O;try{E&&E.abort()}catch{}return i===t.openCanceller&&e._close(),nt(O)}).finally(function(){t.openComplete=!0,_()}).then(function(){var O;return p&&(O={},e.tables.forEach(function(b){b.schema.indexes.forEach(function(T){T.name&&(O["idb://".concat(e.name,"/").concat(b.name,"/").concat(T.name)]=new mt(-1/0,[[[]]]))}),O["idb://".concat(e.name,"/").concat(b.name,"/")]=O["idb://".concat(e.name,"/").concat(b.name,"/:dels")]=new mt(-1/0,[[[]]])}),Yt(Tn).fire(O),Nr(O,!0)),e})}function Hr(e){function t(c){return e.next(c)}var n=u(t),i=u(function(c){return e.throw(c)});function u(c){return function(y){var v=c(y),y=v.value;return v.done?y:y&&typeof y.then=="function"?y.then(n,i):g(y)?Promise.all(y).then(n,i):n(y)}}return u(t)()}function rr(e,t,n){for(var i=g(e)?e.slice():[e],u=0;u<n;++u)i.push(t);return i}var si={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),i=n.schema,u={},c=[];function d(p,O,b){var T=Cn(p),C=u[T]=u[T]||[],k=p==null?0:typeof p=="string"?1:p.length,A=0<O,A=s(s({},b),{name:A?"".concat(T,"(virtual-from:").concat(b.name,")"):b.name,lowLevelIndex:b,isVirtual:A,keyTail:O,keyLength:k,extractKey:Or(p),unique:!A&&b.unique});return C.push(A),A.isPrimaryKey||c.push(A),1<k&&d(k===2?p[0]:p.slice(0,k-1),O+1,b),C.sort(function(q,F){return q.keyTail-F.keyTail}),A}t=d(i.primaryKey.keyPath,0,i.primaryKey),u[":id"]=[t];for(var v=0,y=i.indexes;v<y.length;v++){var _=y[v];d(_.keyPath,0,_)}function E(p){var O,b=p.query.index;return b.isVirtual?s(s({},p),{query:{index:b.lowLevelIndex,range:(O=p.query.range,b=b.keyTail,{type:O.type===1?2:O.type,lower:rr(O.lower,O.lowerOpen?e.MAX_KEY:e.MIN_KEY,b),lowerOpen:!0,upper:rr(O.upper,O.upperOpen?e.MIN_KEY:e.MAX_KEY,b),upperOpen:!0})}}):p}return s(s({},n),{schema:s(s({},i),{primaryKey:t,indexes:c,getIndexByKeyPath:function(p){return(p=u[Cn(p)])&&p[0]}}),count:function(p){return n.count(E(p))},query:function(p){return n.query(E(p))},openCursor:function(p){var O=p.query.index,b=O.keyTail,T=O.isVirtual,C=O.keyLength;return T?n.openCursor(E(p)).then(function(A){return A&&k(A)}):n.openCursor(p);function k(A){return Object.create(A,{continue:{value:function(q){q!=null?A.continue(rr(q,p.reverse?e.MAX_KEY:e.MIN_KEY,b)):p.unique?A.continue(A.key.slice(0,C).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,b)):A.continue()}},continuePrimaryKey:{value:function(q,F){A.continuePrimaryKey(rr(q,e.MAX_KEY,b),F)}},primaryKey:{get:function(){return A.primaryKey}},key:{get:function(){var q=A.key;return C===1?q[0]:q.slice(0,C)}},value:{get:function(){return A.value}}})}}})}})}};function Lr(e,t,n,i){return n=n||{},i=i||"",h(e).forEach(function(u){var c,d,v;M(t,u)?(c=e[u],d=t[u],typeof c=="object"&&typeof d=="object"&&c&&d?(v=He(c))!==He(d)?n[i+u]=t[u]:v==="Object"?Lr(c,d,n,i+u+"."):c!==d&&(n[i+u]=t[u]):c!==d&&(n[i+u]=t[u])):n[i+u]=void 0}),h(t).forEach(function(u){M(e,u)||(n[i+u]=t[u])}),n}function zr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ui={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),i=n.schema.primaryKey;return s(s({},n),{mutate:function(u){var c=ue.trans,d=c.table(t).hook,v=d.deleting,y=d.creating,_=d.updating;switch(u.type){case"add":if(y.fire===Se)break;return c._promise("readwrite",function(){return E(u)},!0);case"put":if(y.fire===Se&&_.fire===Se)break;return c._promise("readwrite",function(){return E(u)},!0);case"delete":if(v.fire===Se)break;return c._promise("readwrite",function(){return E(u)},!0);case"deleteRange":if(v.fire===Se)break;return c._promise("readwrite",function(){return function p(O,b,T){return n.query({trans:O,values:!1,query:{index:i,range:b},limit:T}).then(function(C){var k=C.result;return E({type:"delete",keys:k,trans:O}).then(function(A){return 0<A.numFailures?Promise.reject(A.failures[0]):k.length<T?{failures:[],numFailures:0,lastResult:void 0}:p(O,s(s({},b),{lower:k[k.length-1],lowerOpen:!0}),T)})})}(u.trans,u.range,1e4)},!0)}return n.mutate(u);function E(p){var O,b,T,C=ue.trans,k=p.keys||zr(i,p);if(!k)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?s(s({},p),{keys:k}):s({},p)).type!=="delete"&&(p.values=l([],p.values)),p.keys&&(p.keys=l([],p.keys)),O=n,T=k,((b=p).type==="add"?Promise.resolve([]):O.getMany({trans:b.trans,keys:T,cache:"immutable"})).then(function(A){var q=k.map(function(F,U){var Q,$,J,X=A[U],te={onerror:null,onsuccess:null};return p.type==="delete"?v.fire.call(te,F,X,C):p.type==="add"||X===void 0?(Q=y.fire.call(te,F,p.values[U],C),F==null&&Q!=null&&(p.keys[U]=F=Q,i.outbound||Y(p.values[U],i.keyPath,F))):(Q=Lr(X,p.values[U]),($=_.fire.call(te,Q,F,X,C))&&(J=p.values[U],Object.keys($).forEach(function(Z){M(J,Z)?J[Z]=$[Z]:Y(J,Z,$[Z])}))),te});return n.mutate(p).then(function(F){for(var U=F.failures,Q=F.results,$=F.numFailures,F=F.lastResult,J=0;J<k.length;++J){var X=(Q||k)[J],te=q[J];X==null?te.onerror&&te.onerror(U[J]):te.onsuccess&&te.onsuccess(p.type==="put"&&A[J]?p.values[J]:X)}return{failures:U,results:Q,numFailures:$,lastResult:F}}).catch(function(F){return q.forEach(function(U){return U.onerror&&U.onerror(F)}),Promise.reject(F)})})}}})}})}};function Lo(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var i=[],u=0,c=0;u<t.keys.length&&c<e.length;++u)Me(t.keys[u],e[c])===0&&(i.push(n?ke(t.values[u]):t.values[u]),++c);return i.length===e.length?i:null}catch{return null}}var li={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return s(s({},n),{getMany:function(i){if(!i.cache)return n.getMany(i);var u=Lo(i.keys,i.trans._cache,i.cache==="clone");return u?ee.resolve(u):n.getMany(i).then(function(c){return i.trans._cache={keys:i.keys,values:i.cache==="clone"?ke(c):c},c})},mutate:function(i){return i.type!=="add"&&(i.trans._cache=null),n.mutate(i)}})}}}};function zo(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Uo(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ci={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new mt(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(i,u,c){if(ue.subscr&&u!=="readonly")throw new ae.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ue.querier));return e.transaction(i,u,c)},table:function(i){var u=e.table(i),c=u.schema,d=c.primaryKey,p=c.indexes,v=d.extractKey,y=d.outbound,_=d.autoIncrement&&p.filter(function(b){return b.compound&&b.keyPath.includes(d.keyPath)}),E=s(s({},u),{mutate:function(b){function T(Z){return Z="idb://".concat(t,"/").concat(i,"/").concat(Z),F[Z]||(F[Z]=new mt)}var C,k,A,q=b.trans,F=b.mutatedParts||(b.mutatedParts={}),U=T(""),Q=T(":dels"),$=b.type,te=b.type==="deleteRange"?[b.range]:b.type==="delete"?[b.keys]:b.values.length<50?[zr(d,b).filter(function(Z){return Z}),b.values]:[],J=te[0],X=te[1],te=b.trans._cache;return g(J)?(U.addKeys(J),(te=$==="delete"||J.length===X.length?Lo(J,te):null)||Q.addKeys(J),(te||X)&&(C=T,k=te,A=X,c.indexes.forEach(function(Z){var se=C(Z.name||"");function xe(Oe){return Oe!=null?Z.extractKey(Oe):null}function Ce(Oe){return Z.multiEntry&&g(Oe)?Oe.forEach(function(Ot){return se.addKey(Ot)}):se.addKey(Oe)}(k||A).forEach(function(Oe,yt){var _e=k&&xe(k[yt]),yt=A&&xe(A[yt]);Me(_e,yt)!==0&&(_e!=null&&Ce(_e),yt!=null&&Ce(yt))})}))):J?(X={from:(X=J.lower)!==null&&X!==void 0?X:e.MIN_KEY,to:(X=J.upper)!==null&&X!==void 0?X:e.MAX_KEY},Q.add(X),U.add(X)):(U.add(n),Q.add(n),c.indexes.forEach(function(Z){return T(Z.name).add(n)})),u.mutate(b).then(function(Z){return!J||b.type!=="add"&&b.type!=="put"||(U.addKeys(Z.results),_&&_.forEach(function(se){for(var xe=b.values.map(function(_e){return se.extractKey(_e)}),Ce=se.keyPath.findIndex(function(_e){return _e===d.keyPath}),Oe=0,Ot=Z.results.length;Oe<Ot;++Oe)xe[Oe][Ce]=Z.results[Oe];T(se.name).addKeys(xe)})),q.mutatedParts=tr(q.mutatedParts||{},F),Z})}}),p=function(T){var C=T.query,T=C.index,C=C.range;return[T,new mt((T=C.lower)!==null&&T!==void 0?T:e.MIN_KEY,(C=C.upper)!==null&&C!==void 0?C:e.MAX_KEY)]},O={get:function(b){return[d,new mt(b.key)]},getMany:function(b){return[d,new mt().addKeys(b.keys)]},count:p,query:p,openCursor:p};return h(O).forEach(function(b){E[b]=function(T){var C=ue.subscr,k=!!C,A=zo(ue,u)&&Uo(b,T)?T.obsSet={}:C;if(k){var q=function(X){return X="idb://".concat(t,"/").concat(i,"/").concat(X),A[X]||(A[X]=new mt)},F=q(""),U=q(":dels"),C=O[b](T),k=C[0],C=C[1];if((b==="query"&&k.isPrimaryKey&&!T.values?U:q(k.name||"")).add(C),!k.isPrimaryKey){if(b!=="count"){var Q=b==="query"&&y&&T.values&&u.query(s(s({},T),{values:!1}));return u[b].apply(this,arguments).then(function(X){if(b==="query"){if(y&&T.values)return Q.then(function(xe){return xe=xe.result,F.addKeys(xe),X});var te=T.values?X.result.map(v):X.result;(T.values?F:U).addKeys(te)}else if(b==="openCursor"){var Z=X,se=T.values;return Z&&Object.create(Z,{key:{get:function(){return U.addKey(Z.primaryKey),Z.key}},primaryKey:{get:function(){var xe=Z.primaryKey;return U.addKey(xe),xe}},value:{get:function(){return se&&F.addKey(Z.primaryKey),Z.value}}})}return X})}U.add(n)}}return u[b].apply(this,arguments)}}),E}})}};function Yo(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var i=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===i?null:(t=s({},t),g(t.keys)&&(t.keys=t.keys.filter(function(u,c){return!(c in n.failures)})),"values"in t&&g(t.values)&&(t.values=t.values.filter(function(u,c){return!(c in n.failures)})),t)}function Ur(e,t){return n=e,((i=t).lower===void 0||(i.lowerOpen?0<Me(n,i.lower):0<=Me(n,i.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?Me(e,t.upper)<0:Me(e,t.upper)<=0));var n,i}function Vo(e,t,O,i,u,c){if(!O||O.length===0)return e;var d=t.query.index,v=d.multiEntry,y=t.query.range,_=i.schema.primaryKey.extractKey,E=d.extractKey,p=(d.lowLevelIndex||d).extractKey,O=O.reduce(function(b,T){var C=b,k=[];if(T.type==="add"||T.type==="put")for(var A=new mt,q=T.values.length-1;0<=q;--q){var F,U=T.values[q],Q=_(U);A.hasKey(Q)||(F=E(U),(v&&g(F)?F.some(function(Z){return Ur(Z,y)}):Ur(F,y))&&(A.addKey(Q),k.push(U)))}switch(T.type){case"add":var $=new mt().addKeys(t.values?b.map(function(se){return _(se)}):b),C=b.concat(t.values?k.filter(function(se){return se=_(se),!$.hasKey(se)&&($.addKey(se),!0)}):k.map(function(se){return _(se)}).filter(function(se){return!$.hasKey(se)&&($.addKey(se),!0)}));break;case"put":var J=new mt().addKeys(T.values.map(function(se){return _(se)}));C=b.filter(function(se){return!J.hasKey(t.values?_(se):se)}).concat(t.values?k:k.map(function(se){return _(se)}));break;case"delete":var X=new mt().addKeys(T.keys);C=b.filter(function(se){return!X.hasKey(t.values?_(se):se)});break;case"deleteRange":var te=T.range;C=b.filter(function(se){return!Ur(_(se),te)})}return C},e);return O===e?e:(O.sort(function(b,T){return Me(p(b),p(T))||Me(_(b),_(T))}),t.limit&&t.limit<1/0&&(O.length>t.limit?O.length=t.limit:e.length===t.limit&&O.length<t.limit&&(u.dirty=!0)),c?Object.freeze(O):O)}function Wo(e,t){return Me(e.lower,t.lower)===0&&Me(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function fi(e,t){return function(n,i,u,c){if(n===void 0)return i!==void 0?-1:0;if(i===void 0)return 1;if((i=Me(n,i))===0){if(u&&c)return 0;if(u)return 1;if(c)return-1}return i}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,i,u,c){if(n===void 0)return i!==void 0?1:0;if(i===void 0)return-1;if((i=Me(n,i))===0){if(u&&c)return 0;if(u)return-1;if(c)return 1}return i}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function di(e,t,n,i){e.subscribers.add(n),i.addEventListener("abort",function(){var u,c;e.subscribers.delete(n),e.subscribers.size===0&&(u=e,c=t,setTimeout(function(){u.subscribers.size===0&&Le(c,u)},3e3))})}var hi={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(n,i,u){var c,d,v=e.transaction(n,i,u);return i==="readwrite"&&(d=(c=new AbortController).signal,u=function(y){return function(){if(c.abort(),i==="readwrite"){for(var _=new Set,E=0,p=n;E<p.length;E++){var O=p[E],b=tn["idb://".concat(t,"/").concat(O)];if(b){var T=e.table(O),C=b.optimisticOps.filter(function(se){return se.trans===v});if(v._explicit&&y&&v.mutatedParts)for(var k=0,A=Object.values(b.queries.query);k<A.length;k++)for(var q=0,F=($=A[k]).slice();q<F.length;q++)Fr((J=F[q]).obsSet,v.mutatedParts)&&(Le($,J),J.subscribers.forEach(function(se){return _.add(se)}));else if(0<C.length){b.optimisticOps=b.optimisticOps.filter(function(se){return se.trans!==v});for(var U=0,Q=Object.values(b.queries.query);U<Q.length;U++)for(var $,J,X,te=0,Z=($=Q[U]).slice();te<Z.length;te++)(J=Z[te]).res!=null&&v.mutatedParts&&(y&&!J.dirty?(X=Object.isFrozen(J.res),X=Vo(J.res,J.req,C,T,J,X),J.dirty?(Le($,J),J.subscribers.forEach(function(se){return _.add(se)})):X!==J.res&&(J.res=X,J.promise=ee.resolve({result:X}))):(J.dirty&&Le($,J),J.subscribers.forEach(function(se){return _.add(se)})))}}}_.forEach(function(se){return se()})}}},v.addEventListener("abort",u(!1),{signal:d}),v.addEventListener("error",u(!1),{signal:d}),v.addEventListener("complete",u(!0),{signal:d})),v},table:function(n){var i=e.table(n),u=i.schema.primaryKey;return s(s({},i),{mutate:function(c){var d=ue.trans;if(u.outbound||d.db._options.cache==="disabled"||d.explicit||d.idbtrans.mode!=="readwrite")return i.mutate(c);var v=tn["idb://".concat(t,"/").concat(n)];return v?(d=i.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||zr(u,c).some(function(y){return y==null}))?(v.optimisticOps.push(c),c.mutatedParts&&nr(c.mutatedParts),d.then(function(y){0<y.numFailures&&(Le(v.optimisticOps,c),(y=Yo(0,c,y))&&v.optimisticOps.push(y),c.mutatedParts&&nr(c.mutatedParts))}),d.catch(function(){Le(v.optimisticOps,c),c.mutatedParts&&nr(c.mutatedParts)})):d.then(function(y){var _=Yo(0,s(s({},c),{values:c.values.map(function(E,p){var O;return y.failures[p]?E:(E=(O=u.keyPath)!==null&&O!==void 0&&O.includes(".")?ke(E):s({},E),Y(E,u.keyPath,y.results[p]),E)})}),y);v.optimisticOps.push(_),queueMicrotask(function(){return c.mutatedParts&&nr(c.mutatedParts)})}),d):i.mutate(c)},query:function(c){if(!zo(ue,i)||!Uo("query",c))return i.query(c);var d=((_=ue.trans)===null||_===void 0?void 0:_.db._options.cache)==="immutable",p=ue,v=p.requery,y=p.signal,_=function(T,C,k,A){var q=tn["idb://".concat(T,"/").concat(C)];if(!q)return[];if(!(C=q.queries[k]))return[null,!1,q,null];var F=C[(A.query?A.query.index.name:null)||""];if(!F)return[null,!1,q,null];switch(k){case"query":var U=F.find(function(Q){return Q.req.limit===A.limit&&Q.req.values===A.values&&Wo(Q.req.query.range,A.query.range)});return U?[U,!0,q,F]:[F.find(function(Q){return("limit"in Q.req?Q.req.limit:1/0)>=A.limit&&(!A.values||Q.req.values)&&fi(Q.req.query.range,A.query.range)}),!1,q,F];case"count":return U=F.find(function(Q){return Wo(Q.req.query.range,A.query.range)}),[U,!!U,q,F]}}(t,n,"query",c),E=_[0],p=_[1],O=_[2],b=_[3];return E&&p?E.obsSet=c.obsSet:(p=i.query(c).then(function(T){var C=T.result;if(E&&(E.res=C),d){for(var k=0,A=C.length;k<A;++k)Object.freeze(C[k]);Object.freeze(C)}else T.result=ke(C);return T}).catch(function(T){return b&&E&&Le(b,E),Promise.reject(T)}),E={obsSet:c.obsSet,promise:p,subscribers:new Set,type:"query",req:c,dirty:!1},b?b.push(E):(b=[E],(O=O||(tn["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=b)),di(E,b,v,y),E.promise.then(function(T){return{result:Vo(T.result,c,O==null?void 0:O.optimisticOps,i,E,d)}})}})}})}};function or(e,t){return new Proxy(e,{get:function(n,i,u){return i==="db"?t:Reflect.get(n,i,u)}})}var Bt=(rt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ae.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(i){return i._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(ni),n.stores({}),this._state.autoSchema=!1,n)},rt.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||ue.letThrough||this._vip)?e():new ee(function(n,i){if(t._state.openComplete)return i(new ae.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void i(new ae.DatabaseClosed);t.open().catch(Se)}t._state.dbReadyPromise.then(n,i)}).then(e)},rt.prototype.use=function(e){var t=e.stack,n=e.create,i=e.level,u=e.name;return u&&this.unuse({stack:t,name:u}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:i??10,name:u}),e.sort(function(c,d){return c.level-d.level}),this},rt.prototype.unuse=function(e){var t=e.stack,n=e.name,i=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(u){return i?u.create!==i:!!n&&u.name!==n})),this},rt.prototype.open=function(){var e=this;return Zt(Ae,function(){return ii(e)})},rt.prototype._close=function(){var e=this._state,t=dn.indexOf(this);if(0<=t&&dn.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ee(function(n){e.dbReadyResolve=n}),e.openCanceller=new ee(function(n,i){e.cancelOpen=i}))},rt.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new ae.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new ae.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},rt.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",i=this._state;return new ee(function(u,c){function d(){t.close(e);var v=t._deps.indexedDB.deleteDatabase(t.name);v.onsuccess=Je(function(){var y,_,E;y=t._deps,_=t.name,E=y.indexedDB,y=y.IDBKeyRange,jr(E)||_===zn||Mr(E,y).delete(_).catch(Se),u()}),v.onerror=Kt(c),v.onblocked=t._fireOnBlocked}if(n)throw new ae.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(d):d()})},rt.prototype.backendDB=function(){return this.idbdb},rt.prototype.isOpen=function(){return this.idbdb!==null},rt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},rt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},rt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(rt.prototype,"tables",{get:function(){var e=this;return h(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),rt.prototype.transaction=function(){var e=(function(t,n,i){var u=arguments.length;if(u<2)throw new ae.InvalidArgument("Too few arguments");for(var c=new Array(u-1);--u;)c[u-1]=arguments[u];return i=c.pop(),[t,le(c),i]}).apply(this,arguments);return this._transaction.apply(this,e)},rt.prototype._transaction=function(e,t,n){var i=this,u=ue.trans;u&&u.db===this&&e.indexOf("!")===-1||(u=null);var c,d,v=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(d=t.map(function(_){if(_=_ instanceof i.Table?_.name:_,typeof _!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return _}),e=="r"||e===wr)c=wr;else{if(e!="rw"&&e!=kr)throw new ae.InvalidArgument("Invalid transaction mode: "+e);c=kr}if(u){if(u.mode===wr&&c===kr){if(!v)throw new ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&d.forEach(function(_){if(u&&u.storeNames.indexOf(_)===-1){if(!v)throw new ae.SubTransaction("Table "+_+" not included in parent transaction.");u=null}}),v&&u&&!u.active&&(u=null)}}catch(_){return u?u._promise(null,function(E,p){p(_)}):nt(_)}var y=(function _(E,p,O,b,T){return ee.resolve().then(function(){var C=ue.transless||ue,k=E._createTransaction(p,O,E._dbSchema,b);if(k.explicit=!0,C={trans:k,transless:C},b)k.idbtrans=b.idbtrans;else try{k.create(),k.idbtrans._explicit=!0,E._state.PR1398_maxLoop=3}catch(F){return F.name===Pe.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return _(E,p,O,null,T)})):nt(F)}var A,q=ne(T);return q&&fn(),C=ee.follow(function(){var F;(A=T.call(k,k))&&(q?(F=Lt.bind(null,null),A.then(F,F)):typeof A.next=="function"&&typeof A.throw=="function"&&(A=Hr(A)))},C),(A&&typeof A.then=="function"?ee.resolve(A).then(function(F){return k.active?F:nt(new ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):C.then(function(){return A})).then(function(F){return b&&k._resolve(),k._completion.then(function(){return F})}).catch(function(F){return k._reject(F),nt(F)})})}).bind(null,this,c,d,u,n);return u?u._promise(c,y,"lock"):ue.trans?Zt(ue.transless,function(){return i._whenReady(y)}):this._whenReady(y)},rt.prototype.table=function(e){if(!M(this._allTables,e))throw new ae.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},rt);function rt(e,t){var n=this;this._middlewares={},this.verno=0;var i=rt.dependencies;this._options=t=s({addons:rt.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},i=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u,c,d,v,y,_={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};_.dbReadyPromise=new ee(function(p){_.dbReadyResolve=p}),_.openCanceller=new ee(function(p,O){_.cancelOpen=O}),this._state=_,this.name=e,this.on=kn(this,"populate","blocked","versionchange","close",{ready:[St,Se]}),this.on.ready.subscribe=P(this.on.ready.subscribe,function(p){return function(O,b){rt.vip(function(){var T,C=n._state;C.openComplete?(C.dbOpenError||ee.resolve().then(O),b&&p(O)):C.onReadyBeingFired?(C.onReadyBeingFired.push(O),b&&p(O)):(p(O),T=n,b||p(function k(){T.on.ready.unsubscribe(O),T.on.ready.unsubscribe(k)}))})}}),this.Collection=(u=this,xn(Qa.prototype,function(A,k){this.db=u;var b=Do,T=null;if(k)try{b=k()}catch(q){T=q}var C=A._ctx,k=C.table,A=k.hook.reading.fire;this._ctx={table:k,index:C.index,isPrimKey:!C.index||k.schema.primKey.keyPath&&C.index===k.schema.primKey.name,range:b,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:T,or:C.or,valueMapper:A!==vt?A:null}})),this.Table=(c=this,xn(Co.prototype,function(p,O,b){this.db=c,this._tx=b,this.name=p,this.schema=O,this.hook=c._allTables[p]?c._allTables[p].hook:kn(null,{creating:[Pt,Se],reading:[pt,vt],updating:[wt,Se],deleting:[gt,Se]})})),this.Transaction=(d=this,xn(Za.prototype,function(p,O,b,T,C){var k=this;this.db=d,this.mode=p,this.storeNames=O,this.schema=b,this.chromeTransactionDurability=T,this.idbtrans=null,this.on=kn(this,"complete","error","abort"),this.parent=C||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ee(function(A,q){k._resolve=A,k._reject=q}),this._completion.then(function(){k.active=!1,k.on.complete.fire()},function(A){var q=k.active;return k.active=!1,k.on.error.fire(A),k.parent?k.parent._reject(A):q&&k.idbtrans&&k.idbtrans.abort(),nt(A)})})),this.Version=(v=this,xn(ai.prototype,function(p){this.db=v,this._cfg={version:p,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(y=this,xn(Mo.prototype,function(p,O,b){if(this.db=y,this._ctx={table:p,index:O===":id"?null:O,or:b},this._cmp=this._ascending=Me,this._descending=function(T,C){return Me(C,T)},this._max=function(T,C){return 0<Me(T,C)?T:C},this._min=function(T,C){return Me(T,C)<0?T:C},this._IDBKeyRange=y._deps.IDBKeyRange,!this._IDBKeyRange)throw new ae.MissingAPI})),this.on("versionchange",function(p){0<p.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=En(t.IDBKeyRange),this._createTransaction=function(p,O,b,T){return new n.Transaction(p,O,b,n._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(p){n.on("blocked").fire(p),dn.filter(function(O){return O.name===n.name&&O!==n&&!O._state.vcFired}).map(function(O){return O.on("versionchange").fire(p)})},this.use(li),this.use(hi),this.use(ci),this.use(si),this.use(ui);var E=new Proxy(this,{get:function(p,O,b){if(O==="_vip")return!0;if(O==="table")return function(C){return or(n.table(C),E)};var T=Reflect.get(p,O,b);return T instanceof Co?or(T,E):O==="tables"?T.map(function(C){return or(C,E)}):O==="_createTransaction"?function(){return or(T.apply(this,arguments),E)}:T}});this.vip=E,i.forEach(function(p){return p(n)})}var ar,It=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",vi=(Yr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Yr.prototype[It]=function(){return this},Yr);function Yr(e){this._subscribe=e}try{ar={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch{ar={indexedDB:null,IDBKeyRange:null}}function Go(e){var t,n=!1,i=new vi(function(u){var c=ne(e),d,v=!1,y={},_={},E={get closed(){return v},unsubscribe:function(){v||(v=!0,d&&d.abort(),p&&Yt.storagemutated.unsubscribe(b))}};u.start&&u.start(E);var p=!1,O=function(){return _r(T)},b=function(C){tr(y,C),Fr(_,y)&&O()},T=function(){var C,k,A;!v&&ar.indexedDB&&(y={},C={},d&&d.abort(),d=new AbortController,A=function(q){var F=ln();try{c&&fn();var U=Ht(e,q);return U=c?U.finally(Lt):U}finally{F&&cn()}}(k={subscr:C,signal:d.signal,requery:O,querier:e,trans:null}),Promise.resolve(A).then(function(q){n=!0,t=q,v||k.signal.aborted||(y={},function(F){for(var U in F)if(M(F,U))return;return 1}(_=C)||p||(Yt(Tn,b),p=!0),_r(function(){return!v&&u.next&&u.next(q)}))},function(q){n=!1,["DatabaseClosedError","AbortError"].includes(q==null?void 0:q.name)||v||_r(function(){v||u.error&&u.error(q)})}))};return setTimeout(O,0),E});return i.hasValue=function(){return n},i.getValue=function(){return t},i}var nn=Bt;function Vr(e){var t=Vt;try{Vt=!0,Yt.storagemutated.fire(e),Nr(e,!0)}finally{Vt=t}}D(nn,s(s({},it),{delete:function(e){return new nn(e,{addons:[]}).delete()},exists:function(e){return new nn(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=nn.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(jr(n)?Promise.resolve(n.databases()).then(function(i){return i.map(function(u){return u.name}).filter(function(u){return u!==zn})}):Mr(n,t).toCollection().primaryKeys()).then(e)}catch{return nt(new ae.MissingAPI)}var t,n},defineClass:function(){return function(e){x(this,e)}},ignoreTransaction:function(e){return ue.trans?Zt(ue.transless,e):e()},vip:Kr,async:function(e){return function(){try{var t=Hr(e.apply(this,arguments));return t&&typeof t.then=="function"?t:ee.resolve(t)}catch(n){return nt(n)}}},spawn:function(e,t,n){try{var i=Hr(e.apply(n,t||[]));return i&&typeof i.then=="function"?i:ee.resolve(i)}catch(u){return nt(u)}},currentTransaction:{get:function(){return ue.trans||null}},waitFor:function(e,t){return t=ee.resolve(typeof e=="function"?nn.ignoreTransaction(e):e).timeout(t||6e4),ue.trans?ue.trans.waitFor(t):t},Promise:ee,debug:{get:function(){return We},set:function(e){Mt(e)}},derive:N,extend:x,props:D,override:P,Events:kn,on:Yt,liveQuery:Go,extendObservabilitySet:tr,getByKeyPath:W,setByKeyPath:Y,delByKeyPath:function(e,t){typeof t=="string"?Y(e,t,void 0):"length"in t&&[].map.call(t,function(n){Y(e,n,void 0)})},shallowClone:ie,deepClone:ke,getObjectDiff:Lr,cmp:Me,asap:B,minKey:-1/0,addons:[],connections:dn,errnames:Pe,dependencies:ar,cache:tn,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),nn.maxKey=En(nn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Yt(Tn,function(e){Vt||(e=new CustomEvent(Tr,{detail:e}),Vt=!0,dispatchEvent(e),Vt=!1)}),addEventListener(Tr,function(e){e=e.detail,Vt||Vr(e)}));var pn,Vt=!1,Qo=function(){};return typeof BroadcastChannel<"u"&&((Qo=function(){(pn=new BroadcastChannel(Tr)).onmessage=function(e){return e.data&&Vr(e.data)}})(),typeof pn.unref=="function"&&pn.unref(),Yt(Tn,function(e){Vt||pn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Bt.disableBfCache&&e.persisted){We&&console.debug("Dexie: handling persisted pagehide"),pn!=null&&pn.close();for(var t=0,n=dn;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Bt.disableBfCache&&e.persisted&&(We&&console.debug("Dexie: handling persisted pageshow"),Qo(),Vr({all:new mt(-1/0,[[]])}))})),ee.rejectionMapper=function(e,t){return!e||e instanceof de||e instanceof TypeError||e instanceof SyntaxError||!e.name||!lt[e.name]?e:(t=new lt[e.name](t||e.message,e),"stack"in e&&z(t,"stack",{get:function(){return this.inner.stack}}),t)},Mt(We),s(Bt,Object.freeze({__proto__:null,Dexie:Bt,liveQuery:Go,Entity:So,cmp:Me,PropModification:Dn,replacePrefix:function(e,t){return new Dn({replacePrefix:[e,t]})},add:function(e){return new Dn({add:e})},remove:function(e){return new Dn({remove:e})},default:Bt,RangeSet:mt,mergeRanges:In,rangesOverlap:Ro}),{default:Bt}),Bt})}(lr)),lr.exports}var hs=ds();const io=Ma(hs),sa=Symbol.for("Dexie"),hr=globalThis[sa]||(globalThis[sa]=io);if(io.semVer!==hr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${io.semVer} and ${hr.semVer}`);const{liveQuery:Sc,mergeRanges:Tc,rangesOverlap:Ec,RangeSet:Cc,cmp:Oc,Entity:Ic,PropModification:Pc,replacePrefix:Ac,add:Mc,remove:jc}=hr;class vs{constructor(){this._db=new hr("FastingHours"),this._db.version(20).stores({history:"id, started",hunger:"id, created",water:"id, created"})}browseHistory(){return this._db.history.toArray()}browseHistoryByEnd(){return this._db.history.toArray().then(r=>r.filter(s=>s.ended===null)[0])}readHistory(r){return this._db.history.get({id:r})}editHistory(r){const a=Jr(r);return a.updated=new Date,this._db.history.put(a).then(()=>this._db.history.get({id:r.id}))}addHistory(){const r={id:crypto.randomUUID(),type:"history",created:new Date,updated:new Date,started:new Date,ended:null,notes:null};return this._db.history.add(r).then(()=>this._db.history.get({id:r.id}))}deleteHistory(r){return this._db.history.delete(r)}browseHunger(r=!1){return this._db.hunger.toArray().then(a=>r?(a.sort((s,l)=>s.created.getTime()<l.created.getTime()?1:s.created.getTime()>l.created.getTime()?-1:0),a.length===0?null:a[0]):a)}readHunger(r){return this._db.hunger.get({id:r})}editHunger(r){const a=Jr(r);return a.updated=new Date,this._db.hunger.put(a).then(()=>this._db.hunger.get({id:r.id}))}addHunger(r=5){const a={id:crypto.randomUUID(),type:"hunger",created:new Date,updated:new Date,level:r};return this._db.hunger.add(a).then(()=>this._db.hunger.get({id:a.id}))}deleteHunger(r){return this._db.hunger.delete(r)}browseWater(r=!1){return this._db.water.toArray().then(a=>{if(r){const s=new Date;s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);const l=new Date(s.getTime());return l.setDate(l.getDate()+1),a.filter(f=>f.created.getTime()>s.getTime()&&f.created.getTime()<l.getTime())}else return a})}readWater(r){return this._db.water.get({id:r})}editWater(r){const a=Jr(r);return a.updated=new Date,this._db.water.put(a).then(()=>this._db.water.get({id:r.id}))}addWater(r){const a={id:crypto.randomUUID(),type:"water",created:new Date,updated:new Date,volume:r};return crypto.randomUUID(),this._db.water.add(a).then(()=>this._db.water.get({id:a.id}))}deleteWater(r){return this._db.water.delete(r)}}var $r={exports:{}},ua;function ps(){return ua||(ua=1,function(o,r){(function(){var a=Math.PI,s=Math.sin,l=Math.cos,f=Math.tan,h=Math.asin,g=Math.atan2,x=Math.acos,I=a/180,j=1e3*60*60*24,M=2440588,D=2451545;function H(ne){return ne.valueOf()/j-.5+M}function z(ne){return new Date((ne+.5-M)*j)}function N(ne){return H(ne)-D}var V=I*23.4397;function K(ne,fe){return g(s(ne)*l(V)-f(fe)*s(V),l(ne))}function S(ne,fe){return h(s(fe)*l(V)+l(fe)*s(V)*s(ne))}function P(ne,fe,de){return g(s(ne),l(ne)*s(fe)-f(de)*l(fe))}function w(ne,fe,de){return h(s(fe)*s(de)+l(fe)*l(de)*l(ne))}function B(ne,fe){return I*(280.16+360.9856235*ne)-fe}function W(ne){return ne<0&&(ne=0),2967e-7/Math.tan(ne+.00312536/(ne+.08901179))}function Y(ne){return I*(357.5291+.98560028*ne)}function ie(ne){var fe=I*(1.9148*s(ne)+.02*s(2*ne)+3e-4*s(3*ne)),de=I*102.9372;return ne+fe+de+a}function ve(ne){var fe=Y(ne),de=ie(fe);return{dec:S(de,0),ra:K(de,0)}}var le={};le.getPosition=function(ne,fe,de){var qe=I*-de,Ee=I*fe,Fe=N(ne),Pe=ve(Fe),Ue=B(Fe,qe)-Pe.ra;return{azimuth:P(Ue,Ee,Pe.dec),altitude:w(Ue,Ee,Pe.dec)}};var De=le.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];le.addTime=function(ne,fe,de){De.push([ne,fe,de])};var pe=9e-4;function ke(ne,fe){return Math.round(ne-pe-fe/(2*a))}function Ne(ne,fe,de){return pe+(ne+fe)/(2*a)+de}function He(ne,fe,de){return D+ne+.0053*s(fe)-.0069*s(2*de)}function Qe(ne,fe,de){return x((s(ne)-s(fe)*s(de))/(l(fe)*l(de)))}function ht(ne){return-2.076*Math.sqrt(ne)/60}function Le(ne,fe,de,qe,Ee,Fe,Pe){var Ue=Qe(ne,de,qe),ae=Ne(Ue,fe,Ee);return He(ae,Fe,Pe)}le.getTimes=function(ne,fe,de,qe){qe=qe||0;var Ee=I*-de,Fe=I*fe,Pe=ht(qe),Ue=N(ne),ae=ke(Ue,Ee),lt=Ne(0,Ee,ae),it=Y(lt),Se=ie(it),vt=S(Se,0),pt=He(lt,it,Se),tt,Pt,gt,wt,kt,St,We={solarNoon:z(pt),nadir:z(pt-.5)};for(tt=0,Pt=De.length;tt<Pt;tt+=1)gt=De[tt],wt=(gt[0]+Pe)*I,kt=Le(wt,Ee,Fe,vt,ae,it,Se),St=pt-(kt-pt),We[gt[1]]=z(St),We[gt[2]]=z(kt);return We};function ut(ne){var fe=I*(218.316+13.176396*ne),de=I*(134.963+13.064993*ne),qe=I*(93.272+13.22935*ne),Ee=fe+I*6.289*s(de),Fe=I*5.128*s(qe),Pe=385001-20905*l(de);return{ra:K(Ee,Fe),dec:S(Ee,Fe),dist:Pe}}le.getMoonPosition=function(ne,fe,de){var qe=I*-de,Ee=I*fe,Fe=N(ne),Pe=ut(Fe),Ue=B(Fe,qe)-Pe.ra,ae=w(Ue,Ee,Pe.dec),lt=g(s(Ue),f(Ee)*l(Pe.dec)-s(Pe.dec)*l(Ue));return ae=ae+W(ae),{azimuth:P(Ue,Ee,Pe.dec),altitude:ae,distance:Pe.dist,parallacticAngle:lt}},le.getMoonIllumination=function(ne){var fe=N(ne||new Date),de=ve(fe),qe=ut(fe),Ee=149598e3,Fe=x(s(de.dec)*s(qe.dec)+l(de.dec)*l(qe.dec)*l(de.ra-qe.ra)),Pe=g(Ee*s(Fe),qe.dist-Ee*l(Fe)),Ue=g(l(de.dec)*s(de.ra-qe.ra),s(de.dec)*l(qe.dec)-l(de.dec)*s(qe.dec)*l(de.ra-qe.ra));return{fraction:(1+l(Pe))/2,phase:.5+.5*Pe*(Ue<0?-1:1)/Math.PI,angle:Ue}};function Ve(ne,fe){return new Date(ne.valueOf()+fe*j/24)}le.getMoonTimes=function(ne,fe,de,qe){var Ee=new Date(ne);qe?Ee.setUTCHours(0,0,0,0):Ee.setHours(0,0,0,0);for(var Fe=.133*I,Pe=le.getMoonPosition(Ee,fe,de).altitude-Fe,Ue,ae,lt,it,Se,vt,pt,tt,Pt,gt,wt,kt,St,We=1;We<=24&&(Ue=le.getMoonPosition(Ve(Ee,We),fe,de).altitude-Fe,ae=le.getMoonPosition(Ve(Ee,We+1),fe,de).altitude-Fe,Se=(Pe+ae)/2-Ue,vt=(ae-Pe)/2,pt=-vt/(2*Se),tt=(Se*pt+vt)*pt+Ue,Pt=vt*vt-4*Se*Ue,gt=0,Pt>=0&&(St=Math.sqrt(Pt)/(Math.abs(Se)*2),wt=pt-St,kt=pt+St,Math.abs(wt)<=1&&gt++,Math.abs(kt)<=1&&gt++,wt<-1&&(wt=kt)),gt===1?Pe<0?lt=We+wt:it=We+wt:gt===2&&(lt=We+(tt<0?kt:wt),it=We+(tt<0?wt:kt)),!(lt&&it));We+=2)Pe=ae;var Mt={};return lt&&(Mt.rise=Ve(Ee,lt)),it&&(Mt.set=Ve(Ee,it)),!lt&&!it&&(Mt[tt>0?"alwaysUp":"alwaysDown"]=!0),Mt},o.exports=le})()}($r)),$r.exports}var gs=ps();const ms=Ma(gs),ja=/^[a-z0-9]+(-[a-z0-9]+)*$/,gr=(o,r,a,s="")=>{const l=o.split(":");if(o.slice(0,1)==="@"){if(l.length<2||l.length>3)return null;s=l.shift().slice(1)}if(l.length>3||!l.length)return null;if(l.length>1){const g=l.pop(),x=l.pop(),I={provider:l.length>0?l[0]:s,prefix:x,name:g};return r&&!cr(I)?null:I}const f=l[0],h=f.split("-");if(h.length>1){const g={provider:s,prefix:h.shift(),name:h.join("-")};return r&&!cr(g)?null:g}if(a&&s===""){const g={provider:s,prefix:"",name:f};return r&&!cr(g,a)?null:g}return null},cr=(o,r)=>o?!!((r&&o.prefix===""||o.prefix)&&o.name):!1,Ka=Object.freeze({left:0,top:0,width:16,height:16}),vr=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),mr=Object.freeze({...Ka,...vr}),so=Object.freeze({...mr,body:"",hidden:!1});function ys(o,r){const a={};!o.hFlip!=!r.hFlip&&(a.hFlip=!0),!o.vFlip!=!r.vFlip&&(a.vFlip=!0);const s=((o.rotate||0)+(r.rotate||0))%4;return s&&(a.rotate=s),a}function la(o,r){const a=ys(o,r);for(const s in so)s in vr?s in o&&!(s in a)&&(a[s]=vr[s]):s in r?a[s]=r[s]:s in o&&(a[s]=o[s]);return a}function bs(o,r){const a=o.icons,s=o.aliases||Object.create(null),l=Object.create(null);function f(h){if(a[h])return l[h]=[];if(!(h in l)){l[h]=null;const g=s[h]&&s[h].parent,x=g&&f(g);x&&(l[h]=[g].concat(x))}return l[h]}return Object.keys(a).concat(Object.keys(s)).forEach(f),l}function _s(o,r,a){const s=o.icons,l=o.aliases||Object.create(null);let f={};function h(g){f=la(s[g]||l[g],f)}return h(r),a.forEach(h),la(o,f)}function qa(o,r){const a=[];if(typeof o!="object"||typeof o.icons!="object")return a;o.not_found instanceof Array&&o.not_found.forEach(l=>{r(l,null),a.push(l)});const s=bs(o);for(const l in s){const f=s[l];f&&(r(l,_s(o,l,f)),a.push(l))}return a}const ws={provider:"",aliases:{},not_found:{},...Ka};function eo(o,r){for(const a in r)if(a in o&&typeof o[a]!=typeof r[a])return!1;return!0}function Fa(o){if(typeof o!="object"||o===null)return null;const r=o;if(typeof r.prefix!="string"||!o.icons||typeof o.icons!="object"||!eo(o,ws))return null;const a=r.icons;for(const l in a){const f=a[l];if(!l||typeof f.body!="string"||!eo(f,so))return null}const s=r.aliases||Object.create(null);for(const l in s){const f=s[l],h=f.parent;if(!l||typeof h!="string"||!a[h]&&!s[h]||!eo(f,so))return null}return r}const ca=Object.create(null);function ks(o,r){return{provider:o,prefix:r,icons:Object.create(null),missing:new Set}}function yn(o,r){const a=ca[o]||(ca[o]=Object.create(null));return a[r]||(a[r]=ks(o,r))}function Ra(o,r){return Fa(r)?qa(r,(a,s)=>{s?o.icons[a]=s:o.missing.add(a)}):[]}function xs(o,r,a){try{if(typeof a.body=="string")return o.icons[r]={...a},!0}catch{}return!1}let qn=!1;function Ba(o){return typeof o=="boolean"&&(qn=o),qn}function Ds(o){const r=typeof o=="string"?gr(o,!0,qn):o;if(r){const a=yn(r.provider,r.prefix),s=r.name;return a.icons[s]||(a.missing.has(s)?null:void 0)}}function Ss(o,r){const a=gr(o,!0,qn);if(!a)return!1;const s=yn(a.provider,a.prefix);return r?xs(s,a.name,r):(s.missing.add(a.name),!0)}function Ts(o,r){if(typeof o!="object")return!1;if(typeof r!="string"&&(r=o.provider||""),qn&&!r&&!o.prefix){let l=!1;return Fa(o)&&(o.prefix="",qa(o,(f,h)=>{Ss(f,h)&&(l=!0)})),l}const a=o.prefix;if(!cr({prefix:a,name:"a"}))return!1;const s=yn(r,a);return!!Ra(s,o)}const Na=Object.freeze({width:null,height:null}),Ha=Object.freeze({...Na,...vr}),Es=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Cs=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function fa(o,r,a){if(r===1)return o;if(a=a||100,typeof o=="number")return Math.ceil(o*r*a)/a;if(typeof o!="string")return o;const s=o.split(Es);if(s===null||!s.length)return o;const l=[];let f=s.shift(),h=Cs.test(f);for(;;){if(h){const g=parseFloat(f);isNaN(g)?l.push(f):l.push(Math.ceil(g*r*a)/a)}else l.push(f);if(f=s.shift(),f===void 0)return l.join("");h=!h}}function Os(o,r="defs"){let a="";const s=o.indexOf("<"+r);for(;s>=0;){const l=o.indexOf(">",s),f=o.indexOf("</"+r);if(l===-1||f===-1)break;const h=o.indexOf(">",f);if(h===-1)break;a+=o.slice(l+1,f).trim(),o=o.slice(0,s).trim()+o.slice(h+1)}return{defs:a,content:o}}function Is(o,r){return o?"<defs>"+o+"</defs>"+r:r}function Ps(o,r,a){const s=Os(o);return Is(s.defs,r+s.content+a)}const As=o=>o==="unset"||o==="undefined"||o==="none";function Ms(o,r){const a={...mr,...o},s={...Ha,...r},l={left:a.left,top:a.top,width:a.width,height:a.height};let f=a.body;[a,s].forEach(N=>{const V=[],K=N.hFlip,S=N.vFlip;let P=N.rotate;K?S?P+=2:(V.push("translate("+(l.width+l.left).toString()+" "+(0-l.top).toString()+")"),V.push("scale(-1 1)"),l.top=l.left=0):S&&(V.push("translate("+(0-l.left).toString()+" "+(l.height+l.top).toString()+")"),V.push("scale(1 -1)"),l.top=l.left=0);let w;switch(P<0&&(P-=Math.floor(P/4)*4),P=P%4,P){case 1:w=l.height/2+l.top,V.unshift("rotate(90 "+w.toString()+" "+w.toString()+")");break;case 2:V.unshift("rotate(180 "+(l.width/2+l.left).toString()+" "+(l.height/2+l.top).toString()+")");break;case 3:w=l.width/2+l.left,V.unshift("rotate(-90 "+w.toString()+" "+w.toString()+")");break}P%2===1&&(l.left!==l.top&&(w=l.left,l.left=l.top,l.top=w),l.width!==l.height&&(w=l.width,l.width=l.height,l.height=w)),V.length&&(f=Ps(f,'<g transform="'+V.join(" ")+'">',"</g>"))});const h=s.width,g=s.height,x=l.width,I=l.height;let j,M;h===null?(M=g===null?"1em":g==="auto"?I:g,j=fa(M,x/I)):(j=h==="auto"?x:h,M=g===null?fa(j,I/x):g==="auto"?I:g);const D={},H=(N,V)=>{As(V)||(D[N]=V.toString())};H("width",j),H("height",M);const z=[l.left,l.top,x,I];return D.viewBox=z.join(" "),{attributes:D,viewBox:z,body:f}}const js=/\sid="(\S+)"/g,Ks="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let qs=0;function Fs(o,r=Ks){const a=[];let s;for(;s=js.exec(o);)a.push(s[1]);if(!a.length)return o;const l="suffix"+(Math.random()*16777216|Date.now()).toString(16);return a.forEach(f=>{const h=typeof r=="function"?r(f):r+(qs++).toString(),g=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o=o.replace(new RegExp('([#;"])('+g+')([")]|\\.[a-z])',"g"),"$1"+h+l+"$3")}),o=o.replace(new RegExp(l,"g"),""),o}const uo=Object.create(null);function Rs(o,r){uo[o]=r}function lo(o){return uo[o]||uo[""]}function mo(o){let r;if(typeof o.resources=="string")r=[o.resources];else if(r=o.resources,!(r instanceof Array)||!r.length)return null;return{resources:r,path:o.path||"/",maxURL:o.maxURL||500,rotate:o.rotate||750,timeout:o.timeout||5e3,random:o.random===!0,index:o.index||0,dataAfterTimeout:o.dataAfterTimeout!==!1}}const yo=Object.create(null),Mn=["https://api.simplesvg.com","https://api.unisvg.com"],fr=[];for(;Mn.length>0;)Mn.length===1||Math.random()>.5?fr.push(Mn.shift()):fr.push(Mn.pop());yo[""]=mo({resources:["https://api.iconify.design"].concat(fr)});function Bs(o,r){const a=mo(r);return a===null?!1:(yo[o]=a,!0)}function bo(o){return yo[o]}const Ns=()=>{let o;try{if(o=fetch,typeof o=="function")return o}catch{}};let da=Ns();function Hs(o,r){const a=bo(o);if(!a)return 0;let s;if(!a.maxURL)s=0;else{let l=0;a.resources.forEach(h=>{l=Math.max(l,h.length)});const f=r+".json?icons=";s=a.maxURL-l-a.path.length-f.length}return s}function Ls(o){return o===404}const zs=(o,r,a)=>{const s=[],l=Hs(o,r),f="icons";let h={type:f,provider:o,prefix:r,icons:[]},g=0;return a.forEach((x,I)=>{g+=x.length+1,g>=l&&I>0&&(s.push(h),h={type:f,provider:o,prefix:r,icons:[]},g=x.length),h.icons.push(x)}),s.push(h),s};function Us(o){if(typeof o=="string"){const r=bo(o);if(r)return r.path}return"/"}const Ys=(o,r,a)=>{if(!da){a("abort",424);return}let s=Us(r.provider);switch(r.type){case"icons":{const f=r.prefix,g=r.icons.join(","),x=new URLSearchParams({icons:g});s+=f+".json?"+x.toString();break}case"custom":{const f=r.uri;s+=f.slice(0,1)==="/"?f.slice(1):f;break}default:a("abort",400);return}let l=503;da(o+s).then(f=>{const h=f.status;if(h!==200){setTimeout(()=>{a(Ls(h)?"abort":"next",h)});return}return l=501,f.json()}).then(f=>{if(typeof f!="object"||f===null){setTimeout(()=>{f===404?a("abort",f):a("next",l)});return}setTimeout(()=>{a("success",f)})}).catch(()=>{a("next",l)})},Vs={prepare:zs,send:Ys};function Ws(o){const r={loaded:[],missing:[],pending:[]},a=Object.create(null);o.sort((l,f)=>l.provider!==f.provider?l.provider.localeCompare(f.provider):l.prefix!==f.prefix?l.prefix.localeCompare(f.prefix):l.name.localeCompare(f.name));let s={provider:"",prefix:"",name:""};return o.forEach(l=>{if(s.name===l.name&&s.prefix===l.prefix&&s.provider===l.provider)return;s=l;const f=l.provider,h=l.prefix,g=l.name,x=a[f]||(a[f]=Object.create(null)),I=x[h]||(x[h]=yn(f,h));let j;g in I.icons?j=r.loaded:h===""||I.missing.has(g)?j=r.missing:j=r.pending;const M={provider:f,prefix:h,name:g};j.push(M)}),r}function La(o,r){o.forEach(a=>{const s=a.loaderCallbacks;s&&(a.loaderCallbacks=s.filter(l=>l.id!==r))})}function Gs(o){o.pendingCallbacksFlag||(o.pendingCallbacksFlag=!0,setTimeout(()=>{o.pendingCallbacksFlag=!1;const r=o.loaderCallbacks?o.loaderCallbacks.slice(0):[];if(!r.length)return;let a=!1;const s=o.provider,l=o.prefix;r.forEach(f=>{const h=f.icons,g=h.pending.length;h.pending=h.pending.filter(x=>{if(x.prefix!==l)return!0;const I=x.name;if(o.icons[I])h.loaded.push({provider:s,prefix:l,name:I});else if(o.missing.has(I))h.missing.push({provider:s,prefix:l,name:I});else return a=!0,!0;return!1}),h.pending.length!==g&&(a||La([o],f.id),f.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),f.abort))})}))}let Qs=0;function Js(o,r,a){const s=Qs++,l=La.bind(null,a,s);if(!r.pending.length)return l;const f={id:s,icons:r,callback:o,abort:l};return a.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(f)}),l}function Xs(o,r=!0,a=!1){const s=[];return o.forEach(l=>{const f=typeof l=="string"?gr(l,r,a):l;f&&s.push(f)}),s}var Zs={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function $s(o,r,a,s){const l=o.resources.length,f=o.random?Math.floor(Math.random()*l):o.index;let h;if(o.random){let W=o.resources.slice(0);for(h=[];W.length>1;){const Y=Math.floor(Math.random()*W.length);h.push(W[Y]),W=W.slice(0,Y).concat(W.slice(Y+1))}h=h.concat(W)}else h=o.resources.slice(f).concat(o.resources.slice(0,f));const g=Date.now();let x="pending",I=0,j,M=null,D=[],H=[];typeof s=="function"&&H.push(s);function z(){M&&(clearTimeout(M),M=null)}function N(){x==="pending"&&(x="aborted"),z(),D.forEach(W=>{W.status==="pending"&&(W.status="aborted")}),D=[]}function V(W,Y){Y&&(H=[]),typeof W=="function"&&H.push(W)}function K(){return{startTime:g,payload:r,status:x,queriesSent:I,queriesPending:D.length,subscribe:V,abort:N}}function S(){x="failed",H.forEach(W=>{W(void 0,j)})}function P(){D.forEach(W=>{W.status==="pending"&&(W.status="aborted")}),D=[]}function w(W,Y,ie){const ve=Y!=="success";switch(D=D.filter(le=>le!==W),x){case"pending":break;case"failed":if(ve||!o.dataAfterTimeout)return;break;default:return}if(Y==="abort"){j=ie,S();return}if(ve){j=ie,D.length||(h.length?B():S());return}if(z(),P(),!o.random){const le=o.resources.indexOf(W.resource);le!==-1&&le!==o.index&&(o.index=le)}x="completed",H.forEach(le=>{le(ie)})}function B(){if(x!=="pending")return;z();const W=h.shift();if(W===void 0){if(D.length){M=setTimeout(()=>{z(),x==="pending"&&(P(),S())},o.timeout);return}S();return}const Y={status:"pending",resource:W,callback:(ie,ve)=>{w(Y,ie,ve)}};D.push(Y),I++,M=setTimeout(B,o.rotate),a(W,r,Y.callback)}return setTimeout(B),K}function za(o){const r={...Zs,...o};let a=[];function s(){a=a.filter(g=>g().status==="pending")}function l(g,x,I){const j=$s(r,g,x,(M,D)=>{s(),I&&I(M,D)});return a.push(j),j}function f(g){return a.find(x=>g(x))||null}return{query:l,find:f,setIndex:g=>{r.index=g},getIndex:()=>r.index,cleanup:s}}function ha(){}const to=Object.create(null);function eu(o){if(!to[o]){const r=bo(o);if(!r)return;const a=za(r),s={config:r,redundancy:a};to[o]=s}return to[o]}function tu(o,r,a){let s,l;if(typeof o=="string"){const f=lo(o);if(!f)return a(void 0,424),ha;l=f.send;const h=eu(o);h&&(s=h.redundancy)}else{const f=mo(o);if(f){s=za(f);const h=o.resources?o.resources[0]:"",g=lo(h);g&&(l=g.send)}}return!s||!l?(a(void 0,424),ha):s.query(r,l,a)().abort}function va(){}function nu(o){o.iconsLoaderFlag||(o.iconsLoaderFlag=!0,setTimeout(()=>{o.iconsLoaderFlag=!1,Gs(o)}))}function ru(o){const r=[],a=[];return o.forEach(s=>{(s.match(ja)?r:a).push(s)}),{valid:r,invalid:a}}function jn(o,r,a){function s(){const l=o.pendingIcons;r.forEach(f=>{l&&l.delete(f),o.icons[f]||o.missing.add(f)})}if(a&&typeof a=="object")try{if(!Ra(o,a).length){s();return}}catch(l){console.error(l)}s(),nu(o)}function pa(o,r){o instanceof Promise?o.then(a=>{r(a)}).catch(()=>{r(null)}):r(o)}function ou(o,r){o.iconsToLoad?o.iconsToLoad=o.iconsToLoad.concat(r).sort():o.iconsToLoad=r,o.iconsQueueFlag||(o.iconsQueueFlag=!0,setTimeout(()=>{o.iconsQueueFlag=!1;const{provider:a,prefix:s}=o,l=o.iconsToLoad;if(delete o.iconsToLoad,!l||!l.length)return;const f=o.loadIcon;if(o.loadIcons&&(l.length>1||!f)){pa(o.loadIcons(l,s,a),j=>{jn(o,l,j)});return}if(f){l.forEach(j=>{const M=f(j,s,a);pa(M,D=>{const H=D?{prefix:s,icons:{[j]:D}}:null;jn(o,[j],H)})});return}const{valid:h,invalid:g}=ru(l);if(g.length&&jn(o,g,null),!h.length)return;const x=s.match(ja)?lo(a):null;if(!x){jn(o,h,null);return}x.prepare(a,s,h).forEach(j=>{tu(a,j,M=>{jn(o,j.icons,M)})})}))}const au=(o,r)=>{const a=Xs(o,!0,Ba()),s=Ws(a);if(!s.pending.length){let x=!0;return r&&setTimeout(()=>{x&&r(s.loaded,s.missing,s.pending,va)}),()=>{x=!1}}const l=Object.create(null),f=[];let h,g;return s.pending.forEach(x=>{const{provider:I,prefix:j}=x;if(j===g&&I===h)return;h=I,g=j,f.push(yn(I,j));const M=l[I]||(l[I]=Object.create(null));M[j]||(M[j]=[])}),s.pending.forEach(x=>{const{provider:I,prefix:j,name:M}=x,D=yn(I,j),H=D.pendingIcons||(D.pendingIcons=new Set);H.has(M)||(H.add(M),l[I][j].push(M))}),f.forEach(x=>{const I=l[x.provider][x.prefix];I.length&&ou(x,I)}),r?Js(r,s,f):va};function iu(o,r){const a={...o};for(const s in r){const l=r[s],f=typeof l;s in Na?(l===null||l&&(f==="string"||f==="number"))&&(a[s]=l):f===typeof a[s]&&(a[s]=s==="rotate"?l%4:l)}return a}const su=/[\s,]+/;function uu(o,r){r.split(su).forEach(a=>{switch(a.trim()){case"horizontal":o.hFlip=!0;break;case"vertical":o.vFlip=!0;break}})}function lu(o,r=0){const a=o.replace(/^-?[0-9.]*/,"");function s(l){for(;l<0;)l+=4;return l%4}if(a===""){const l=parseInt(o);return isNaN(l)?0:s(l)}else if(a!==o){let l=0;switch(a){case"%":l=25;break;case"deg":l=90}if(l){let f=parseFloat(o.slice(0,o.length-a.length));return isNaN(f)?0:(f=f/l,f%1===0?s(f):0)}}return r}function cu(o,r){let a=o.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in r)a+=" "+s+'="'+r[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+a+">"+o+"</svg>"}function fu(o){return o.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function du(o){return"data:image/svg+xml,"+fu(o)}function hu(o){return'url("'+du(o)+'")'}const ga={...Ha,inline:!1},vu={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},pu={display:"inline-block"},co={"background-color":"currentColor"},Ua={"background-color":"transparent"},ma={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},ya={"-webkit-mask":co,mask:co,background:Ua};for(const o in ya){const r=ya[o];for(const a in ma)r[o+"-"+a]=ma[a]}function gu(o){return o+(o.match(/^[-0-9.]+$/)?"px":"")}function mu(o,r){const a=iu(ga,r),s=r.mode||"svg",l=s==="svg"?{...vu}:{};o.body.indexOf("xlink:")===-1&&delete l["xmlns:xlink"];let f=typeof r.style=="string"?r.style:"";for(let K in r){const S=r[K];if(S!==void 0)switch(K){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":a[K]=S===!0||S==="true"||S===1;break;case"flip":typeof S=="string"&&uu(a,S);break;case"color":f=f+(f.length>0&&f.trim().slice(-1)!==";"?";":"")+"color: "+S+"; ";break;case"rotate":typeof S=="string"?a[K]=lu(S):typeof S=="number"&&(a[K]=S);break;case"ariaHidden":case"aria-hidden":S!==!0&&S!=="true"&&delete l["aria-hidden"];break;default:if(K.slice(0,3)==="on:")break;ga[K]===void 0&&(l[K]=S)}}const h=Ms(o,a),g=h.attributes;if(a.inline&&(f="vertical-align: -0.125em; "+f),s==="svg"){Object.assign(l,g),f!==""&&(l.style=f);let K=0,S=r.id;return typeof S=="string"&&(S=S.replace(/-/g,"_")),{svg:!0,attributes:l,body:Fs(h.body,S?()=>S+"ID"+K++:"iconifySvelte")}}const{body:x,width:I,height:j}=o,M=s==="mask"||(s==="bg"?!1:x.indexOf("currentColor")!==-1),D=cu(x,{...g,width:I+"",height:j+""}),z={"--svg":hu(D)},N=K=>{const S=g[K];S&&(z[K]=gu(S))};N("width"),N("height"),Object.assign(z,pu,M?co:Ua);let V="";for(const K in z)V+=K+": "+z[K]+";";return l.style=V+f,{svg:!1,attributes:l}}Ba(!0);Rs("",Vs);if(typeof document<"u"&&typeof window<"u"){const o=window;if(o.IconifyPreload!==void 0){const r=o.IconifyPreload,a="Invalid IconifyPreload syntax.";typeof r=="object"&&r!==null&&(r instanceof Array?r:[r]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!Ts(s))&&console.error(a)}catch{console.error(a)}})}if(o.IconifyProviders!==void 0){const r=o.IconifyProviders;if(typeof r=="object"&&r!==null)for(let a in r){const s="IconifyProviders["+a+"] is invalid.";try{const l=r[a];if(typeof l!="object"||!l||l.resources===void 0)continue;Bs(a,l)||console.error(s)}catch{console.error(s)}}}}function yu(o,r,a,s,l){function f(){r.loading&&(r.loading.abort(),r.loading=null)}if(typeof o=="object"&&o!==null&&typeof o.body=="string")return r.name="",f(),{data:{...mr,...o}};let h;if(typeof o!="string"||(h=gr(o,!1,!0))===null)return f(),null;const g=Ds(h);if(!g)return a&&(!r.loading||r.loading.name!==o)&&(f(),r.name="",r.loading={name:o,abort:au([h],s)}),null;f(),r.name!==o&&(r.name=o,l&&!r.destroyed&&l(o));const x=["iconify"];return h.prefix!==""&&x.push("iconify--"+h.prefix),h.provider!==""&&x.push("iconify--"+h.provider),{data:g,classes:x}}function bu(o,r){return o?mu({...mr,...o},r):null}var _u=Vi("<svg><!></svg>"),wu=ye("<span></span>");function Ze(o,r){$e(r,!0);const a={name:"",loading:null,destroyed:!1},s=Wi(r,["$$slots","$$events","$$legacy"]);let l=be(!1),f=be(0),h=be(null);Ui(()=>{m(f);const M=!!r.ssr||m(l),D=yu(r.icon,a,M,g,r.onload),H=D?bu(D.data,s):null;H&&D.classes&&(H.attributes.class=(typeof s.class=="string"?s.class+" ":"")+D.classes.join(" ")),oe(h,H,!0)});function g(){Yi(f)}sn(()=>{oe(l,!0)}),bi(()=>{a.destroyed=!0,a.loading&&(a.loading.abort(),a.loading=null)});var x=an(),I=Dt(x);{var j=M=>{var D=an(),H=Dt(D);{var z=V=>{var K=_u();oa(K,()=>({...m(h).attributes}));var S=L(K);es(S,()=>m(h).body,!0),R(K),he(V,K)},N=V=>{var K=wu();oa(K,()=>({...m(h).attributes})),he(V,K)};ot(H,V=>{m(h).svg?V(z):V(N,!1)})}he(M,D)};ot(I,M=>{m(h)&&M(j)})}he(o,x),et()}var ku=(o,r)=>r(0),xu=(o,r)=>r(14),Du=(o,r)=>r(16),Su=(o,r)=>r(23),Tu=(o,r)=>r(40),Eu=ye('<div class="svelte-ziixid"><button type="button"><!></button> <button type="button">14h</button> <button type="button">16h</button> <button type="button">23h</button> <button type="button">40h</button></div>');function Cu(o,r){$e(r,!0);let a=me(r,"value",7,0);function s(V){a(V),r.onchange&&r.onchange(a())}var l=Eu(),f=L(l);f.__click=[ku,s];let h;var g=L(f);Ze(g,{height:"20",icon:"stash:infinity-duotone",width:"20"}),R(f);var x=G(f,2);x.__click=[xu,s];let I;var j=G(x,2);j.__click=[Du,s];let M;var D=G(j,2);D.__click=[Su,s];let H;var z=G(D,2);z.__click=[Tu,s];let N;R(l),je((V,K,S,P,w)=>{h=Xe(f,1,"svelte-ziixid",null,h,V),I=Xe(x,1,"svelte-ziixid",null,I,K),M=Xe(j,1,"svelte-ziixid",null,M,S),H=Xe(D,1,"svelte-ziixid",null,H,P),N=Xe(z,1,"svelte-ziixid",null,N,w)},[()=>({selected:a()===0}),()=>({selected:a()===14}),()=>({selected:a()===16}),()=>({selected:a()===23}),()=>({selected:a()===40})]),he(o,l),et()}st(["click"]);var Ou=ye('<div class="hour svelte-z94qzf"></div>'),Iu=ye('<div class="day svelte-z94qzf"><!></div>'),Pu=ye('<p class="day svelte-z94qzf"> </p> <!>',1),Au=ye('<div class="day svelte-z94qzf"><div class="hour svelte-z94qzf"></div></div>'),Mu=ye('<figure class="svelte-z94qzf"><div class="labels svelte-z94qzf"><p class="date svelte-z94qzf">Date</p> <p class="hour svelte-z94qzf">0</p> <p class="hour svelte-z94qzf">12</p> <p class="hour svelte-z94qzf">24</p></div> <div class="grid svelte-z94qzf"><!></div> <div class="average grid svelte-z94qzf"><p class="day svelte-z94qzf">Avg</p> <!></div></figure>');function ju(o,r){$e(r,!0);let a=me(r,"average",19,()=>[]),s=me(r,"daily",3,null);me(r,"days",3,10);function l(D){return D=new Date(D+"T00:00:00"),new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(D)}function f(D,H){return D===0||H[D-1]===0?(1-H[D])*100+"%":0}var h=Mu(),g=G(L(h),2),x=L(g);{var I=D=>{var H=an(),z=Dt(H);Et(z,17,()=>Object.keys(s()),Tt,(N,V)=>{var K=Pu();const S=Ye(()=>s()[m(V)]);var P=Dt(K),w=L(P,!0);R(P);var B=G(P,2);Et(B,16,()=>({length:24}),Tt,(W,Y,ie)=>{var ve=Iu(),le=L(ve);{var De=pe=>{var ke=Ou();let Ne;je(He=>Ne=mn(ke,"",Ne,He),[()=>({"margin-left":f(ie,m(S)),width:100*m(S)[ie]+"%"})]),he(pe,ke)};ot(le,pe=>{m(S)[ie]!==0&&pe(De)})}R(ve),he(W,ve)}),je(W=>we(w,W),[()=>l(m(V))]),he(N,K)}),he(D,H)};ot(x,D=>{s()!==null&&D(I)})}R(g);var j=G(g,2),M=G(L(j),2);Et(M,16,()=>({length:24}),Tt,(D,H,z)=>{var N=Au(),V=L(N);let K;R(N),je(S=>K=mn(V,"",K,S),[()=>({opacity:a()[z],width:"100%"})]),he(D,N)}),R(j),R(h),he(o,h),et()}function Ku(o,r,a,s){const l=m(r).getBoundingClientRect();m(a).style.width=l.width-2+"px",oe(s,!m(s))}var qu=(o,r,a)=>r(m(a)),Fu=ye('<li><button type="button" class="svelte-dpktq5"><!> <span class="svelte-dpktq5"> </span> <!></button></li>'),Ru=ye('<label class="svelte-dpktq5"><button type="button" class="svelte-dpktq5"><!> <span class="svelte-dpktq5"> </span> <!></button> <ul></ul></label>');function Bu(o,r){$e(r,!0);let a=me(r,"items",19,()=>[]),s=me(r,"value",7,0),l=be(!1),f=be(void 0),h=be(void 0),g=Ye(()=>a().length>0?a()[s()].icon:""),x=Ye(()=>a().length>0?a()[s()].label:"");sn(()=>(document.addEventListener("click",I),()=>{document.removeEventListener("click",I)}));function I(P){!m(f).contains(P.target)&&!m(h).contains(P.target)&&oe(l,!1)}function j(P){s(P.value),oe(l,!1),r.onchange&&r.onchange(P)}var M=Ru(),D=L(M);D.__click=[Ku,f,h,l];var H=L(D);Ze(H,{height:"20",get icon(){return m(g)},width:"20"});var z=G(H,2),N=L(z,!0);R(z);var V=G(z,2);Ze(V,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),R(D),dt(D,P=>oe(f,P),()=>m(f));var K=G(D,2);let S;Et(K,21,a,Tt,(P,w)=>{var B=Fu();let W;var Y=L(B);Y.__click=[qu,j,w];var ie=L(Y);Ze(ie,{height:"20",get icon(){return m(w).icon},width:"20"});var ve=G(ie,2),le=L(ve,!0);R(ve);var De=G(ve,2);{var pe=ke=>{Ze(ke,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};ot(De,ke=>{m(w).value===s()&&ke(pe)})}R(Y),R(B),je(ke=>{W=Xe(B,1,"svelte-dpktq5",null,W,ke),we(le,m(w).label)},[()=>({selected:s()===m(w).value})]),he(P,B)}),R(K),dt(K,P=>oe(h,P),()=>m(h)),R(M),je(P=>{we(N,m(x)),S=Xe(K,1,"svelte-dpktq5",null,S,P)},[()=>({open:m(l)})]),he(o,M),et()}st(["click"]);var Nu=ye('<p class="svelte-1lve2pk">0</p>'),Hu=ye('<p class="svelte-1lve2pk"> </p>'),Lu=ye('<p class="svelte-1lve2pk"> </p>'),zu=ye('<div class="column svelte-1lve2pk"><p class="svelte-1lve2pk"> </p></div>'),Uu=ye('<div class="line svelte-1lve2pk"></div>'),Yu=ye('<div class="average svelte-1lve2pk"></div>'),Vu=ye('<figure class="svelte-1lve2pk"><div class="labels svelte-1lve2pk"><!></div> <div class="chart svelte-1lve2pk"><div class="labels svelte-1lve2pk"></div> <div class="columns svelte-1lve2pk"><!> <!> <!></div></div></figure>');function Wu(o,r){$e(r,!0);let a=me(r,"average",3,0),s=me(r,"daily",19,()=>[]),l=Ye(()=>s().reduce((w,B)=>(w=B.volume>w?B.volume:w,w),0)),f=Ye(()=>{const w=Math.floor(m(l)+m(l)*.1);return[0,Math.round(w/4)*1,Math.round(w/4)*2,Math.round(w/4)*3,w]});function h(w){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(w)}var g=Vu(),x=L(g),I=L(x);{var j=w=>{var B=Nu();he(w,B)},M=w=>{var B=an(),W=Dt(B);Et(W,17,()=>m(f),Tt,(Y,ie)=>{var ve=Hu();const le=Ye(()=>m(ie)===0?"0":m(ie)+" oz");var De=L(ve,!0);R(ve),je(()=>we(De,m(le))),he(Y,ve)}),he(w,B)};ot(I,w=>{m(l)===0?w(j):w(M,!1)})}R(x);var D=G(x,2),H=L(D);Et(H,21,s,Tt,(w,B)=>{var W=Lu(),Y=L(W,!0);R(W),je(ie=>we(Y,ie),[()=>h(m(B).created)]),he(w,W)}),R(H);var z=G(H,2),N=L(z);{var V=w=>{var B=an(),W=Dt(B);Et(W,17,s,Tt,(Y,ie)=>{var ve=zu();let le;var De=L(ve),pe=L(De);R(De),R(ve),je(ke=>{le=mn(ve,"",le,ke),we(pe,`${m(ie).volume??""} oz`)},[()=>({width:`${m(ie).volume/Math.floor(m(l)+m(l)*.1)*100}%`})]),he(Y,ve)}),he(w,B)};ot(N,w=>{m(l)!==0&&w(V)})}var K=G(N,2);Et(K,16,()=>({length:4}),Tt,(w,B,W)=>{var Y=Uu();Gt(Y,"data-value",W),mn(Y,"",{},{left:`${25*(W+1)}%`}),he(w,Y)});var S=G(K,2);{var P=w=>{var B=Yu();let W;je(Y=>{Gt(B,"data-value",a()),W=mn(B,"",W,Y)},[()=>({left:`${a()/Math.floor(m(l)+m(l)*.1)*100}%`})]),he(w,B)};ot(S,w=>{a()>0&&w(P)})}R(z),R(D),R(g),he(o,g),et()}var Gu=ye('<button class="sun svelte-wl8176" type="button">Sunrise/sunset</button>'),Qu=ye('<!> <p class="svelte-wl8176"> </p>',1),Ju=ye('<section class="svelte-wl8176"><!> <footer class="svelte-wl8176"><div class="daynight svelte-wl8176"><!></div> <!></footer></section>');function Ya(o,r){$e(r,!0);let a=me(r,"activity",3,null),s=me(r,"days",3,10),l=me(r,"water",3,null);const f=[{icon:"material-symbols:local-fire-department-outline-rounded",label:"Fasting",value:0},{icon:"material-symbols:water-drop-outline-rounded",label:"Water",value:1}];let h=be(0);function g(S){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(S)}var x=Ju(),I=L(x);{var j=S=>{const P=Ye(()=>a()&&a().average?a().average:[]),w=Ye(()=>a()&&a().daily?a().daily:[]);ju(S,{get average(){return m(P)},get daily(){return m(w)},get days(){return s()}})},M=(S,P)=>{{var w=B=>{const W=Ye(()=>l()&&l().average?l().average:null),Y=Ye(()=>l()&&l().daily?l().daily:null);Wu(B,{get average(){return m(W)},get daily(){return m(Y)}})};ot(S,B=>{m(h)===1&&B(w)},P)}};ot(I,S=>{m(h)===0?S(j):S(M,!1)})}var D=G(I,2),H=L(D),z=L(H);{var N=S=>{var P=Gu();P.__click=function(...w){var B;(B=r.onsun)==null||B.apply(this,w)},he(S,P)},V=S=>{var P=Qu(),w=Dt(P);const B=Ye(()=>r.sun&&r.sun.icon?r.sun.icon:null);Ze(w,{height:"16",get icon(){return m(B)},width:"16"});var W=G(w,2),Y=L(W,!0);R(W),je(ie=>we(Y,ie),[()=>r.sun&&r.sun.timing?g(r.sun.timing):""]),he(S,P)};ot(z,S=>{r.sun===null?S(N):S(V,!1)})}R(H);var K=G(H,2);Bu(K,{get items(){return f},mount:"top",onchange:S=>oe(h,S.value,!0)}),R(D),R(x),he(o,x),et()}st(["click"]);function Xu(o,r){oe(r,!m(r))}var Zu=(o,r,a)=>r(m(a)),$u=ye('<li class="svelte-a6ycms"><button type="button" class="svelte-a6ycms"><span class="svelte-a6ycms"> </span></button></li>'),el=ye('<label class="svelte-a6ycms"><button type="button" class="svelte-a6ycms"><!> <span class="svelte-a6ycms"> </span> <!></button> <ul></ul></label>');function tl(o,r){$e(r,!0);let a=me(r,"items",19,()=>[]),s=me(r,"value",3,5),l=be(!1),f=be(void 0),h=be(void 0),g=Ye(()=>a().find(P=>P.value===s()).label);sn(()=>(document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}));function x(S){!m(f).contains(S.target)&&!m(h).contains(S.target)&&oe(l,!1)}function I(S){oe(l,!1),r.onchange&&r.onchange(S.value)}var j=el(),M=L(j);M.__click=[Xu,l];var D=L(M);Ze(D,{height:"20",icon:"material-symbols:fork-spoon-rounded",width:"20"});var H=G(D,2),z=L(H,!0);R(H);var N=G(H,2);Ze(N,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),R(M),dt(M,S=>oe(f,S),()=>m(f));var V=G(M,2);let K;Et(V,21,a,Tt,(S,P)=>{var w=$u(),B=L(w);B.__click=[Zu,I,P];var W=L(B),Y=L(W,!0);R(W),R(B),R(w),je(()=>we(Y,m(P).label)),he(S,w)}),R(V),dt(V,S=>oe(h,S),()=>m(h)),R(j),je(S=>{we(z,m(g)),K=Xe(V,1,"svelte-a6ycms",null,K,S)},[()=>({open:m(l)})]),he(o,j),et()}st(["click"]);var nl=ye('<article><p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">hrs</span></p> <p class="colon svelte-1yn3hhw">:</p> <p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">min</span></p> <p class="colon svelte-1yn3hhw">:</p> <p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">sec</span></p></article>');function rl(o,r){$e(r,!0);let a=me(r,"duration",3,0),s=me(r,"now",3,null),l=me(r,"started",3,null),f=Ye(()=>{let S=Math.floor((s()-l().getTime())/1e3);if(a()!==0){const P=new Date(l().getTime()+a()*36e5);S=Math.floor((P.getTime()-s())/1e3)}return S}),h=Ye(()=>l()===null?{hours:0,minutes:"00",seconds:"00"}:{hours:Math.floor(m(f)/3600).toString(10).padStart(2,"0"),minutes:Math.floor(m(f)%3600/60).toString(10).padStart(2,"0"),seconds:(m(f)%60).toString(10).padStart(2,"0")});var g=nl();let x;var I=L(g),j=L(I),M=L(j,!0);R(j),Qr(2),R(I);var D=G(I,4),H=L(D),z=L(H,!0);R(H),Qr(2),R(D);var N=G(D,4),V=L(N),K=L(V,!0);R(V),Qr(2),R(N),R(g),je(S=>{x=Xe(g,1,"svelte-1yn3hhw",null,x,S),we(M,m(h).hours),we(z,m(h).minutes),we(K,m(h).seconds)},[()=>({complete:m(f)<0})]),he(o,g),et()}function ol(o,r){oe(r,!m(r))}var al=(o,r,a)=>r(m(a)),il=ye('<li class="svelte-1yteqtn"><button type="button" class="svelte-1yteqtn"><span class="svelte-1yteqtn"> </span> <span class="svelte-1yteqtn"> </span></button></li>'),sl=ye('<label class="svelte-1yteqtn"><button type="button" class="svelte-1yteqtn"><!> <span class="svelte-1yteqtn"> </span> <!></button> <ul></ul></label>');function ul(o,r){$e(r,!0);let a=me(r,"items",19,()=>[]),s=me(r,"units",3,"oz"),l=me(r,"value",3,0),f=be(!1),h=be(void 0),g=be(void 0);sn(()=>(document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}));function x(S){!m(h).contains(S.target)&&!m(g).contains(S.target)&&oe(f,!1)}function I(S){oe(f,!1),r.onchange&&r.onchange(S.value)}var j=sl(),M=L(j);M.__click=[ol,f];var D=L(M);Ze(D,{height:"20",icon:"material-symbols:water-drop-outline-rounded",width:"20"});var H=G(D,2),z=L(H);R(H);var N=G(H,2);Ze(N,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),R(M),dt(M,S=>oe(h,S),()=>m(h));var V=G(M,2);let K;Et(V,21,a,Tt,(S,P)=>{var w=il(),B=L(w);B.__click=[al,I,P];var W=L(B),Y=L(W,!0);R(W);var ie=G(W,2),ve=L(ie);R(ie),R(B),R(w),je(()=>{we(Y,m(P).label),we(ve,`${m(P).value??""} ${s()??""}`)}),he(S,w)}),R(V),dt(V,S=>oe(g,S),()=>m(g)),R(j),je(S=>{we(z,`${l()??""} ${s()??""}`),K=Xe(V,1,"svelte-1yteqtn",null,K,S)},[()=>({open:m(f)})]),he(o,j),et()}st(["click"]);function ll(o,r,a){r()===null?a.onstart&&a.onstart():a.onend&&a.onend()}var cl=ye('<p class="svelte-1wi0ic3">You are not fasting.</p>'),fl=ye('<p class="svelte-1wi0ic3">You are fasting.</p> <!> <!> <p class="started svelte-1wi0ic3"> </p>',1),dl=ye('<section class="svelte-1wi0ic3"><header class="svelte-1wi0ic3"><h3 class="svelte-1wi0ic3">Fasting</h3> <button type="button" class="svelte-1wi0ic3"><!></button></header> <article class="svelte-1wi0ic3"><!> <button class="primary svelte-1wi0ic3" type="button"> </button></article> <div class="graph svelte-1wi0ic3"><!></div> <footer class="svelte-1wi0ic3"><!> <!></footer></section>');function hl(o,r){$e(r,!0);let a=me(r,"activity",3,null),s=me(r,"duration",3,0),l=me(r,"hunger",3,5),f=me(r,"levels",19,()=>[]),h=me(r,"now",3,null),g=me(r,"started",3,null),x=me(r,"sun",3,null),I=me(r,"volume",3,null),j=me(r,"water",3,0);const M=[{value:8,label:"Cup"},{value:12,label:"Can"},{value:16,label:"Bottle"},{value:20,label:"Medium"},{value:30,label:"Gatorade"},{value:32,label:"Big Q"},{value:44,label:"QT Large"},{value:52,label:"Extra Large"}];function D(pe){return pe===null?null:new Intl.DateTimeFormat(navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(pe)}var H=dl(),z=L(H),N=G(L(z),2);N.__click=function(...pe){var ke;(ke=r.onsettings)==null||ke.apply(this,pe)};var V=L(N);Ze(V,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),R(N),R(z);var K=G(z,2),S=L(K);{var P=pe=>{var ke=cl();he(pe,ke)},w=pe=>{var ke=fl(),Ne=G(Dt(ke),2);rl(Ne,{get duration(){return s()},get now(){return h()},get started(){return g()}});var He=G(Ne,2);Cu(He,{get onchange(){return r.onduration},get value(){return s()}});var Qe=G(He,2),ht=L(Qe);R(Qe),je(Le=>we(ht,`Started ${Le??""}`),[()=>D(g())]),he(pe,ke)};ot(S,pe=>{g()===null?pe(P):pe(w,!1)})}var B=G(S,2);B.__click=[ll,g,r];var W=L(B);R(B),R(K);var Y=G(K,2),ie=L(Y);Ya(ie,{get activity(){return a()},days:7,get onsun(){return r.onsun},get sun(){return x()},get water(){return I()}}),R(Y);var ve=G(Y,2),le=L(ve);tl(le,{get items(){return f()},get onchange(){return r.onhunger},get value(){return l()}});var De=G(le,2);ul(De,{get items(){return M},get onchange(){return r.onwater},get value(){return j()}}),R(ve),R(H),je(()=>we(W,`${g()===null?"Start":"Stop"} fasting`)),he(o,H),et()}st(["click"]);function vl(o,r,a,s){const l=new Date(parseInt(o.currentTarget.getAttribute("data-year")),parseInt(o.currentTarget.getAttribute("data-month")),parseInt(o.currentTarget.getAttribute("data-date")));l.getMonth()!==r().getMonth()&&r(new Date(l.getTime())),a(new Date(l.getTime())),s.onchange&&s.onchange(a())}var pl=ye('<button type="button"> </button>'),gl=ye('<section><header class="svelte-1ll096s"><h3 class="svelte-1ll096s"> </h3> <button type="button" class="svelte-1ll096s"><!></button> <button type="button" class="svelte-1ll096s"><!></button></header> <article class="svelte-1ll096s"><p class="svelte-1ll096s">Sun</p> <p class="svelte-1ll096s">Mon</p> <p class="svelte-1ll096s">Tue</p> <p class="svelte-1ll096s">Wed</p> <p class="svelte-1ll096s">Thu</p> <p class="svelte-1ll096s">Fri</p> <p class="svelte-1ll096s">Sat</p></article> <article class="svelte-1ll096s"></article></section>');function ml(o,r){$e(r,!0);let a=me(r,"display",23,()=>new Date),s=me(r,"value",23,()=>new Date),l=Ye(()=>new Intl.DateTimeFormat(navigator.language,{month:"long",year:"numeric"}).format(a())),f=Ye(()=>{const K=[],S=new Date,P=new Date(a().getFullYear(),a().getMonth(),1);P.setDate(P.getDate()-P.getDay());for(let w=0;w<42;w++){const B={date:P.getDate(),month:P.getMonth(),year:P.getFullYear(),outside:!0,today:!1,selected:!1,after:!1};P.getFullYear()===a().getFullYear()&&P.getMonth()===a().getMonth()&&(B.outside=!1),P.getTime()>Date.now()&&(B.after=!0),P.getFullYear()===S.getFullYear()&&P.getMonth()===S.getMonth()&&P.getDate()===S.getDate()&&(B.today=!0),P.getFullYear()===s().getFullYear()&&P.getMonth()===s().getMonth()&&P.getDate()===s().getDate()&&(B.selected=!0),P.setDate(P.getDate()+1),K.push(B)}return K});function h(){let K=a().getMonth(),S=a().getFullYear();S=K===0?S-1:S,K=K===0?11:K-1,a(new Date(S,K,a().getDate()))}function g(){let K=a().getMonth(),S=a().getFullYear();S=K===11?S+1:S,K=(K+1)%12,a(new Date(S,K,a().getDate()))}var x=gl(),I=L(x),j=L(I),M=L(j,!0);R(j);var D=G(j,2);D.__click=h;var H=L(D);Ze(H,{height:"24",icon:"material-symbols:navigate-before",width:"24"}),R(D);var z=G(D,2);z.__click=g;var N=L(z);Ze(N,{height:"24",icon:"material-symbols:navigate-next",width:"24"}),R(z),R(I);var V=G(I,4);Et(V,21,()=>m(f),Tt,(K,S)=>{var P=pl();P.__click=[vl,a,s,r];let w;var B=L(P,!0);R(P),je(W=>{Gt(P,"data-year",m(S).year),Gt(P,"data-month",m(S).month),Gt(P,"data-date",m(S).date),P.disabled=m(S).after,w=Xe(P,1,"svelte-1ll096s",null,w,W),we(B,m(S).date)},[()=>({outside:m(S).outside,today:m(S).today,selected:m(S).selected})]),he(K,P)}),R(V),R(x),je(()=>we(M,m(l))),he(o,x),et()}st(["click"]);function yl(o,r,a){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===12?s.setHours(23):s.setHours(s.getHours()-1):s.getHours()===0?s.setHours(11):s.setHours(s.getHours()-1),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function bl(o,r,a){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===23?s.setHours(12):s.setHours(s.getHours()+1):s.getHours()===11?s.setHours(0):s.setHours(s.getHours()+1),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function _l(o,r,a){const s=new Date(r().getTime());s.getHours()>=12&&s.setHours(s.getHours()-12),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function wl(o,r,a){const s=new Date(r().getTime());s.getHours()<12&&s.setHours(s.getHours()+12),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function kl(o,r,a){const s=new Date(r().getTime());s.getMinutes()===0?s.setMinutes(59):s.setMinutes(s.getMinutes()-1),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function xl(o,r,a){const s=new Date(r().getTime());s.getMinutes()===59?s.setMinutes(0):s.setMinutes(s.getMinutes()+1),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}var Dl=ye('<article class="svelte-1bevvpj"><div class="time svelte-1bevvpj"><div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div> <p class="svelte-1bevvpj">:</p> <div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div></div> <div class="meridian svelte-1bevvpj"><button type="button">AM</button> <button type="button">PM</button></div></article>');function Sl(o,r){$e(r,!0);let a=me(r,"value",23,()=>new Date),s=Ye(()=>a().getHours()%12||12),l=Ye(()=>a().getMinutes().toString(10).padStart(2,"0")),f=Ye(()=>a().getHours()>=12?"PM":"AM");var h=Dl(),g=L(h),x=L(g),I=L(x);I.__click=[bl,a,r];var j=L(I);Ze(j,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),R(I);var M=G(I,2),D=L(M,!0);R(M);var H=G(M,2);H.__click=[yl,a,r];var z=L(H);Ze(z,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),R(H),R(x);var N=G(x,4),V=L(N);V.__click=[xl,a,r];var K=L(V);Ze(K,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),R(V);var S=G(V,2),P=L(S,!0);R(S);var w=G(S,2);w.__click=[kl,a,r];var B=L(w);Ze(B,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),R(w),R(N),R(g);var W=G(g,2),Y=L(W);Y.__click=[_l,a,r];let ie;var ve=G(Y,2);ve.__click=[wl,a,r];let le;R(W),R(h),je((De,pe)=>{we(D,m(s)),we(P,m(l)),ie=Xe(Y,1,"svelte-1bevvpj",null,ie,De),le=Xe(ve,1,"svelte-1bevvpj",null,le,pe)},[()=>({selected:m(f)==="AM"}),()=>({selected:m(f)==="PM"})]),he(o,h),et()}st(["click"]);function Tl(o,r){oe(r,"calendar")}function El(o,r){oe(r,"clock")}var Cl=ye('<article class="svelte-8yzu2w"><header class="svelte-8yzu2w"><button type="button"><p class="svelte-8yzu2w"> </p> <p class="svelte-8yzu2w"> </p></button> <button type="button"><p class="svelte-8yzu2w"> </p></button></header> <!></article>');function _o(o,r){$e(r,!0);let a=me(r,"value",23,()=>new Date),s=be("calendar");function l(Y){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(Y)}function f(Y){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(Y)}function h(Y){Y.setHours(a().getHours()),Y.setMinutes(a().getMinutes()),Y.setSeconds(a().getSeconds()),a(new Date(Y.getTime())),r.onchange&&r.onchange(a())}function g(Y){Y.setFullYear(a().getFullYear()),Y.getMonth(a().getMonth()),Y.getDate(a().getDate()),a(new Date(Y.getTime())),r.onchange&&r.onchange(a())}var x=Cl(),I=L(x),j=L(I);j.__click=[Tl,s];let M;var D=L(j),H=L(D,!0);R(D);var z=G(D,2),N=L(z,!0);R(z),R(j);var V=G(j,2);V.__click=[El,s];let K;var S=L(V),P=L(S,!0);R(S),R(V),R(I);var w=G(I,2);{var B=Y=>{ml(Y,{onchange:h,get value(){return a()}})},W=Y=>{Sl(Y,{onchange:g,get value(){return a()}})};ot(w,Y=>{m(s)===null||m(s)==="calendar"?Y(B):Y(W,!1)})}R(x),je((Y,ie,ve,le)=>{M=Xe(j,1,"svelte-8yzu2w",null,M,Y),we(H,r.label),we(N,ie),K=Xe(V,1,"svelte-8yzu2w",null,K,ve),we(P,le)},[()=>({selected:m(s)==="calendar"}),()=>l(a()),()=>({selected:m(s)==="clock"}),()=>f(a())]),he(o,x),et()}st(["click"]);function Ol(o,r,a,s){r(),a(null),s.oncancel&&s.oncancel()}function Il(o,r,a){r.ondelete&&r.ondelete(a().id)}function Pl(o,r){const a=o.currentTarget.value.trim().length===0?null:o.currentTarget.value;r({...r(),notes:a})}function Al(o,r,a){r.onsave&&r.onsave(a())}var Ml=ye('<dialog class="svelte-13glclx"><h3 class="svelte-13glclx"> </h3> <!> <textarea placeholder="Notes" class="svelte-13glclx"></textarea> <footer class="svelte-13glclx"><button class="delete svelte-13glclx" type="button">Delete</button> <button class="cancel svelte-13glclx" type="button">Cancel</button> <button type="button" class="svelte-13glclx">Save</button></footer></dialog>');function jl(o,r){$e(r,!0);let a=me(r,"field",3,"started"),s=me(r,"item",7,null),l=me(r,"label",3,"Started"),f=me(r,"title",3,"Edit Fast Start"),h=be(void 0);function g(w){const B={...s()};B[a()]=new Date(w.getTime()),s({...B})}function x(){m(h).close()}function I(){m(h).showModal()}var j=Ml(),M=L(j),D=L(M,!0);R(M);var H=G(M,2);const z=Ye(()=>s()&&s().id&&s().id!==null?s()[a()]:new Date);_o(H,{get label(){return l()},onchange:g,get value(){return m(z)}});var N=G(H,2);Ji(N),N.__input=[Pl,s];var V=G(N,2),K=L(V);K.__click=[Il,r,s];var S=G(K,2);S.__click=[Ol,x,s,r];var P=G(S,2);return P.__click=[Al,r,s],R(V),R(j),dt(j,w=>oe(h,w),()=>m(h)),je(()=>{we(D,f()),ss(N,s()&&s().id&&s().id!==null?s().notes:"")}),he(o,j),et({close:x,showModal:I})}st(["input","click"]);var Kl=ye('<article class="svelte-1vxkmhw"><p class="svelte-1vxkmhw">Your fasting history<br/>will be displayed here.</p></article>'),ql=ye('<li class="header svelte-1vxkmhw"><p class="svelte-1vxkmhw"> </p></li>'),Fl=(o,r,a)=>r(m(a).type,m(a).id),Rl=ye('<p class="svelte-1vxkmhw">Started Fast</p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Bl=ye('<p class="svelte-1vxkmhw">Water</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Nl=ye('<p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Hl=ye('<p class="svelte-1vxkmhw">Ended Fast</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Ll=ye('<li class="svelte-1vxkmhw"><button type="button" class="svelte-1vxkmhw"><!></button></li>'),zl=ye('<ul class="svelte-1vxkmhw"></ul>');function Ul(o,r){$e(r,!0);let a=me(r,"items",19,()=>[]);function s(D){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",year:"numeric"}).format(D)}function l(D,H){const z=H.getTime()-D.getTime(),N=Math.floor(z/1e3),V=Math.floor(N/3600),K=Math.floor(N%3600/60);return new Intl.DurationFormat(navigator.language,{style:"short",units:["hour","minute"]}).format({hours:V,minutes:K})}function f(D){return new Intl.DateTimeFormat(navigator.language,{weekday:"long",month:"short",day:"numeric"}).format(D)}function h(D){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(D)}function g(D,H){r.onchange&&r.onchange(D,H)}var x=an(),I=Dt(x);{var j=D=>{var H=Kl();he(D,H)},M=D=>{var H=zl();Et(H,21,a,Tt,(z,N)=>{var V=an(),K=Dt(V);{var S=w=>{var B=ql(),W=L(B),Y=L(W,!0);R(W),R(B),je(ie=>we(Y,ie),[()=>f(m(N).timed)]),he(w,B)},P=w=>{var B=Ll(),W=L(B);W.__click=[Fl,g,N];var Y=L(W);{var ie=le=>{var De=Rl(),pe=G(Dt(De),4),ke=L(pe,!0);R(pe);var Ne=G(pe,2),He=L(Ne,!0);R(Ne),je((Qe,ht)=>{we(ke,Qe),we(He,ht)},[()=>s(m(N).timed),()=>h(m(N).timed)]),he(le,De)},ve=(le,De)=>{{var pe=Ne=>{var He=Bl(),Qe=G(Dt(He),2),ht=L(Qe);R(Qe);var Le=G(Qe,2),ut=L(Le,!0);R(Le);var Ve=G(Le,2),ne=L(Ve,!0);R(Ve),je((fe,de)=>{we(ht,`${m(N).volume??""} oz`),we(ut,fe),we(ne,de)},[()=>s(m(N).timed),()=>h(m(N).timed)]),he(Ne,He)},ke=(Ne,He)=>{{var Qe=Le=>{var ut=Nl(),Ve=Dt(ut),ne=L(Ve,!0);R(Ve);var fe=G(Ve,4),de=L(fe,!0);R(fe);var qe=G(fe,2),Ee=L(qe,!0);R(qe),je((Fe,Pe)=>{we(ne,m(N).level),we(de,Fe),we(Ee,Pe)},[()=>s(m(N).timed),()=>h(m(N).timed)]),he(Le,ut)},ht=(Le,ut)=>{{var Ve=ne=>{var fe=Hl(),de=G(Dt(fe),2),qe=L(de,!0);R(de);var Ee=G(de,2),Fe=L(Ee,!0);R(Ee);var Pe=G(Ee,2),Ue=L(Pe,!0);R(Pe),je((ae,lt,it)=>{we(qe,ae),we(Fe,lt),we(Ue,it)},[()=>l(m(N).started,m(N).ended),()=>s(m(N).timed),()=>h(m(N).timed)]),he(ne,fe)};ot(Le,ne=>{m(N).type==="end"&&ne(Ve)},ut)}};ot(Ne,Le=>{m(N).type==="hunger"?Le(Qe):Le(ht,!1)},He)}};ot(le,Ne=>{m(N).type==="water"?Ne(pe):Ne(ke,!1)},De)}};ot(Y,le=>{m(N).type==="start"?le(ie):le(ve,!1)})}R(W),R(B),he(w,B)};ot(K,w=>{m(N).type==="header"?w(S):w(P,!1)})}he(z,V)}),R(H),he(D,H)};ot(I,D=>{a().length===0?D(j):D(M,!1)})}he(o,x),et()}st(["click"]);var Yl=ye('<section class="svelte-1moll0f"><header class="svelte-1moll0f"><h3 class="svelte-1moll0f">Hours</h3></header> <div class="svelte-1moll0f"><!></div> <article class="svelte-1moll0f"><!></article></section>');function Vl(o,r){let a=me(r,"activity",3,null),s=me(r,"history",19,()=>[]);me(r,"levels",19,()=>[]);let l=me(r,"sun",3,null);var f=Yl(),h=G(L(f),2),g=L(h);Ya(g,{get activity(){return a()},days:7,get onsun(){return r.onsun},get sun(){return l()},get water(){return r.volume}}),R(h);var x=G(h,2),I=L(x);Ul(I,{get items(){return s()},get onchange(){return r.onchange}}),R(x),R(f),he(o,f)}function Wl(o,r,a,s){const l=m(r).getBoundingClientRect();m(a).style.width=l.width-2+"px",oe(s,!m(s))}var Gl=(o,r,a)=>r(m(a)),Ql=ye('<li><button type="button" class="svelte-148k8wo"><span class="svelte-148k8wo"> </span> <!></button></li>'),Jl=ye('<label class="svelte-148k8wo"><button tabindex="-1" type="button" class="svelte-148k8wo"><span class="svelte-148k8wo"> </span> <!></button> <ul></ul></label>');function Xl(o,r){$e(r,!0);let a=me(r,"items",19,()=>[]),s=me(r,"value",7,0),l=be(!1),f=be(void 0),h=be(void 0),g=Ye(()=>a().length===0?"":a().find(S=>S.value===s()).label);sn(()=>(document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}));function x(K){!m(f).contains(K.target)&&!m(h).contains(K.target)&&oe(l,!1)}function I(K){s(K.value),oe(l,!1),r.onchange&&r.onchange(K.value)}var j=Jl(),M=L(j);M.__click=[Wl,f,h,l];var D=L(M),H=L(D,!0);R(D);var z=G(D,2);Ze(z,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),R(M),dt(M,K=>oe(f,K),()=>m(f));var N=G(M,2);let V;Et(N,21,a,Tt,(K,S)=>{var P=Ql();let w;var B=L(P);B.__click=[Gl,I,S];var W=L(B),Y=L(W,!0);R(W);var ie=G(W,2);{var ve=le=>{Ze(le,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};ot(ie,le=>{m(S).value===s()&&le(ve)})}R(B),R(P),je(le=>{w=Xe(P,1,"svelte-148k8wo",null,w,le),we(Y,m(S).label)},[()=>({selected:s()===m(S).value})]),he(K,P)}),R(N),dt(N,K=>oe(h,K),()=>m(h)),R(j),je(K=>{we(H,m(g)),V=Xe(N,1,"svelte-148k8wo",null,V,K)},[()=>({open:m(l)})]),he(o,j),et()}st(["click"]);function Zl(o,r,a,s){r(),a(null),s.oncancel&&s.oncancel()}function $l(o,r,a){r.ondelete&&r.ondelete(a().id)}function ec(o,r,a){r.onsave&&r.onsave(a())}var tc=ye('<dialog class="svelte-1hqchgg"><h3 class="svelte-1hqchgg">Edit Hunger</h3> <!> <!> <footer class="svelte-1hqchgg"><button class="delete svelte-1hqchgg" type="button">Delete</button> <button class="cancel svelte-1hqchgg" type="button">Cancel</button> <button type="button" class="svelte-1hqchgg">Save</button></footer></dialog>');function nc(o,r){$e(r,!0);let a=me(r,"item",7,null),s=me(r,"levels",19,()=>[]),l=be(void 0),f=Ye(()=>a()&&a().level&&a().level!==null?a().level:5);function h(S){const P=new Date(S.getTime());a({...a(),created:P})}function g(S){const P=S;a({...a(),level:P})}function x(){m(l).close(),a(null)}function I(){m(l).showModal()}var j=tc(),M=G(L(j),2);Xl(M,{get items(){return s()},onchange:g,get value(){return m(f)}});var D=G(M,2);const H=Ye(()=>a()&&a().created?a().created:new Date);_o(D,{label:"Checked",onchange:h,get value(){return m(H)}});var z=G(D,2),N=L(z);N.__click=[$l,r,a];var V=G(N,2);V.__click=[Zl,x,a,r];var K=G(V,2);return K.__click=[ec,r,a],R(z),R(j),dt(j,S=>oe(l,S),()=>m(l)),he(o,j),et({close:x,showModal:I})}st(["click"]);function rc(o,r,a){r()!==0&&(r(0),a.onchange&&a.onchange(r()))}function oc(o,r,a){r()!==1&&(r(1),a.onchange&&a.onchange(r()))}var ac=ye('<ul class="svelte-tu3q0a"><li><button type="button">Fasting</button></li> <li><button type="button">Hours</button></li></ul>');function ic(o,r){$e(r,!0);let a=me(r,"value",7,0);var s=ac(),l=L(s),f=L(l);let h;f.__click=[rc,a,r],R(l);var g=G(l,2),x=L(g);let I;x.__click=[oc,a,r],R(g),R(s),je((j,M)=>{h=Xe(f,1,"fasting svelte-tu3q0a",null,h,j),I=Xe(x,1,"hours svelte-tu3q0a",null,I,M)},[()=>({selected:a()===0}),()=>({selected:a()===1})]),he(o,s),et()}st(["click"]);function sc(o,r){r()}var uc=ye('<dialog class="svelte-msa23r"><h3 class="svelte-msa23r">Settings</h3> <article class="svelte-msa23r"><p class="svelte-msa23r">Settings.</p></article> <footer class="svelte-msa23r"><button type="button" class="svelte-msa23r">Done</button></footer></dialog>');function lc(o,r){$e(r,!0);let a=be(void 0);function s(){m(a).close()}function l(){m(a).showModal()}var f=uc(),h=G(L(f),4),g=L(h);return g.__click=[sc,s],R(h),R(f),dt(f,x=>oe(a,x),()=>m(a)),he(o,f),et({close:s,showModal:l})}st(["click"]);function cc(o,r,a,s){const l=m(r).getBoundingClientRect();m(a).style.width=l.width-2+"px",oe(s,!m(s))}var fc=(o,r,a)=>r(m(a)),dc=ye('<li><button type="button" class="svelte-148k8wo"><span class="svelte-148k8wo"> </span> <span class="svelte-148k8wo"> </span> <!></button></li>'),hc=ye('<label class="svelte-148k8wo"><button tabindex="-1" type="button" class="svelte-148k8wo"><span class="svelte-148k8wo"> </span> <span class="svelte-148k8wo"> </span> <!></button> <ul></ul></label>');function vc(o,r){$e(r,!0);let a=me(r,"items",19,()=>[]),s=me(r,"units",3,"oz"),l=me(r,"value",7,0),f=be(!1),h=be(void 0),g=be(void 0),x=Ye(()=>a().length===0?"":a().find(B=>B.value===l()).label);sn(()=>(document.addEventListener("click",I),()=>{document.removeEventListener("click",I)}));function I(w){!m(h).contains(w.target)&&!m(g).contains(w.target)&&oe(f,!1)}function j(w){l(w.value),oe(f,!1),r.onchange&&r.onchange(w.value)}var M=hc(),D=L(M);D.__click=[cc,h,g,f];var H=L(D),z=L(H,!0);R(H);var N=G(H,2),V=L(N);R(N);var K=G(N,2);Ze(K,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),R(D),dt(D,w=>oe(h,w),()=>m(h));var S=G(D,2);let P;Et(S,21,a,Tt,(w,B)=>{var W=dc();let Y;var ie=L(W);ie.__click=[fc,j,B];var ve=L(ie),le=L(ve,!0);R(ve);var De=G(ve,2),pe=L(De);R(De);var ke=G(De,2);{var Ne=He=>{Ze(He,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};ot(ke,He=>{m(B).value===l()&&He(Ne)})}R(ie),R(W),je(He=>{Y=Xe(W,1,"svelte-148k8wo",null,Y,He),we(le,m(B).label),we(pe,`${m(B).value??""} oz`)},[()=>({selected:l()===m(B).value})]),he(w,W)}),R(S),dt(S,w=>oe(g,w),()=>m(g)),R(M),je(w=>{we(z,m(x)),we(V,`${l()??""} ${s()??""}`),P=Xe(S,1,"svelte-148k8wo",null,P,w)},[()=>({open:m(f)})]),he(o,M),et()}st(["click"]);function pc(o,r,a,s){r(),a(null),s.oncancel&&s.oncancel()}function gc(o,r,a){r.ondelete&&r.ondelete(a().id)}function mc(o,r,a){r.onsave&&r.onsave(a())}var yc=ye('<dialog class="svelte-1kewhwu"><h3 class="svelte-1kewhwu">Edit Water</h3> <!> <!> <footer class="svelte-1kewhwu"><button class="delete svelte-1kewhwu" type="button">Delete</button> <button class="cancel svelte-1kewhwu" type="button">Cancel</button> <button type="button" class="svelte-1kewhwu">Save</button></footer></dialog>');function bc(o,r){$e(r,!0);let a=me(r,"item",7,null),s=me(r,"units",3,"oz"),l=be(void 0),f=oo([{value:8,label:"Cup"},{value:12,label:"Can"},{value:16,label:"Bottle"},{value:20,label:"Medium"},{value:30,label:"Gatorade"},{value:32,label:"Big Q"},{value:44,label:"QT Large"},{value:52,label:"Extra Large"}]),h=Ye(()=>a()&&a().volume&&a().volume!==null?a().volume:8);function g(P){const w=new Date(P.getTime());a({...a(),created:w})}function x(P){const w=P;a({...a(),volume:w})}function I(){m(l).close(),a(null)}function j(){m(l).showModal()}var M=yc(),D=G(L(M),2);vc(D,{get items(){return f},onchange:x,get units(){return s()},get value(){return m(h)}});var H=G(D,2);const z=Ye(()=>a()&&a().created?a().created:new Date);_o(H,{label:"Finished",onchange:g,get value(){return m(z)}});var N=G(H,2),V=L(N);V.__click=[gc,r,a];var K=G(V,2);K.__click=[pc,I,a,r];var S=G(K,2);return S.__click=[mc,r,a],R(N),R(M),dt(M,P=>oe(l,P),()=>m(l)),he(o,M),et({close:I,showModal:j})}st(["click"]);var _c=ye('<main class="svelte-odvko0"><header class="svelte-odvko0"><span></span> <!> <button type="button" class="svelte-odvko0"><!></button></header> <section class="svelte-odvko0"><article class="svelte-odvko0"><!></article> <article class="svelte-odvko0"><!></article></section></main> <!> <!> <!> <!>',1);function Kc(o,r){$e(r,!0);const a=new vs,s=ms;let l=0,f=be(null),h=be(0),g=be(oo([])),x=be(void 0),I=be("started"),j=be(null),M=be("Started"),D=be("Edit Fast Started"),H=be(void 0),z=be(null),N=be(5),V=oo([{value:1,label:"Starving"},{value:2,label:"Very hungry"},{value:3,label:"Pretty hungry"},{value:4,label:"Snacky"},{value:5,label:"Satisfied"},{value:6,label:"Slightly full"},{value:7,label:"Uncomfortable"},{value:8,label:"Stuffed"},{value:9,label:"Stomach aches"},{value:10,label:"Sick"}]),K=be(null),S=be(0),P=be(void 0),w=be(null),B=be(null),W=be(null),Y=be(0),ie=be(void 0),ve=be(null);sn(()=>{let re=window.localStorage.getItem("fh_screen");oe(S,re===null?0:parseInt(re),!0);let ce=window.localStorage.getItem("fh_duration");oe(h,ce===null?0:parseInt(ce),!0);const ge=window.localStorage.getItem("fh_latitude");ge!==null&&ge!=="DENIED"&&He(),setInterval(()=>{if(l===60){De();const Re=window.localStorage.getItem("fh_latitude");Re!==null&&Re!=="DENIED"&&He(),l=0}else l=l+1;m(w)!==null&&oe(K,Date.now(),!0)},1e3),Ne(),De(),ke(),Qe(),pe()});function le(re){const ce=re.getFullYear(),ge=String(re.getMonth()+1).padStart(2,"0"),Re=String(re.getDate()).padStart(2,"0");return`${ce}-${ge}-${Re}`}function De(re=7){a.browseHistory().then(ce=>{const ge={},Re=new Date,Te=new Date(Re.getFullYear(),Re.getMonth(),Re.getDate()),Ke=new Date(Te);if(Ke.setDate(Te.getDate()-(re-1)),!Array.isArray(ce)||ce.length===0){const ze=new Date(Ke);for(;ze<=Te;){const at=le(ze);ge[at]=Array(24).fill(0),ze.setDate(ze.getDate()+1)}}else{for(const at of ce){const ee=new Date(at.started),_n=at.ended?new Date(at.ended):new Date,wn=new Date(ee.getTime());wn.setSeconds(0,0);const un=new Date(_n.getTime());un.setSeconds(0,0);let At=new Date(wn);for(;At<un;){const Xt=le(At),Fn=new Date(At.getFullYear(),At.getMonth(),At.getDate());if(Fn>=Ke&&Fn<=Te){const yr=At.getHours();ge[Xt]||(ge[Xt]=Array(24).fill(0)),ge[Xt][yr]+=1}At.setMinutes(At.getMinutes()+1)}}for(const at in ge)ge[at]=ge[at].map(ee=>+(Math.min(ee,60)/60).toFixed(6));const ze=new Date(Ke);for(;ze<=Te;){const at=le(ze);ge[at]||(ge[at]=Array(24).fill(0)),ze.setDate(ze.getDate()+1)}}const Ie=Object.keys(ge).sort((ze,at)=>at.localeCompare(ze)),Ae={};for(const ze of Ie)Ae[ze]=ge[ze];const ue=Array(24).fill(0);for(const ze of Array(24).keys())for(const at of Ie)ue[ze]+=Ae[at][ze];const Jt=ue.map(ze=>+(ze/re).toFixed(6));oe(f,{daily:Ae,average:Jt},!0)})}function pe(){a.browseHistory().then(re=>{let ce=null,ge=structuredClone(re);ge.forEach(Te=>{Te.type="start",Te.timed=new Date(Te.started.getTime())});let Re=structuredClone(re);Re=Re.filter(Te=>Te.ended!==null),Re.forEach(Te=>{Te.type="end",Te.timed=new Date(Te.ended.getTime())}),ge=ge.concat(Re),ce=[...ge],a.browseHunger().then(Te=>(Te=Te.map(Ke=>{const Ie=V.find(Ae=>Ae.value===Ke.level);return Ke.level=Ie.label,Ke.timed=new Date(Ke.created.getTime()),Ke}),ce=ce.concat(Te),a.browseWater())).then(Te=>{Te=Te.map(Ie=>(Ie.timed=new Date(Ie.created.getTime()),Ie)),ce=ce.concat(Te),ce.sort((Ie,Ae)=>Ie.timed.getTime()<Ae.timed.getTime()?1:Ie.timed.getTime()>Ae.timed.getTime()?-1:0);const Ke=[];for(let Ie=0;Ie<ce.length;Ie++){const Ae=new Date(ce[Ie].timed.getTime());Ae.setHours(23),Ae.setMinutes(59),Ae.setSeconds(59),Ae.setMilliseconds(999),Ke.length===0?Ke.push({type:"header",timed:Ae}):(Ke[Ke.length-1].timed.getDate()!==ce[Ie].timed.getDate()||Ke[Ke.length-1].timed.getMonth()!==ce[Ie].timed.getMonth()||Ke[Ke.length-1].timed.getFullYear()!==ce[Ie].timed.getFullYear())&&Ke.push({type:"header",timed:Ae})}ce=ce.concat(Ke),ce.sort((Ie,Ae)=>Ie.timed.getTime()<Ae.timed.getTime()?1:Ie.timed.getTime()>Ae.timed.getTime()?-1:0),oe(g,[...ce],!0)})})}function ke(){a.browseHunger(!0).then(re=>{if(re===null)oe(N,5);else{const ce=new Date,ge=new Date(re.created);ce.getFullYear()===ge.getFullYear()&&ce.getMonth()===ge.getMonth()&&ce.getDate()===ge.getDate()?oe(N,re.level,!0):oe(N,5)}})}function Ne(){a.browseHistory().then(re=>{re.length===0&&(oe(w,null),oe(K,null)),re.sort((ce,ge)=>ce.started.getTime()>ge.started.getTime()?-1:ce.started.getTime()<ge.started.getTime()?1:0),re[0].ended===null&&(oe(w,new Date(re[0].started.getTime()),!0),oe(K,Date.now(),!0))})}function He(){const re=parseFloat(window.localStorage.getItem("fh_latitude")),ce=parseFloat(window.localStorage.getItem("fh_longitude")),ge=new Date;let Re=null,Te=s.getTimes(ge,re,ce),Ke=null;if(Date.now()<Te.sunrise.getTime())Ke=new Date(Te.sunrise.getTime()),Re="material-symbols:wb-sunny-outline-rounded";else if(Date.now()>Te.sunrise.getTime()&&Date.now()<Te.sunset.getTime())Ke=new Date(Te.sunset.getTime()),Re="material-symbols:moon-stars-outline-rounded";else{const Ie=new Date;Ie.setDate(ge.getDate()+1),Te=s.getTimes(Ie,re,ce),Ke=new Date(Te.sunrise.getTime()),Re="material-symbols:wb-sunny-outline-rounded"}oe(B,{icon:Re,timing:Ke},!0)}function Qe(){a.browseWater(!0).then(re=>{const ce=re.reduce((ge,Re)=>ge+Re.volume,0);return oe(Y,ce,!0),a.browseWater()}).then(re=>{const ce=new Date;ce.setHours(0,0,0,0);const ge={};for(const{created:Ie,volume:Ae}of re){const ue=ht(Ie);ge[ue]=(ge[ue]||0)+Ae}const Re=[];for(let Ie=0;Ie<7;Ie++){const Ae=new Date(ce.getTime());Ae.setDate(ce.getDate()-Ie);const ue=ht(Ae);Re.push({created:new Date(Ae.getTime()),volume:ge[ue]||0})}const Ke=Re.reduce((Ie,{volume:Ae})=>Ie+Ae,0)/Re.length;oe(W,{average:Ke,daily:[...Re]},!0)})}function ht(re){const ce=re.getFullYear(),ge=String(re.getMonth()+1).padStart(2,"0"),Re=String(re.getDate()).padStart(2,"0");return`${ce}-${ge}-${Re}`}function Le(re){oe(h,re,!0),window.localStorage.setItem("fh_duration",m(h))}function ut(){oe(w,null),oe(K,null),a.browseHistoryByEnd().then(re=>(re.ended=new Date,a.editHistory(re))).then(()=>{Ne(),De(),pe()})}function Ve(){a.addHistory().then(()=>{Ne(),De(),pe()})}function ne(re){m(w)!==null&&m(j).started.getTime()===m(w).getTime()&&(oe(w,null),oe(K,null)),a.deleteHistory(re).then(()=>{m(x).close(),oe(j,null),Ne(),De(),pe()})}function fe(re){a.editHistory(re).then(()=>{m(x).close(),oe(j,null),Ne(),De(),pe()})}function de(re,ce){re==="start"?(oe(I,"started"),oe(M,"Started"),oe(D,"Edit Fast Started"),a.readHistory(ce).then(ge=>{oe(j,{...ge},!0),m(x).showModal()})):re==="end"?(oe(I,"ended"),oe(M,"Ended"),oe(D,"Edit Fast Ended"),a.readHistory(ce).then(ge=>{oe(j,{...ge},!0),m(x).showModal()})):re==="water"?a.readWater(ce).then(ge=>{oe(ve,{...ge},!0),m(ie).showModal()}):re==="hunger"&&a.readHunger(ce).then(ge=>{oe(z,{...ge},!0),m(H).showModal()})}function qe(re){a.addHunger(re).then(ce=>{ke(),pe()})}function Ee(re){a.deleteHunger(re).then(()=>{m(H).close(),oe(z,null),ke(),pe()})}function Fe(re){a.editHunger(re).then(ce=>{m(H).close(),oe(z,null),ke(),pe()})}function Pe(re){m(S)!==re&&(window.localStorage.setItem("fh_screen",re),oe(S,re,!0))}function Ue(){m(P).showModal()}function ae(){confirm("Sunrise/set (important for religious observations) needs to know your location? Enable location detection?")?navigator.geolocation.getCurrentPosition(ce=>{window.localStorage.setItem("fh_latitude",ce.coords.latitude),window.localStorage.setItem("fh_longitude",ce.coords.longitude),He()}):window.localStorage.setItem("fh_latitude","DENIED")}function lt(re){a.addWater(re).then(ce=>{Qe(),pe()})}function it(re){a.deleteWater(re).then(()=>{m(ie).close(),oe(ve,null),Qe(),pe()})}function Se(re){a.editWater(re).then(ce=>{m(ie).close(),oe(ve,null),Qe(),pe()})}var vt=_c(),pt=Dt(vt),tt=L(pt),Pt=G(L(tt),2);ic(Pt,{onchange:Pe,get value(){return m(S)}});var gt=G(Pt,2);gt.__click=Ue;var wt=L(gt);Ze(wt,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),R(gt),R(tt);var kt=G(tt,2),St=L(kt),We=L(St);hl(We,{get activity(){return m(f)},get duration(){return m(h)},get hunger(){return m(N)},get levels(){return V},get now(){return m(K)},onduration:Le,onend:ut,onhunger:qe,onsettings:Ue,onstart:Ve,onsun:ae,onwater:lt,get started(){return m(w)},get sun(){return m(B)},get volume(){return m(W)},get water(){return m(Y)}}),R(St);var Mt=G(St,2),Qt=L(Mt);Vl(Qt,{get activity(){return m(f)},get history(){return m(g)},get levels(){return V},onchange:de,onsun:ae,get sun(){return m(B)},get volume(){return m(W)}}),R(Mt),R(kt),R(pt);var bn=G(pt,2);dt(jl(bn,{get field(){return m(I)},get item(){return m(j)},get label(){return m(M)},ondelete:ne,onsave:fe,get title(){return m(D)}}),re=>oe(x,re,!0),()=>m(x));var Nt=G(bn,2);dt(nc(Nt,{get item(){return m(z)},get levels(){return V},ondelete:Ee,onsave:Fe}),re=>oe(H,re,!0),()=>m(H));var jt=G(Nt,2);dt(bc(jt,{get item(){return m(ve)},ondelete:it,onsave:Se}),re=>oe(ie,re,!0),()=>m(ie));var Ft=G(jt,2);dt(lc(Ft,{}),re=>oe(P,re,!0),()=>m(P)),je(()=>Gt(kt,"data-screen",m(S)===0?"fasting":"hours")),he(o,vt),et()}st(["click"]);export{Kc as component};
