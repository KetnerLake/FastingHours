import"../chunks/CWj6FrbW.js";import{o as Zr,a as Qi,s as Ee}from"../chunks/CBHc2I-Z.js";import{L as ni,aA as Gi,aE as Ji,z as Xi,b as Zi,aF as ri,q as Gn,h as Mt,l as kn,d as Yr,a0 as C,aj as $i,a5 as ea,a6 as ta,a7 as Fo,s as Br,k as Gt,C as oi,r as na,a8 as ii,i as ai,a9 as ra,aG as Nr,x as si,a4 as oa,D as Wr,aH as $r,aI as qo,aJ as eo,au as ia,aK as Ro,aL as aa,aM as sa,w as ua,aN as la,j as ca,aO as fa,o as ui,_ as Ve,aP as da,u as ha,p as va,g as Bo,e as pa,A as pt,I as ga,c as Dn,f as xt,a as be,F as gt,X as qe,W as de,aQ as ma,aR as ya,Y as B,$ as q,V as Oe,Z as re,aS as Jn,av as it,ah as Xn}from"../chunks/xpUVlYYH.js";import{d as Tt}from"../chunks/CKPaqtM9.js";import{a as No,b as Ho,s as Zn,c as Zt,r as ba,d as _a}from"../chunks/C-_ssXes.js";import{i as vt,r as wa,p as je,b as Ht}from"../chunks/JuW1Ovd6.js";const xa=[];function Hr(s,o=!1){return $n(s,new Map,"",xa)}function $n(s,o,i,u,c=null){if(typeof s=="object"&&s!==null){var h=o.get(s);if(h!==void 0)return h;if(s instanceof Map)return new Map(s);if(s instanceof Set)return new Set(s);if(ni(s)){var p=Array(s.length);o.set(s,p),c!==null&&o.set(c,p);for(var D=0;D<s.length;D+=1){var E=s[D];D in s&&(p[D]=$n(E,o,i,u))}return p}if(Gi(s)===Ji){p={},o.set(s,p),c!==null&&o.set(c,p);for(var P in s)p[P]=$n(s[P],o,i,u);return p}if(s instanceof Date)return structuredClone(s);if(typeof s.toJSON=="function")return $n(s.toJSON(),o,i,u,s)}if(s instanceof EventTarget)return s;try{return structuredClone(s)}catch{return s}}function Jt(s,o){return o}function ka(s,o,i,u){for(var c=[],h=o.length,p=0;p<h;p++)sa(o[p].e,c,!0);var D=h>0&&c.length===0&&i!==null;if(D){var E=i.parentNode;ua(E),E.append(i),u.clear(),Nt(s,o[0].prev,o[h-1].next)}la(c,()=>{for(var P=0;P<h;P++){var j=o[P];D||(u.delete(j.k),Nt(s,j.prev,j.next)),ca(j.e,!D)}})}function Xt(s,o,i,u,c,h=null){var p=s,D={flags:o,items:new Map,first:null},E=(o&ri)!==0;if(E){var P=s;p=Mt?Gn(kn(P)):P.appendChild(Xi())}Mt&&Yr();var j=null,F=!1,A=$i(()=>{var W=i();return ni(W)?W:W==null?[]:si(W)});Zi(()=>{var W=C(A),N=W.length;if(F&&N===0)return;F=N===0;let L=!1;if(Mt){var X=ea(p)===ta;X!==(N===0)&&(p=Fo(),Gn(p),Br(!1),L=!0)}if(Mt){for(var V=null,K,H=0;H<N;H++){if(Gt.nodeType===oi&&Gt.data===na){p=Gt,L=!0,Br(!1);break}var I=W[H],Y=u(I,H);K=li(Gt,D,V,null,I,Y,H,c,o,i),D.items.set(Y,K),V=K}N>0&&Gn(Fo())}Mt||Da(W,D,p,c,o,u,i),h!==null&&(N===0?j?ii(j):j=ai(()=>h(p)):j!==null&&ra(j,()=>{j=null})),L&&Br(!0),C(A)}),Mt&&(p=Gt)}function Da(s,o,i,u,c,h,p){var Re,Ge,Ye,we;var D=(c&aa)!==0,E=(c&($r|eo))!==0,P=s.length,j=o.items,F=o.first,A=F,W,N=null,L,X=[],V=[],K,H,I,Y;if(D)for(Y=0;Y<P;Y+=1)K=s[Y],H=h(K,Y),I=j.get(H),I!==void 0&&((Re=I.a)==null||Re.measure(),(L??(L=new Set)).add(I));for(Y=0;Y<P;Y+=1){if(K=s[Y],H=h(K,Y),I=j.get(H),I===void 0){var Z=A?A.e.nodes_start:i;N=li(Z,o,N,N===null?o.first:N.next,K,H,Y,u,c,p),j.set(H,N),X=[],V=[],A=N.next;continue}if(E&&Sa(I,K,Y,c),(I.e.f&Nr)!==0&&(ii(I.e),D&&((Ge=I.a)==null||Ge.unfix(),(L??(L=new Set)).delete(I))),I!==A){if(W!==void 0&&W.has(I)){if(X.length<V.length){var R=V[0],ue;N=R.prev;var me=X[0],ce=X[X.length-1];for(ue=0;ue<X.length;ue+=1)Lo(X[ue],R,i);for(ue=0;ue<V.length;ue+=1)W.delete(V[ue]);Nt(o,me.prev,ce.next),Nt(o,N,me),Nt(o,ce,R),A=R,N=ce,Y-=1,X=[],V=[]}else W.delete(I),Lo(I,A,i),Nt(o,I.prev,I.next),Nt(o,I,N===null?o.first:N.next),Nt(o,N,I),N=I;continue}for(X=[],V=[];A!==null&&A.k!==H;)(A.e.f&Nr)===0&&(W??(W=new Set)).add(A),V.push(A),A=A.next;if(A===null)continue;I=A}X.push(I),N=I,A=I.next}if(A!==null||W!==void 0){for(var Ce=W===void 0?[]:si(W);A!==null;)(A.e.f&Nr)===0&&Ce.push(A),A=A.next;var Ke=Ce.length;if(Ke>0){var Le=(c&ri)!==0&&P===0?i:null;if(D){for(Y=0;Y<Ke;Y+=1)(Ye=Ce[Y].a)==null||Ye.measure();for(Y=0;Y<Ke;Y+=1)(we=Ce[Y].a)==null||we.fix()}ka(o,Ce,Le,j)}}D&&oa(()=>{var he;if(L!==void 0)for(I of L)(he=I.a)==null||he.apply()}),Wr.first=o.first&&o.first.e,Wr.last=N&&N.e}function Sa(s,o,i,u){(u&$r)!==0&&qo(s.v,o),(u&eo)!==0?qo(s.i,i):s.i=i}function li(s,o,i,u,c,h,p,D,E,P){var j=(E&$r)!==0,F=(E&fa)===0,A=j?F?ia(c,!1,!1):Ro(c):c,W=(E&eo)===0?p:Ro(p),N={i:W,v:A,k:h,a:null,e:null,prev:i,next:u};try{return N.e=ai(()=>D(s,A,W,P),Mt),N.e.prev=i&&i.e,N.e.next=u&&u.e,i===null?o.first=N:(i.next=N,i.e.next=N.e),u!==null&&(u.prev=N,u.e.prev=N.e),N}finally{}}function Lo(s,o,i){for(var u=s.next?s.next.e.nodes_start:i,c=o?o.e.nodes_start:i,h=s.e.nodes_start;h!==u;){var p=ui(h);c.before(h),h=p}}function Nt(s,o,i){o===null?s.first=i:(o.next=i,o.e.next=i&&i.e),i!==null&&(i.prev=o,i.e.prev=o&&o.e)}function Ta(s,o,i=!1,u=!1,c=!1){var h=s,p="";Ve(()=>{var D=Wr;if(p===(p=o()??"")){Mt&&Yr();return}if(D.nodes_start!==null&&(da(D.nodes_start,D.nodes_end),D.nodes_start=D.nodes_end=null),p!==""){if(Mt){Gt.data;for(var E=Yr(),P=E;E!==null&&(E.nodeType!==oi||E.data!=="");)P=E,E=ui(E);if(E===null)throw ha(),va;Bo(Gt,P),h=Gn(E);return}var j=p+"";i?j=`<svg>${j}</svg>`:u&&(j=`<math>${j}</math>`);var F=pa(j);if((i||u)&&(F=kn(F)),Bo(kn(F),F.lastChild),i||u)for(;kn(F);)h.before(kn(F));else h.before(F)}})}var Ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ci(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var er={exports:{}},Oa=er.exports,zo;function Ca(){return zo||(zo=1,function(s,o){(function(i,u){s.exports=u()})(Oa,function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(e,t)},u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function c(e,t,n){for(var r,a=0,l=t.length;a<l;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var h=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ea,p=Object.keys,D=Array.isArray;function E(e,t){return typeof t!="object"||p(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||h.Promise||(h.Promise=Promise);var P=Object.getPrototypeOf,j={}.hasOwnProperty;function F(e,t){return j.call(e,t)}function A(e,t){typeof t=="function"&&(t=t(P(e))),(typeof Reflect>"u"?p:Reflect.ownKeys)(t).forEach(function(n){N(e,n,t[n])})}var W=Object.defineProperty;function N(e,t,n,r){W(e,t,E(n&&F(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function L(e){return{from:function(t){return e.prototype=Object.create(t.prototype),N(e.prototype,"constructor",e),{extend:A.bind(null,e.prototype)}}}}var X=Object.getOwnPropertyDescriptor,V=[].slice;function K(e,t,n){return V.call(e,t,n)}function H(e,t){return t(e)}function I(e){if(!e)throw new Error("Assertion Failed")}function Y(e){h.setImmediate?setImmediate(e):setTimeout(e,0)}function Z(e,t){if(typeof t=="string"&&F(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,a=t.length;r<a;++r){var l=Z(e,t[r]);n.push(l)}return n}var f=t.indexOf(".");if(f!==-1){var d=e[t.substr(0,f)];return d==null?void 0:Z(d,t.substr(f+1))}}function R(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){I(typeof n!="string"&&"length"in n);for(var r=0,a=t.length;r<a;++r)R(e,t[r],n[r])}else{var l,f,d=t.indexOf(".");d!==-1?(l=t.substr(0,d),(f=t.substr(d+1))===""?n===void 0?D(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=n:R(d=!(d=e[l])||!F(e,l)?e[l]={}:d,f,n)):n===void 0?D(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ue(e){var t,n={};for(t in e)F(e,t)&&(n[t]=e[t]);return n}var me=[].concat;function ce(e){return me.apply([],e)}var Me="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ce([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return h[e]}),Ce=new Set(Me.map(function(e){return h[e]})),Ke=null;function Le(e){return Ke=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var r=Ke.get(n);if(r)return r;if(D(n)){r=[],Ke.set(n,r);for(var a=0,l=n.length;a<l;++a)r.push(t(n[a]))}else if(Ce.has(n.constructor))r=n;else{var f,d=P(n);for(f in r=d===Object.prototype?{}:Object.create(d),Ke.set(n,r),n)F(n,f)&&(r[f]=t(n[f]))}return r}(e),Ke=null,e}var Re={}.toString;function Ge(e){return Re.call(e).slice(8,-1)}var Ye=typeof Symbol<"u"?Symbol.iterator:"@@iterator",we=typeof Ye=="symbol"?function(e){var t;return e!=null&&(t=e[Ye])&&t.apply(e)}:function(){return null};function he(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var ze={};function Pe(e){var t,n,r,a;if(arguments.length===1){if(D(e))return e.slice();if(this===ze&&typeof e=="string")return[e];if(a=we(e)){for(n=[];!(r=a.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var $=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Fe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],wt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Fe),se={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function le(e,t){this.name=e,this.message=t}function Ie(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,a){return a.indexOf(n)===r}).join(`
`)}function ye(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Ie(e,t)}function Te(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Ie(e,this.failures)}L(le).from(Error).extend({toString:function(){return this.name+": "+this.message}}),L(ye).from(le),L(Te).from(le);var De=wt.reduce(function(e,t){return e[t]=t+"Error",e},{}),Be=le,te=wt.reduce(function(e,t){var n=t+"Error";function r(a,l){this.name=n,a?typeof a=="string"?(this.message="".concat(a).concat(l?`
 `+l:""),this.inner=l||null):typeof a=="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=se[t]||n,this.inner=null)}return L(r).from(Be),e[t]=r,e},{});te.Syntax=SyntaxError,te.Type=TypeError,te.Range=RangeError;var tt=Fe.reduce(function(e,t){return e[t+"Error"]=te[t],e},{}),Je=wt.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=te[t]),e},{});function pe(){}function ct(e){return e}function ft(e,t){return e==null||e===ct?t:function(n){return t(e(n))}}function et(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function kt(e,t){return e===pe?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var l=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?et(r,this.onsuccess):r),a&&(this.onerror=this.onerror?et(a,this.onerror):a),l!==void 0?l:n}}function dt(e,t){return e===pe?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?et(n,this.onsuccess):n),r&&(this.onerror=this.onerror?et(r,this.onerror):r)}}function at(e,t){return e===pe?t:function(n){var r=e.apply(this,arguments);E(n,r);var a=this.onsuccess,l=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?et(a,this.onsuccess):a),l&&(this.onerror=this.onerror?et(l,this.onerror):l),r===void 0?n===void 0?void 0:n:E(r,n)}}function mt(e,t){return e===pe?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function ae(e,t){return e===pe?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,a=arguments.length,l=new Array(a);a--;)l[a]=arguments[a];return n.then(function(){return t.apply(r,l)})}return t.apply(this,arguments)}}Je.ModifyError=ye,Je.DexieError=le,Je.BulkError=Te;var fe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function _e(e){fe=e}var nt={},Ne=100,Me=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,P(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,P(t),e]}(),Fe=Me[0],wt=Me[1],Me=Me[2],wt=wt&&wt.then,He=Fe&&Fe.constructor,$t=!!Me,Lt=function(e,t){Pt.push([e,t]),$e&&(queueMicrotask(Di),$e=!1)},Qe=!0,$e=!0,Dt=[],en=[],tn=ct,St={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:pe,pgp:!1,env:{},finalize:pe},oe=St,Pt=[],Et=0,nn=[];function ne(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=oe;if(typeof e!="function"){if(e!==nt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ur(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,a){try{a(function(l){if(r._state===null){if(l===r)throw new TypeError("A promise cannot be resolved with itself.");var f=r._lib&&rn();l&&typeof l.then=="function"?n(r,function(d,g){l instanceof ne?l._then(d,g):l.then(d,g)}):(r._state=!0,r._value=l,io(r)),f&&on()}},ur.bind(null,r))}catch(l){ur(r,l)}}(this,e)}var sr={get:function(){var e=oe,t=Cn;function n(r,a){var l=this,f=!e.global&&(e!==oe||t!==Cn),d=f&&!Kt(),g=new ne(function(y,w){lr(l,new oo(so(r,e,f,d),so(a,e,f,d),y,w,e))});return this._consoleTask&&(g._consoleTask=this._consoleTask),g}return n.prototype=nt,n},set:function(e){N(this,"then",e&&e.prototype===nt?sr:{get:function(){return e},set:sr.set})}};function oo(e,t,n,r,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=a}function ur(e,t){var n,r;en.push(t),e._state===null&&(n=e._lib&&rn(),t=tn(t),e._state=!1,e._value=t,r=e,Dt.some(function(a){return a._value===r._value})||Dt.push(r),io(e),n&&on())}function io(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)lr(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),Et===0&&(++Et,Lt(function(){--Et==0&&cr()},[]))}function lr(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Et,Lt(ki,[n,e,t])}else e._listeners.push(t)}function ki(e,t,n){try{var r,a=t._value;!t._state&&en.length&&(en=[]),r=fe&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),t._state||en.indexOf(a)!==-1||function(l){for(var f=Dt.length;f;)if(Dt[--f]._value===l._value)return Dt.splice(f,1)}(t),n.resolve(r)}catch(l){n.reject(l)}finally{--Et==0&&cr(),--n.psd.ref||n.psd.finalize()}}function Di(){zt(St,function(){rn()&&on()})}function rn(){var e=Qe;return $e=Qe=!1,e}function on(){var e,t,n;do for(;0<Pt.length;)for(e=Pt,Pt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(0<Pt.length);$e=Qe=!0}function cr(){var e=Dt;Dt=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=nn.slice(0),n=t.length;n;)t[--n]()}function Tn(e){return new ne(nt,!1,e)}function We(e,t){var n=oe;return function(){var r=rn(),a=oe;try{return Ft(n,!0),e.apply(this,arguments)}catch(l){t&&t(l)}finally{Ft(a,!1),r&&on()}}}A(ne.prototype,{then:sr,_then:function(e,t){lr(this,new oo(null,null,e,t,oe))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(r){return(r instanceof t?n:Tn)(r)}):this.then(null,function(r){return(r&&r.name===t?n:Tn)(r)})},finally:function(e){return this.then(function(t){return ne.resolve(e()).then(function(){return t})},function(t){return ne.resolve(e()).then(function(){return Tn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new ne(function(r,a){var l=setTimeout(function(){return a(new te.Timeout(t))},e);n.then(r,a).finally(clearTimeout.bind(null,l))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&N(ne.prototype,Symbol.toStringTag,"Dexie.Promise"),St.env=ao(),A(ne,{all:function(){var e=Pe.apply(null,arguments).map(Pn);return new ne(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(a,l){return ne.resolve(a).then(function(f){e[l]=f,--r||t(e)},n)})})},resolve:function(e){return e instanceof ne?e:e&&typeof e.then=="function"?new ne(function(t,n){e.then(t,n)}):new ne(nt,!0,e)},reject:Tn,race:function(){var e=Pe.apply(null,arguments).map(Pn);return new ne(function(t,n){e.map(function(r){return ne.resolve(r).then(t,n)})})},PSD:{get:function(){return oe},set:function(e){return oe=e}},totalEchoes:{get:function(){return Cn}},newPSD:jt,usePSD:zt,scheduler:{get:function(){return Lt},set:function(e){Lt=e}},rejectionMapper:{get:function(){return tn},set:function(e){tn=e}},follow:function(e,t){return new ne(function(n,r){return jt(function(a,l){var f=oe;f.unhandleds=[],f.onunhandled=l,f.finalize=et(function(){var d,g=this;d=function(){g.unhandleds.length===0?a():l(g.unhandleds[0])},nn.push(function y(){d(),nn.splice(nn.indexOf(y),1)}),++Et,Lt(function(){--Et==0&&cr()},[])},f.finalize),e()},t,n,r)})}}),He&&(He.allSettled&&N(ne,"allSettled",function(){var e=Pe.apply(null,arguments).map(Pn);return new ne(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(a,l){return ne.resolve(a).then(function(f){return r[l]={status:"fulfilled",value:f}},function(f){return r[l]={status:"rejected",reason:f}}).then(function(){return--n||t(r)})})})}),He.any&&typeof AggregateError<"u"&&N(ne,"any",function(){var e=Pe.apply(null,arguments).map(Pn);return new ne(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,a=new Array(r);e.forEach(function(l,f){return ne.resolve(l).then(function(d){return t(d)},function(d){a[f]=d,--r||n(new AggregateError(a))})})})}),He.withResolvers&&(ne.withResolvers=He.withResolvers));var rt={awaits:0,echoes:0,id:0},Si=0,En=[],On=0,Cn=0,Ti=0;function jt(e,t,n,r){var a=oe,l=Object.create(a);return l.parent=a,l.ref=0,l.global=!1,l.id=++Ti,St.env,l.env=$t?{Promise:ne,PromiseProp:{value:ne,configurable:!0,writable:!0},all:ne.all,race:ne.race,allSettled:ne.allSettled,any:ne.any,resolve:ne.resolve,reject:ne.reject}:{},t&&E(l,t),++a.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()},r=zt(l,e,n,r),l.ref===0&&l.finalize(),r}function an(){return rt.id||(rt.id=++Si),++rt.awaits,rt.echoes+=Ne,rt.id}function Kt(){return!!rt.awaits&&(--rt.awaits==0&&(rt.id=0),rt.echoes=rt.awaits*Ne,!0)}function Pn(e){return rt.echoes&&e&&e.constructor===He?(an(),e.then(function(t){return Kt(),t},function(t){return Kt(),Xe(t)})):e}function Ei(){var e=En[En.length-1];En.pop(),Ft(e,!1)}function Ft(e,t){var n,r=oe;(t?!rt.echoes||On++&&e===oe:!On||--On&&e===oe)||queueMicrotask(t?(function(a){++Cn,rt.echoes&&--rt.echoes!=0||(rt.echoes=rt.awaits=rt.id=0),En.push(oe),Ft(a,!0)}).bind(null,e):Ei),e!==oe&&(oe=e,r===St&&(St.env=ao()),$t&&(n=St.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(h,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function ao(){var e=h.Promise;return $t?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(h,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function zt(e,t,n,r,a){var l=oe;try{return Ft(e,!0),t(n,r,a)}finally{Ft(l,!1)}}function so(e,t,n,r){return typeof e!="function"?e:function(){var a=oe;n&&an(),Ft(t,!0);try{return e.apply(this,arguments)}finally{Ft(a,!1),r&&queueMicrotask(Kt)}}}function fr(e){Promise===He&&rt.echoes===0?On===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+wt).indexOf("[native code]")===-1&&(an=Kt=pe);var Xe=ne.reject,Ut="￿",It="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",uo="String expected.",sn=[],In="__dbnames",dr="readonly",hr="readwrite";function Yt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var lo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function An(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=Le(t))[e],t}}function co(){throw te.Type()}function Se(e,t){try{var n=fo(e),r=fo(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(a,l){for(var f=a.length,d=l.length,g=f<d?f:d,y=0;y<g;++y)if(a[y]!==l[y])return a[y]<l[y]?-1:1;return f===d?0:f<d?-1:1}(ho(e),ho(t));case"Array":return function(a,l){for(var f=a.length,d=l.length,g=f<d?f:d,y=0;y<g;++y){var w=Se(a[y],l[y]);if(w!==0)return w}return f===d?0:f<d?-1:1}(e,t)}}catch{}return NaN}function fo(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Ge(e),e==="ArrayBuffer"?"binary":e)}function ho(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var vo=(Ue.prototype._trans=function(e,t,n){var r=this._tx||oe.trans,a=this.name,l=fe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function f(y,w,v){if(!v.schema[a])throw new te.NotFound("Table "+a+" not part of transaction");return t(v.idbtrans,v)}var d=rn();try{var g=r&&r.db._novip===this.db._novip?r===oe.trans?r._promise(e,f,n):jt(function(){return r._promise(e,f,n)},{trans:r,transless:oe.transless||oe}):function y(w,v,k,m){if(w.idbdb&&(w._state.openComplete||oe.letThrough||w._vip)){var _=w._createTransaction(v,k,w._dbSchema);try{_.create(),w._state.PR1398_maxLoop=3}catch(x){return x.name===De.InvalidState&&w.isOpen()&&0<--w._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),w.close({disableAutoOpen:!1}),w.open().then(function(){return y(w,v,k,m)})):Xe(x)}return _._promise(v,function(x,b){return jt(function(){return oe.trans=_,m(x,b,_)})}).then(function(x){if(v==="readwrite")try{_.idbtrans.commit()}catch{}return v==="readonly"?x:_._completion.then(function(){return x})})}if(w._state.openComplete)return Xe(new te.DatabaseClosed(w._state.dbOpenError));if(!w._state.isBeingOpened){if(!w._state.autoOpen)return Xe(new te.DatabaseClosed);w.open().catch(pe)}return w._state.dbReadyPromise.then(function(){return y(w,v,k,m)})}(this.db,e,[this.name],f);return l&&(g._consoleTask=l,g=g.catch(function(y){return console.trace(y),Xe(y)})),g}finally{d&&on()}},Ue.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?Xe(new te.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(a){return n.hook.reading.fire(a)})}).then(t)},Ue.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(D(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=p(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(d){if(d.compound&&t.every(function(y){return 0<=d.keyPath.indexOf(y)})){for(var g=0;g<t.length;++g)if(t.indexOf(d.keyPath[g])===-1)return!1;return!0}return!1}).sort(function(d,g){return d.keyPath.length-g.keyPath.length})[0];if(n&&this.db._maxKey!==Ut){var l=n.keyPath.slice(0,t.length);return this.where(l).equals(l.map(function(g){return e[g]}))}!n&&fe&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName;function a(d,g){return Se(d,g)===0}var f=t.reduce(function(v,g){var y=v[0],w=v[1],v=r[g],k=e[g];return[y||v,y||!v?Yt(w,v&&v.multi?function(m){return m=Z(m,g),D(m)&&m.some(function(_){return a(k,_)})}:function(m){return a(k,Z(m,g))}):w]},[null,null]),l=f[0],f=f[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(f):n?this.filter(f):this.where(t).equals("")},Ue.prototype.filter=function(e){return this.toCollection().and(e)},Ue.prototype.count=function(e){return this.toCollection().count(e)},Ue.prototype.offset=function(e){return this.toCollection().offset(e)},Ue.prototype.limit=function(e){return this.toCollection().limit(e)},Ue.prototype.each=function(e){return this.toCollection().each(e)},Ue.prototype.toArray=function(e){return this.toCollection().toArray(e)},Ue.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ue.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,D(e)?"[".concat(e.join("+"),"]"):e))},Ue.prototype.reverse=function(){return this.toCollection().reverse()},Ue.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function a(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof co&&(function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function w(){this.constructor=g}i(g,y),g.prototype=y===null?Object.create(y):(w.prototype=y.prototype,new w)}(a,t=e),Object.defineProperty(a.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),a.prototype.table=function(){return r},e=a);for(var l=new Set,f=e.prototype;f;f=P(f))Object.getOwnPropertyNames(f).forEach(function(g){return l.add(g)});function d(g){if(!g)return g;var y,w=Object.create(e.prototype);for(y in g)if(!l.has(y))try{w[y]=g[y]}catch{}return w}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=d,this.hook("reading",d),e},Ue.prototype.defineClass=function(){return this.mapToClass(function(e){E(this,e)})},Ue.prototype.add=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,l=r.keyPath,f=e;return l&&a&&(f=An(l)(e)),this._trans("readwrite",function(d){return n.core.mutate({trans:d,type:"add",keys:t!=null?[t]:null,values:[f]})}).then(function(d){return d.numFailures?ne.reject(d.failures[0]):d.lastResult}).then(function(d){if(l)try{R(e,l,d)}catch{}return d})},Ue.prototype.update=function(e,t){return typeof e!="object"||D(e)?this.where(":id").equals(e).modify(t):(e=Z(e,this.schema.primKey.keyPath),e===void 0?Xe(new te.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},Ue.prototype.put=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,l=r.keyPath,f=e;return l&&a&&(f=An(l)(e)),this._trans("readwrite",function(d){return n.core.mutate({trans:d,type:"put",values:[f],keys:t!=null?[t]:null})}).then(function(d){return d.numFailures?ne.reject(d.failures[0]):d.lastResult}).then(function(d){if(l)try{R(e,l,d)}catch{}return d})},Ue.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?ne.reject(n.failures[0]):void 0})},Ue.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:lo})}).then(function(t){return t.numFailures?ne.reject(t.failures[0]):void 0})},Ue.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(a){return t.hook.reading.fire(a)})})})},Ue.prototype.bulkAdd=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,l=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(f){var y=r.schema.primKey,d=y.auto,y=y.keyPath;if(y&&a)throw new te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");var g=e.length,y=y&&d?e.map(An(y)):e;return r.core.mutate({trans:f,type:"add",keys:a,values:y,wantResults:l}).then(function(_){var v=_.numFailures,k=_.results,m=_.lastResult,_=_.failures;if(v===0)return l?k:m;throw new Te("".concat(r.name,".bulkAdd(): ").concat(v," of ").concat(g," operations failed"),_)})})},Ue.prototype.bulkPut=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,l=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(f){var y=r.schema.primKey,d=y.auto,y=y.keyPath;if(y&&a)throw new te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");var g=e.length,y=y&&d?e.map(An(y)):e;return r.core.mutate({trans:f,type:"put",keys:a,values:y,wantResults:l}).then(function(_){var v=_.numFailures,k=_.results,m=_.lastResult,_=_.failures;if(v===0)return l?k:m;throw new Te("".concat(r.name,".bulkPut(): ").concat(v," of ").concat(g," operations failed"),_)})})},Ue.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(f){return f.key}),a=e.map(function(f){return f.changes}),l=[];return this._trans("readwrite",function(f){return n.getMany({trans:f,keys:r,cache:"clone"}).then(function(d){var g=[],y=[];e.forEach(function(v,k){var m=v.key,_=v.changes,x=d[k];if(x){for(var b=0,S=Object.keys(_);b<S.length;b++){var T=S[b],O=_[T];if(T===t.schema.primKey.keyPath){if(Se(O,m)!==0)throw new te.Constraint("Cannot update primary key in bulkUpdate()")}else R(x,T,O)}l.push(k),g.push(m),y.push(x)}});var w=g.length;return n.mutate({trans:f,type:"put",keys:g,values:y,updates:{keys:r,changeSpecs:a}}).then(function(v){var k=v.numFailures,m=v.failures;if(k===0)return w;for(var _=0,x=Object.keys(m);_<x.length;_++){var b,S=x[_],T=l[Number(S)];T!=null&&(b=m[S],delete m[S],m[T]=b)}throw new Te("".concat(t.name,".bulkUpdate(): ").concat(k," of ").concat(w," operations failed"),m)})})})},Ue.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(f){var a=f.numFailures,l=f.lastResult,f=f.failures;if(a===0)return l;throw new Te("".concat(t.name,".bulkDelete(): ").concat(a," of ").concat(n," operations failed"),f)})},Ue);function Ue(){}function dn(e){function t(f,d){if(d){for(var g=arguments.length,y=new Array(g-1);--g;)y[g-1]=arguments[g];return n[f].subscribe.apply(null,y),e}if(typeof f=="string")return n[f]}var n={};t.addEventType=l;for(var r=1,a=arguments.length;r<a;++r)l(arguments[r]);return t;function l(f,d,g){if(typeof f!="object"){var y;d=d||mt;var w={subscribers:[],fire:g=g||pe,subscribe:function(v){w.subscribers.indexOf(v)===-1&&(w.subscribers.push(v),w.fire=d(w.fire,v))},unsubscribe:function(v){w.subscribers=w.subscribers.filter(function(k){return k!==v}),w.fire=w.subscribers.reduce(d,g)}};return n[f]=t[f]=w}p(y=f).forEach(function(v){var k=y[v];if(D(k))l(v,y[v][0],y[v][1]);else{if(k!=="asap")throw new te.InvalidArgument("Invalid event config");var m=l(v,ct,function(){for(var _=arguments.length,x=new Array(_);_--;)x[_]=arguments[_];m.subscribers.forEach(function(b){Y(function(){b.apply(null,x)})})})}})}}function hn(e,t){return L(t).from({prototype:e}),t}function un(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function vr(e,t){e.filter=Yt(e.filter,t)}function pr(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Yt(r(),t())}:t,e.justLimit=n&&!r}function Mn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new te.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function po(e,t,n){var r=Mn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function jn(e,t,n,r){var a=e.replayFilter?Yt(e.filter,e.replayFilter()):e.filter;if(e.or){var l={},f=function(d,g,y){var w,v;a&&!a(g,y,function(k){return g.stop(k)},function(k){return g.fail(k)})||((v=""+(w=g.primaryKey))=="[object ArrayBuffer]"&&(v=""+new Uint8Array(w)),F(l,v)||(l[v]=!0,t(d,g,y)))};return Promise.all([e.or._iterate(f,n),go(po(e,r,n),e.algorithm,f,!e.keysOnly&&e.valueMapper)])}return go(po(e,r,n),Yt(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function go(e,t,n,r){var a=We(r?function(l,f,d){return n(r(l),f,d)}:n);return e.then(function(l){if(l)return l.start(function(){var f=function(){return l.continue()};t&&!t(l,function(d){return f=d},function(d){l.stop(d),f=pe},function(d){l.fail(d),f=pe})||a(l.value,l,function(d){return f=d}),f()})})}var vn=(mo.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(D(n))return c(c([],D(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var r=t.remove;if(D(r))return D(e)?e.filter(function(a){return!r.includes(a)}).sort():[];if(typeof r=="number")return Number(e)-r;if(typeof r=="bigint")try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError("Invalid subtrahend ".concat(r))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},mo);function mo(e){this["@@propmod"]=e}var Oi=(Ae.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Xe.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Ae.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Xe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Ae.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Yt(t.algorithm,e)},Ae.prototype._iterate=function(e,t){return jn(this._ctx,e,t,this._ctx.table.core)},Ae.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&E(n,e),t._ctx=n,t},Ae.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ae.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return jn(t,e,n,t.table.core)})},Ae.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,a=r.table.core;if(un(r,!0))return a.count({trans:n,query:{index:Mn(r,a.schema),range:r.range}}).then(function(f){return Math.min(f,r.limit)});var l=0;return jn(r,function(){return++l,!1},n,a).then(function(){return l})}).then(e)},Ae.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],a=n.length-1;function l(g,y){return y?l(g[n[y]],y-1):g[r]}var f=this._ctx.dir==="next"?1:-1;function d(g,y){return Se(l(g,a),l(y,a))*f}return this.toArray(function(g){return g.sort(d)}).then(t)},Ae.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if(r.dir==="next"&&un(r,!0)&&0<r.limit){var a=r.valueMapper,l=Mn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:l,range:r.range}}).then(function(d){return d=d.result,a?d.map(a):d})}var f=[];return jn(r,function(d){return f.push(d)},n,r.table.core).then(function(){return f})},e)},Ae.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,un(t)?pr(t,function(){var n=e;return function(r,a){return n===0||(n===1?--n:a(function(){r.advance(n),n=0}),!1)}}):pr(t,function(){var n=e;return function(){return--n<0}})),this},Ae.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),pr(this._ctx,function(){var t=e;return function(n,r,a){return--t<=0&&r(a),0<=t}},!0),this},Ae.prototype.until=function(e,t){return vr(this._ctx,function(n,r,a){return!e(n.value)||(r(a),t)}),this},Ae.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},Ae.prototype.last=function(e){return this.reverse().first(e)},Ae.prototype.filter=function(e){var t;return vr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=Yt(t.isMatch,e),this},Ae.prototype.and=function(e){return this.filter(e)},Ae.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Ae.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ae.prototype.desc=function(){return this.reverse()},Ae.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},Ae.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Ae.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},Ae.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,a){n.push(a.key)}).then(function(){return n}).then(e)},Ae.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&un(t,!0)&&0<t.limit)return this._read(function(r){var a=Mn(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:a,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,a){n.push(a.primaryKey)}).then(function(){return n}).then(e)},Ae.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Ae.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},Ae.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Ae.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return vr(this._ctx,function(a){var r=a.primaryKey.toString(),a=F(t,r);return t[r]=!0,!a}),this},Ae.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var a,l,f;f=typeof e=="function"?e:(a=p(e),l=a.length,function(b){for(var S=!1,T=0;T<l;++T){var O=a[T],M=e[O],z=Z(b,O);M instanceof vn?(R(b,O,M.execute(z)),S=!0):z!==M&&(R(b,O,M),S=!0)}return S});var d=n.table.core,v=d.schema.primaryKey,g=v.outbound,y=v.extractKey,w=200,v=t.db._options.modifyChunkSize;v&&(w=typeof v=="object"?v[d.name]||v["*"]||200:v);function k(b,O){var T=O.failures,O=O.numFailures;_+=b-O;for(var M=0,z=p(T);M<z.length;M++){var J=z[M];m.push(T[J])}}var m=[],_=0,x=[];return t.clone().primaryKeys().then(function(b){function S(O){var M=Math.min(w,b.length-O);return d.getMany({trans:r,keys:b.slice(O,O+M),cache:"immutable"}).then(function(z){for(var J=[],U=[],Q=g?[]:null,ee=[],G=0;G<M;++G){var ie=z[G],ge={value:Le(ie),primKey:b[O+G]};f.call(ge,ge.value,ge)!==!1&&(ge.value==null?ee.push(b[O+G]):g||Se(y(ie),y(ge.value))===0?(U.push(ge.value),g&&Q.push(b[O+G])):(ee.push(b[O+G]),J.push(ge.value)))}return Promise.resolve(0<J.length&&d.mutate({trans:r,type:"add",values:J}).then(function(xe){for(var ke in xe.failures)ee.splice(parseInt(ke),1);k(J.length,xe)})).then(function(){return(0<U.length||T&&typeof e=="object")&&d.mutate({trans:r,type:"put",keys:Q,values:U,criteria:T,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<O}).then(function(xe){return k(U.length,xe)})}).then(function(){return(0<ee.length||T&&e===gr)&&d.mutate({trans:r,type:"delete",keys:ee,criteria:T,isAdditionalChunk:0<O}).then(function(xe){return k(ee.length,xe)})}).then(function(){return b.length>O+M&&S(O+w)})})}var T=un(n)&&n.limit===1/0&&(typeof e!="function"||e===gr)&&{index:n.index,range:n.range};return S(0).then(function(){if(0<m.length)throw new ye("Error modifying one or more objects",m,_,x);return b.length})})})},Ae.prototype.delete=function(){var e=this._ctx,t=e.range;return un(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,a=t;return e.table.core.count({trans:n,query:{index:r,range:a}}).then(function(l){return e.table.core.mutate({trans:n,type:"deleteRange",range:a}).then(function(f){var d=f.failures;if(f.lastResult,f.results,f=f.numFailures,f)throw new ye("Could not delete some values",Object.keys(d).map(function(g){return d[g]}),l-f);return l-f})})}):this.modify(gr)},Ae);function Ae(){}var gr=function(e,t){return t.value=null};function Ci(e,t){return e<t?-1:e===t?0:1}function Pi(e,t){return t<e?-1:e===t?0:1}function yt(e,t,n){return e=e instanceof bo?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function ln(e){return new e.Collection(e,function(){return yo("")}).limit(0)}function Kn(e,t,n,r){var a,l,f,d,g,y,w,v=n.length;if(!n.every(function(_){return typeof _=="string"}))return yt(e,uo);function k(_){a=_==="next"?function(b){return b.toUpperCase()}:function(b){return b.toLowerCase()},l=_==="next"?function(b){return b.toLowerCase()}:function(b){return b.toUpperCase()},f=_==="next"?Ci:Pi;var x=n.map(function(b){return{lower:l(b),upper:a(b)}}).sort(function(b,S){return f(b.lower,S.lower)});d=x.map(function(b){return b.upper}),g=x.map(function(b){return b.lower}),w=(y=_)==="next"?"":r}k("next"),e=new e.Collection(e,function(){return qt(d[0],g[v-1]+r)}),e._ondirectionchange=function(_){k(_)};var m=0;return e._addAlgorithm(function(_,x,b){var S=_.key;if(typeof S!="string")return!1;var T=l(S);if(t(T,g,m))return!0;for(var O=null,M=m;M<v;++M){var z=function(J,U,Q,ee,G,ie){for(var ge=Math.min(J.length,ee.length),xe=-1,ke=0;ke<ge;++ke){var bt=U[ke];if(bt!==ee[ke])return G(J[ke],Q[ke])<0?J.substr(0,ke)+Q[ke]+Q.substr(ke+1):G(J[ke],ee[ke])<0?J.substr(0,ke)+ee[ke]+Q.substr(ke+1):0<=xe?J.substr(0,xe)+U[xe]+Q.substr(xe+1):null;G(J[ke],bt)<0&&(xe=ke)}return ge<ee.length&&ie==="next"?J+Q.substr(J.length):ge<J.length&&ie==="prev"?J.substr(0,Q.length):xe<0?null:J.substr(0,xe)+ee[xe]+Q.substr(xe+1)}(S,T,d[M],g[M],f,y);z===null&&O===null?m=M+1:(O===null||0<f(O,z))&&(O=z)}return x(O!==null?function(){_.continue(O+w)}:b),!1}),e}function qt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function yo(e){return{type:1,lower:e,upper:e}}var bo=(Object.defineProperty(ot.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ot.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||r)&&(!n||!r)?ln(this):new this.Collection(this,function(){return qt(e,t,!n,!r)})}catch{return yt(this,It)}},ot.prototype.equals=function(e){return e==null?yt(this,It):new this.Collection(this,function(){return yo(e)})},ot.prototype.above=function(e){return e==null?yt(this,It):new this.Collection(this,function(){return qt(e,void 0,!0)})},ot.prototype.aboveOrEqual=function(e){return e==null?yt(this,It):new this.Collection(this,function(){return qt(e,void 0,!1)})},ot.prototype.below=function(e){return e==null?yt(this,It):new this.Collection(this,function(){return qt(void 0,e,!1,!0)})},ot.prototype.belowOrEqual=function(e){return e==null?yt(this,It):new this.Collection(this,function(){return qt(void 0,e)})},ot.prototype.startsWith=function(e){return typeof e!="string"?yt(this,uo):this.between(e,e+Ut,!0,!0)},ot.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Kn(this,function(t,n){return t.indexOf(n[0])===0},[e],Ut)},ot.prototype.equalsIgnoreCase=function(e){return Kn(this,function(t,n){return t===n[0]},[e],"")},ot.prototype.anyOfIgnoreCase=function(){var e=Pe.apply(ze,arguments);return e.length===0?ln(this):Kn(this,function(t,n){return n.indexOf(t)!==-1},e,"")},ot.prototype.startsWithAnyOfIgnoreCase=function(){var e=Pe.apply(ze,arguments);return e.length===0?ln(this):Kn(this,function(t,n){return n.some(function(r){return t.indexOf(r)===0})},e,Ut)},ot.prototype.anyOf=function(){var e=this,t=Pe.apply(ze,arguments),n=this._cmp;try{t.sort(n)}catch{return yt(this,It)}if(t.length===0)return ln(this);var r=new this.Collection(this,function(){return qt(t[0],t[t.length-1])});r._ondirectionchange=function(l){n=l==="next"?e._ascending:e._descending,t.sort(n)};var a=0;return r._addAlgorithm(function(l,f,d){for(var g=l.key;0<n(g,t[a]);)if(++a===t.length)return f(d),!1;return n(g,t[a])===0||(f(function(){l.continue(t[a])}),!1)}),r},ot.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ot.prototype.noneOf=function(){var e=Pe.apply(ze,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return yt(this,It)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},ot.prototype.inAnyRange=function(S,t){var n=this,r=this._cmp,a=this._ascending,l=this._descending,f=this._min,d=this._max;if(S.length===0)return ln(this);if(!S.every(function(T){return T[0]!==void 0&&T[1]!==void 0&&a(T[0],T[1])<=0}))return yt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",te.InvalidArgument);var g=!t||t.includeLowers!==!1,y=t&&t.includeUppers===!0,w,v=a;function k(T,O){return v(T[0],O[0])}try{(w=S.reduce(function(T,O){for(var M=0,z=T.length;M<z;++M){var J=T[M];if(r(O[0],J[1])<0&&0<r(O[1],J[0])){J[0]=f(J[0],O[0]),J[1]=d(J[1],O[1]);break}}return M===z&&T.push(O),T},[])).sort(k)}catch{return yt(this,It)}var m=0,_=y?function(T){return 0<a(T,w[m][1])}:function(T){return 0<=a(T,w[m][1])},x=g?function(T){return 0<l(T,w[m][0])}:function(T){return 0<=l(T,w[m][0])},b=_,S=new this.Collection(this,function(){return qt(w[0][0],w[w.length-1][1],!g,!y)});return S._ondirectionchange=function(T){v=T==="next"?(b=_,a):(b=x,l),w.sort(k)},S._addAlgorithm(function(T,O,M){for(var z,J=T.key;b(J);)if(++m===w.length)return O(M),!1;return!_(z=J)&&!x(z)||(n._cmp(J,w[m][1])===0||n._cmp(J,w[m][0])===0||O(function(){v===a?T.continue(w[m][0]):T.continue(w[m][1])}),!1)}),S},ot.prototype.startsWithAnyOf=function(){var e=Pe.apply(ze,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?ln(this):this.inAnyRange(e.map(function(t){return[t,t+Ut]})):yt(this,"startsWithAnyOf() only works with strings")},ot);function ot(){}function Ot(e){return We(function(t){return pn(t),e(t.target.error),!1})}function pn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var gn="storagemutated",mr="x-storagemutated-1",Rt=dn(null,gn),Ii=(Ct.prototype._lock=function(){return I(!oe.global),++this._reculock,this._reculock!==1||oe.global||(oe.lockOwnerFor=this),this},Ct.prototype._unlock=function(){if(I(!oe.global),--this._reculock==0)for(oe.global||(oe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{zt(e[1],e[0])}catch{}}return this},Ct.prototype._locked=function(){return this._reculock&&oe.lockOwnerFor!==this},Ct.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(I(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new te.DatabaseClosed(r);case"MissingAPIError":throw new te.MissingAPI(r.message,r);default:throw new te.OpenFailed(r)}if(!this.active)throw new te.TransactionInactive;return I(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=We(function(a){pn(a),t._reject(e.error)}),e.onabort=We(function(a){pn(a),t.active&&t._reject(new te.Abort(e.error)),t.active=!1,t.on("abort").fire(a)}),e.oncomplete=We(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Rt.storagemutated.fire(e.mutatedParts)}),this},Ct.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return Xe(new te.ReadOnly("Transaction is readonly"));if(!this.active)return Xe(new te.TransactionInactive);if(this._locked())return new ne(function(l,f){r._blockedFuncs.push([function(){r._promise(e,t,n).then(l,f)},oe])});if(n)return jt(function(){var l=new ne(function(f,d){r._lock();var g=t(f,d,r);g&&g.then&&g.then(f,d)});return l.finally(function(){return r._unlock()}),l._lib=!0,l});var a=new ne(function(l,f){var d=t(l,f,r);d&&d.then&&d.then(l,f)});return a._lib=!0,a},Ct.prototype._root=function(){return this.parent?this.parent._root():this},Ct.prototype.waitFor=function(e){var t,n=this._root(),r=ne.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function l(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=l)}());var a=n._waitingFor;return new ne(function(l,f){r.then(function(d){return n._waitingQueue.push(We(l.bind(null,d)))},function(d){return n._waitingQueue.push(We(f.bind(null,d)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},Ct.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new te.Abort))},Ct.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(F(t,e))return t[e];var n=this.schema[e];if(!n)throw new te.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},Ct);function Ct(){}function yr(e,t,n,r,a,l,f){return{name:e,keyPath:t,unique:n,multi:r,auto:a,compound:l,src:(n&&!f?"&":"")+(r?"*":"")+(a?"++":"")+_o(t)}}function _o(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function br(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(a){return[a.name,a]},n.reduce(function(a,l,f){return f=r(l,f),f&&(a[f[0]]=f[1]),a},{}))};var r}var mn=function(e){try{return e.only([[]]),mn=function(){return[[]]},[[]]}catch{return mn=function(){return Ut},Ut}};function _r(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return Z(n,t)}:function(n){return Z(n,e)};var t}function wo(e){return[].slice.call(e)}var Ai=0;function yn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Mi(e,t,g){function r(b){if(b.type===3)return null;if(b.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var m=b.lower,_=b.upper,x=b.lowerOpen,b=b.upperOpen;return m===void 0?_===void 0?null:t.upperBound(_,!!b):_===void 0?t.lowerBound(m,!!x):t.bound(m,_,!!x,!!b)}function a(k){var m,_=k.name;return{name:_,schema:k,mutate:function(x){var b=x.trans,S=x.type,T=x.keys,O=x.values,M=x.range;return new Promise(function(z,J){z=We(z);var U=b.objectStore(_),Q=U.keyPath==null,ee=S==="put"||S==="add";if(!ee&&S!=="delete"&&S!=="deleteRange")throw new Error("Invalid operation type: "+S);var G,ie=(T||O||{length:1}).length;if(T&&O&&T.length!==O.length)throw new Error("Given keys array must have same length as given values array.");if(ie===0)return z({numFailures:0,failures:{},results:[],lastResult:void 0});function ge(ht){++bt,pn(ht)}var xe=[],ke=[],bt=0;if(S==="deleteRange"){if(M.type===4)return z({numFailures:bt,failures:ke,results:[],lastResult:void 0});M.type===3?xe.push(G=U.clear()):xe.push(G=U.delete(r(M)))}else{var Q=ee?Q?[O,T]:[O,null]:[T,null],ve=Q[0],ut=Q[1];if(ee)for(var lt=0;lt<ie;++lt)xe.push(G=ut&&ut[lt]!==void 0?U[S](ve[lt],ut[lt]):U[S](ve[lt])),G.onerror=ge;else for(lt=0;lt<ie;++lt)xe.push(G=U[S](ve[lt])),G.onerror=ge}function Qn(ht){ht=ht.target.result,xe.forEach(function(Qt,Rr){return Qt.error!=null&&(ke[Rr]=Qt.error)}),z({numFailures:bt,failures:ke,results:S==="delete"?T:xe.map(function(Qt){return Qt.result}),lastResult:ht})}G.onerror=function(ht){ge(ht),Qn(ht)},G.onsuccess=Qn})},getMany:function(x){var b=x.trans,S=x.keys;return new Promise(function(T,O){T=We(T);for(var M,z=b.objectStore(_),J=S.length,U=new Array(J),Q=0,ee=0,G=function(xe){xe=xe.target,U[xe._pos]=xe.result,++ee===Q&&T(U)},ie=Ot(O),ge=0;ge<J;++ge)S[ge]!=null&&((M=z.get(S[ge]))._pos=ge,M.onsuccess=G,M.onerror=ie,++Q);Q===0&&T(U)})},get:function(x){var b=x.trans,S=x.key;return new Promise(function(T,O){T=We(T);var M=b.objectStore(_).get(S);M.onsuccess=function(z){return T(z.target.result)},M.onerror=Ot(O)})},query:(m=y,function(x){return new Promise(function(b,S){b=We(b);var T,O,M,Q=x.trans,z=x.values,J=x.limit,G=x.query,U=J===1/0?void 0:J,ee=G.index,G=G.range,Q=Q.objectStore(_),ee=ee.isPrimaryKey?Q:Q.index(ee.name),G=r(G);if(J===0)return b({result:[]});m?((U=z?ee.getAll(G,U):ee.getAllKeys(G,U)).onsuccess=function(ie){return b({result:ie.target.result})},U.onerror=Ot(S)):(T=0,O=!z&&"openKeyCursor"in ee?ee.openKeyCursor(G):ee.openCursor(G),M=[],O.onsuccess=function(ie){var ge=O.result;return ge?(M.push(z?ge.value:ge.primaryKey),++T===J?b({result:M}):void ge.continue()):b({result:M})},O.onerror=Ot(S))})}),openCursor:function(x){var b=x.trans,S=x.values,T=x.query,O=x.reverse,M=x.unique;return new Promise(function(z,J){z=We(z);var ee=T.index,U=T.range,Q=b.objectStore(_),Q=ee.isPrimaryKey?Q:Q.index(ee.name),ee=O?M?"prevunique":"prev":M?"nextunique":"next",G=!S&&"openKeyCursor"in Q?Q.openKeyCursor(r(U),ee):Q.openCursor(r(U),ee);G.onerror=Ot(J),G.onsuccess=We(function(ie){var ge,xe,ke,bt,ve=G.result;ve?(ve.___id=++Ai,ve.done=!1,ge=ve.continue.bind(ve),xe=(xe=ve.continuePrimaryKey)&&xe.bind(ve),ke=ve.advance.bind(ve),bt=function(){throw new Error("Cursor not stopped")},ve.trans=b,ve.stop=ve.continue=ve.continuePrimaryKey=ve.advance=function(){throw new Error("Cursor not started")},ve.fail=We(J),ve.next=function(){var ut=this,lt=1;return this.start(function(){return lt--?ut.continue():ut.stop()}).then(function(){return ut})},ve.start=function(ut){function lt(){if(G.result)try{ut()}catch(ht){ve.fail(ht)}else ve.done=!0,ve.start=function(){throw new Error("Cursor behind last entry")},ve.stop()}var Qn=new Promise(function(ht,Qt){ht=We(ht),G.onerror=Ot(Qt),ve.fail=Qt,ve.stop=function(Rr){ve.stop=ve.continue=ve.continuePrimaryKey=ve.advance=bt,ht(Rr)}});return G.onsuccess=We(function(ht){G.onsuccess=lt,lt()}),ve.continue=ge,ve.continuePrimaryKey=xe,ve.advance=ke,lt(),Qn},z(ve)):z(null)},J)})},count:function(x){var b=x.query,S=x.trans,T=b.index,O=b.range;return new Promise(function(M,z){var J=S.objectStore(_),U=T.isPrimaryKey?J:J.index(T.name),J=r(O),U=J?U.count(J):U.count();U.onsuccess=We(function(Q){return M(Q.target.result)}),U.onerror=Ot(z)})}}}var l,f,d,w=(f=g,d=wo((l=e).objectStoreNames),{schema:{name:l.name,tables:d.map(function(k){return f.objectStore(k)}).map(function(k){var m=k.keyPath,b=k.autoIncrement,_=D(m),x={},b={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:m==null,compound:_,keyPath:m,autoIncrement:b,unique:!0,extractKey:_r(m)},indexes:wo(k.indexNames).map(function(S){return k.index(S)}).map(function(M){var T=M.name,O=M.unique,z=M.multiEntry,M=M.keyPath,z={name:T,compound:D(M),keyPath:M,unique:O,multiEntry:z,extractKey:_r(M)};return x[yn(M)]=z}),getIndexByKeyPath:function(S){return x[yn(S)]}};return x[":id"]=b.primaryKey,m!=null&&(x[yn(m)]=b.primaryKey),b})},hasGetAll:0<d.length&&"getAll"in f.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),g=w.schema,y=w.hasGetAll,w=g.tables.map(a),v={};return w.forEach(function(k){return v[k.name]=k}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(k){if(!v[k])throw new Error("Table '".concat(k,"' not found"));return v[k]},MIN_KEY:-1/0,MAX_KEY:mn(t),schema:g}}function ji(e,t,n,r){var a=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=Mi(t,a,r),e.dbcore.reduce(function(l,f){return f=f.create,u(u({},l),f(l))},r))}}function Fn(e,r){var n=r.db,r=ji(e._middlewares,n,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(a){var l=a.name;e.core.schema.tables.some(function(f){return f.name===l})&&(a.core=e.core.table(l),e[l]instanceof e.Table&&(e[l].core=a.core))})}function qn(e,t,n,r){n.forEach(function(a){var l=r[a];t.forEach(function(f){var d=function g(y,w){return X(y,w)||(y=P(y))&&g(y,w)}(f,a);(!d||"value"in d&&d.value===void 0)&&(f===e.Transaction.prototype||f instanceof e.Transaction?N(f,a,{get:function(){return this.table(a)},set:function(g){W(this,a,{value:g,writable:!0,configurable:!0,enumerable:!0})}}):f[a]=new e.Table(a,l))})})}function wr(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Ki(e,t){return e._cfg.version-t._cfg.version}function Fi(e,t,n,r){var a=e._dbSchema;n.objectStoreNames.contains("$meta")&&!a.$meta&&(a.$meta=br("$meta",ko("")[0],[]),e._storeNames.push("$meta"));var l=e._createTransaction("readwrite",e._storeNames,a);l.create(n),l._completion.catch(r);var f=l._reject.bind(l),d=oe.transless||oe;jt(function(){return oe.trans=l,oe.transless=d,t!==0?(Fn(e,n),y=t,((g=l).storeNames.includes("$meta")?g.table("$meta").get("version").then(function(w){return w??y}):ne.resolve(y)).then(function(w){return k=w,m=l,_=n,x=[],w=(v=e)._versions,b=v._dbSchema=Bn(0,v.idbdb,_),(w=w.filter(function(S){return S._cfg.version>=k})).length!==0?(w.forEach(function(S){x.push(function(){var T=b,O=S._cfg.dbschema;Nn(v,T,_),Nn(v,O,_),b=v._dbSchema=O;var M=xr(T,O);M.add.forEach(function(ee){kr(_,ee[0],ee[1].primKey,ee[1].indexes)}),M.change.forEach(function(ee){if(ee.recreate)throw new te.Upgrade("Not yet support for changing primary key");var G=_.objectStore(ee.name);ee.add.forEach(function(ie){return Rn(G,ie)}),ee.change.forEach(function(ie){G.deleteIndex(ie.name),Rn(G,ie)}),ee.del.forEach(function(ie){return G.deleteIndex(ie)})});var z=S._cfg.contentUpgrade;if(z&&S._cfg.version>k){Fn(v,_),m._memoizedTables={};var J=ue(O);M.del.forEach(function(ee){J[ee]=T[ee]}),wr(v,[v.Transaction.prototype]),qn(v,[v.Transaction.prototype],p(J),J),m.schema=J;var U,Q=$(z);return Q&&an(),M=ne.follow(function(){var ee;(U=z(m))&&Q&&(ee=Kt.bind(null,null),U.then(ee,ee))}),U&&typeof U.then=="function"?ne.resolve(U):M.then(function(){return U})}}),x.push(function(T){var O,M,z=S._cfg.dbschema;O=z,M=T,[].slice.call(M.db.objectStoreNames).forEach(function(J){return O[J]==null&&M.db.deleteObjectStore(J)}),wr(v,[v.Transaction.prototype]),qn(v,[v.Transaction.prototype],v._storeNames,v._dbSchema),m.schema=v._dbSchema}),x.push(function(T){v.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(v.idbdb.version/10)===S._cfg.version?(v.idbdb.deleteObjectStore("$meta"),delete v._dbSchema.$meta,v._storeNames=v._storeNames.filter(function(O){return O!=="$meta"})):T.objectStore("$meta").put(S._cfg.version,"version"))})}),function S(){return x.length?ne.resolve(x.shift()(m.idbtrans)).then(S):ne.resolve()}().then(function(){xo(b,_)})):ne.resolve();var v,k,m,_,x,b}).catch(f)):(p(a).forEach(function(w){kr(n,w,a[w].primKey,a[w].indexes)}),Fn(e,n),void ne.follow(function(){return e.on.populate.fire(l)}).catch(f));var g,y})}function qi(e,t){xo(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Bn(0,e.idbdb,t);Nn(e,e._dbSchema,t);for(var r=0,a=xr(n,e._dbSchema).change;r<a.length;r++){var l=function(f){if(f.change.length||f.recreate)return console.warn("Unable to patch indexes of table ".concat(f.name," because it has changes on the type of index or primary key.")),{value:void 0};var d=t.objectStore(f.name);f.add.forEach(function(g){fe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(f.name,".").concat(g.src)),Rn(d,g)})}(a[r]);if(typeof l=="object")return l.value}}function xr(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var a=e[n],l=t[n];if(a){var f={name:n,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||a.primKey.auto!==l.primKey.auto)f.recreate=!0,r.change.push(f);else{var d=a.idxByName,g=l.idxByName,y=void 0;for(y in d)g[y]||f.del.push(y);for(y in g){var w=d[y],v=g[y];w?w.src!==v.src&&f.change.push(v):f.add.push(v)}(0<f.del.length||0<f.add.length||0<f.change.length)&&r.change.push(f)}}else r.add.push([n,l])}return r}function kr(e,t,n,r){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(l){return Rn(a,l)}),a}function xo(e,t){p(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(fe&&console.debug("Dexie: Creating missing table",n),kr(t,n,e[n].primKey,e[n].indexes))})}function Rn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Bn(e,t,n){var r={};return K(t.objectStoreNames,0).forEach(function(a){for(var l=n.objectStore(a),f=yr(_o(y=l.keyPath),y||"",!0,!1,!!l.autoIncrement,y&&typeof y!="string",!0),d=[],g=0;g<l.indexNames.length;++g){var w=l.index(l.indexNames[g]),y=w.keyPath,w=yr(w.name,y,!!w.unique,!!w.multiEntry,!1,y&&typeof y!="string",!1);d.push(w)}r[a]=br(a,f,d)}),r}function Nn(e,t,n){for(var r=n.db.objectStoreNames,a=0;a<r.length;++a){var l=r[a],f=n.objectStore(l);e._hasGetAll="getAll"in f;for(var d=0;d<f.indexNames.length;++d){var g=f.indexNames[d],y=f.index(g).keyPath,w=typeof y=="string"?y:"["+K(y).join("+")+"]";!t[l]||(y=t[l].idxByName[w])&&(y.name=g,delete t[l].idxByName[w],t[l].idxByName[g]=y)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&h.WorkerGlobalScope&&h instanceof h.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ko(e){return e.split(",").map(function(t,n){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return yr(r,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),D(a),n===0)})}var Ri=(Hn.prototype._parseStoresSpec=function(e,t){p(e).forEach(function(n){if(e[n]!==null){var r=ko(e[n]),a=r.shift();if(a.unique=!0,a.multi)throw new te.Schema("Primary key cannot be multi-valued");r.forEach(function(l){if(l.auto)throw new te.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new te.Schema("Index must have a name and cannot be an empty string")}),t[n]=br(n,a,r)}})},Hn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?E(this._cfg.storesSource,n):n;var n=t._versions,r={},a={};return n.forEach(function(l){E(r,l._cfg.storesSource),a=l._cfg.dbschema={},l._parseStoresSpec(r,a)}),t._dbSchema=a,wr(t,[t._allTables,t,t.Transaction.prototype]),qn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],p(a),a),t._storeNames=p(a),this},Hn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ae(this._cfg.contentUpgrade||pe,e),this},Hn);function Hn(){}function Dr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new At(In,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Sr(e){return e&&typeof e.databases=="function"}function Tr(e){return jt(function(){return oe.letThrough=!0,e()})}function Er(e){return!("from"in e)}var st=function(e,t){if(!this){var n=new st;return e&&"d"in e&&E(n,e),n}E(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function bn(e,t,n){var r=Se(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(Er(e))return E(e,{from:t,to:n,d:1});var a=e.l,r=e.r;if(Se(n,e.from)<0)return a?bn(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},So(e);if(0<Se(t,e.to))return r?bn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},So(e);Se(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<Se(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,a&&!e.l&&_n(e,a),r&&n&&_n(e,r)}}function _n(e,t){Er(t)||function n(r,g){var l=g.from,f=g.to,d=g.l,g=g.r;bn(r,l,f),d&&n(r,d),g&&n(r,g)}(e,t)}function Do(e,t){var n=Ln(t),r=n.next();if(r.done)return!1;for(var a=r.value,l=Ln(e),f=l.next(a.from),d=f.value;!r.done&&!f.done;){if(Se(d.from,a.to)<=0&&0<=Se(d.to,a.from))return!0;Se(a.from,d.from)<0?a=(r=n.next(d.from)).value:d=(f=l.next(a.from)).value}return!1}function Ln(e){var t=Er(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Se(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Se(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function So(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),a=1<r?"r":r<-1?"l":"";a&&(t=a=="r"?"l":"r",n=u({},e),r=e[a],e.from=r.from,e.to=r.to,e[a]=r[a],n[a]=r[t],(e[t]=n).d=To(n)),e.d=To(e)}function To(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function zn(e,t){return p(t).forEach(function(n){e[n]?_n(e[n],t[n]):e[n]=function r(a){var l,f,d={};for(l in a)F(a,l)&&(f=a[l],d[l]=!f||typeof f!="object"||Ce.has(f.constructor)?f:r(f));return d}(t[n])}),e}function Or(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Do(t[n],e[n])})}A(st.prototype,((wt={add:function(e){return _n(this,e),this},addKey:function(e){return bn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return bn(t,n,n)}),this},hasKey:function(e){var t=Ln(this).next(e).value;return t&&Se(t.from,e)<=0&&0<=Se(t.to,e)}})[Ye]=function(){return Ln(this)},wt));var Wt={},Cr={},Pr=!1;function Un(e){zn(Cr,e),Pr||(Pr=!0,setTimeout(function(){Pr=!1,Ir(Cr,!(Cr={}))},0))}function Ir(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,a=Object.values(Wt);r<a.length;r++)Eo(f=a[r],e,n,t);else for(var l in e){var f,d=/^idb\:\/\/(.*)\/(.*)\//.exec(l);d&&(l=d[1],d=d[2],(f=Wt["idb://".concat(l,"/").concat(d)])&&Eo(f,e,n,t))}n.forEach(function(g){return g()})}function Eo(e,t,n,r){for(var a=[],l=0,f=Object.entries(e.queries.query);l<f.length;l++){for(var d=f[l],g=d[0],y=[],w=0,v=d[1];w<v.length;w++){var k=v[w];Or(t,k.obsSet)?k.subscribers.forEach(function(b){return n.add(b)}):r&&y.push(k)}r&&a.push([g,y])}if(r)for(var m=0,_=a;m<_.length;m++){var x=_[m],g=x[0],y=x[1];e.queries.query[g]=y}}function Bi(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Xe(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,a=Math.round(10*e.verno),l=!1;function f(){if(t.openCanceller!==r)throw new te.DatabaseClosed("db.open() was cancelled")}function d(){return new ne(function(k,m){if(f(),!n)throw new te.MissingAPI;var _=e.name,x=t.autoSchema||!a?n.open(_):n.open(_,a);if(!x)throw new te.MissingAPI;x.onerror=Ot(m),x.onblocked=We(e._fireOnBlocked),x.onupgradeneeded=We(function(b){var S;w=x.transaction,t.autoSchema&&!e._options.allowEmptyDB?(x.onerror=pn,w.abort(),x.result.close(),(S=n.deleteDatabase(_)).onsuccess=S.onerror=We(function(){m(new te.NoSuchDatabase("Database ".concat(_," doesnt exist")))})):(w.onerror=Ot(m),b=b.oldVersion>Math.pow(2,62)?0:b.oldVersion,v=b<1,e.idbdb=x.result,l&&qi(e,w),Fi(e,b/10,w,m))},m),x.onsuccess=We(function(){w=null;var b,S,T,O,M,z=e.idbdb=x.result,J=K(z.objectStoreNames);if(0<J.length)try{var U=z.transaction((O=J).length===1?O[0]:O,"readonly");if(t.autoSchema)S=z,T=U,(b=e).verno=S.version/10,T=b._dbSchema=Bn(0,S,T),b._storeNames=K(S.objectStoreNames,0),qn(b,[b._allTables],p(T),T);else if(Nn(e,e._dbSchema,U),((M=xr(Bn(0,(M=e).idbdb,U),M._dbSchema)).add.length||M.change.some(function(Q){return Q.add.length||Q.change.length}))&&!l)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),z.close(),a=z.version+1,l=!0,k(d());Fn(e,U)}catch{}sn.push(e),z.onversionchange=We(function(Q){t.vcFired=!0,e.on("versionchange").fire(Q)}),z.onclose=We(function(Q){e.on("close").fire(Q)}),v&&(M=e._deps,U=_,z=M.indexedDB,M=M.IDBKeyRange,Sr(z)||U===In||Dr(z,M).put({name:U}).catch(pe)),k()},m)}).catch(function(k){switch(k==null?void 0:k.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d();break;case"VersionError":if(0<a)return a=0,d()}return ne.reject(k)})}var g,y=t.dbReadyResolve,w=null,v=!1;return ne.race([r,(typeof navigator>"u"?ne.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(k){function m(){return indexedDB.databases().finally(k)}g=setInterval(m,100),m()}).finally(function(){return clearInterval(g)}):Promise.resolve()).then(d)]).then(function(){return f(),t.onReadyBeingFired=[],ne.resolve(Tr(function(){return e.on.ready.fire(e.vip)})).then(function k(){if(0<t.onReadyBeingFired.length){var m=t.onReadyBeingFired.reduce(ae,pe);return t.onReadyBeingFired=[],ne.resolve(Tr(function(){return m(e.vip)})).then(k)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(k){t.dbOpenError=k;try{w&&w.abort()}catch{}return r===t.openCanceller&&e._close(),Xe(k)}).finally(function(){t.openComplete=!0,y()}).then(function(){var k;return v&&(k={},e.tables.forEach(function(m){m.schema.indexes.forEach(function(_){_.name&&(k["idb://".concat(e.name,"/").concat(m.name,"/").concat(_.name)]=new st(-1/0,[[[]]]))}),k["idb://".concat(e.name,"/").concat(m.name,"/")]=k["idb://".concat(e.name,"/").concat(m.name,"/:dels")]=new st(-1/0,[[[]]])}),Rt(gn).fire(k),Ir(k,!0)),e})}function Ar(e){function t(l){return e.next(l)}var n=a(t),r=a(function(l){return e.throw(l)});function a(l){return function(g){var d=l(g),g=d.value;return d.done?g:g&&typeof g.then=="function"?g.then(n,r):D(g)?Promise.all(g).then(n,r):n(g)}}return a(t)()}function Yn(e,t,n){for(var r=D(e)?e.slice():[e],a=0;a<n;++a)r.push(t);return r}var Ni={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return u(u({},e),{table:function(t){var n=e.table(t),r=n.schema,a={},l=[];function f(v,k,m){var _=yn(v),x=a[_]=a[_]||[],b=v==null?0:typeof v=="string"?1:v.length,S=0<k,S=u(u({},m),{name:S?"".concat(_,"(virtual-from:").concat(m.name,")"):m.name,lowLevelIndex:m,isVirtual:S,keyTail:k,keyLength:b,extractKey:_r(v),unique:!S&&m.unique});return x.push(S),S.isPrimaryKey||l.push(S),1<b&&f(b===2?v[0]:v.slice(0,b-1),k+1,m),x.sort(function(T,O){return T.keyTail-O.keyTail}),S}t=f(r.primaryKey.keyPath,0,r.primaryKey),a[":id"]=[t];for(var d=0,g=r.indexes;d<g.length;d++){var y=g[d];f(y.keyPath,0,y)}function w(v){var k,m=v.query.index;return m.isVirtual?u(u({},v),{query:{index:m.lowLevelIndex,range:(k=v.query.range,m=m.keyTail,{type:k.type===1?2:k.type,lower:Yn(k.lower,k.lowerOpen?e.MAX_KEY:e.MIN_KEY,m),lowerOpen:!0,upper:Yn(k.upper,k.upperOpen?e.MIN_KEY:e.MAX_KEY,m),upperOpen:!0})}}):v}return u(u({},n),{schema:u(u({},r),{primaryKey:t,indexes:l,getIndexByKeyPath:function(v){return(v=a[yn(v)])&&v[0]}}),count:function(v){return n.count(w(v))},query:function(v){return n.query(w(v))},openCursor:function(v){var k=v.query.index,m=k.keyTail,_=k.isVirtual,x=k.keyLength;return _?n.openCursor(w(v)).then(function(S){return S&&b(S)}):n.openCursor(v);function b(S){return Object.create(S,{continue:{value:function(T){T!=null?S.continue(Yn(T,v.reverse?e.MAX_KEY:e.MIN_KEY,m)):v.unique?S.continue(S.key.slice(0,x).concat(v.reverse?e.MIN_KEY:e.MAX_KEY,m)):S.continue()}},continuePrimaryKey:{value:function(T,O){S.continuePrimaryKey(Yn(T,e.MAX_KEY,m),O)}},primaryKey:{get:function(){return S.primaryKey}},key:{get:function(){var T=S.key;return x===1?T[0]:T.slice(0,x)}},value:{get:function(){return S.value}}})}}})}})}};function Mr(e,t,n,r){return n=n||{},r=r||"",p(e).forEach(function(a){var l,f,d;F(t,a)?(l=e[a],f=t[a],typeof l=="object"&&typeof f=="object"&&l&&f?(d=Ge(l))!==Ge(f)?n[r+a]=t[a]:d==="Object"?Mr(l,f,n,r+a+"."):l!==f&&(n[r+a]=t[a]):l!==f&&(n[r+a]=t[a])):n[r+a]=void 0}),p(t).forEach(function(a){F(e,a)||(n[r+a]=t[a])}),n}function jr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Hi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return u(u({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return u(u({},n),{mutate:function(a){var l=oe.trans,f=l.table(t).hook,d=f.deleting,g=f.creating,y=f.updating;switch(a.type){case"add":if(g.fire===pe)break;return l._promise("readwrite",function(){return w(a)},!0);case"put":if(g.fire===pe&&y.fire===pe)break;return l._promise("readwrite",function(){return w(a)},!0);case"delete":if(d.fire===pe)break;return l._promise("readwrite",function(){return w(a)},!0);case"deleteRange":if(d.fire===pe)break;return l._promise("readwrite",function(){return function v(k,m,_){return n.query({trans:k,values:!1,query:{index:r,range:m},limit:_}).then(function(x){var b=x.result;return w({type:"delete",keys:b,trans:k}).then(function(S){return 0<S.numFailures?Promise.reject(S.failures[0]):b.length<_?{failures:[],numFailures:0,lastResult:void 0}:v(k,u(u({},m),{lower:b[b.length-1],lowerOpen:!0}),_)})})}(a.trans,a.range,1e4)},!0)}return n.mutate(a);function w(v){var k,m,_,x=oe.trans,b=v.keys||jr(r,v);if(!b)throw new Error("Keys missing");return(v=v.type==="add"||v.type==="put"?u(u({},v),{keys:b}):u({},v)).type!=="delete"&&(v.values=c([],v.values)),v.keys&&(v.keys=c([],v.keys)),k=n,_=b,((m=v).type==="add"?Promise.resolve([]):k.getMany({trans:m.trans,keys:_,cache:"immutable"})).then(function(S){var T=b.map(function(O,M){var z,J,U,Q=S[M],ee={onerror:null,onsuccess:null};return v.type==="delete"?d.fire.call(ee,O,Q,x):v.type==="add"||Q===void 0?(z=g.fire.call(ee,O,v.values[M],x),O==null&&z!=null&&(v.keys[M]=O=z,r.outbound||R(v.values[M],r.keyPath,O))):(z=Mr(Q,v.values[M]),(J=y.fire.call(ee,z,O,Q,x))&&(U=v.values[M],Object.keys(J).forEach(function(G){F(U,G)?U[G]=J[G]:R(U,G,J[G])}))),ee});return n.mutate(v).then(function(O){for(var M=O.failures,z=O.results,J=O.numFailures,O=O.lastResult,U=0;U<b.length;++U){var Q=(z||b)[U],ee=T[U];Q==null?ee.onerror&&ee.onerror(M[U]):ee.onsuccess&&ee.onsuccess(v.type==="put"&&S[U]?v.values[U]:Q)}return{failures:M,results:z,numFailures:J,lastResult:O}}).catch(function(O){return T.forEach(function(M){return M.onerror&&M.onerror(O)}),Promise.reject(O)})})}}})}})}};function Oo(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],a=0,l=0;a<t.keys.length&&l<e.length;++a)Se(t.keys[a],e[l])===0&&(r.push(n?Le(t.values[a]):t.values[a]),++l);return r.length===e.length?r:null}catch{return null}}var Li={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return u(u({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var a=Oo(r.keys,r.trans._cache,r.cache==="clone");return a?ne.resolve(a):n.getMany(r).then(function(l){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Le(l):l},l})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function Co(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Po(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var zi={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new st(e.MIN_KEY,e.MAX_KEY);return u(u({},e),{transaction:function(r,a,l){if(oe.subscr&&a!=="readonly")throw new te.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(oe.querier));return e.transaction(r,a,l)},table:function(r){var a=e.table(r),l=a.schema,f=l.primaryKey,v=l.indexes,d=f.extractKey,g=f.outbound,y=f.autoIncrement&&v.filter(function(m){return m.compound&&m.keyPath.includes(f.keyPath)}),w=u(u({},a),{mutate:function(m){function _(G){return G="idb://".concat(t,"/").concat(r,"/").concat(G),O[G]||(O[G]=new st)}var x,b,S,T=m.trans,O=m.mutatedParts||(m.mutatedParts={}),M=_(""),z=_(":dels"),J=m.type,ee=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[jr(f,m).filter(function(G){return G}),m.values]:[],U=ee[0],Q=ee[1],ee=m.trans._cache;return D(U)?(M.addKeys(U),(ee=J==="delete"||U.length===Q.length?Oo(U,ee):null)||z.addKeys(U),(ee||Q)&&(x=_,b=ee,S=Q,l.indexes.forEach(function(G){var ie=x(G.name||"");function ge(ke){return ke!=null?G.extractKey(ke):null}function xe(ke){return G.multiEntry&&D(ke)?ke.forEach(function(bt){return ie.addKey(bt)}):ie.addKey(ke)}(b||S).forEach(function(ke,ut){var ve=b&&ge(b[ut]),ut=S&&ge(S[ut]);Se(ve,ut)!==0&&(ve!=null&&xe(ve),ut!=null&&xe(ut))})}))):U?(Q={from:(Q=U.lower)!==null&&Q!==void 0?Q:e.MIN_KEY,to:(Q=U.upper)!==null&&Q!==void 0?Q:e.MAX_KEY},z.add(Q),M.add(Q)):(M.add(n),z.add(n),l.indexes.forEach(function(G){return _(G.name).add(n)})),a.mutate(m).then(function(G){return!U||m.type!=="add"&&m.type!=="put"||(M.addKeys(G.results),y&&y.forEach(function(ie){for(var ge=m.values.map(function(ve){return ie.extractKey(ve)}),xe=ie.keyPath.findIndex(function(ve){return ve===f.keyPath}),ke=0,bt=G.results.length;ke<bt;++ke)ge[ke][xe]=G.results[ke];_(ie.name).addKeys(ge)})),T.mutatedParts=zn(T.mutatedParts||{},O),G})}}),v=function(_){var x=_.query,_=x.index,x=x.range;return[_,new st((_=x.lower)!==null&&_!==void 0?_:e.MIN_KEY,(x=x.upper)!==null&&x!==void 0?x:e.MAX_KEY)]},k={get:function(m){return[f,new st(m.key)]},getMany:function(m){return[f,new st().addKeys(m.keys)]},count:v,query:v,openCursor:v};return p(k).forEach(function(m){w[m]=function(_){var x=oe.subscr,b=!!x,S=Co(oe,a)&&Po(m,_)?_.obsSet={}:x;if(b){var T=function(Q){return Q="idb://".concat(t,"/").concat(r,"/").concat(Q),S[Q]||(S[Q]=new st)},O=T(""),M=T(":dels"),x=k[m](_),b=x[0],x=x[1];if((m==="query"&&b.isPrimaryKey&&!_.values?M:T(b.name||"")).add(x),!b.isPrimaryKey){if(m!=="count"){var z=m==="query"&&g&&_.values&&a.query(u(u({},_),{values:!1}));return a[m].apply(this,arguments).then(function(Q){if(m==="query"){if(g&&_.values)return z.then(function(ge){return ge=ge.result,O.addKeys(ge),Q});var ee=_.values?Q.result.map(d):Q.result;(_.values?O:M).addKeys(ee)}else if(m==="openCursor"){var G=Q,ie=_.values;return G&&Object.create(G,{key:{get:function(){return M.addKey(G.primaryKey),G.key}},primaryKey:{get:function(){var ge=G.primaryKey;return M.addKey(ge),ge}},value:{get:function(){return ie&&O.addKey(G.primaryKey),G.value}}})}return Q})}M.add(n)}}return a[m].apply(this,arguments)}}),w}})}};function Io(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===r?null:(t=u({},t),D(t.keys)&&(t.keys=t.keys.filter(function(a,l){return!(l in n.failures)})),"values"in t&&D(t.values)&&(t.values=t.values.filter(function(a,l){return!(l in n.failures)})),t)}function Kr(e,t){return n=e,((r=t).lower===void 0||(r.lowerOpen?0<Se(n,r.lower):0<=Se(n,r.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?Se(e,t.upper)<0:Se(e,t.upper)<=0));var n,r}function Ao(e,t,k,r,a,l){if(!k||k.length===0)return e;var f=t.query.index,d=f.multiEntry,g=t.query.range,y=r.schema.primaryKey.extractKey,w=f.extractKey,v=(f.lowLevelIndex||f).extractKey,k=k.reduce(function(m,_){var x=m,b=[];if(_.type==="add"||_.type==="put")for(var S=new st,T=_.values.length-1;0<=T;--T){var O,M=_.values[T],z=y(M);S.hasKey(z)||(O=w(M),(d&&D(O)?O.some(function(G){return Kr(G,g)}):Kr(O,g))&&(S.addKey(z),b.push(M)))}switch(_.type){case"add":var J=new st().addKeys(t.values?m.map(function(ie){return y(ie)}):m),x=m.concat(t.values?b.filter(function(ie){return ie=y(ie),!J.hasKey(ie)&&(J.addKey(ie),!0)}):b.map(function(ie){return y(ie)}).filter(function(ie){return!J.hasKey(ie)&&(J.addKey(ie),!0)}));break;case"put":var U=new st().addKeys(_.values.map(function(ie){return y(ie)}));x=m.filter(function(ie){return!U.hasKey(t.values?y(ie):ie)}).concat(t.values?b:b.map(function(ie){return y(ie)}));break;case"delete":var Q=new st().addKeys(_.keys);x=m.filter(function(ie){return!Q.hasKey(t.values?y(ie):ie)});break;case"deleteRange":var ee=_.range;x=m.filter(function(ie){return!Kr(y(ie),ee)})}return x},e);return k===e?e:(k.sort(function(m,_){return Se(v(m),v(_))||Se(y(m),y(_))}),t.limit&&t.limit<1/0&&(k.length>t.limit?k.length=t.limit:e.length===t.limit&&k.length<t.limit&&(a.dirty=!0)),l?Object.freeze(k):k)}function Mo(e,t){return Se(e.lower,t.lower)===0&&Se(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Ui(e,t){return function(n,r,a,l){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=Se(n,r))===0){if(a&&l)return 0;if(a)return 1;if(l)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,a,l){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=Se(n,r))===0){if(a&&l)return 0;if(a)return-1;if(l)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Yi(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var a,l;e.subscribers.delete(n),e.subscribers.size===0&&(a=e,l=t,setTimeout(function(){a.subscribers.size===0&&he(l,a)},3e3))})}var Wi={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return u(u({},e),{transaction:function(n,r,a){var l,f,d=e.transaction(n,r,a);return r==="readwrite"&&(f=(l=new AbortController).signal,a=function(g){return function(){if(l.abort(),r==="readwrite"){for(var y=new Set,w=0,v=n;w<v.length;w++){var k=v[w],m=Wt["idb://".concat(t,"/").concat(k)];if(m){var _=e.table(k),x=m.optimisticOps.filter(function(ie){return ie.trans===d});if(d._explicit&&g&&d.mutatedParts)for(var b=0,S=Object.values(m.queries.query);b<S.length;b++)for(var T=0,O=(J=S[b]).slice();T<O.length;T++)Or((U=O[T]).obsSet,d.mutatedParts)&&(he(J,U),U.subscribers.forEach(function(ie){return y.add(ie)}));else if(0<x.length){m.optimisticOps=m.optimisticOps.filter(function(ie){return ie.trans!==d});for(var M=0,z=Object.values(m.queries.query);M<z.length;M++)for(var J,U,Q,ee=0,G=(J=z[M]).slice();ee<G.length;ee++)(U=G[ee]).res!=null&&d.mutatedParts&&(g&&!U.dirty?(Q=Object.isFrozen(U.res),Q=Ao(U.res,U.req,x,_,U,Q),U.dirty?(he(J,U),U.subscribers.forEach(function(ie){return y.add(ie)})):Q!==U.res&&(U.res=Q,U.promise=ne.resolve({result:Q}))):(U.dirty&&he(J,U),U.subscribers.forEach(function(ie){return y.add(ie)})))}}}y.forEach(function(ie){return ie()})}}},d.addEventListener("abort",a(!1),{signal:f}),d.addEventListener("error",a(!1),{signal:f}),d.addEventListener("complete",a(!0),{signal:f})),d},table:function(n){var r=e.table(n),a=r.schema.primaryKey;return u(u({},r),{mutate:function(l){var f=oe.trans;if(a.outbound||f.db._options.cache==="disabled"||f.explicit||f.idbtrans.mode!=="readwrite")return r.mutate(l);var d=Wt["idb://".concat(t,"/").concat(n)];return d?(f=r.mutate(l),l.type!=="add"&&l.type!=="put"||!(50<=l.values.length||jr(a,l).some(function(g){return g==null}))?(d.optimisticOps.push(l),l.mutatedParts&&Un(l.mutatedParts),f.then(function(g){0<g.numFailures&&(he(d.optimisticOps,l),(g=Io(0,l,g))&&d.optimisticOps.push(g),l.mutatedParts&&Un(l.mutatedParts))}),f.catch(function(){he(d.optimisticOps,l),l.mutatedParts&&Un(l.mutatedParts)})):f.then(function(g){var y=Io(0,u(u({},l),{values:l.values.map(function(w,v){var k;return g.failures[v]?w:(w=(k=a.keyPath)!==null&&k!==void 0&&k.includes(".")?Le(w):u({},w),R(w,a.keyPath,g.results[v]),w)})}),g);d.optimisticOps.push(y),queueMicrotask(function(){return l.mutatedParts&&Un(l.mutatedParts)})}),f):r.mutate(l)},query:function(l){if(!Co(oe,r)||!Po("query",l))return r.query(l);var f=((y=oe.trans)===null||y===void 0?void 0:y.db._options.cache)==="immutable",v=oe,d=v.requery,g=v.signal,y=function(_,x,b,S){var T=Wt["idb://".concat(_,"/").concat(x)];if(!T)return[];if(!(x=T.queries[b]))return[null,!1,T,null];var O=x[(S.query?S.query.index.name:null)||""];if(!O)return[null,!1,T,null];switch(b){case"query":var M=O.find(function(z){return z.req.limit===S.limit&&z.req.values===S.values&&Mo(z.req.query.range,S.query.range)});return M?[M,!0,T,O]:[O.find(function(z){return("limit"in z.req?z.req.limit:1/0)>=S.limit&&(!S.values||z.req.values)&&Ui(z.req.query.range,S.query.range)}),!1,T,O];case"count":return M=O.find(function(z){return Mo(z.req.query.range,S.query.range)}),[M,!!M,T,O]}}(t,n,"query",l),w=y[0],v=y[1],k=y[2],m=y[3];return w&&v?w.obsSet=l.obsSet:(v=r.query(l).then(function(_){var x=_.result;if(w&&(w.res=x),f){for(var b=0,S=x.length;b<S;++b)Object.freeze(x[b]);Object.freeze(x)}else _.result=Le(x);return _}).catch(function(_){return m&&w&&he(m,w),Promise.reject(_)}),w={obsSet:l.obsSet,promise:v,subscribers:new Set,type:"query",req:l,dirty:!1},m?m.push(w):(m=[w],(k=k||(Wt["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[l.query.index.name||""]=m)),Yi(w,m,d,g),w.promise.then(function(_){return{result:Ao(_.result,l,k==null?void 0:k.optimisticOps,r,w,f)}})}})}})}};function Wn(e,t){return new Proxy(e,{get:function(n,r,a){return r==="db"?t:Reflect.get(n,r,a)}})}var At=(Ze.prototype.version=function(e){if(isNaN(e)||e<.1)throw new te.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(Ki),n.stores({}),this._state.autoSchema=!1,n)},Ze.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||oe.letThrough||this._vip)?e():new ne(function(n,r){if(t._state.openComplete)return r(new te.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new te.DatabaseClosed);t.open().catch(pe)}t._state.dbReadyPromise.then(n,r)}).then(e)},Ze.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,a=e.name;return a&&this.unuse({stack:t,name:a}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:r??10,name:a}),e.sort(function(l,f){return l.level-f.level}),this},Ze.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(a){return r?a.create!==r:!!n&&a.name!==n})),this},Ze.prototype.open=function(){var e=this;return zt(St,function(){return Bi(e)})},Ze.prototype._close=function(){var e=this._state,t=sn.indexOf(this);if(0<=t&&sn.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ne(function(n){e.dbReadyResolve=n}),e.openCanceller=new ne(function(n,r){e.cancelOpen=r}))},Ze.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new te.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new te.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Ze.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new ne(function(a,l){function f(){t.close(e);var d=t._deps.indexedDB.deleteDatabase(t.name);d.onsuccess=We(function(){var g,y,w;g=t._deps,y=t.name,w=g.indexedDB,g=g.IDBKeyRange,Sr(w)||y===In||Dr(w,g).delete(y).catch(pe),a()}),d.onerror=Ot(l),d.onblocked=t._fireOnBlocked}if(n)throw new te.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(f):f()})},Ze.prototype.backendDB=function(){return this.idbdb},Ze.prototype.isOpen=function(){return this.idbdb!==null},Ze.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Ze.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ze.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ze.prototype,"tables",{get:function(){var e=this;return p(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Ze.prototype.transaction=function(){var e=(function(t,n,r){var a=arguments.length;if(a<2)throw new te.InvalidArgument("Too few arguments");for(var l=new Array(a-1);--a;)l[a-1]=arguments[a];return r=l.pop(),[t,ce(l),r]}).apply(this,arguments);return this._transaction.apply(this,e)},Ze.prototype._transaction=function(e,t,n){var r=this,a=oe.trans;a&&a.db===this&&e.indexOf("!")===-1||(a=null);var l,f,d=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(f=t.map(function(y){if(y=y instanceof r.Table?y.name:y,typeof y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return y}),e=="r"||e===dr)l=dr;else{if(e!="rw"&&e!=hr)throw new te.InvalidArgument("Invalid transaction mode: "+e);l=hr}if(a){if(a.mode===dr&&l===hr){if(!d)throw new te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&f.forEach(function(y){if(a&&a.storeNames.indexOf(y)===-1){if(!d)throw new te.SubTransaction("Table "+y+" not included in parent transaction.");a=null}}),d&&a&&!a.active&&(a=null)}}catch(y){return a?a._promise(null,function(w,v){v(y)}):Xe(y)}var g=(function y(w,v,k,m,_){return ne.resolve().then(function(){var x=oe.transless||oe,b=w._createTransaction(v,k,w._dbSchema,m);if(b.explicit=!0,x={trans:b,transless:x},m)b.idbtrans=m.idbtrans;else try{b.create(),b.idbtrans._explicit=!0,w._state.PR1398_maxLoop=3}catch(O){return O.name===De.InvalidState&&w.isOpen()&&0<--w._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),w.close({disableAutoOpen:!1}),w.open().then(function(){return y(w,v,k,null,_)})):Xe(O)}var S,T=$(_);return T&&an(),x=ne.follow(function(){var O;(S=_.call(b,b))&&(T?(O=Kt.bind(null,null),S.then(O,O)):typeof S.next=="function"&&typeof S.throw=="function"&&(S=Ar(S)))},x),(S&&typeof S.then=="function"?ne.resolve(S).then(function(O){return b.active?O:Xe(new te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):x.then(function(){return S})).then(function(O){return m&&b._resolve(),b._completion.then(function(){return O})}).catch(function(O){return b._reject(O),Xe(O)})})}).bind(null,this,l,f,a,n);return a?a._promise(l,g,"lock"):oe.trans?zt(oe.transless,function(){return r._whenReady(g)}):this._whenReady(g)},Ze.prototype.table=function(e){if(!F(this._allTables,e))throw new te.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Ze);function Ze(e,t){var n=this;this._middlewares={},this.verno=0;var r=Ze.dependencies;this._options=t=u({addons:Ze.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,l,f,d,g,y={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:pe,dbReadyPromise:null,cancelOpen:pe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};y.dbReadyPromise=new ne(function(v){y.dbReadyResolve=v}),y.openCanceller=new ne(function(v,k){y.cancelOpen=k}),this._state=y,this.name=e,this.on=dn(this,"populate","blocked","versionchange","close",{ready:[ae,pe]}),this.on.ready.subscribe=H(this.on.ready.subscribe,function(v){return function(k,m){Ze.vip(function(){var _,x=n._state;x.openComplete?(x.dbOpenError||ne.resolve().then(k),m&&v(k)):x.onReadyBeingFired?(x.onReadyBeingFired.push(k),m&&v(k)):(v(k),_=n,m||v(function b(){_.on.ready.unsubscribe(k),_.on.ready.unsubscribe(b)}))})}}),this.Collection=(a=this,hn(Oi.prototype,function(S,b){this.db=a;var m=lo,_=null;if(b)try{m=b()}catch(T){_=T}var x=S._ctx,b=x.table,S=b.hook.reading.fire;this._ctx={table:b,index:x.index,isPrimKey:!x.index||b.schema.primKey.keyPath&&x.index===b.schema.primKey.name,range:m,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:_,or:x.or,valueMapper:S!==ct?S:null}})),this.Table=(l=this,hn(vo.prototype,function(v,k,m){this.db=l,this._tx=m,this.name=v,this.schema=k,this.hook=l._allTables[v]?l._allTables[v].hook:dn(null,{creating:[kt,pe],reading:[ft,ct],updating:[at,pe],deleting:[dt,pe]})})),this.Transaction=(f=this,hn(Ii.prototype,function(v,k,m,_,x){var b=this;this.db=f,this.mode=v,this.storeNames=k,this.schema=m,this.chromeTransactionDurability=_,this.idbtrans=null,this.on=dn(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ne(function(S,T){b._resolve=S,b._reject=T}),this._completion.then(function(){b.active=!1,b.on.complete.fire()},function(S){var T=b.active;return b.active=!1,b.on.error.fire(S),b.parent?b.parent._reject(S):T&&b.idbtrans&&b.idbtrans.abort(),Xe(S)})})),this.Version=(d=this,hn(Ri.prototype,function(v){this.db=d,this._cfg={version:v,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(g=this,hn(bo.prototype,function(v,k,m){if(this.db=g,this._ctx={table:v,index:k===":id"?null:k,or:m},this._cmp=this._ascending=Se,this._descending=function(_,x){return Se(x,_)},this._max=function(_,x){return 0<Se(_,x)?_:x},this._min=function(_,x){return Se(_,x)<0?_:x},this._IDBKeyRange=g._deps.IDBKeyRange,!this._IDBKeyRange)throw new te.MissingAPI})),this.on("versionchange",function(v){0<v.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(v){!v.newVersion||v.newVersion<v.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(v.oldVersion/10))}),this._maxKey=mn(t.IDBKeyRange),this._createTransaction=function(v,k,m,_){return new n.Transaction(v,k,m,n._options.chromeTransactionDurability,_)},this._fireOnBlocked=function(v){n.on("blocked").fire(v),sn.filter(function(k){return k.name===n.name&&k!==n&&!k._state.vcFired}).map(function(k){return k.on("versionchange").fire(v)})},this.use(Li),this.use(Wi),this.use(zi),this.use(Ni),this.use(Hi);var w=new Proxy(this,{get:function(v,k,m){if(k==="_vip")return!0;if(k==="table")return function(x){return Wn(n.table(x),w)};var _=Reflect.get(v,k,m);return _ instanceof vo?Wn(_,w):k==="tables"?_.map(function(x){return Wn(x,w)}):k==="_createTransaction"?function(){return Wn(_.apply(this,arguments),w)}:_}});this.vip=w,r.forEach(function(v){return v(n)})}var Vn,wt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Vi=(Fr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Fr.prototype[wt]=function(){return this},Fr);function Fr(e){this._subscribe=e}try{Vn={indexedDB:h.indexedDB||h.mozIndexedDB||h.webkitIndexedDB||h.msIndexedDB,IDBKeyRange:h.IDBKeyRange||h.webkitIDBKeyRange}}catch{Vn={indexedDB:null,IDBKeyRange:null}}function jo(e){var t,n=!1,r=new Vi(function(a){var l=$(e),f,d=!1,g={},y={},w={get closed(){return d},unsubscribe:function(){d||(d=!0,f&&f.abort(),v&&Rt.storagemutated.unsubscribe(m))}};a.start&&a.start(w);var v=!1,k=function(){return fr(_)},m=function(x){zn(g,x),Or(y,g)&&k()},_=function(){var x,b,S;!d&&Vn.indexedDB&&(g={},x={},f&&f.abort(),f=new AbortController,S=function(T){var O=rn();try{l&&an();var M=jt(e,T);return M=l?M.finally(Kt):M}finally{O&&on()}}(b={subscr:x,signal:f.signal,requery:k,querier:e,trans:null}),Promise.resolve(S).then(function(T){n=!0,t=T,d||b.signal.aborted||(g={},function(O){for(var M in O)if(F(O,M))return;return 1}(y=x)||v||(Rt(gn,m),v=!0),fr(function(){return!d&&a.next&&a.next(T)}))},function(T){n=!1,["DatabaseClosedError","AbortError"].includes(T==null?void 0:T.name)||d||fr(function(){d||a.error&&a.error(T)})}))};return setTimeout(k,0),w});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var Vt=At;function qr(e){var t=Bt;try{Bt=!0,Rt.storagemutated.fire(e),Ir(e,!0)}finally{Bt=t}}A(Vt,u(u({},Je),{delete:function(e){return new Vt(e,{addons:[]}).delete()},exists:function(e){return new Vt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=Vt.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Sr(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(a){return a.name}).filter(function(a){return a!==In})}):Dr(n,t).toCollection().primaryKeys()).then(e)}catch{return Xe(new te.MissingAPI)}var t,n},defineClass:function(){return function(e){E(this,e)}},ignoreTransaction:function(e){return oe.trans?zt(oe.transless,e):e()},vip:Tr,async:function(e){return function(){try{var t=Ar(e.apply(this,arguments));return t&&typeof t.then=="function"?t:ne.resolve(t)}catch(n){return Xe(n)}}},spawn:function(e,t,n){try{var r=Ar(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:ne.resolve(r)}catch(a){return Xe(a)}},currentTransaction:{get:function(){return oe.trans||null}},waitFor:function(e,t){return t=ne.resolve(typeof e=="function"?Vt.ignoreTransaction(e):e).timeout(t||6e4),oe.trans?oe.trans.waitFor(t):t},Promise:ne,debug:{get:function(){return fe},set:function(e){_e(e)}},derive:L,extend:E,props:A,override:H,Events:dn,on:Rt,liveQuery:jo,extendObservabilitySet:zn,getByKeyPath:Z,setByKeyPath:R,delByKeyPath:function(e,t){typeof t=="string"?R(e,t,void 0):"length"in t&&[].map.call(t,function(n){R(e,n,void 0)})},shallowClone:ue,deepClone:Le,getObjectDiff:Mr,cmp:Se,asap:Y,minKey:-1/0,addons:[],connections:sn,errnames:De,dependencies:Vn,cache:Wt,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),Vt.maxKey=mn(Vt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Rt(gn,function(e){Bt||(e=new CustomEvent(mr,{detail:e}),Bt=!0,dispatchEvent(e),Bt=!1)}),addEventListener(mr,function(e){e=e.detail,Bt||qr(e)}));var cn,Bt=!1,Ko=function(){};return typeof BroadcastChannel<"u"&&((Ko=function(){(cn=new BroadcastChannel(mr)).onmessage=function(e){return e.data&&qr(e.data)}})(),typeof cn.unref=="function"&&cn.unref(),Rt(gn,function(e){Bt||cn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!At.disableBfCache&&e.persisted){fe&&console.debug("Dexie: handling persisted pagehide"),cn!=null&&cn.close();for(var t=0,n=sn;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!At.disableBfCache&&e.persisted&&(fe&&console.debug("Dexie: handling persisted pageshow"),Ko(),qr({all:new st(-1/0,[[]])}))})),ne.rejectionMapper=function(e,t){return!e||e instanceof le||e instanceof TypeError||e instanceof SyntaxError||!e.name||!tt[e.name]?e:(t=new tt[e.name](t||e.message,e),"stack"in e&&N(t,"stack",{get:function(){return this.inner.stack}}),t)},_e(fe),u(At,Object.freeze({__proto__:null,Dexie:At,liveQuery:jo,Entity:co,cmp:Se,PropModification:vn,replacePrefix:function(e,t){return new vn({replacePrefix:[e,t]})},add:function(e){return new vn({add:e})},remove:function(e){return new vn({remove:e})},default:At,RangeSet:st,mergeRanges:_n,rangesOverlap:Do}),{default:At}),At})}(er)),er.exports}var Pa=Ca();const Vr=ci(Pa),Uo=Symbol.for("Dexie"),rr=globalThis[Uo]||(globalThis[Uo]=Vr);if(Vr.semVer!==rr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Vr.semVer} and ${rr.semVer}`);const{liveQuery:ul,mergeRanges:ll,rangesOverlap:cl,RangeSet:fl,cmp:dl,Entity:hl,PropModification:vl,replacePrefix:pl,add:gl,remove:ml}=rr;class Ia{constructor(){this._db=new rr("FastingHours"),this._db.version(20).stores({history:"id, started",hunger:"id, created",water:"id, created"})}browseHistory(){return this._db.history.toArray()}browseHistoryByEnd(){return this._db.history.toArray().then(o=>o.filter(u=>u.ended===null)[0])}readHistory(o){return this._db.history.get({id:o})}editHistory(o){const i=Hr(o);return i.updated=new Date,this._db.history.put(i).then(()=>this._db.history.get({id:o.id}))}addHistory(){const o={id:crypto.randomUUID(),type:"history",created:new Date,updated:new Date,started:new Date,ended:null,notes:null};return this._db.history.add(o).then(()=>this._db.history.get({id:o.id}))}deleteHistory(o){return this._db.history.delete(o)}browseHunger(o=!1){return this._db.hunger.toArray().then(i=>o?(i.sort((u,c)=>u.created.getTime()<c.created.getTime()?1:u.created.getTime()>c.created.getTime()?-1:0),i.length===0?null:i[0]):i)}readHunger(o){return this._db.hunger.get({id:o})}editHunger(o){const i=Hr(o);return i.updated=new Date,this._db.hunger.put(i).then(()=>this._db.hunger.get({id:o.id}))}addHunger(o=5){const i={id:crypto.randomUUID(),type:"hunger",created:new Date,updated:new Date,level:o};return this._db.hunger.add(i).then(()=>this._db.hunger.get({id:i.id}))}deleteHunger(o){return this._db.hunger.delete(o)}browseWater(o=!1){return this._db.water.toArray().then(i=>{if(o){const u=new Date;u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0);const c=new Date(u.getTime());return c.setDate(c.getDate()+1),i.filter(h=>h.created.getTime()>u.getTime()&&h.created.getTime()<c.getTime())}else return i})}readWater(o){return this._db.water.get({id:o})}editWater(o){const i=Hr(o);return i.updated=new Date,this._db.water.put(i).then(()=>this._db.water.get({id:o.id}))}addWater(o){const i={id:crypto.randomUUID(),type:"water",created:new Date,updated:new Date,volume:o};return crypto.randomUUID(),this._db.water.add(i).then(()=>this._db.water.get({id:i.id}))}deleteWater(o){return this._db.water.delete(o)}}var Lr={exports:{}},Yo;function Aa(){return Yo||(Yo=1,function(s,o){(function(){var i=Math.PI,u=Math.sin,c=Math.cos,h=Math.tan,p=Math.asin,D=Math.atan2,E=Math.acos,P=i/180,j=1e3*60*60*24,F=2440588,A=2451545;function W($){return $.valueOf()/j-.5+F}function N($){return new Date(($+.5-F)*j)}function L($){return W($)-A}var X=P*23.4397;function V($,se){return D(u($)*c(X)-h(se)*u(X),c($))}function K($,se){return p(u(se)*c(X)+c(se)*u(X)*u($))}function H($,se,le){return D(u($),c($)*u(se)-h(le)*c(se))}function I($,se,le){return p(u(se)*u(le)+c(se)*c(le)*c($))}function Y($,se){return P*(280.16+360.9856235*$)-se}function Z($){return $<0&&($=0),2967e-7/Math.tan($+.00312536/($+.08901179))}function R($){return P*(357.5291+.98560028*$)}function ue($){var se=P*(1.9148*u($)+.02*u(2*$)+3e-4*u(3*$)),le=P*102.9372;return $+se+le+i}function me($){var se=R($),le=ue(se);return{dec:K(le,0),ra:V(le,0)}}var ce={};ce.getPosition=function($,se,le){var Ie=P*-le,ye=P*se,Te=L($),De=me(Te),Be=Y(Te,Ie)-De.ra;return{azimuth:H(Be,ye,De.dec),altitude:I(Be,ye,De.dec)}};var Ce=ce.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];ce.addTime=function($,se,le){Ce.push([$,se,le])};var Ke=9e-4;function Le($,se){return Math.round($-Ke-se/(2*i))}function Re($,se,le){return Ke+($+se)/(2*i)+le}function Ge($,se,le){return A+$+.0053*u(se)-.0069*u(2*le)}function Ye($,se,le){return E((u($)-u(se)*u(le))/(c(se)*c(le)))}function we($){return-2.076*Math.sqrt($)/60}function he($,se,le,Ie,ye,Te,De){var Be=Ye($,le,Ie),te=Re(Be,se,ye);return Ge(te,Te,De)}ce.getTimes=function($,se,le,Ie){Ie=Ie||0;var ye=P*-le,Te=P*se,De=we(Ie),Be=L($),te=Le(Be,ye),tt=Re(0,ye,te),Je=R(tt),pe=ue(Je),ct=K(pe,0),ft=Ge(tt,Je,pe),et,kt,dt,at,mt,ae,fe={solarNoon:N(ft),nadir:N(ft-.5)};for(et=0,kt=Ce.length;et<kt;et+=1)dt=Ce[et],at=(dt[0]+De)*P,mt=he(at,ye,Te,ct,te,Je,pe),ae=ft-(mt-ft),fe[dt[1]]=N(ae),fe[dt[2]]=N(mt);return fe};function ze($){var se=P*(218.316+13.176396*$),le=P*(134.963+13.064993*$),Ie=P*(93.272+13.22935*$),ye=se+P*6.289*u(le),Te=P*5.128*u(Ie),De=385001-20905*c(le);return{ra:V(ye,Te),dec:K(ye,Te),dist:De}}ce.getMoonPosition=function($,se,le){var Ie=P*-le,ye=P*se,Te=L($),De=ze(Te),Be=Y(Te,Ie)-De.ra,te=I(Be,ye,De.dec),tt=D(u(Be),h(ye)*c(De.dec)-u(De.dec)*c(Be));return te=te+Z(te),{azimuth:H(Be,ye,De.dec),altitude:te,distance:De.dist,parallacticAngle:tt}},ce.getMoonIllumination=function($){var se=L($||new Date),le=me(se),Ie=ze(se),ye=149598e3,Te=E(u(le.dec)*u(Ie.dec)+c(le.dec)*c(Ie.dec)*c(le.ra-Ie.ra)),De=D(ye*u(Te),Ie.dist-ye*c(Te)),Be=D(c(le.dec)*u(le.ra-Ie.ra),u(le.dec)*c(Ie.dec)-c(le.dec)*u(Ie.dec)*c(le.ra-Ie.ra));return{fraction:(1+c(De))/2,phase:.5+.5*De*(Be<0?-1:1)/Math.PI,angle:Be}};function Pe($,se){return new Date($.valueOf()+se*j/24)}ce.getMoonTimes=function($,se,le,Ie){var ye=new Date($);Ie?ye.setUTCHours(0,0,0,0):ye.setHours(0,0,0,0);for(var Te=.133*P,De=ce.getMoonPosition(ye,se,le).altitude-Te,Be,te,tt,Je,pe,ct,ft,et,kt,dt,at,mt,ae,fe=1;fe<=24&&(Be=ce.getMoonPosition(Pe(ye,fe),se,le).altitude-Te,te=ce.getMoonPosition(Pe(ye,fe+1),se,le).altitude-Te,pe=(De+te)/2-Be,ct=(te-De)/2,ft=-ct/(2*pe),et=(pe*ft+ct)*ft+Be,kt=ct*ct-4*pe*Be,dt=0,kt>=0&&(ae=Math.sqrt(kt)/(Math.abs(pe)*2),at=ft-ae,mt=ft+ae,Math.abs(at)<=1&&dt++,Math.abs(mt)<=1&&dt++,at<-1&&(at=mt)),dt===1?De<0?tt=fe+at:Je=fe+at:dt===2&&(tt=fe+(et<0?mt:at),Je=fe+(et<0?at:mt)),!(tt&&Je));fe+=2)De=te;var _e={};return tt&&(_e.rise=Pe(ye,tt)),Je&&(_e.set=Pe(ye,Je)),!tt&&!Je&&(_e[et>0?"alwaysUp":"alwaysDown"]=!0),_e},s.exports=ce})()}(Lr)),Lr.exports}var Ma=Aa();const ja=ci(Ma),fi=/^[a-z0-9]+(-[a-z0-9]+)*$/,ir=(s,o,i,u="")=>{const c=s.split(":");if(s.slice(0,1)==="@"){if(c.length<2||c.length>3)return null;u=c.shift().slice(1)}if(c.length>3||!c.length)return null;if(c.length>1){const D=c.pop(),E=c.pop(),P={provider:c.length>0?c[0]:u,prefix:E,name:D};return o&&!tr(P)?null:P}const h=c[0],p=h.split("-");if(p.length>1){const D={provider:u,prefix:p.shift(),name:p.join("-")};return o&&!tr(D)?null:D}if(i&&u===""){const D={provider:u,prefix:"",name:h};return o&&!tr(D,i)?null:D}return null},tr=(s,o)=>s?!!((o&&s.prefix===""||s.prefix)&&s.name):!1,di=Object.freeze({left:0,top:0,width:16,height:16}),or=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),ar=Object.freeze({...di,...or}),Qr=Object.freeze({...ar,body:"",hidden:!1});function Ka(s,o){const i={};!s.hFlip!=!o.hFlip&&(i.hFlip=!0),!s.vFlip!=!o.vFlip&&(i.vFlip=!0);const u=((s.rotate||0)+(o.rotate||0))%4;return u&&(i.rotate=u),i}function Wo(s,o){const i=Ka(s,o);for(const u in Qr)u in or?u in s&&!(u in i)&&(i[u]=or[u]):u in o?i[u]=o[u]:u in s&&(i[u]=s[u]);return i}function Fa(s,o){const i=s.icons,u=s.aliases||Object.create(null),c=Object.create(null);function h(p){if(i[p])return c[p]=[];if(!(p in c)){c[p]=null;const D=u[p]&&u[p].parent,E=D&&h(D);E&&(c[p]=[D].concat(E))}return c[p]}return Object.keys(i).concat(Object.keys(u)).forEach(h),c}function qa(s,o,i){const u=s.icons,c=s.aliases||Object.create(null);let h={};function p(D){h=Wo(u[D]||c[D],h)}return p(o),i.forEach(p),Wo(s,h)}function hi(s,o){const i=[];if(typeof s!="object"||typeof s.icons!="object")return i;s.not_found instanceof Array&&s.not_found.forEach(c=>{o(c,null),i.push(c)});const u=Fa(s);for(const c in u){const h=u[c];h&&(o(c,qa(s,c,h)),i.push(c))}return i}const Ra={provider:"",aliases:{},not_found:{},...di};function zr(s,o){for(const i in o)if(i in s&&typeof s[i]!=typeof o[i])return!1;return!0}function vi(s){if(typeof s!="object"||s===null)return null;const o=s;if(typeof o.prefix!="string"||!s.icons||typeof s.icons!="object"||!zr(s,Ra))return null;const i=o.icons;for(const c in i){const h=i[c];if(!c||typeof h.body!="string"||!zr(h,Qr))return null}const u=o.aliases||Object.create(null);for(const c in u){const h=u[c],p=h.parent;if(!c||typeof p!="string"||!i[p]&&!u[p]||!zr(h,Qr))return null}return o}const Vo=Object.create(null);function Ba(s,o){return{provider:s,prefix:o,icons:Object.create(null),missing:new Set}}function fn(s,o){const i=Vo[s]||(Vo[s]=Object.create(null));return i[o]||(i[o]=Ba(s,o))}function pi(s,o){return vi(o)?hi(o,(i,u)=>{u?s.icons[i]=u:s.missing.add(i)}):[]}function Na(s,o,i){try{if(typeof i.body=="string")return s.icons[o]={...i},!0}catch{}return!1}let Sn=!1;function gi(s){return typeof s=="boolean"&&(Sn=s),Sn}function Ha(s){const o=typeof s=="string"?ir(s,!0,Sn):s;if(o){const i=fn(o.provider,o.prefix),u=o.name;return i.icons[u]||(i.missing.has(u)?null:void 0)}}function La(s,o){const i=ir(s,!0,Sn);if(!i)return!1;const u=fn(i.provider,i.prefix);return o?Na(u,i.name,o):(u.missing.add(i.name),!0)}function za(s,o){if(typeof s!="object")return!1;if(typeof o!="string"&&(o=s.provider||""),Sn&&!o&&!s.prefix){let c=!1;return vi(s)&&(s.prefix="",hi(s,(h,p)=>{La(h,p)&&(c=!0)})),c}const i=s.prefix;if(!tr({prefix:i,name:"a"}))return!1;const u=fn(o,i);return!!pi(u,s)}const mi=Object.freeze({width:null,height:null}),yi=Object.freeze({...mi,...or}),Ua=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Ya=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Qo(s,o,i){if(o===1)return s;if(i=i||100,typeof s=="number")return Math.ceil(s*o*i)/i;if(typeof s!="string")return s;const u=s.split(Ua);if(u===null||!u.length)return s;const c=[];let h=u.shift(),p=Ya.test(h);for(;;){if(p){const D=parseFloat(h);isNaN(D)?c.push(h):c.push(Math.ceil(D*o*i)/i)}else c.push(h);if(h=u.shift(),h===void 0)return c.join("");p=!p}}function Wa(s,o="defs"){let i="";const u=s.indexOf("<"+o);for(;u>=0;){const c=s.indexOf(">",u),h=s.indexOf("</"+o);if(c===-1||h===-1)break;const p=s.indexOf(">",h);if(p===-1)break;i+=s.slice(c+1,h).trim(),s=s.slice(0,u).trim()+s.slice(p+1)}return{defs:i,content:s}}function Va(s,o){return s?"<defs>"+s+"</defs>"+o:o}function Qa(s,o,i){const u=Wa(s);return Va(u.defs,o+u.content+i)}const Ga=s=>s==="unset"||s==="undefined"||s==="none";function Ja(s,o){const i={...ar,...s},u={...yi,...o},c={left:i.left,top:i.top,width:i.width,height:i.height};let h=i.body;[i,u].forEach(L=>{const X=[],V=L.hFlip,K=L.vFlip;let H=L.rotate;V?K?H+=2:(X.push("translate("+(c.width+c.left).toString()+" "+(0-c.top).toString()+")"),X.push("scale(-1 1)"),c.top=c.left=0):K&&(X.push("translate("+(0-c.left).toString()+" "+(c.height+c.top).toString()+")"),X.push("scale(1 -1)"),c.top=c.left=0);let I;switch(H<0&&(H-=Math.floor(H/4)*4),H=H%4,H){case 1:I=c.height/2+c.top,X.unshift("rotate(90 "+I.toString()+" "+I.toString()+")");break;case 2:X.unshift("rotate(180 "+(c.width/2+c.left).toString()+" "+(c.height/2+c.top).toString()+")");break;case 3:I=c.width/2+c.left,X.unshift("rotate(-90 "+I.toString()+" "+I.toString()+")");break}H%2===1&&(c.left!==c.top&&(I=c.left,c.left=c.top,c.top=I),c.width!==c.height&&(I=c.width,c.width=c.height,c.height=I)),X.length&&(h=Qa(h,'<g transform="'+X.join(" ")+'">',"</g>"))});const p=u.width,D=u.height,E=c.width,P=c.height;let j,F;p===null?(F=D===null?"1em":D==="auto"?P:D,j=Qo(F,E/P)):(j=p==="auto"?E:p,F=D===null?Qo(j,P/E):D==="auto"?P:D);const A={},W=(L,X)=>{Ga(X)||(A[L]=X.toString())};W("width",j),W("height",F);const N=[c.left,c.top,E,P];return A.viewBox=N.join(" "),{attributes:A,viewBox:N,body:h}}const Xa=/\sid="(\S+)"/g,Za="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let $a=0;function es(s,o=Za){const i=[];let u;for(;u=Xa.exec(s);)i.push(u[1]);if(!i.length)return s;const c="suffix"+(Math.random()*16777216|Date.now()).toString(16);return i.forEach(h=>{const p=typeof o=="function"?o(h):o+($a++).toString(),D=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");s=s.replace(new RegExp('([#;"])('+D+')([")]|\\.[a-z])',"g"),"$1"+p+c+"$3")}),s=s.replace(new RegExp(c,"g"),""),s}const Gr=Object.create(null);function ts(s,o){Gr[s]=o}function Jr(s){return Gr[s]||Gr[""]}function to(s){let o;if(typeof s.resources=="string")o=[s.resources];else if(o=s.resources,!(o instanceof Array)||!o.length)return null;return{resources:o,path:s.path||"/",maxURL:s.maxURL||500,rotate:s.rotate||750,timeout:s.timeout||5e3,random:s.random===!0,index:s.index||0,dataAfterTimeout:s.dataAfterTimeout!==!1}}const no=Object.create(null),wn=["https://api.simplesvg.com","https://api.unisvg.com"],nr=[];for(;wn.length>0;)wn.length===1||Math.random()>.5?nr.push(wn.shift()):nr.push(wn.pop());no[""]=to({resources:["https://api.iconify.design"].concat(nr)});function ns(s,o){const i=to(o);return i===null?!1:(no[s]=i,!0)}function ro(s){return no[s]}const rs=()=>{let s;try{if(s=fetch,typeof s=="function")return s}catch{}};let Go=rs();function os(s,o){const i=ro(s);if(!i)return 0;let u;if(!i.maxURL)u=0;else{let c=0;i.resources.forEach(p=>{c=Math.max(c,p.length)});const h=o+".json?icons=";u=i.maxURL-c-i.path.length-h.length}return u}function is(s){return s===404}const as=(s,o,i)=>{const u=[],c=os(s,o),h="icons";let p={type:h,provider:s,prefix:o,icons:[]},D=0;return i.forEach((E,P)=>{D+=E.length+1,D>=c&&P>0&&(u.push(p),p={type:h,provider:s,prefix:o,icons:[]},D=E.length),p.icons.push(E)}),u.push(p),u};function ss(s){if(typeof s=="string"){const o=ro(s);if(o)return o.path}return"/"}const us=(s,o,i)=>{if(!Go){i("abort",424);return}let u=ss(o.provider);switch(o.type){case"icons":{const h=o.prefix,D=o.icons.join(","),E=new URLSearchParams({icons:D});u+=h+".json?"+E.toString();break}case"custom":{const h=o.uri;u+=h.slice(0,1)==="/"?h.slice(1):h;break}default:i("abort",400);return}let c=503;Go(s+u).then(h=>{const p=h.status;if(p!==200){setTimeout(()=>{i(is(p)?"abort":"next",p)});return}return c=501,h.json()}).then(h=>{if(typeof h!="object"||h===null){setTimeout(()=>{h===404?i("abort",h):i("next",c)});return}setTimeout(()=>{i("success",h)})}).catch(()=>{i("next",c)})},ls={prepare:as,send:us};function cs(s){const o={loaded:[],missing:[],pending:[]},i=Object.create(null);s.sort((c,h)=>c.provider!==h.provider?c.provider.localeCompare(h.provider):c.prefix!==h.prefix?c.prefix.localeCompare(h.prefix):c.name.localeCompare(h.name));let u={provider:"",prefix:"",name:""};return s.forEach(c=>{if(u.name===c.name&&u.prefix===c.prefix&&u.provider===c.provider)return;u=c;const h=c.provider,p=c.prefix,D=c.name,E=i[h]||(i[h]=Object.create(null)),P=E[p]||(E[p]=fn(h,p));let j;D in P.icons?j=o.loaded:p===""||P.missing.has(D)?j=o.missing:j=o.pending;const F={provider:h,prefix:p,name:D};j.push(F)}),o}function bi(s,o){s.forEach(i=>{const u=i.loaderCallbacks;u&&(i.loaderCallbacks=u.filter(c=>c.id!==o))})}function fs(s){s.pendingCallbacksFlag||(s.pendingCallbacksFlag=!0,setTimeout(()=>{s.pendingCallbacksFlag=!1;const o=s.loaderCallbacks?s.loaderCallbacks.slice(0):[];if(!o.length)return;let i=!1;const u=s.provider,c=s.prefix;o.forEach(h=>{const p=h.icons,D=p.pending.length;p.pending=p.pending.filter(E=>{if(E.prefix!==c)return!0;const P=E.name;if(s.icons[P])p.loaded.push({provider:u,prefix:c,name:P});else if(s.missing.has(P))p.missing.push({provider:u,prefix:c,name:P});else return i=!0,!0;return!1}),p.pending.length!==D&&(i||bi([s],h.id),h.callback(p.loaded.slice(0),p.missing.slice(0),p.pending.slice(0),h.abort))})}))}let ds=0;function hs(s,o,i){const u=ds++,c=bi.bind(null,i,u);if(!o.pending.length)return c;const h={id:u,icons:o,callback:s,abort:c};return i.forEach(p=>{(p.loaderCallbacks||(p.loaderCallbacks=[])).push(h)}),c}function vs(s,o=!0,i=!1){const u=[];return s.forEach(c=>{const h=typeof c=="string"?ir(c,o,i):c;h&&u.push(h)}),u}var ps={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function gs(s,o,i,u){const c=s.resources.length,h=s.random?Math.floor(Math.random()*c):s.index;let p;if(s.random){let Z=s.resources.slice(0);for(p=[];Z.length>1;){const R=Math.floor(Math.random()*Z.length);p.push(Z[R]),Z=Z.slice(0,R).concat(Z.slice(R+1))}p=p.concat(Z)}else p=s.resources.slice(h).concat(s.resources.slice(0,h));const D=Date.now();let E="pending",P=0,j,F=null,A=[],W=[];typeof u=="function"&&W.push(u);function N(){F&&(clearTimeout(F),F=null)}function L(){E==="pending"&&(E="aborted"),N(),A.forEach(Z=>{Z.status==="pending"&&(Z.status="aborted")}),A=[]}function X(Z,R){R&&(W=[]),typeof Z=="function"&&W.push(Z)}function V(){return{startTime:D,payload:o,status:E,queriesSent:P,queriesPending:A.length,subscribe:X,abort:L}}function K(){E="failed",W.forEach(Z=>{Z(void 0,j)})}function H(){A.forEach(Z=>{Z.status==="pending"&&(Z.status="aborted")}),A=[]}function I(Z,R,ue){const me=R!=="success";switch(A=A.filter(ce=>ce!==Z),E){case"pending":break;case"failed":if(me||!s.dataAfterTimeout)return;break;default:return}if(R==="abort"){j=ue,K();return}if(me){j=ue,A.length||(p.length?Y():K());return}if(N(),H(),!s.random){const ce=s.resources.indexOf(Z.resource);ce!==-1&&ce!==s.index&&(s.index=ce)}E="completed",W.forEach(ce=>{ce(ue)})}function Y(){if(E!=="pending")return;N();const Z=p.shift();if(Z===void 0){if(A.length){F=setTimeout(()=>{N(),E==="pending"&&(H(),K())},s.timeout);return}K();return}const R={status:"pending",resource:Z,callback:(ue,me)=>{I(R,ue,me)}};A.push(R),P++,F=setTimeout(Y,s.rotate),i(Z,o,R.callback)}return setTimeout(Y),V}function _i(s){const o={...ps,...s};let i=[];function u(){i=i.filter(D=>D().status==="pending")}function c(D,E,P){const j=gs(o,D,E,(F,A)=>{u(),P&&P(F,A)});return i.push(j),j}function h(D){return i.find(E=>D(E))||null}return{query:c,find:h,setIndex:D=>{o.index=D},getIndex:()=>o.index,cleanup:u}}function Jo(){}const Ur=Object.create(null);function ms(s){if(!Ur[s]){const o=ro(s);if(!o)return;const i=_i(o),u={config:o,redundancy:i};Ur[s]=u}return Ur[s]}function ys(s,o,i){let u,c;if(typeof s=="string"){const h=Jr(s);if(!h)return i(void 0,424),Jo;c=h.send;const p=ms(s);p&&(u=p.redundancy)}else{const h=to(s);if(h){u=_i(h);const p=s.resources?s.resources[0]:"",D=Jr(p);D&&(c=D.send)}}return!u||!c?(i(void 0,424),Jo):u.query(o,c,i)().abort}function Xo(){}function bs(s){s.iconsLoaderFlag||(s.iconsLoaderFlag=!0,setTimeout(()=>{s.iconsLoaderFlag=!1,fs(s)}))}function _s(s){const o=[],i=[];return s.forEach(u=>{(u.match(fi)?o:i).push(u)}),{valid:o,invalid:i}}function xn(s,o,i){function u(){const c=s.pendingIcons;o.forEach(h=>{c&&c.delete(h),s.icons[h]||s.missing.add(h)})}if(i&&typeof i=="object")try{if(!pi(s,i).length){u();return}}catch(c){console.error(c)}u(),bs(s)}function Zo(s,o){s instanceof Promise?s.then(i=>{o(i)}).catch(()=>{o(null)}):o(s)}function ws(s,o){s.iconsToLoad?s.iconsToLoad=s.iconsToLoad.concat(o).sort():s.iconsToLoad=o,s.iconsQueueFlag||(s.iconsQueueFlag=!0,setTimeout(()=>{s.iconsQueueFlag=!1;const{provider:i,prefix:u}=s,c=s.iconsToLoad;if(delete s.iconsToLoad,!c||!c.length)return;const h=s.loadIcon;if(s.loadIcons&&(c.length>1||!h)){Zo(s.loadIcons(c,u,i),j=>{xn(s,c,j)});return}if(h){c.forEach(j=>{const F=h(j,u,i);Zo(F,A=>{const W=A?{prefix:u,icons:{[j]:A}}:null;xn(s,[j],W)})});return}const{valid:p,invalid:D}=_s(c);if(D.length&&xn(s,D,null),!p.length)return;const E=u.match(fi)?Jr(i):null;if(!E){xn(s,p,null);return}E.prepare(i,u,p).forEach(j=>{ys(i,j,F=>{xn(s,j.icons,F)})})}))}const xs=(s,o)=>{const i=vs(s,!0,gi()),u=cs(i);if(!u.pending.length){let E=!0;return o&&setTimeout(()=>{E&&o(u.loaded,u.missing,u.pending,Xo)}),()=>{E=!1}}const c=Object.create(null),h=[];let p,D;return u.pending.forEach(E=>{const{provider:P,prefix:j}=E;if(j===D&&P===p)return;p=P,D=j,h.push(fn(P,j));const F=c[P]||(c[P]=Object.create(null));F[j]||(F[j]=[])}),u.pending.forEach(E=>{const{provider:P,prefix:j,name:F}=E,A=fn(P,j),W=A.pendingIcons||(A.pendingIcons=new Set);W.has(F)||(W.add(F),c[P][j].push(F))}),h.forEach(E=>{const P=c[E.provider][E.prefix];P.length&&ws(E,P)}),o?hs(o,u,h):Xo};function ks(s,o){const i={...s};for(const u in o){const c=o[u],h=typeof c;u in mi?(c===null||c&&(h==="string"||h==="number"))&&(i[u]=c):h===typeof i[u]&&(i[u]=u==="rotate"?c%4:c)}return i}const Ds=/[\s,]+/;function Ss(s,o){o.split(Ds).forEach(i=>{switch(i.trim()){case"horizontal":s.hFlip=!0;break;case"vertical":s.vFlip=!0;break}})}function Ts(s,o=0){const i=s.replace(/^-?[0-9.]*/,"");function u(c){for(;c<0;)c+=4;return c%4}if(i===""){const c=parseInt(s);return isNaN(c)?0:u(c)}else if(i!==s){let c=0;switch(i){case"%":c=25;break;case"deg":c=90}if(c){let h=parseFloat(s.slice(0,s.length-i.length));return isNaN(h)?0:(h=h/c,h%1===0?u(h):0)}}return o}function Es(s,o){let i=s.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const u in o)i+=" "+u+'="'+o[u]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+s+"</svg>"}function Os(s){return s.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Cs(s){return"data:image/svg+xml,"+Os(s)}function Ps(s){return'url("'+Cs(s)+'")'}const $o={...yi,inline:!1},Is={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},As={display:"inline-block"},Xr={"background-color":"currentColor"},wi={"background-color":"transparent"},ei={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},ti={"-webkit-mask":Xr,mask:Xr,background:wi};for(const s in ti){const o=ti[s];for(const i in ei)o[s+"-"+i]=ei[i]}function Ms(s){return s+(s.match(/^[-0-9.]+$/)?"px":"")}function js(s,o){const i=ks($o,o),u=o.mode||"svg",c=u==="svg"?{...Is}:{};s.body.indexOf("xlink:")===-1&&delete c["xmlns:xlink"];let h=typeof o.style=="string"?o.style:"";for(let V in o){const K=o[V];if(K!==void 0)switch(V){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":i[V]=K===!0||K==="true"||K===1;break;case"flip":typeof K=="string"&&Ss(i,K);break;case"color":h=h+(h.length>0&&h.trim().slice(-1)!==";"?";":"")+"color: "+K+"; ";break;case"rotate":typeof K=="string"?i[V]=Ts(K):typeof K=="number"&&(i[V]=K);break;case"ariaHidden":case"aria-hidden":K!==!0&&K!=="true"&&delete c["aria-hidden"];break;default:if(V.slice(0,3)==="on:")break;$o[V]===void 0&&(c[V]=K)}}const p=Ja(s,i),D=p.attributes;if(i.inline&&(h="vertical-align: -0.125em; "+h),u==="svg"){Object.assign(c,D),h!==""&&(c.style=h);let V=0,K=o.id;return typeof K=="string"&&(K=K.replace(/-/g,"_")),{svg:!0,attributes:c,body:es(p.body,K?()=>K+"ID"+V++:"iconifySvelte")}}const{body:E,width:P,height:j}=s,F=u==="mask"||(u==="bg"?!1:E.indexOf("currentColor")!==-1),A=Es(E,{...D,width:P+"",height:j+""}),N={"--svg":Ps(A)},L=V=>{const K=D[V];K&&(N[V]=Ms(K))};L("width"),L("height"),Object.assign(N,As,F?Xr:wi);let X="";for(const V in N)X+=V+": "+N[V]+";";return c.style=X+h,{svg:!1,attributes:c}}gi(!0);ts("",ls);if(typeof document<"u"&&typeof window<"u"){const s=window;if(s.IconifyPreload!==void 0){const o=s.IconifyPreload,i="Invalid IconifyPreload syntax.";typeof o=="object"&&o!==null&&(o instanceof Array?o:[o]).forEach(u=>{try{(typeof u!="object"||u===null||u instanceof Array||typeof u.icons!="object"||typeof u.prefix!="string"||!za(u))&&console.error(i)}catch{console.error(i)}})}if(s.IconifyProviders!==void 0){const o=s.IconifyProviders;if(typeof o=="object"&&o!==null)for(let i in o){const u="IconifyProviders["+i+"] is invalid.";try{const c=o[i];if(typeof c!="object"||!c||c.resources===void 0)continue;ns(i,c)||console.error(u)}catch{console.error(u)}}}}function Ks(s,o,i,u,c){function h(){o.loading&&(o.loading.abort(),o.loading=null)}if(typeof s=="object"&&s!==null&&typeof s.body=="string")return o.name="",h(),{data:{...ar,...s}};let p;if(typeof s!="string"||(p=ir(s,!1,!0))===null)return h(),null;const D=Ha(p);if(!D)return i&&(!o.loading||o.loading.name!==s)&&(h(),o.name="",o.loading={name:s,abort:xs([p],u)}),null;h(),o.name!==s&&(o.name=s,c&&!o.destroyed&&c(s));const E=["iconify"];return p.prefix!==""&&E.push("iconify--"+p.prefix),p.provider!==""&&E.push("iconify--"+p.provider),{data:D,classes:E}}function Fs(s,o){return s?js({...ar,...s},o):null}var qs=ya("<svg><!></svg>"),Rs=Oe("<span></span>");function _t(s,o){pt(o,!0);const i={name:"",loading:null,destroyed:!1},u=wa(o,["$$slots","$$events","$$legacy"]);let c=qe(!1),h=qe(0),p=qe(null);ga(()=>{C(h);const F=!!o.ssr||C(c),A=Ks(o.icon,i,F,D,o.onload),W=A?Fs(A.data,u):null;W&&A.classes&&(W.attributes.class=(typeof u.class=="string"?u.class+" ":"")+A.classes.join(" ")),de(p,W,!0)});function D(){ma(h)}Zr(()=>{de(c,!0)}),Qi(()=>{i.destroyed=!0,i.loading&&(i.loading.abort(),i.loading=null)});var E=Dn(),P=xt(E);{var j=F=>{var A=Dn(),W=xt(A);{var N=X=>{var V=qs();No(V,()=>({...C(p).attributes}));var K=B(V);Ta(K,()=>C(p).body,!0),q(V),be(X,V)},L=X=>{var V=Rs();No(V,()=>({...C(p).attributes})),be(X,V)};vt(W,X=>{C(p).svg?X(N):X(L,!1)})}be(F,A)};vt(P,F=>{C(p)&&F(j)})}be(s,E),gt()}var Bs=Oe('<div class="hour svelte-1ab00h4"></div>'),Ns=Oe('<div class="day svelte-1ab00h4"><!></div>'),Hs=Oe('<p class="day svelte-1ab00h4"> </p> <!>',1),Ls=Oe('<div class="day svelte-1ab00h4"><div class="hour svelte-1ab00h4"></div></div>'),zs=Oe('<div class="daynight svelte-1ab00h4"><!> <p class="svelte-1ab00h4"> </p></div>'),Us=Oe('<figure class="svelte-1ab00h4"><div class="labels svelte-1ab00h4"><p class="date svelte-1ab00h4">Date</p> <p class="hour svelte-1ab00h4">0</p> <p class="hour svelte-1ab00h4">12</p> <p class="hour svelte-1ab00h4">24</p></div> <div class="grid svelte-1ab00h4"><!></div> <div class="average grid svelte-1ab00h4"><p class="day svelte-1ab00h4">Avg</p> <!></div> <legend class="svelte-1ab00h4"><!> <div class="color svelte-1ab00h4"></div> <p class="svelte-1ab00h4">Fasting</p></legend></figure>');function xi(s,o){pt(o,!0);let i=je(o,"average",19,()=>[]),u=je(o,"daily",3,null);je(o,"days",3,10);const c=ja;let h=qe(null),p=qe(null);Zr(()=>{setInterval(()=>{window.localStorage.getItem("fh_latitude")!==null&&D()},6e4),window.localStorage.getItem("fh_latitude")===null?confirm("Sunrise/set (important for religious observations) needs to know your location? Enable location detection (once only)?")&&navigator.geolocation.getCurrentPosition(Z=>{window.localStorage.setItem("fh_latitude",Z.coords.latitude),window.localStorage.setItem("fh_longitude",Z.coords.longitude),D()},Z=>{console.log(Z)}):D()});function D(){const I=parseFloat(window.localStorage.getItem("fh_latitude")),Y=parseFloat(window.localStorage.getItem("fh_longitude")),Z=new Date;let R=c.getTimes(Z,I,Y);if(Date.now()<R.sunrise.getTime())de(p,new Date(R.sunrise.getTime()),!0),de(h,"material-symbols:wb-sunny-outline-rounded");else if(Date.now()>R.sunrise.getTime()&&Date.now()<R.sunset.getTime())de(p,new Date(R.sunset.getTime()),!0),de(h,"material-symbols:moon-stars-outline-rounded");else{const ue=new Date;ue.setDate(Z.getDate()+1),R=c.getTimes(ue,I,Y),de(p,new Date(R.sunrise.getTime()),!0),de(h,"material-symbols:wb-sunny-outline-rounded")}}function E(I){return I=new Date(I+"T00:00:00"),new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(I)}function P(I){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(I)}function j(I,Y){return I===0||Y[I-1]===0?(1-Y[I])*100+"%":0}var F=Us(),A=re(B(F),2),W=B(A);{var N=I=>{var Y=Dn(),Z=xt(Y);Xt(Z,17,()=>Object.keys(u()),Jt,(R,ue)=>{var me=Hs();const ce=it(()=>u()[C(ue)]);var Ce=xt(me),Ke=B(Ce,!0);q(Ce);var Le=re(Ce,2);Xt(Le,16,()=>({length:24}),Jt,(Re,Ge,Ye)=>{var we=Ns(),he=B(we);{var ze=Pe=>{var $=Bs();let se;Ve(le=>se=Ho($,"",se,le),[()=>({"margin-left":j(Ye,C(ce)),width:100*C(ce)[Ye]+"%"})]),be(Pe,$)};vt(he,Pe=>{C(ce)[Ye]!==0&&Pe(ze)})}q(we),be(Re,we)}),Ve(Re=>Ee(Ke,Re),[()=>E(C(ue))]),be(R,me)}),be(I,Y)};vt(W,I=>{u()!==null&&I(N)})}q(A);var L=re(A,2),X=re(B(L),2);Xt(X,16,()=>({length:24}),Jt,(I,Y,Z)=>{var R=Ls(),ue=B(R);let me;q(R),Ve(ce=>me=Ho(ue,"",me,ce),[()=>({opacity:i()[Z],width:"100%"})]),be(I,R)}),q(L);var V=re(L,2),K=B(V);{var H=I=>{var Y=zs(),Z=B(Y);_t(Z,{color:"#161616",height:"16",get icon(){return C(h)},width:"16"});var R=re(Z,2),ue=B(R,!0);q(R),q(Y),Ve(me=>Ee(ue,me),[()=>P(C(p))]),be(I,Y)};vt(K,I=>{C(h)!==null&&I(H)})}Jn(4),q(V),q(F),be(s,F),gt()}var Ys=Oe('<article class="svelte-10tx4k0"><p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">hrs</span></p> <p class="colon svelte-10tx4k0">:</p> <p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">min</span></p> <p class="colon svelte-10tx4k0">:</p> <p class="svelte-10tx4k0"><span class="svelte-10tx4k0"> </span> <span class="units svelte-10tx4k0">sec</span></p></article>');function Ws(s,o){pt(o,!0);let i=je(o,"now",3,null),u=je(o,"started",3,null),c=it(()=>{if(u()===null)return{hours:0,minutes:"00",seconds:"00"};const L=Math.floor((i()-u().getTime())/1e3);return{hours:Math.floor(L/3600).toString(10).padStart(2,"0"),minutes:Math.floor(L%3600/60).toString(10).padStart(2,"0"),seconds:(L%60).toString(10).padStart(2,"0")}});var h=Ys(),p=B(h),D=B(p),E=B(D,!0);q(D),Jn(2),q(p);var P=re(p,4),j=B(P),F=B(j,!0);q(j),Jn(2),q(P);var A=re(P,4),W=B(A),N=B(W,!0);q(W),Jn(2),q(A),q(h),Ve(()=>{Ee(E,C(c).hours),Ee(F,C(c).minutes),Ee(N,C(c).seconds)}),be(s,h),gt()}function Vs(s,o,i){o()===null?i.onstart&&i.onstart():i.onend&&i.onend()}var Qs=Oe('<p class="svelte-81vq7f">You are not fasting.</p>'),Gs=Oe('<p class="svelte-81vq7f">You are fasting.</p> <!> <p class="started svelte-81vq7f"> </p>',1),Js=Oe('<section class="svelte-81vq7f"><header class="svelte-81vq7f"><h3 class="svelte-81vq7f">Fasting</h3> <button type="button" class="svelte-81vq7f"><!></button></header> <article class="svelte-81vq7f"><!> <button class="primary svelte-81vq7f" type="button"> </button></article> <article class="svelte-81vq7f"><!></article> <footer class="svelte-81vq7f"><button class="hunger secondary svelte-81vq7f" type="button"><!> <span> </span></button> <button class="water secondary svelte-81vq7f" type="button"><!> <span> </span></button></footer></section>');function Xs(s,o){pt(o,!0);let i=je(o,"activity",3,null),u=je(o,"hunger",3,5),c=je(o,"levels",19,()=>[]),h=je(o,"now",3,null),p=je(o,"started",3,null),D=je(o,"water",3,0);function E(we){return c().find(ze=>ze.value===we).label}function P(we){return we===null?null:new Intl.DateTimeFormat(navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(we)}var j=Js(),F=B(j),A=re(B(F),2);A.__click=function(...we){var he;(he=o.onsettings)==null||he.apply(this,we)};var W=B(A);_t(W,{height:"20",icon:"material-symbols:settings-outline",width:"20"}),q(A),q(F);var N=re(F,2),L=B(N);{var X=we=>{var he=Qs();be(we,he)},V=we=>{var he=Gs(),ze=re(xt(he),2);Ws(ze,{get now(){return h()},get started(){return p()}});var Pe=re(ze,2),$=B(Pe);q(Pe),Ve(se=>Ee($,`Started ${se??""}`),[()=>P(p())]),be(we,he)};vt(L,we=>{p()===null?we(X):we(V,!1)})}var K=re(L,2);K.__click=[Vs,p,o];var H=B(K);q(K),q(N);var I=re(N,2),Y=B(I);const Z=it(()=>i()===null?[]:i().average),R=it(()=>i()===null?null:i().daily);xi(Y,{get average(){return C(Z)},get daily(){return C(R)},days:7}),q(I);var ue=re(I,2),me=B(ue);me.__click=function(...we){var he;(he=o.onhunger)==null||he.apply(this,we)};var ce=B(me);_t(ce,{height:"20",icon:"material-symbols:fork-spoon-rounded",width:"20"});var Ce=re(ce,2),Ke=B(Ce,!0);q(Ce),q(me);var Le=re(me,2);Le.__click=function(...we){var he;(he=o.onwater)==null||he.apply(this,we)};var Re=B(Le);_t(Re,{height:"20",icon:"material-symbols:water-drop-outline-rounded",width:"20"});var Ge=re(Re,2),Ye=B(Ge);q(Ge),q(Le),q(ue),q(j),Ve(we=>{Ee(H,`${p()===null?"Start":"Stop"} fasting`),Ee(Ke,we),Ee(Ye,`${D()??""} oz`)},[()=>E(u())]),be(s,j),gt()}Tt(["click"]);function Zs(s,o,i,u){const c=new Date(parseInt(s.currentTarget.getAttribute("data-year")),parseInt(s.currentTarget.getAttribute("data-month")),parseInt(s.currentTarget.getAttribute("data-date")));c.getMonth()!==o().getMonth()&&o(new Date(c.getTime())),i(new Date(c.getTime())),u.onchange&&u.onchange(i())}var $s=Oe('<button type="button"> </button>'),eu=Oe('<section><header class="svelte-1ll096s"><h3 class="svelte-1ll096s"> </h3> <button type="button" class="svelte-1ll096s"><!></button> <button type="button" class="svelte-1ll096s"><!></button></header> <article class="svelte-1ll096s"><p class="svelte-1ll096s">Sun</p> <p class="svelte-1ll096s">Mon</p> <p class="svelte-1ll096s">Tue</p> <p class="svelte-1ll096s">Wed</p> <p class="svelte-1ll096s">Thu</p> <p class="svelte-1ll096s">Fri</p> <p class="svelte-1ll096s">Sat</p></article> <article class="svelte-1ll096s"></article></section>');function tu(s,o){pt(o,!0);let i=je(o,"display",23,()=>new Date),u=je(o,"value",23,()=>new Date),c=it(()=>new Intl.DateTimeFormat(navigator.language,{month:"long",year:"numeric"}).format(i())),h=it(()=>{const V=[],K=new Date,H=new Date(i().getFullYear(),i().getMonth(),1);H.setDate(H.getDate()-H.getDay());for(let I=0;I<42;I++){const Y={date:H.getDate(),month:H.getMonth(),year:H.getFullYear(),outside:!0,today:!1,selected:!1,after:!1};H.getFullYear()===i().getFullYear()&&H.getMonth()===i().getMonth()&&(Y.outside=!1),H.getTime()>Date.now()&&(Y.after=!0),H.getFullYear()===K.getFullYear()&&H.getMonth()===K.getMonth()&&H.getDate()===K.getDate()&&(Y.today=!0),H.getFullYear()===u().getFullYear()&&H.getMonth()===u().getMonth()&&H.getDate()===u().getDate()&&(Y.selected=!0),H.setDate(H.getDate()+1),V.push(Y)}return V});function p(){let V=i().getMonth(),K=i().getFullYear();K=V===0?K-1:K,V=V===0?11:V-1,i(new Date(K,V,i().getDate()))}function D(){let V=i().getMonth(),K=i().getFullYear();K=V===11?K+1:K,V=(V+1)%12,i(new Date(K,V,i().getDate()))}var E=eu(),P=B(E),j=B(P),F=B(j,!0);q(j);var A=re(j,2);A.__click=p;var W=B(A);_t(W,{height:"24",icon:"material-symbols:navigate-before",width:"24"}),q(A);var N=re(A,2);N.__click=D;var L=B(N);_t(L,{height:"24",icon:"material-symbols:navigate-next",width:"24"}),q(N),q(P);var X=re(P,4);Xt(X,21,()=>C(h),Jt,(V,K)=>{var H=$s();H.__click=[Zs,i,u,o];let I;var Y=B(H,!0);q(H),Ve(Z=>{Zn(H,"data-year",C(K).year),Zn(H,"data-month",C(K).month),Zn(H,"data-date",C(K).date),H.disabled=C(K).after,I=Zt(H,1,"svelte-1ll096s",null,I,Z),Ee(Y,C(K).date)},[()=>({outside:C(K).outside,today:C(K).today,selected:C(K).selected})]),be(V,H)}),q(X),q(E),Ve(()=>Ee(F,C(c))),be(s,E),gt()}Tt(["click"]);function nu(s,o,i){const u=new Date(o().getTime());u.getHours()>=12?u.getHours()===12?u.setHours(23):u.setHours(u.getHours()-1):u.getHours()===0?u.setHours(11):u.setHours(u.getHours()-1),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function ru(s,o,i){const u=new Date(o().getTime());u.getHours()>=12?u.getHours()===23?u.setHours(12):u.setHours(u.getHours()+1):u.getHours()===11?u.setHours(0):u.setHours(u.getHours()+1),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function ou(s,o,i){const u=new Date(o().getTime());u.getHours()>=12&&u.setHours(u.getHours()-12),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function iu(s,o,i){const u=new Date(o().getTime());u.getHours()<12&&u.setHours(u.getHours()+12),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function au(s,o,i){const u=new Date(o().getTime());u.getMinutes()===0?u.setMinutes(59):u.setMinutes(u.getMinutes()-1),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}function su(s,o,i){const u=new Date(o().getTime());u.getMinutes()===59?u.setMinutes(0):u.setMinutes(u.getMinutes()+1),o(new Date(u.getTime())),i.onchange&&i.onchange(o())}var uu=Oe('<article class="svelte-1bevvpj"><div class="time svelte-1bevvpj"><div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div> <p class="svelte-1bevvpj">:</p> <div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div></div> <div class="meridian svelte-1bevvpj"><button type="button">AM</button> <button type="button">PM</button></div></article>');function lu(s,o){pt(o,!0);let i=je(o,"value",23,()=>new Date),u=it(()=>i().getHours()%12||12),c=it(()=>i().getMinutes().toString(10).padStart(2,"0")),h=it(()=>i().getHours()>=12?"PM":"AM");var p=uu(),D=B(p),E=B(D),P=B(E);P.__click=[ru,i,o];var j=B(P);_t(j,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),q(P);var F=re(P,2),A=B(F,!0);q(F);var W=re(F,2);W.__click=[nu,i,o];var N=B(W);_t(N,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),q(W),q(E);var L=re(E,4),X=B(L);X.__click=[su,i,o];var V=B(X);_t(V,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),q(X);var K=re(X,2),H=B(K,!0);q(K);var I=re(K,2);I.__click=[au,i,o];var Y=B(I);_t(Y,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),q(I),q(L),q(D);var Z=re(D,2),R=B(Z);R.__click=[ou,i,o];let ue;var me=re(R,2);me.__click=[iu,i,o];let ce;q(Z),q(p),Ve((Ce,Ke)=>{Ee(A,C(u)),Ee(H,C(c)),ue=Zt(R,1,"svelte-1bevvpj",null,ue,Ce),ce=Zt(me,1,"svelte-1bevvpj",null,ce,Ke)},[()=>({selected:C(h)==="AM"}),()=>({selected:C(h)==="PM"})]),be(s,p),gt()}Tt(["click"]);function cu(s,o){de(o,"calendar")}function fu(s,o){de(o,"clock")}var du=Oe('<article class="svelte-8yzu2w"><header class="svelte-8yzu2w"><button type="button"><p class="svelte-8yzu2w"> </p> <p class="svelte-8yzu2w"> </p></button> <button type="button"><p class="svelte-8yzu2w"> </p></button></header> <!></article>');function hu(s,o){pt(o,!0);let i=je(o,"value",23,()=>new Date),u=qe("calendar");function c(R){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(R)}function h(R){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(R)}function p(R){R.setHours(i().getHours()),R.setMinutes(i().getMinutes()),R.setSeconds(i().getSeconds()),i(new Date(R.getTime())),o.onchange&&o.onchange(i())}function D(R){R.setFullYear(i().getFullYear()),R.getMonth(i().getMonth()),R.getDate(i().getDate()),i(new Date(R.getTime())),o.onchange&&o.onchange(i())}var E=du(),P=B(E),j=B(P);j.__click=[cu,u];let F;var A=B(j),W=B(A,!0);q(A);var N=re(A,2),L=B(N,!0);q(N),q(j);var X=re(j,2);X.__click=[fu,u];let V;var K=B(X),H=B(K,!0);q(K),q(X),q(P);var I=re(P,2);{var Y=R=>{tu(R,{onchange:p,get value(){return i()}})},Z=R=>{lu(R,{onchange:D,get value(){return i()}})};vt(I,R=>{C(u)===null||C(u)==="calendar"?R(Y):R(Z,!1)})}q(E),Ve((R,ue,me,ce)=>{F=Zt(j,1,"svelte-8yzu2w",null,F,R),Ee(W,o.label),Ee(L,ue),V=Zt(X,1,"svelte-8yzu2w",null,V,me),Ee(H,ce)},[()=>({selected:C(u)==="calendar"}),()=>c(i()),()=>({selected:C(u)==="clock"}),()=>h(i())]),be(s,E),gt()}Tt(["click"]);function vu(s,o,i,u){o(),i(null),u.oncancel&&u.oncancel()}function pu(s,o,i){o.ondelete&&o.ondelete(i().id)}function gu(s,o){const i=s.currentTarget.value.trim().length===0?null:s.currentTarget.value;o({...o(),notes:i})}function mu(s,o,i){o.onsave&&o.onsave(i())}var yu=Oe('<dialog class="svelte-13glclx"><h3 class="svelte-13glclx"> </h3> <!> <textarea placeholder="Notes" class="svelte-13glclx"></textarea> <footer class="svelte-13glclx"><button class="delete svelte-13glclx" type="button">Delete</button> <button class="cancel svelte-13glclx" type="button">Cancel</button> <button type="button" class="svelte-13glclx">Save</button></footer></dialog>');function bu(s,o){pt(o,!0);let i=je(o,"field",3,"started"),u=je(o,"item",7,null),c=je(o,"label",3,"Started"),h=je(o,"title",3,"Edit Fast Start"),p=qe(void 0);function D(I){const Y={...u()};Y[i()]=new Date(I.getTime()),u({...Y})}function E(){C(p).close()}function P(){C(p).showModal()}var j=yu(),F=B(j),A=B(F,!0);q(F);var W=re(F,2);const N=it(()=>u()&&u().id&&u().id!==null?u()[i()]:new Date);hu(W,{get label(){return c()},onchange:D,get value(){return C(N)}});var L=re(W,2);ba(L),L.__input=[gu,u];var X=re(L,2),V=B(X);V.__click=[pu,o,u];var K=re(V,2);K.__click=[vu,E,u,o];var H=re(K,2);return H.__click=[mu,o,u],q(X),q(j),Ht(j,I=>de(p,I),()=>C(p)),Ve(()=>{Ee(A,h()),_a(L,u()&&u().id&&u().id!==null?u().notes:"")}),be(s,j),gt({close:E,showModal:P})}Tt(["input","click"]);var _u=Oe('<article class="svelte-o2f930"><p class="svelte-o2f930">Your fasting history<br/>will be displayed here.</p></article>'),wu=Oe('<li class="header svelte-o2f930"><p class="svelte-o2f930"> </p></li>'),xu=(s,o,i)=>o(C(i).type,C(i).id),ku=Oe('<p class="svelte-o2f930">Started Fast</p> <p class="svelte-o2f930"></p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p>',1),Du=Oe('<p class="svelte-o2f930">Water</p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p>',1),Su=Oe('<p class="svelte-o2f930"> </p> <p class="svelte-o2f930"></p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p>',1),Tu=Oe('<p class="svelte-o2f930">Ended Fast</p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p> <p class="svelte-o2f930"> </p>',1),Eu=Oe('<li class="svelte-o2f930"><button type="button" class="svelte-o2f930"><!></button></li>'),Ou=Oe('<ul class="svelte-o2f930"></ul>');function Cu(s,o){pt(o,!0);let i=je(o,"items",19,()=>[]);function u(A){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",year:"numeric"}).format(A)}function c(A,W){const N=W.getTime()-A.getTime(),L=Math.floor(N/1e3),X=Math.floor(L/3600),V=Math.floor(L%3600/60);return new Intl.DurationFormat(navigator.language,{style:"short",units:["hour","minute"]}).format({hours:X,minutes:V})}function h(A){return new Intl.DateTimeFormat(navigator.language,{weekday:"long",month:"short",day:"numeric"}).format(A)}function p(A){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(A)}function D(A,W){o.onchange&&o.onchange(A,W)}var E=Dn(),P=xt(E);{var j=A=>{var W=_u();be(A,W)},F=A=>{var W=Ou();Xt(W,21,i,Jt,(N,L)=>{var X=Dn(),V=xt(X);{var K=I=>{var Y=wu(),Z=B(Y),R=B(Z,!0);q(Z),q(Y),Ve(ue=>Ee(R,ue),[()=>h(C(L).timed)]),be(I,Y)},H=I=>{var Y=Eu(),Z=B(Y);Z.__click=[xu,D,L];var R=B(Z);{var ue=ce=>{var Ce=ku(),Ke=re(xt(Ce),4),Le=B(Ke,!0);q(Ke);var Re=re(Ke,2),Ge=B(Re,!0);q(Re),Ve((Ye,we)=>{Ee(Le,Ye),Ee(Ge,we)},[()=>u(C(L).timed),()=>p(C(L).timed)]),be(ce,Ce)},me=(ce,Ce)=>{{var Ke=Re=>{var Ge=Du(),Ye=re(xt(Ge),2),we=B(Ye);q(Ye);var he=re(Ye,2),ze=B(he,!0);q(he);var Pe=re(he,2),$=B(Pe,!0);q(Pe),Ve((se,le)=>{Ee(we,`${C(L).volume??""} oz`),Ee(ze,se),Ee($,le)},[()=>u(C(L).timed),()=>p(C(L).timed)]),be(Re,Ge)},Le=(Re,Ge)=>{{var Ye=he=>{var ze=Su(),Pe=xt(ze),$=B(Pe,!0);q(Pe);var se=re(Pe,4),le=B(se,!0);q(se);var Ie=re(se,2),ye=B(Ie,!0);q(Ie),Ve((Te,De)=>{Ee($,C(L).level),Ee(le,Te),Ee(ye,De)},[()=>u(C(L).timed),()=>p(C(L).timed)]),be(he,ze)},we=(he,ze)=>{{var Pe=$=>{var se=Tu(),le=re(xt(se),2),Ie=B(le,!0);q(le);var ye=re(le,2),Te=B(ye,!0);q(ye);var De=re(ye,2),Be=B(De,!0);q(De),Ve((te,tt,Je)=>{Ee(Ie,te),Ee(Te,tt),Ee(Be,Je)},[()=>c(C(L).started,C(L).ended),()=>u(C(L).timed),()=>p(C(L).timed)]),be($,se)};vt(he,$=>{C(L).type==="end"&&$(Pe)},ze)}};vt(Re,he=>{C(L).type==="hunger"?he(Ye):he(we,!1)},Ge)}};vt(ce,Re=>{C(L).type==="water"?Re(Ke):Re(Le,!1)},Ce)}};vt(R,ce=>{C(L).type==="start"?ce(ue):ce(me,!1)})}q(Z),q(Y),be(I,Y)};vt(V,I=>{C(L).type==="header"?I(K):I(H,!1)})}be(N,X)}),q(W),be(A,W)};vt(P,A=>{i().length===0?A(j):A(F,!1)})}be(s,E),gt()}Tt(["click"]);var Pu=Oe('<section class="svelte-jsa4zq"><header class="svelte-jsa4zq"><h3 class="svelte-jsa4zq">Hours</h3></header> <article class="svelte-jsa4zq"><!></article> <article class="svelte-jsa4zq"><!></article></section>');function Iu(s,o){pt(o,!0);let i=je(o,"activity",3,null),u=je(o,"history",19,()=>[]);je(o,"levels",19,()=>[]);var c=Pu(),h=re(B(c),2),p=B(h);const D=it(()=>i()===null?[]:i().average),E=it(()=>i()===null?null:i().daily);xi(p,{get average(){return C(D)},get daily(){return C(E)},days:7}),q(h);var P=re(h,2),j=B(P);Cu(j,{get items(){return u()},get onchange(){return o.onchange}}),q(P),q(c),be(s,c),gt()}function Au(s,o,i,u){o(),i(null),u.oncancel&&u.oncancel()}function Mu(s,o,i){o.ondelete&&o.ondelete(i().id)}function ju(s,o,i){o()===null&&o({...o(),level:5}),i.onsave&&i.onsave(o())}var Ku=(s,o,i)=>o(C(i).value),Fu=Oe('<li class="svelte-1gyfgoj"><button type="button" class="svelte-1gyfgoj"><p class="svelte-1gyfgoj"> </p> <!></button></li>'),qu=Oe('<button class="delete svelte-1gyfgoj" type="button">Delete</button>'),Ru=Oe('<dialog class="svelte-1gyfgoj"><h3 class="svelte-1gyfgoj"> </h3> <ul class="svelte-1gyfgoj"></ul> <footer class="svelte-1gyfgoj"><!> <button class="cancel svelte-1gyfgoj" type="button">Cancel</button> <button type="button" class="svelte-1gyfgoj">Save</button></footer></dialog>');function Bu(s,o){pt(o,!0);let i=je(o,"item",7,null),u=je(o,"levels",19,()=>[]);je(o,"units",3,"oz");let c=qe(void 0),h=it(()=>i()&&i().level&&i().level!==null?i().level:5);function p(K){const H=K;i({...i(),level:H})}function D(){C(c).close()}function E(){C(c).showModal()}var P=Ru(),j=B(P),F=B(j);q(j);var A=re(j,2);Xt(A,21,u,Jt,(K,H)=>{var I=Fu();const Y=it(()=>C(H).value===C(h)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var Z=B(I);Z.__click=[Ku,p,H];var R=B(Z),ue=B(R,!0);q(R);var me=re(R,2);const ce=it(()=>C(H).value===C(h)?"#0284c7":"#161616");_t(me,{get color(){return C(ce)},height:"20",get icon(){return C(Y)},width:"20"}),q(Z),q(I),Ve(()=>Ee(ue,C(H).label)),be(K,I)}),q(A);var W=re(A,2),N=B(W);{var L=K=>{var H=qu();H.__click=[Mu,o,i],be(K,H)};vt(N,K=>{i()&&i().id&&i().id!==null&&K(L)})}var X=re(N,2);X.__click=[Au,D,i,o];var V=re(X,2);return V.__click=[ju,i,o],q(W),q(P),Ht(P,K=>de(c,K),()=>C(c)),Ve(()=>Ee(F,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Hunger`)),be(s,P),gt({close:D,showModal:E})}Tt(["click"]);function Nu(s,o,i){o()!==0&&(o(0),i.onchange&&i.onchange(o()))}function Hu(s,o,i){o()!==1&&(o(1),i.onchange&&i.onchange(o()))}var Lu=Oe('<ul class="svelte-tu3q0a"><li><button type="button">Fasting</button></li> <li><button type="button">Hours</button></li></ul>');function zu(s,o){pt(o,!0);let i=je(o,"selected",7,0);var u=Lu(),c=B(u),h=B(c);let p;h.__click=[Nu,i,o],q(c);var D=re(c,2),E=B(D);let P;E.__click=[Hu,i,o],q(D),q(u),Ve((j,F)=>{p=Zt(h,1,"fasting svelte-tu3q0a",null,p,j),P=Zt(E,1,"hours svelte-tu3q0a",null,P,F)},[()=>({selected:i()===0}),()=>({selected:i()===1})]),be(s,u),gt()}Tt(["click"]);function Uu(s,o){o()}var Yu=Oe('<dialog class="svelte-msa23r"><h3 class="svelte-msa23r">Settings</h3> <article class="svelte-msa23r"><p class="svelte-msa23r">Settings.</p></article> <footer class="svelte-msa23r"><button type="button" class="svelte-msa23r">Done</button></footer></dialog>');function Wu(s,o){pt(o,!0);let i=qe(void 0);function u(){C(i).close()}function c(){C(i).showModal()}var h=Yu(),p=re(B(h),4),D=B(p);return D.__click=[Uu,u],q(p),q(h),Ht(h,E=>de(i,E),()=>C(i)),be(s,h),gt({close:u,showModal:c})}Tt(["click"]);function Vu(s,o,i,u){o(),i(null),u.oncancel&&u.oncancel()}function Qu(s,o,i){o.ondelete&&o.ondelete(i().id)}function Gu(s,o,i){o()===null&&o({...o(),volume:8}),i.onsave&&i.onsave(o())}var Ju=(s,o,i)=>o(C(i).value),Xu=Oe('<li class="svelte-1sbih0z"><button type="button" class="svelte-1sbih0z"><p class="svelte-1sbih0z"> </p> <p class="svelte-1sbih0z"> </p> <!></button></li>'),Zu=Oe('<button class="delete svelte-1sbih0z" type="button">Delete</button>'),$u=Oe('<dialog class="svelte-1sbih0z"><h3 class="svelte-1sbih0z"> </h3> <ul class="svelte-1sbih0z"></ul> <footer class="svelte-1sbih0z"><!> <button class="cancel svelte-1sbih0z" type="button">Cancel</button> <button type="button" class="svelte-1sbih0z">Save</button></footer></dialog>');function el(s,o){pt(o,!0);let i=je(o,"item",7,null),u=je(o,"units",3,"oz"),c=qe(void 0),h=Xn([{value:8,label:"Cup"},{value:12,label:"Can"},{value:16,label:"Bottle"},{value:20,label:"Medium"},{value:30,label:"Gatorade"},{value:32,label:"Big Q"},{value:44,label:"QT Large"},{value:52,label:"Extra Large"}]),p=it(()=>i()&&i().volume&&i().volume!==null?i().volume:8);function D(H){const I=H;i({...i(),volume:I})}function E(){C(c).close()}function P(){C(c).showModal()}var j=$u(),F=B(j),A=B(F);q(F);var W=re(F,2);Xt(W,21,()=>h,Jt,(H,I)=>{var Y=Xu();const Z=it(()=>C(I).value===C(p)?"material-symbols:radio-button-checked-outline":"material-symbols:circle-outline");var R=B(Y);R.__click=[Ju,D,I];var ue=B(R),me=B(ue,!0);q(ue);var ce=re(ue,2),Ce=B(ce);q(ce);var Ke=re(ce,2);const Le=it(()=>C(I).value===C(p)?"#0284c7":"#161616");_t(Ke,{get color(){return C(Le)},height:"20",get icon(){return C(Z)},width:"20"}),q(R),q(Y),Ve(()=>{Ee(me,C(I).label),Ee(Ce,`${C(I).value??""} ${u()??""}`)}),be(H,Y)}),q(W);var N=re(W,2),L=B(N);{var X=H=>{var I=Zu();I.__click=[Qu,o,i],be(H,I)};vt(L,H=>{i()&&i().id&&i().id!==null&&H(X)})}var V=re(L,2);V.__click=[Vu,E,i,o];var K=re(V,2);return K.__click=[Gu,i,o],q(N),q(j),Ht(j,H=>de(c,H),()=>C(c)),Ve(()=>Ee(A,`${i()&&i().id&&i().id!==null?"Edit":"Add"} Water`)),be(s,j),gt({close:E,showModal:P})}Tt(["click"]);var tl=Oe('<main class="svelte-1p6a8xw"><header class="svelte-1p6a8xw"><span></span> <!> <button type="button" class="svelte-1p6a8xw"><!></button></header> <section class="svelte-1p6a8xw"><article class="svelte-1p6a8xw"><!></article> <article class="svelte-1p6a8xw"><!></article></section></main> <!> <!> <!> <!>',1);function yl(s,o){pt(o,!0);const i=new Ia;let u=0,c=qe(Xn([])),h=qe(Xn([])),p=qe(void 0),D=qe("started"),E=qe(null),P=qe("Started"),j=qe("Edit Fast Started"),F=qe(void 0),A=qe(null),W=qe(5),N=Xn([{value:1,label:"Starving"},{value:2,label:"Very hungry"},{value:3,label:"Pretty hungry"},{value:4,label:"Snacky"},{value:5,label:"Satisfied"},{value:6,label:"Slightly full"},{value:7,label:"Uncomfortable"},{value:8,label:"Stuffed"},{value:9,label:"Stomach aches"},{value:10,label:"Sick"}]),L=qe(null),X=qe(0),V=qe(void 0),K=qe(null),H=qe(0),I=qe(void 0),Y=qe(null);Zr(()=>{let ae=window.localStorage.getItem("fh_screen");de(X,ae===null?0:parseInt(ae),!0),setInterval(()=>{u===60?(R(),u=0):u=u+1,C(K)!==null&&de(L,Date.now(),!0)},1e3),ce(),R(),me(),Ce(),ue()});function Z(ae){const fe=ae.getFullYear(),_e=String(ae.getMonth()+1).padStart(2,"0"),nt=String(ae.getDate()).padStart(2,"0");return`${fe}-${_e}-${nt}`}function R(ae=7){i.browseHistory().then(fe=>{const _e={},nt=new Date,Ne=new Date(nt.getFullYear(),nt.getMonth(),nt.getDate()),Fe=new Date(Ne);if(Fe.setDate(Ne.getDate()-(ae-1)),!Array.isArray(fe)||fe.length===0){const Qe=new Date(Fe);for(;Qe<=Ne;){const $e=Z(Qe);_e[$e]=Array(24).fill(0),Qe.setDate(Qe.getDate()+1)}}else{for(const $e of fe){const Dt=new Date($e.started),en=$e.ended?new Date($e.ended):new Date,tn=new Date(Dt.getTime());tn.setSeconds(0,0);const St=new Date(en.getTime());St.setSeconds(0,0);let oe=new Date(tn);for(;oe<St;){const Pt=Z(oe),Et=new Date(oe.getFullYear(),oe.getMonth(),oe.getDate());if(Et>=Fe&&Et<=Ne){const nn=oe.getHours();_e[Pt]||(_e[Pt]=Array(24).fill(0)),_e[Pt][nn]+=1}oe.setMinutes(oe.getMinutes()+1)}}for(const $e in _e)_e[$e]=_e[$e].map(Dt=>+(Math.min(Dt,60)/60).toFixed(6));const Qe=new Date(Fe);for(;Qe<=Ne;){const $e=Z(Qe);_e[$e]||(_e[$e]=Array(24).fill(0)),Qe.setDate(Qe.getDate()+1)}}const Me=Object.keys(_e).sort((Qe,$e)=>$e.localeCompare(Qe)),He={};for(const Qe of Me)He[Qe]=_e[Qe];const $t=Array(24).fill(0);for(const Qe of Array(24).keys())for(const $e of Me)$t[Qe]+=He[$e][Qe];const Lt=$t.map(Qe=>+(Qe/10).toFixed(6));de(c,{daily:He,average:Lt},!0)})}function ue(){i.browseHistory().then(ae=>{let fe=null,_e=structuredClone(ae);_e.forEach(Ne=>{Ne.type="start",Ne.timed=new Date(Ne.started.getTime())});let nt=structuredClone(ae);nt=nt.filter(Ne=>Ne.ended!==null),nt.forEach(Ne=>{Ne.type="end",Ne.timed=new Date(Ne.ended.getTime())}),_e=_e.concat(nt),fe=[..._e],i.browseHunger().then(Ne=>(Ne=Ne.map(Fe=>{const Me=N.find(He=>He.value===Fe.level);return Fe.level=Me.label,Fe.timed=new Date(Fe.created.getTime()),Fe}),fe=fe.concat(Ne),i.browseWater())).then(Ne=>{Ne=Ne.map(Me=>(Me.timed=new Date(Me.created.getTime()),Me)),fe=fe.concat(Ne),fe.sort((Me,He)=>Me.timed.getTime()<He.timed.getTime()?1:Me.timed.getTime()>He.timed.getTime()?-1:0);const Fe=[];for(let Me=0;Me<fe.length;Me++){const He=new Date(fe[Me].timed.getTime());He.setHours(23),He.setMinutes(59),He.setSeconds(59),He.setMilliseconds(999),Fe.length===0?Fe.push({type:"header",timed:He}):(Fe[Fe.length-1].timed.getDate()!==fe[Me].timed.getDate()||Fe[Fe.length-1].timed.getMonth()!==fe[Me].timed.getMonth()||Fe[Fe.length-1].timed.getFullYear()!==fe[Me].timed.getFullYear())&&Fe.push({type:"header",timed:He})}fe=fe.concat(Fe),fe.sort((Me,He)=>Me.timed.getTime()<He.timed.getTime()?1:Me.timed.getTime()>He.timed.getTime()?-1:0),de(h,[...fe],!0)})})}function me(){i.browseHunger(!0).then(ae=>{ae===null?de(W,5):de(W,ae.level,!0)})}function ce(){i.browseHistory().then(ae=>{ae.length===0&&(de(K,null),de(L,null)),ae.sort((fe,_e)=>fe.started.getTime()>_e.started.getTime()?-1:fe.started.getTime()<_e.started.getTime()?1:0),ae[0].ended===null&&(de(K,new Date(ae[0].started.getTime()),!0),de(L,Date.now(),!0))})}function Ce(){i.browseWater(!0).then(ae=>{const fe=ae.reduce((_e,nt)=>_e+nt.volume,0);de(H,fe,!0)})}function Ke(){de(K,null),de(L,null),i.browseHistoryByEnd().then(ae=>(ae.ended=new Date,i.editHistory(ae))).then(()=>{ce(),R(),ue()})}function Le(){C(F).showModal()}function Re(){i.addHistory().then(()=>{ce(),R(),ue()})}function Ge(){C(I).showModal()}function Ye(ae){C(E).started.getTime()===C(K).getTime()&&(de(K,null),de(L,null)),i.deleteHistory(ae).then(()=>{C(p).close(),de(E,null),ce(),R(),ue()})}function we(ae){i.editHistory(ae).then(()=>{C(p).close(),de(E,null),ce(),R(),ue()})}function he(ae,fe){ae==="start"?(de(D,"started"),de(P,"Started"),de(j,"Edit Fast Started"),i.readHistory(fe).then(_e=>{de(E,{..._e},!0),C(p).showModal()})):ae==="end"?(de(D,"ended"),de(P,"Ended"),de(j,"Edit Fast Ended"),i.readHistory(fe).then(_e=>{de(E,{..._e},!0),C(p).showModal()})):ae==="water"?i.readWater(fe).then(_e=>{de(Y,{..._e},!0),C(I).showModal()}):ae==="hunger"&&i.readHunger(fe).then(_e=>{de(A,{..._e},!0),C(F).showModal()})}function ze(ae){i.deleteHunger(ae).then(()=>{C(F).close(),de(A,null),me(),ue()})}function Pe(ae){C(A)===null?i.addHunger(ae.level).then(fe=>{C(F).close(),me(),ue()}):i.editHunger(ae).then(fe=>{C(F).close(),de(A,null),me(),ue()})}function $(ae){C(X)!==ae&&(window.localStorage.setItem("fh_screen",ae),de(X,ae,!0))}function se(){C(V).showModal()}function le(ae){i.deleteWater(ae).then(()=>{C(I).close(),de(Y,null),Ce(),ue()})}function Ie(ae){C(Y)===null?i.addWater(ae.volume).then(fe=>{C(I).close(),Ce(),ue()}):i.editWater(ae).then(fe=>{C(I).close(),de(Y,null),Ce(),ue()})}var ye=tl(),Te=xt(ye),De=B(Te),Be=re(B(De),2);zu(Be,{onchange:$,get selected(){return C(X)}});var te=re(Be,2);te.__click=se;var tt=B(te);_t(tt,{height:"20",icon:"material-symbols:settings-outline",width:"20"}),q(te),q(De);var Je=re(De,2),pe=B(Je),ct=B(pe);Xs(ct,{get activity(){return C(c)},get hunger(){return C(W)},get levels(){return N},get now(){return C(L)},onend:Ke,onhunger:Le,onsettings:se,onstart:Re,onwater:Ge,get started(){return C(K)},get water(){return C(H)}}),q(pe);var ft=re(pe,2),et=B(ft);Iu(et,{get activity(){return C(c)},get history(){return C(h)},get levels(){return N},onchange:he}),q(ft),q(Je),q(Te);var kt=re(Te,2);Ht(bu(kt,{get field(){return C(D)},get item(){return C(E)},get label(){return C(P)},ondelete:Ye,onsave:we,get title(){return C(j)}}),ae=>de(p,ae,!0),()=>C(p));var dt=re(kt,2);Ht(Bu(dt,{get item(){return C(A)},get levels(){return N},ondelete:ze,onsave:Pe}),ae=>de(F,ae,!0),()=>C(F));var at=re(dt,2);Ht(el(at,{get item(){return C(Y)},ondelete:le,onsave:Ie}),ae=>de(I,ae,!0),()=>C(I));var mt=re(at,2);Ht(Wu(mt,{}),ae=>de(V,ae,!0),()=>C(V)),Ve(()=>Zn(Je,"data-screen",C(X)===0?"fasting":"hours")),be(s,ye),gt()}Tt(["click"]);export{yl as component};
